function HttpClient(){}function JsonApiDataStoreModel(a,b){this.id=b,this._type=a,this._attributes=[],this._relationships=[],this._meta=[]}function JsonApiDataStore(){this.graph={}}function JsonApiClient(a){this.url=a,this.client=new HttpClient,this.store=new JsonApiDataStore}!function(){"use strict";function a(){var a={version:"1.0.8",defaultOkLabel:"Ok",okLabel:"Ok",defaultCancelLabel:"Cancel",cancelLabel:"Cancel",defaultMaxLogItems:2,maxLogItems:2,promptValue:"",promptPlaceholder:"",closeLogOnClick:!1,closeLogOnClickDefault:!1,delay:5e3,defaultDelay:5e3,logContainerClass:"alertify-logs",logContainerDefaultClass:"alertify-logs",dialogs:{buttons:{holder:"<nav>{{buttons}}</nav>",ok:"<button class='ok' tabindex='1'>{{ok}}</button>",cancel:"<button class='cancel' tabindex='2'>{{cancel}}</button>"},input:"<input type='text'>",message:"<p class='msg'>{{message}}</p>",log:"<div class='{{class}}'>{{message}}</div>"},defaultDialogs:{buttons:{holder:"<nav>{{buttons}}</nav>",ok:"<button class='ok' tabindex='1'>{{ok}}</button>",cancel:"<button class='cancel' tabindex='2'>{{cancel}}</button>"},input:"<input type='text'>",message:"<p class='msg'>{{message}}</p>",log:"<div class='{{class}}'>{{message}}</div>"},build:function(a){var b=this.dialogs.buttons.ok,c="<div class='dialog'><div>"+this.dialogs.message.replace("{{message}}",a.message);return("confirm"===a.type||"prompt"===a.type)&&(b=this.dialogs.buttons.cancel+this.dialogs.buttons.ok),"prompt"===a.type&&(c+=this.dialogs.input),c=(c+this.dialogs.buttons.holder+"</div></div>").replace("{{buttons}}",b).replace("{{ok}}",this.okLabel).replace("{{cancel}}",this.cancelLabel)},setCloseLogOnClick:function(a){this.closeLogOnClick=!!a},close:function(a,b){this.closeLogOnClick&&a.addEventListener("click",function(a){c(a.srcElement)}),b=b&&!isNaN(+b)?+b:this.delay,0>b?c(a):b>0&&setTimeout(function(){c(a)},b)},dialog:function(a,b,c,d){return this.setup({type:b,message:a,onOkay:c,onCancel:d})},log:function(a,b,c){var d=document.querySelectorAll(".alertify-logs > div");if(d){var e=d.length-this.maxLogItems;if(e>=0)for(var f=0,g=e+1;g>f;f++)this.close(d[f],-1)}this.notify(a,b,c)},setLogPosition:function(a){this.logContainerClass="alertify-logs "+a},setupLogContainer:function(){var a=document.querySelector(".alertify-logs"),b=this.logContainerClass;return a||(a=document.createElement("div"),a.className=b,document.body.appendChild(a)),a.className!==b&&(a.className=b),a},notify:function(b,c,d){var e=this.setupLogContainer(),f=document.createElement("div");f.className=c||"default",a.logTemplateMethod?f.innerHTML=a.logTemplateMethod(b):f.innerHTML=b,"function"==typeof d&&f.addEventListener("click",d),e.appendChild(f),setTimeout(function(){f.className+=" show"},10),this.close(f,this.delay)},setup:function(a){function b(b){"function"!=typeof b&&(b=function(){}),e&&e.addEventListener("click",function(e){a.onOkay&&"function"==typeof a.onOkay&&(g?a.onOkay(g.value,e):a.onOkay(e)),b(g?{buttonClicked:"ok",inputValue:g.value,event:e}:{buttonClicked:"ok",event:e}),c(d)}),f&&f.addEventListener("click",function(e){a.onCancel&&"function"==typeof a.onCancel&&a.onCancel(e),b({buttonClicked:"cancel",event:e}),c(d)})}var d=document.createElement("div");d.className="alertify hide",d.innerHTML=this.build(a);var e=d.querySelector(".ok"),f=d.querySelector(".cancel"),g=d.querySelector("input"),h=d.querySelector("label");g&&("string"==typeof this.promptPlaceholder&&(h?h.textContent=this.promptPlaceholder:g.placeholder=this.promptPlaceholder),"string"==typeof this.promptValue&&(g.value=this.promptValue));var i;return"function"==typeof Promise?i=new Promise(b):b(),document.body.appendChild(d),setTimeout(function(){d.classList.remove("hide"),g&&a.type&&"prompt"===a.type?(g.select(),g.focus()):e&&e.focus()},100),i},okBtn:function(a){return this.okLabel=a,this},setDelay:function(a){var b=parseInt(a||0,10);return this.delay=isNaN(b)?this.defultDelay:a,this},cancelBtn:function(a){return this.cancelLabel=a,this},setMaxLogItems:function(a){this.maxLogItems=parseInt(a||this.defaultMaxLogItems)},theme:function(a){switch(a.toLowerCase()){case"bootstrap":this.dialogs.buttons.ok="<button class='ok btn btn-primary' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel btn btn-default' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<input type='text' class='form-control'>";break;case"purecss":this.dialogs.buttons.ok="<button class='ok pure-button' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel pure-button' tabindex='2'>{{cancel}}</button>";break;case"mdl":case"material-design-light":this.dialogs.buttons.ok="<button class='ok mdl-button mdl-js-button mdl-js-ripple-effect'  tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel mdl-button mdl-js-button mdl-js-ripple-effect' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<div class='mdl-textfield mdl-js-textfield'><input class='mdl-textfield__input'><label class='md-textfield__label'></label></div>";break;case"angular-material":this.dialogs.buttons.ok="<button class='ok md-primary md-button' tabindex='1'>{{ok}}</button>",this.dialogs.buttons.cancel="<button class='cancel md-button' tabindex='2'>{{cancel}}</button>",this.dialogs.input="<div layout='column'><md-input-container md-no-float><input type='text'></md-input-container></div>";break;case"default":default:this.dialogs.buttons.ok=this.defaultDialogs.buttons.ok,this.dialogs.buttons.cancel=this.defaultDialogs.buttons.cancel,this.dialogs.input=this.defaultDialogs.input}},reset:function(){this.theme("default"),this.okBtn(this.defaultOkLabel),this.cancelBtn(this.defaultCancelLabel),this.setMaxLogItems(),this.promptValue="",this.promptPlaceholder="",this.delay=this.defaultDelay,this.setCloseLogOnClick(this.closeLogOnClickDefault),this.setLogPosition("bottom left"),this.logTemplateMethod=null},injectCSS:function(){if(!document.querySelector("#alertifyCSS")){var a=document.getElementsByTagName("head")[0],b=document.createElement("style");b.type="text/css",b.id="alertifyCSS",b.innerHTML=".alertify,.alertify *,.alertify-logs>*,.alertify.show{box-sizing:border-box}.alertify-logs>*{color:#fff;box-shadow:0 2px 5px 0 rgba(0,0,0,.2);border-radius:1px}.alertify-logs>*,.alertify-logs>.default{background:rgba(0,0,0,.8)}.alertify-logs>.error{background:rgba(244,67,54,.8)}.alertify-logs>.success{background:rgba(76,175,80,.9)}.alertify{position:fixed;background-color:rgba(0,0,0,.3);left:0;right:0;top:0;bottom:0;width:100%;height:100%;z-index:99999}.alertify.hide{opacity:0;pointer-events:none}.alertify,.alertify.show{-webkit-transition:all .33s cubic-bezier(.25,.8,.25,1);transition:all .33s cubic-bezier(.25,.8,.25,1)}.alertify .dialog{padding:12px}.alertify .alert,.alertify .dialog{width:100%;margin:0 auto;position:relative;top:50%;-webkit-transform:translateY(-50%);-ms-transform:translateY(-50%);transform:translateY(-50%)}.alertify .alert>*,.alertify .dialog>*{width:400px;max-width:95%;margin:0 auto;text-align:center;padding:12px;background:#fff;box-shadow:0 2px 4px -1px rgba(0,0,0,.14),0 4px 5px 0 rgba(0,0,0,.098),0 1px 10px 0 rgba(0,0,0,.084)}.alertify .alert .msg,.alertify .dialog .msg{padding:12px;margin:0;text-align:left}.alertify .alert input:not(.form-control),.alertify .dialog input:not(.form-control){margin-bottom:15px;width:100%;font-size:100%;padding:12px}.alertify .alert input:not(.form-control):focus,.alertify .dialog input:not(.form-control):focus{outline-offset:-2px}.alertify .alert nav,.alertify .dialog nav{text-align:right}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button),.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button){background:0 0;box-sizing:border-box;color:rgba(0,0,0,.87);position:relative;outline:0;border:0;display:inline-block;-webkit-box-align:center;-webkit-align-items:center;-ms-flex-align:center;align-items:center;padding:0 6px;margin:6px 8px;line-height:36px;min-height:36px;white-space:nowrap;min-width:88px;text-align:center;text-transform:uppercase;font-size:14px;text-decoration:none;cursor:pointer;border-radius:2px}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):active,.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):hover,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):active,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):hover{background-color:rgba(0,0,0,.05)}.alertify .alert nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):focus,.alertify .dialog nav button:not(.btn):not(.pure-button):not(.md-button):not(.mdl-button):focus{border:1px dashed rgba(0,0,0,.1)}.alertify .alert nav button.btn,.alertify .dialog nav button.btn{margin:6px 4px}.alertify-logs{position:fixed;z-index:100}.alertify-logs.bottom,.alertify-logs:not(.top){bottom:16px}.alertify-logs.left,.alertify-logs:not(.right){left:16px}.alertify-logs.left>*,.alertify-logs:not(.right)>*{float:left;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0);height:auto}.alertify-logs.left>.show,.alertify-logs:not(.right)>.show{left:0}.alertify-logs.left>*,.alertify-logs.left>.hide,.alertify-logs:not(.right)>*,.alertify-logs:not(.right)>.hide{left:-110%}.alertify-logs.right{right:16px}.alertify-logs.right>*{float:right;-webkit-transform:translate3d(0,0,0);transform:translate3d(0,0,0)}.alertify-logs.right>.show{right:0;opacity:1}.alertify-logs.right>*,.alertify-logs.right>.hide{right:-110%;opacity:0}.alertify-logs.top{top:0}.alertify-logs>*{-webkit-transition:all .4s cubic-bezier(.25,.8,.25,1);transition:all .4s cubic-bezier(.25,.8,.25,1);position:relative;clear:both;-webkit-backface-visibility:hidden;backface-visibility:hidden;-webkit-perspective:1000;perspective:1000;max-height:0;margin:0;padding:0;overflow:hidden;opacity:0;pointer-events:none}.alertify-logs>.show{margin-top:12px;opacity:1;max-height:1000px;padding:12px;pointer-events:auto}",a.insertBefore(b,a.firstChild)}},removeCSS:function(){var a=document.querySelector("#alertifyCSS");a&&a.parentNode&&a.parentNode.removeChild(a)}};return a.injectCSS(),{_$$alertify:a,reset:function(){return a.reset(),this},alert:function(b,c,d){return a.dialog(b,"alert",c,d)||this},confirm:function(b,c,d){return a.dialog(b,"confirm",c,d)||this},prompt:function(b,c,d){return a.dialog(b,"prompt",c,d)||this},log:function(b,c){return a.log(b,"default",c),this},theme:function(b){return a.theme(b),this},success:function(b,c){return a.log(b,"success",c),this},error:function(b,c){return a.log(b,"error",c),this},cancelBtn:function(b){return a.cancelBtn(b),this},okBtn:function(b){return a.okBtn(b),this},delay:function(b){return a.setDelay(b),this},placeholder:function(b){return a.promptPlaceholder=b,this},defaultValue:function(b){return a.promptValue=b,this},maxLogItems:function(b){return a.setMaxLogItems(b),this},closeLogOnClick:function(b){return a.setCloseLogOnClick(!!b),this},logPosition:function(b){return a.setLogPosition(b||""),this},setLogTemplate:function(b){return a.logTemplateMethod=b,this},clearLogs:function(){return a.setupLogContainer().innerHTML="",this},version:a.version}}var b=500,c=function(a){if(a){var c=function(){a&&a.parentNode&&a.parentNode.removeChild(a)};a.classList.remove("show"),a.classList.add("hide"),a.addEventListener("transitionend",c),setTimeout(c,b)}};if("undefined"!=typeof module&&module&&module.exports){module.exports=function(){return new a};var d=new a;for(var e in d)module.exports[e]=d[e]}else"function"==typeof define&&define.amd?define(function(){return new a}):window.alertify=new a}(),!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("Cropper requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){"use strict";function c(a){return Ya.call(a).slice(8,-1).toLowerCase()}function d(a){return"number"==typeof a&&!isNaN(a)}function e(a){return"undefined"==typeof a}function f(a){return"object"==typeof a&&null!==a}function g(a){var b,c;if(!f(a))return!1;try{return b=a.constructor,c=b.prototype,b&&c&&Za.call(c,"isPrototypeOf")}catch(d){return!1}}function h(a){return"function"===c(a)}function i(a){return X.isArray?X.isArray(a):"array"===c(a)}function j(a,b){return b=b>=0?b:0,X.from?X.from(a).slice(b):$a.call(a,b)}function k(a){return"string"==typeof a&&(a=a.trim?a.trim():a.replace(ta,"$1")),a}function l(a,b){var c,e;if(a&&h(b))if(i(a)||d(a.length))for(e=0,c=a.length;c>e&&b.call(a,a[e],e,a)!==!1;e++);else if(f(a))for(e in a)if(a.hasOwnProperty(e)&&b.call(a,a[e],e,a)===!1)break;return a}function m(a){var b;if(arguments.length>1){if(b=j(arguments),W.assign)return W.assign.apply(W,b);b.shift(),l(b,function(b){l(b,function(b,c){a[c]=b})})}return a}function n(a,b){var c=j(arguments,2);return function(){return a.apply(b,c.concat(j(arguments)))}}function o(a,b){var c=a.style;l(b,function(a,b){ra.test(b)&&d(a)&&(a+="px"),c[b]=a})}function p(a,b){return a.classList?a.classList.contains(b):a.className.indexOf(b)>-1}function q(a,b){var c;return d(a.length)?l(a,function(a){q(a,b)}):a.classList?a.classList.add(b):(c=k(a.className),void(c?c.indexOf(b)<0&&(a.className=c+" "+b):a.className=b))}function r(a,b){return d(a.length)?l(a,function(a){r(a,b)}):a.classList?a.classList.remove(b):void(a.className.indexOf(b)>=0&&(a.className=a.className.replace(b,"")))}function s(a,b,c){return d(a.length)?l(a,function(a){s(a,b,c)}):void(c?q(a,b):r(a,b))}function t(a,b){return f(a[b])?a[b]:a.dataset?a.dataset[b]:a.getAttribute("data-"+b)}function u(a,b,c){f(c)&&e(a[b])?a[b]=c:a.dataset?a.dataset[b]=c:a.setAttribute("data-"+b,c)}function v(a,b){f(a[b])?delete a[b]:a.dataset?delete a.dataset[b]:a.removeAttribute("data-"+b)}function w(a,b,c){var d=k(b).split(ua);return d.length>1?l(d,function(b){w(a,b,c)}):void(a.addEventListener?a.addEventListener(b,c,!1):a.attachEvent&&a.attachEvent("on"+b,c))}function x(a,b,c){var d=k(b).split(ua);return d.length>1?l(d,function(b){x(a,b,c)}):void(a.removeEventListener?a.removeEventListener(b,c,!1):a.detachEvent&&a.detachEvent("on"+b,c))}function y(a){a.preventDefault?a.preventDefault():a.returnValue=!1}function z(b){var c,e=b||a.event;return e.target||(e.target=e.srcElement||T),d(e.pageX)||(c=T.documentElement,e.pageX=e.clientX+(a.scrollX||c&&c.scrollLeft||0)-(c&&c.clientLeft||0),e.pageY=e.clientY+(a.scrollY||c&&c.scrollTop||0)-(c&&c.clientTop||0)),e}function A(b){var c=T.documentElement,d=b.getBoundingClientRect();return{left:d.left+(a.scrollX||c&&c.scrollLeft||0)-(c&&c.clientLeft||0),top:d.top+(a.scrollY||c&&c.scrollTop||0)-(c&&c.clientTop||0)}}function B(a){var b=a.length,c=0,d=0;return b&&(l(a,function(a){c+=a.pageX,d+=a.pageY}),c/=b,d/=b),{pageX:c,pageY:d}}function C(a,b){return a.getElementsByTagName(b)}function D(a,b){return a.getElementsByClassName?a.getElementsByClassName(b):a.querySelectorAll("."+b)}function E(a){return T.createElement(a)}function F(a,b){a.appendChild(b)}function G(a){a.parentNode&&a.parentNode.removeChild(a)}function H(a){for(;a.firstChild;)a.removeChild(a.firstChild)}function I(a){var b=a.match(sa);return b&&(b[1]!==U.protocol||b[2]!==U.hostname||b[3]!==U.port)}function J(a){var b="timestamp="+(new Date).getTime();return a+(-1===a.indexOf("?")?"?":"&")+b}function K(a,b){var c;return a.naturalWidth?b(a.naturalWidth,a.naturalHeight):(c=E("img"),c.onload=function(){b(this.width,this.height)},void(c.src=a.src))}function L(a){var b=[],c=a.rotate,e=a.scaleX,f=a.scaleY;return d(c)&&b.push("rotate("+c+"deg)"),d(e)&&d(f)&&b.push("scale("+e+","+f+")"),b.length?b.join(" "):"none"}function M(a,b){var c,d,e=Qa(a.degree)%180,f=(e>90?180-e:e)*Wa/180,g=Ra(f),h=Sa(f),i=a.width,j=a.height,k=a.aspectRatio;return b?(c=i/(h+g/k),d=c/k):(c=i*h+j*g,d=i*g+j*h),{width:c,height:d}}function N(a,b){var c,e,f,g=E("canvas"),h=g.getContext("2d"),i=0,j=0,k=b.naturalWidth,l=b.naturalHeight,m=b.rotate,n=b.scaleX,o=b.scaleY,p=d(n)&&d(o)&&(1!==n||1!==o),q=d(m)&&0!==m,r=q||p,s=k,t=l;return p&&(c=k/2,e=l/2),q&&(f=M({width:k,height:l,degree:m}),s=f.width,t=f.height,c=f.width/2,e=f.height/2),g.width=s,g.height=t,r&&(i=-k/2,j=-l/2,h.save(),h.translate(c,e)),q&&h.rotate(m*Wa/180),p&&h.scale(n,o),h.drawImage(a,Va(i),Va(j),Va(k),Va(l)),r&&h.restore(),g}function O(a,b,c){var d="",e=b;for(c+=b;c>e;e++)d+=_a(a.getUint8(e));return d}function P(a){var b,c,d,e,f,g,h,i,j,k,l=new DataView(a),m=l.byteLength;if(255===l.getUint8(0)&&216===l.getUint8(1))for(j=2;m>j;){if(255===l.getUint8(j)&&225===l.getUint8(j+1)){h=j;break}j++}if(h&&(c=h+4,d=h+10,"Exif"===O(l,c,4)&&(g=l.getUint16(d),f=18761===g,(f||19789===g)&&42===l.getUint16(d+2,f)&&(e=l.getUint32(d+4,f),e>=8&&(i=d+e)))),i)for(m=l.getUint16(i,f),k=0;m>k;k++)if(j=i+12*k+2,274===l.getUint16(j,f)){j+=8,b=l.getUint16(j,f),l.setUint16(j,1,f);break}return b}function Q(a){var b,c=a.replace(wa,""),d=atob(c),e=d.length,f=new V(e),g=new Uint8Array(f);for(b=0;e>b;b++)g[b]=d.charCodeAt(b);return f}function R(a){var b,c=new Uint8Array(a),d=c.length,e="";for(b=0;d>b;b++)e+=_a(c[b]);return"data:image/jpeg;base64,"+btoa(e)}function S(a,b){var c=this;c.element=a,c.options=m({},S.DEFAULTS,g(b)&&b),c.ready=!1,c.built=!1,c.complete=!1,c.rotated=!1,c.cropped=!1,c.disabled=!1,c.replaced=!1,c.limited=!1,c.wheeling=!1,c.isImg=!1,c.originalUrl="",c.canvasData=null,c.cropBoxData=null,c.previews=null,c.init()}var T=a.document,U=a.location,V=a.ArrayBuffer,W=a.Object,X=a.Array,Y=a.String,Z=a.Number,$=a.Math,_="cropper",aa=_+"-modal",ba=_+"-hide",ca=_+"-hidden",da=_+"-invisible",ea=_+"-move",fa=_+"-crop",ga=_+"-disabled",ha=_+"-bg",ia="mousedown touchstart pointerdown MSPointerDown",ja="mousemove touchmove pointermove MSPointerMove",ka="mouseup touchend touchcancel pointerup pointercancel MSPointerUp MSPointerCancel",la="wheel mousewheel DOMMouseScroll",ma="dblclick",na="resize",oa="error",pa="load",qa=/e|w|s|n|se|sw|ne|nw|all|crop|move|zoom/,ra=/width|height|left|top|marginLeft|marginTop/,sa=/^(https?:)\/\/([^\:\/\?#]+):?(\d*)/i,ta=/^\s+(.*)\s+$/,ua=/\s+/,va=/^data\:/,wa=/^data\:([^\;]+)\;base64,/,xa=/^data\:image\/jpeg.*;base64,/,ya="preview",za="action",Aa="e",Ba="w",Ca="s",Da="n",Ea="se",Fa="sw",Ga="ne",Ha="nw",Ia="all",Ja="crop",Ka="move",La="zoom",Ma="none",Na=!!T.createElement("canvas").getContext,Oa=$.min,Pa=$.max,Qa=$.abs,Ra=$.sin,Sa=$.cos,Ta=$.sqrt,Ua=$.round,Va=$.floor,Wa=$.PI,Xa=W.prototype,Ya=Xa.toString,Za=Xa.hasOwnProperty,$a=X.prototype.slice,_a=Y.fromCharCode;S.prototype={constructor:S,init:function(){var a,b=this,c=b.element,d=c.tagName.toLowerCase();if(!t(c,_)){if(u(c,_,b),"img"===d){if(b.isImg=!0,b.originalUrl=a=c.getAttribute("src"),!a)return;a=c.src}else"canvas"===d&&Na&&(a=c.toDataURL());b.load(a)}},load:function(a){var b,c=this,d=c.options;if(a&&(!h(d.build)||d.build.call(c.element)!==!1)){if(c.url=a,c.imageData={},!d.checkOrientation||!V)return c.clone();if(va.test(a))return xa.test(a)?c.read(Q(a)):c.clone();b=new XMLHttpRequest,b.onerror=b.onabort=function(){c.clone()},b.onload=function(){c.read(this.response)},b.open("get",a),b.responseType="arraybuffer",b.send()}},read:function(a){var b,c,d,e=this,f=e.options,g=P(a),h=e.imageData;if(g>1)switch(e.url=R(a),g){case 2:c=-1;break;case 3:b=-180;break;case 4:d=-1;break;case 5:b=90,d=-1;break;case 6:b=90;break;case 7:b=90,c=-1;break;case 8:b=-90}f.rotatable&&(h.rotate=b),f.scalable&&(h.scaleX=c,h.scaleY=d),e.clone()},clone:function(){var a,b,c,d,e,f=this,g=f.element,h=f.url;f.options.checkCrossOrigin&&I(h)&&(a=g.crossOrigin,a?b=h:(a="anonymous",b=J(h))),f.crossOrigin=a,f.crossOriginUrl=b,c=E("img"),a&&(c.crossOrigin=a),c.src=b||h,f.image=c,f._start=d=n(f.start,f),f._stop=e=n(f.stop,f),f.isImg?g.complete?f.start():w(g,pa,d):(w(c,pa,d),w(c,oa,e),q(c,ba),g.parentNode.insertBefore(c,g.nextSibling))},start:function(a){var b=this,c=b.isImg?b.element:b.image;a&&(x(c,pa,b._start),x(c,oa,b._stop)),K(c,function(a,c){m(b.imageData,{naturalWidth:a,naturalHeight:c,aspectRatio:a/c}),b.ready=!0,b.build()})},stop:function(){var a=this,b=a.image;x(b,pa,a._start),x(b,oa,a._stop),G(b),a.image=null},build:function(){var a,b,c,d,e,f,g,i=this,j=i.options,k=i.element,l=i.image;i.ready&&(i.built&&i.unbuild(),b=E("div"),b.innerHTML=S.TEMPLATE,i.container=a=k.parentNode,i.cropper=c=D(b,"cropper-container")[0],i.canvas=d=D(c,"cropper-canvas")[0],i.dragBox=e=D(c,"cropper-drag-box")[0],i.cropBox=f=D(c,"cropper-crop-box")[0],i.viewBox=D(c,"cropper-view-box")[0],i.face=g=D(f,"cropper-face")[0],F(d,l),q(k,ca),a.insertBefore(c,k.nextSibling),i.isImg||r(l,ba),i.initPreview(),i.bind(),j.aspectRatio=Pa(0,j.aspectRatio)||NaN,j.viewMode=Pa(0,Oa(3,Ua(j.viewMode)))||0,j.autoCrop?(i.cropped=!0,j.modal&&q(e,aa)):q(f,ca),j.guides||q(D(f,"cropper-dashed"),ca),j.center||q(D(f,"cropper-center"),ca),j.background&&q(c,ha),j.highlight||q(g,da),j.cropBoxMovable&&(q(g,ea),u(g,za,Ia)),j.cropBoxResizable||(q(D(f,"cropper-line"),ca),q(D(f,"cropper-point"),ca)),i.setDragMode(j.dragMode),i.render(),i.built=!0,i.setData(j.data),setTimeout(function(){h(j.built)&&j.built.call(k),h(j.crop)&&j.crop.call(k,i.getData()),i.complete=!0},0))},unbuild:function(){var a=this;a.built&&(a.built=!1,a.complete=!1,a.initialImageData=null,a.initialCanvasData=null,a.initialCropBoxData=null,a.containerData=null,a.canvasData=null,a.cropBoxData=null,a.unbind(),a.resetPreview(),a.previews=null,a.viewBox=null,a.cropBox=null,a.dragBox=null,a.canvas=null,a.container=null,G(a.cropper),a.cropper=null)},render:function(){var a=this;a.initContainer(),a.initCanvas(),a.initCropBox(),a.renderCanvas(),a.cropped&&a.renderCropBox()},initContainer:function(){var a,b=this,c=b.options,d=b.element,e=b.container,f=b.cropper;q(f,ca),r(d,ca),b.containerData=a={width:Pa(e.offsetWidth,Z(c.minContainerWidth)||200),height:Pa(e.offsetHeight,Z(c.minContainerHeight)||100)},o(f,{width:a.width,height:a.height}),q(d,ca),r(f,ca)},initCanvas:function(){var a,b=this,c=b.options.viewMode,d=b.containerData,e=b.imageData,f=90===Qa(e.rotate),g=f?e.naturalHeight:e.naturalWidth,h=f?e.naturalWidth:e.naturalHeight,i=g/h,j=d.width,k=d.height;d.height*i>d.width?3===c?j=d.height*i:k=d.width/i:3===c?k=d.width/i:j=d.height*i,a={naturalWidth:g,naturalHeight:h,aspectRatio:i,width:j,height:k},a.oldLeft=a.left=(d.width-j)/2,a.oldTop=a.top=(d.height-k)/2,b.canvasData=a,b.limited=1===c||2===c,b.limitCanvas(!0,!0),b.initialImageData=m({},e),b.initialCanvasData=m({},a)},limitCanvas:function(a,b){var c,d,e,f,g=this,h=g.options,i=h.viewMode,j=g.containerData,k=g.canvasData,l=k.aspectRatio,m=g.cropBoxData,n=g.cropped&&m;a&&(c=Z(h.minCanvasWidth)||0,d=Z(h.minCanvasHeight)||0,i>1?(c=Pa(c,j.width),d=Pa(d,j.height),3===i&&(d*l>c?c=d*l:d=c/l)):i>0&&(c?c=Pa(c,n?m.width:0):d?d=Pa(d,n?m.height:0):n&&(c=m.width,d=m.height,d*l>c?c=d*l:d=c/l)),c&&d?d*l>c?d=c/l:c=d*l:c?d=c/l:d&&(c=d*l),k.minWidth=c,k.minHeight=d,k.maxWidth=1/0,k.maxHeight=1/0),b&&(i?(e=j.width-k.width,f=j.height-k.height,k.minLeft=Oa(0,e),k.minTop=Oa(0,f),k.maxLeft=Pa(0,e),k.maxTop=Pa(0,f),n&&g.limited&&(k.minLeft=Oa(m.left,m.left+m.width-k.width),k.minTop=Oa(m.top,m.top+m.height-k.height),k.maxLeft=m.left,k.maxTop=m.top,2===i&&(k.width>=j.width&&(k.minLeft=Oa(0,e),k.maxLeft=Pa(0,e)),k.height>=j.height&&(k.minTop=Oa(0,f),k.maxTop=Pa(0,f))))):(k.minLeft=-k.width,k.minTop=-k.height,k.maxLeft=j.width,k.maxTop=j.height))},renderCanvas:function(a){var b,c,d=this,e=d.canvasData,f=d.imageData,g=f.rotate;d.rotated&&(d.rotated=!1,c=M({width:f.width,height:f.height,degree:g}),b=c.width/c.height,b!==e.aspectRatio&&(e.left-=(c.width-e.width)/2,e.top-=(c.height-e.height)/2,e.width=c.width,e.height=c.height,e.aspectRatio=b,e.naturalWidth=f.naturalWidth,e.naturalHeight=f.naturalHeight,g%180&&(c=M({width:f.naturalWidth,height:f.naturalHeight,degree:g}),e.naturalWidth=c.width,e.naturalHeight=c.height),d.limitCanvas(!0,!1))),(e.width>e.maxWidth||e.width<e.minWidth)&&(e.left=e.oldLeft),(e.height>e.maxHeight||e.height<e.minHeight)&&(e.top=e.oldTop),e.width=Oa(Pa(e.width,e.minWidth),e.maxWidth),e.height=Oa(Pa(e.height,e.minHeight),e.maxHeight),d.limitCanvas(!1,!0),e.oldLeft=e.left=Oa(Pa(e.left,e.minLeft),e.maxLeft),e.oldTop=e.top=Oa(Pa(e.top,e.minTop),e.maxTop),o(d.canvas,{width:e.width,height:e.height,left:e.left,top:e.top}),d.renderImage(),d.cropped&&d.limited&&d.limitCropBox(!0,!0),a&&d.output()},renderImage:function(a){var b,c,d,e,f,g=this,h=g.canvasData,i=g.imageData;i.rotate&&(c=M({width:h.width,height:h.height,degree:i.rotate,aspectRatio:i.aspectRatio},!0),d=c.width,e=c.height,b={width:d,height:e,left:(h.width-d)/2,top:(h.height-e)/2}),m(i,b||{width:h.width,height:h.height,left:0,top:0}),f=L(i),o(g.image,{width:i.width,height:i.height,marginLeft:i.left,marginTop:i.top,WebkitTransform:f,msTransform:f,transform:f}),a&&g.output()},initCropBox:function(){var a=this,b=a.options,c=b.aspectRatio,d=Z(b.autoCropArea)||.8,e=a.canvasData,f={width:e.width,height:e.height};c&&(e.height*c>e.width?f.height=f.width/c:f.width=f.height*c),a.cropBoxData=f,a.limitCropBox(!0,!0),f.width=Oa(Pa(f.width,f.minWidth),f.maxWidth),f.height=Oa(Pa(f.height,f.minHeight),f.maxHeight),f.width=Pa(f.minWidth,f.width*d),f.height=Pa(f.minHeight,f.height*d),f.oldLeft=f.left=e.left+(e.width-f.width)/2,f.oldTop=f.top=e.top+(e.height-f.height)/2,a.initialCropBoxData=m({},f)},limitCropBox:function(a,b){var c,d,e,f,g=this,h=g.options,i=h.aspectRatio,j=g.containerData,k=g.canvasData,l=g.cropBoxData,m=g.limited;a&&(c=Z(h.minCropBoxWidth)||0,d=Z(h.minCropBoxHeight)||0,c=Oa(c,j.width),d=Oa(d,j.height),e=Oa(j.width,m?k.width:j.width),f=Oa(j.height,m?k.height:j.height),i&&(c&&d?d*i>c?d=c/i:c=d*i:c?d=c/i:d&&(c=d*i),f*i>e?f=e/i:e=f*i),l.minWidth=Oa(c,e),l.minHeight=Oa(d,f),l.maxWidth=e,l.maxHeight=f),b&&(m?(l.minLeft=Pa(0,k.left),l.minTop=Pa(0,k.top),l.maxLeft=Oa(j.width,k.left+k.width)-l.width,l.maxTop=Oa(j.height,k.top+k.height)-l.height):(l.minLeft=0,l.minTop=0,l.maxLeft=j.width-l.width,l.maxTop=j.height-l.height))},renderCropBox:function(){var a=this,b=a.options,c=a.containerData,d=a.cropBoxData;(d.width>d.maxWidth||d.width<d.minWidth)&&(d.left=d.oldLeft),(d.height>d.maxHeight||d.height<d.minHeight)&&(d.top=d.oldTop),d.width=Oa(Pa(d.width,d.minWidth),d.maxWidth),d.height=Oa(Pa(d.height,d.minHeight),d.maxHeight),a.limitCropBox(!1,!0),d.oldLeft=d.left=Oa(Pa(d.left,d.minLeft),d.maxLeft),d.oldTop=d.top=Oa(Pa(d.top,d.minTop),d.maxTop),b.movable&&b.cropBoxMovable&&u(a.face,za,d.width===c.width&&d.height===c.height?Ka:Ia),o(a.cropBox,{width:d.width,height:d.height,left:d.left,top:d.top}),a.cropped&&a.limited&&a.limitCanvas(!0,!0),a.disabled||a.output()},output:function(){var a=this,b=a.options;a.preview(),a.complete&&h(b.crop)&&b.crop.call(a.element,a.getData())},initPreview:function(){var a,b=this,c=b.options.preview,d=E("img"),e=b.crossOrigin,f=e?b.crossOriginUrl:b.url;e&&(d.crossOrigin=e),d.src=f,F(b.viewBox,d),c&&(b.previews=a=T.querySelectorAll(c),l(a,function(a){var b=E("img");u(a,ya,{width:a.offsetWidth,height:a.offsetHeight,html:a.innerHTML}),e&&(b.crossOrigin=e),b.src=f,b.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"',H(a),F(a,b)}))},resetPreview:function(){l(this.previews,function(a){var b=t(a,ya);o(a,{width:b.width,height:b.height}),a.innerHTML=b.html,v(a,ya)})},preview:function(){var a=this,b=a.imageData,c=a.canvasData,d=a.cropBoxData,e=d.width,f=d.height,g=b.width,h=b.height,i=d.left-c.left-b.left,j=d.top-c.top-b.top,k=L(b),n={WebkitTransform:k,msTransform:k,transform:k};a.cropped&&!a.disabled&&(o(C(a.viewBox,"img")[0],m({width:g,height:h,marginLeft:-i,marginTop:-j},n)),l(a.previews,function(a){var b=t(a,ya),c=b.width,d=b.height,k=c,l=d,p=1;e&&(p=c/e,l=f*p),f&&l>d&&(p=d/f,k=e*p,l=d),o(a,{width:k,height:l}),o(C(a,"img")[0],m({width:g*p,height:h*p,marginLeft:-i*p,marginTop:-j*p},n))}))},bind:function(){var b=this,c=b.options,d=b.cropper;w(d,ia,b._cropStart=n(b.cropStart,b)),c.zoomable&&c.zoomOnWheel&&w(d,la,b._wheel=n(b.wheel,b)),c.toggleDragModeOnDblclick&&w(d,ma,b._dblclick=n(b.dblclick,b)),w(T,ja,b._cropMove=n(b.cropMove,b)),w(T,ka,b._cropEnd=n(b.cropEnd,b)),c.responsive&&w(a,na,b._resize=n(b.resize,b))},unbind:function(){var b=this,c=b.options,d=b.cropper;x(d,ia,b._cropStart),c.zoomable&&c.zoomOnWheel&&x(d,la,b._wheel),c.toggleDragModeOnDblclick&&x(d,ma,b._dblclick),x(T,ja,b._cropMove),x(T,ka,b._cropEnd),c.responsive&&x(a,na,b._resize)},resize:function(){var a,b,c,d=this,e=d.options.restore,f=d.container,g=d.containerData;!d.disabled&&g&&(c=f.offsetWidth/g.width,(1!==c||f.offsetHeight!==g.height)&&(e&&(a=d.getCanvasData(),b=d.getCropBoxData()),d.render(),e&&(d.setCanvasData(l(a,function(b,d){a[d]=b*c})),d.setCropBoxData(l(b,function(a,d){b[d]=a*c})))))},dblclick:function(){var a=this;a.disabled||a.setDragMode(p(a.dragBox,fa)?Ka:Ja)},wheel:function(a){var b=this,c=z(a),d=Z(b.options.wheelZoomRatio)||.1,e=1;b.disabled||(y(c),b.wheeling||(b.wheeling=!0,setTimeout(function(){b.wheeling=!1},50),c.deltaY?e=c.deltaY>0?1:-1:c.wheelDelta?e=-c.wheelDelta/120:c.detail&&(e=c.detail>0?1:-1),b.zoom(-e*d,c)))},cropStart:function(a){var b,c,d,e=this,f=e.options,g=z(a),i=g.touches;if(!e.disabled){if(i){if(b=i.length,b>1){if(!f.zoomable||!f.zoomOnTouch||2!==b)return;c=i[1],e.startX2=c.pageX,e.startY2=c.pageY,d=La}c=i[0]}if(d=d||t(g.target,za),qa.test(d)){if(h(f.cropstart)&&f.cropstart.call(e.element,{originalEvent:g,action:d})===!1)return;y(g),e.action=d,e.cropping=!1,e.startX=c?c.pageX:g.pageX,e.startY=c?c.pageY:g.pageY,d===Ja&&(e.cropping=!0,q(e.dragBox,aa))}}},cropMove:function(a){var b,c,d=this,e=d.options,f=z(a),g=f.touches,i=d.action;if(!d.disabled){if(g){if(b=g.length,b>1){if(!e.zoomable||!e.zoomOnTouch||2!==b)return;c=g[1],d.endX2=c.pageX,d.endY2=c.pageY}c=g[0]}if(i){if(h(e.cropmove)&&e.cropmove.call(d.element,{originalEvent:f,action:i})===!1)return;y(f),d.endX=c?c.pageX:f.pageX,d.endY=c?c.pageY:f.pageY,d.change(f.shiftKey,i===La?f:null)}}},cropEnd:function(a){var b=this,c=b.options,d=z(a),e=b.action;b.disabled||e&&(y(d),b.cropping&&(b.cropping=!1,s(b.dragBox,aa,b.cropped&&c.modal)),b.action="",h(c.cropend)&&c.cropend.call(b.element,{originalEvent:d,action:e}))},change:function(a,b){var c,d,e=this,f=e.options,g=f.aspectRatio,h=e.action,i=e.containerData,j=e.canvasData,k=e.cropBoxData,l=k.width,m=k.height,n=k.left,o=k.top,p=n+l,q=o+m,s=0,t=0,u=i.width,v=i.height,w=!0;switch(!g&&a&&(g=l&&m?l/m:1),e.limited&&(s=k.minLeft,t=k.minTop,u=s+Oa(i.width,j.width),v=t+Oa(i.height,j.height)),d={x:e.endX-e.startX,y:e.endY-e.startY},g&&(d.X=d.y*g,d.Y=d.x/g),h){case Ia:n+=d.x,o+=d.y;break;case Aa:if(d.x>=0&&(p>=u||g&&(t>=o||q>=v))){w=!1;break}l+=d.x,g&&(m=l/g,o-=d.Y/2),0>l&&(h=Ba,l=0);break;case Da:if(d.y<=0&&(t>=o||g&&(s>=n||p>=u))){w=!1;break}m-=d.y,o+=d.y,g&&(l=m*g,n+=d.X/2),0>m&&(h=Ca,m=0);break;case Ba:if(d.x<=0&&(s>=n||g&&(t>=o||q>=v))){w=!1;break}l-=d.x,n+=d.x,g&&(m=l/g,o+=d.Y/2),0>l&&(h=Aa,l=0);break;case Ca:if(d.y>=0&&(q>=v||g&&(s>=n||p>=u))){w=!1;break}m+=d.y,g&&(l=m*g,n-=d.X/2),0>m&&(h=Da,m=0);break;case Ga:if(g){if(d.y<=0&&(t>=o||p>=u)){w=!1;break}m-=d.y,o+=d.y,l=m*g}else d.x>=0?u>p?l+=d.x:d.y<=0&&t>=o&&(w=!1):l+=d.x,d.y<=0?o>t&&(m-=d.y,o+=d.y):(m-=d.y,o+=d.y);0>l&&0>m?(h=Fa,m=0,l=0):0>l?(h=Ha,l=0):0>m&&(h=Ea,m=0);break;case Ha:if(g){if(d.y<=0&&(t>=o||s>=n)){w=!1;break}m-=d.y,o+=d.y,l=m*g,n+=d.X}else d.x<=0?n>s?(l-=d.x,n+=d.x):d.y<=0&&t>=o&&(w=!1):(l-=d.x,n+=d.x),d.y<=0?o>t&&(m-=d.y,o+=d.y):(m-=d.y,o+=d.y);0>l&&0>m?(h=Ea,m=0,l=0):0>l?(h=Ga,l=0):0>m&&(h=Fa,m=0);break;case Fa:if(g){if(d.x<=0&&(s>=n||q>=v)){w=!1;break}l-=d.x,n+=d.x,m=l/g}else d.x<=0?n>s?(l-=d.x,n+=d.x):d.y>=0&&q>=v&&(w=!1):(l-=d.x,n+=d.x),d.y>=0?v>q&&(m+=d.y):m+=d.y;0>l&&0>m?(h=Ga,m=0,l=0):0>l?(h=Ea,l=0):0>m&&(h=Ha,m=0);break;case Ea:if(g){if(d.x>=0&&(p>=u||q>=v)){w=!1;break}l+=d.x,m=l/g}else d.x>=0?u>p?l+=d.x:d.y>=0&&q>=v&&(w=!1):l+=d.x,d.y>=0?v>q&&(m+=d.y):m+=d.y;0>l&&0>m?(h=Ha,m=0,l=0):0>l?(h=Fa,l=0):0>m&&(h=Ga,m=0);break;case Ka:e.move(d.x,d.y),
w=!1;break;case La:e.zoom(function(a,b,c,d){var e=Ta(a*a+b*b),f=Ta(c*c+d*d);return(f-e)/e}(Qa(e.startX-e.startX2),Qa(e.startY-e.startY2),Qa(e.endX-e.endX2),Qa(e.endY-e.endY2)),b),e.startX2=e.endX2,e.startY2=e.endY2,w=!1;break;case Ja:if(!d.x||!d.y){w=!1;break}c=A(e.cropper),n=e.startX-c.left,o=e.startY-c.top,l=k.minWidth,m=k.minHeight,d.x>0?h=d.y>0?Ea:Ga:d.x<0&&(n-=l,h=d.y>0?Fa:Ha),d.y<0&&(o-=m),e.cropped||(r(e.cropBox,ca),e.cropped=!0,e.limited&&e.limitCropBox(!0,!0))}w&&(k.width=l,k.height=m,k.left=n,k.top=o,e.action=h,e.renderCropBox()),e.startX=e.endX,e.startY=e.endY},crop:function(){var a=this;return a.built&&!a.disabled&&(a.cropped||(a.cropped=!0,a.limitCropBox(!0,!0),a.options.modal&&q(a.dragBox,aa),r(a.cropBox,ca)),a.setCropBoxData(a.initialCropBoxData)),a},reset:function(){var a=this;return a.built&&!a.disabled&&(a.imageData=m({},a.initialImageData),a.canvasData=m({},a.initialCanvasData),a.cropBoxData=m({},a.initialCropBoxData),a.renderCanvas(),a.cropped&&a.renderCropBox()),a},clear:function(){var a=this;return a.cropped&&!a.disabled&&(m(a.cropBoxData,{left:0,top:0,width:0,height:0}),a.cropped=!1,a.renderCropBox(),a.limitCanvas(),a.renderCanvas(),r(a.dragBox,aa),q(a.cropBox,ca)),a},replace:function(a){var b=this;return!b.disabled&&a&&(b.isImg&&(b.replaced=!0,b.element.src=a),b.options.data=null,b.load(a)),b},enable:function(){var a=this;return a.built&&(a.disabled=!1,r(a.cropper,ga)),a},disable:function(){var a=this;return a.built&&(a.disabled=!0,q(a.cropper,ga)),a},destroy:function(){var a=this,b=a.element,c=a.image;return a.ready?(a.isImg&&a.replaced&&(b.src=a.originalUrl),a.unbuild(),r(b,ca)):a.isImg?x(b,pa,a.start):c&&G(c),v(b,_),a},move:function(a,b){var c=this,d=c.canvasData;return c.moveTo(e(a)?a:d.left+Z(a),e(b)?b:d.top+Z(b))},moveTo:function(a,b){var c=this,f=c.canvasData,g=!1;return e(b)&&(b=a),a=Z(a),b=Z(b),c.built&&!c.disabled&&c.options.movable&&(d(a)&&(f.left=a,g=!0),d(b)&&(f.top=b,g=!0),g&&c.renderCanvas(!0)),c},zoom:function(a,b){var c=this,d=c.canvasData;return a=Z(a),a=0>a?1/(1-a):1+a,c.zoomTo(d.width*a/d.naturalWidth,b)},zoomTo:function(a,b){var c,d,e,f,g=this,i=g.options,j=g.canvasData,k=j.width,l=j.height,m=j.naturalWidth,n=j.naturalHeight;if(a=Z(a),a>=0&&g.built&&!g.disabled&&i.zoomable){if(c=m*a,d=n*a,h(i.zoom)&&i.zoom.call(g.element,{originalEvent:b,oldRatio:k/m,ratio:c/m})===!1)return g;b?(e=A(g.cropper),f=b.touches?B(b.touches):{pageX:b.pageX,pageY:b.pageY},j.left-=(c-k)*((f.pageX-e.left-j.left)/k),j.top-=(d-l)*((f.pageY-e.top-j.top)/l)):(j.left-=(c-k)/2,j.top-=(d-l)/2),j.width=c,j.height=d,g.renderCanvas(!0)}return g},rotate:function(a){var b=this;return b.rotateTo((b.imageData.rotate||0)+Z(a))},rotateTo:function(a){var b=this;return a=Z(a),d(a)&&b.built&&!b.disabled&&b.options.rotatable&&(b.imageData.rotate=a%360,b.rotated=!0,b.renderCanvas(!0)),b},scale:function(a,b){var c=this,f=c.imageData,g=!1;return e(b)&&(b=a),a=Z(a),b=Z(b),c.built&&!c.disabled&&c.options.scalable&&(d(a)&&(f.scaleX=a,g=!0),d(b)&&(f.scaleY=b,g=!0),g&&c.renderImage(!0)),c},scaleX:function(a){var b=this,c=b.imageData.scaleY;return b.scale(a,d(c)?c:1)},scaleY:function(a){var b=this,c=b.imageData.scaleX;return b.scale(d(c)?c:1,a)},getData:function(a){var b,c,d=this,e=d.options,f=d.imageData,g=d.canvasData,h=d.cropBoxData;return d.built&&d.cropped?(c={x:h.left-g.left,y:h.top-g.top,width:h.width,height:h.height},b=f.width/f.naturalWidth,l(c,function(d,e){d/=b,c[e]=a?Ua(d):d})):c={x:0,y:0,width:0,height:0},e.rotatable&&(c.rotate=f.rotate||0),e.scalable&&(c.scaleX=f.scaleX||1,c.scaleY=f.scaleY||1),c},setData:function(a){var b,c,e,f=this,i=f.options,j=f.imageData,k=f.canvasData,l={};return h(a)&&(a=a.call(f.element)),f.built&&!f.disabled&&g(a)&&(i.rotatable&&d(a.rotate)&&a.rotate!==j.rotate&&(j.rotate=a.rotate,f.rotated=b=!0),i.scalable&&(d(a.scaleX)&&a.scaleX!==j.scaleX&&(j.scaleX=a.scaleX,c=!0),d(a.scaleY)&&a.scaleY!==j.scaleY&&(j.scaleY=a.scaleY,c=!0)),b?f.renderCanvas():c&&f.renderImage(),e=j.width/j.naturalWidth,d(a.x)&&(l.left=a.x*e+k.left),d(a.y)&&(l.top=a.y*e+k.top),d(a.width)&&(l.width=a.width*e),d(a.height)&&(l.height=a.height*e),f.setCropBoxData(l)),f},getContainerData:function(){var a=this;return a.built?a.containerData:{}},getImageData:function(){var a=this;return a.ready?a.imageData:{}},getCanvasData:function(){var a=this,b=a.canvasData,c={};return a.built&&l(["left","top","width","height","naturalWidth","naturalHeight"],function(a){c[a]=b[a]}),c},setCanvasData:function(a){var b=this,c=b.canvasData,e=c.aspectRatio;return h(a)&&(a=a.call(b.element)),b.built&&!b.disabled&&g(a)&&(d(a.left)&&(c.left=a.left),d(a.top)&&(c.top=a.top),d(a.width)?(c.width=a.width,c.height=a.width/e):d(a.height)&&(c.height=a.height,c.width=a.height*e),b.renderCanvas(!0)),b},getCropBoxData:function(){var a,b=this,c=b.cropBoxData;return b.built&&b.cropped&&(a={left:c.left,top:c.top,width:c.width,height:c.height}),a||{}},setCropBoxData:function(a){var b,c,e=this,f=e.cropBoxData,i=e.options.aspectRatio;return h(a)&&(a=a.call(e.element)),e.built&&e.cropped&&!e.disabled&&g(a)&&(d(a.left)&&(f.left=a.left),d(a.top)&&(f.top=a.top),d(a.width)&&(b=!0,f.width=a.width),d(a.height)&&(c=!0,f.height=a.height),i&&(b?f.height=f.width/i:c&&(f.width=f.height*i)),e.renderCropBox()),e},getCroppedCanvas:function(a){var b,c,d,e,f,h,i,j,k,l,m,n=this;return n.built&&n.cropped&&Na?(g(a)||(a={}),m=n.getData(),b=m.width,c=m.height,j=b/c,g(a)&&(f=a.width,h=a.height,f?(h=f/j,i=f/b):h&&(f=h*j,i=h/c)),d=Va(f||b),e=Va(h||c),k=E("canvas"),k.width=d,k.height=e,l=k.getContext("2d"),a.fillColor&&(l.fillStyle=a.fillColor,l.fillRect(0,0,d,e)),l.drawImage.apply(l,function(){var a,d,e,f,g,h,j=N(n.image,n.imageData),k=j.width,l=j.height,o=[j],p=m.x,q=m.y;return-b>=p||p>k?p=a=e=g=0:0>=p?(e=-p,p=0,a=g=Oa(k,b+p)):k>=p&&(e=0,a=g=Oa(b,k-p)),0>=a||-c>=q||q>l?q=d=f=h=0:0>=q?(f=-q,q=0,d=h=Oa(l,c+q)):l>=q&&(f=0,d=h=Oa(c,l-q)),o.push(Va(p),Va(q),Va(a),Va(d)),i&&(e*=i,f*=i,g*=i,h*=i),g>0&&h>0&&o.push(Va(e),Va(f),Va(g),Va(h)),o}.call(n)),k):void 0},setAspectRatio:function(a){var b=this,c=b.options;return b.disabled||e(a)||(c.aspectRatio=Pa(0,a)||NaN,b.built&&(b.initCropBox(),b.cropped&&b.renderCropBox())),b},setDragMode:function(a){var b,c,d=this,e=d.options,f=d.dragBox,g=d.face;return d.ready&&!d.disabled&&(b=a===Ja,c=e.movable&&a===Ka,a=b||c?a:Ma,u(f,za,a),s(f,fa,b),s(f,ea,c),e.cropBoxMovable||(u(g,za,a),s(g,fa,b),s(g,ea,c))),d}},S.DEFAULTS={viewMode:0,dragMode:"crop",aspectRatio:NaN,data:null,preview:"",responsive:!0,restore:!0,checkCrossOrigin:!0,checkOrientation:!0,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:.8,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,wheelZoomRatio:.1,cropBoxMovable:!0,cropBoxResizable:!0,toggleDragModeOnDblclick:!0,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,build:null,built:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null},S.TEMPLATE=function(a,b){return b=b.split(","),a.replace(/\d+/g,function(a){return b[a]})}('<0 6="5-container"><0 6="5-wrap-9"><0 6="5-canvas"></0></0><0 6="5-drag-9"></0><0 6="5-crop-9"><1 6="5-view-9"></1><1 6="5-8 8-h"></1><1 6="5-8 8-v"></1><1 6="5-center"></1><1 6="5-face"></1><1 6="5-7 7-e" 3-2="e"></1><1 6="5-7 7-n" 3-2="n"></1><1 6="5-7 7-w" 3-2="w"></1><1 6="5-7 7-s" 3-2="s"></1><1 6="5-4 4-e" 3-2="e"></1><1 6="5-4 4-n" 3-2="n"></1><1 6="5-4 4-w" 3-2="w"></1><1 6="5-4 4-s" 3-2="s"></1><1 6="5-4 4-ne" 3-2="ne"></1><1 6="5-4 4-nw" 3-2="nw"></1><1 6="5-4 4-sw" 3-2="sw"></1><1 6="5-4 4-se" 3-2="se"></1></0></0>',"div,span,action,data,point,cropper,class,line,dashed,box");var ab=a.Cropper;return S.noConflict=function(){return a.Cropper=ab,S},S.setDefaults=function(a){m(S.DEFAULTS,a)},"function"==typeof define&&define.amd&&define("cropper",[],function(){return S}),b||(a.Cropper=S),S}),function(){var a,b,c,d,e,f,g,h,i=[].slice,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=function(){},b=function(){function a(){}return a.prototype.addEventListener=a.prototype.on,a.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},this._callbacks[a]||(this._callbacks[a]=[]),this._callbacks[a].push(b),this},a.prototype.emit=function(){var a,b,c,d,e,f;if(d=arguments[0],a=2<=arguments.length?i.call(arguments,1):[],this._callbacks=this._callbacks||{},c=this._callbacks[d])for(e=0,f=c.length;f>e;e++)b=c[e],b.apply(this,a);return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=a.prototype.off,a.prototype.removeEventListener=a.prototype.off,a.prototype.off=function(a,b){var c,d,e,f,g;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(d=this._callbacks[a],!d)return this;if(1===arguments.length)return delete this._callbacks[a],this;for(e=f=0,g=d.length;g>f;e=++f)if(c=d[e],c===b){d.splice(e,1);break}return this},a}(),a=function(a){function c(a,b){var e,f,g;if(this.element=a,this.version=c.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(c.instances.push(this),this.element.dropzone=this,e=null!=(g=c.optionsForElement(this.element))?g:{},this.options=d({},this.defaultOptions,e,null!=b?b:{}),this.options.forceFallback||!c.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f),this.options.previewsContainer!==!1&&(this.options.previewsContainer?this.previewsContainer=c.getElement(this.options.previewsContainer,"previewsContainer"):this.previewsContainer=this.element),this.options.clickable&&(this.options.clickable===!0?this.clickableElements=[this.element]:this.clickableElements=c.getElements(this.options.clickable,"clickable")),this.init()}var d,e;return k(c,a),c.prototype.Emitter=b,c.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],c.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(a,b){return b()},init:function(){return g},forceFallback:!1,fallback:function(){var a,b,d,e,f,g;for(this.element.className=""+this.element.className+" dz-browser-not-supported",g=this.element.getElementsByTagName("div"),e=0,f=g.length;f>e;e++)a=g[e],/(^| )dz-message($| )/.test(a.className)&&(b=a,a.className="dz-message");return b||(b=c.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(b)),d=b.getElementsByTagName("span")[0],d&&(d.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,c,d;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},c=a.width/a.height,b.optWidth=this.options.thumbnailWidth,b.optHeight=this.options.thumbnailHeight,null==b.optWidth&&null==b.optHeight?(b.optWidth=b.srcWidth,b.optHeight=b.srcHeight):null==b.optWidth?b.optWidth=c*b.optHeight:null==b.optHeight&&(b.optHeight=1/c*b.optWidth),d=b.optWidth/b.optHeight,a.height<b.optHeight||a.width<b.optWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):c>d?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*d):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/d),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,b},drop:function(a){return this.element.classList.remove("dz-drag-hover")},dragstart:g,dragend:function(a){return this.element.classList.remove("dz-drag-hover")},dragenter:function(a){return this.element.classList.add("dz-drag-hover")},dragover:function(a){return this.element.classList.add("dz-drag-hover")},dragleave:function(a){return this.element.classList.remove("dz-drag-hover")},paste:g,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(a.previewElement=c.createElement(this.options.previewTemplate.trim()),a.previewTemplate=a.previewElement,this.previewsContainer.appendChild(a.previewElement),l=a.previewElement.querySelectorAll("[data-dz-name]"),f=0,i=l.length;i>f;f++)b=l[f],b.textContent=a.name;for(m=a.previewElement.querySelectorAll("[data-dz-size]"),g=0,j=m.length;j>g;g++)b=m[g],b.innerHTML=this.filesize(a.size);for(this.options.addRemoveLinks&&(a._removeLink=c.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),a.previewElement.appendChild(a._removeLink)),d=function(b){return function(d){return d.preventDefault(),d.stopPropagation(),a.status===c.UPLOADING?c.confirm(b.options.dictCancelUploadConfirmation,function(){return b.removeFile(a)}):b.options.dictRemoveFileConfirmation?c.confirm(b.options.dictRemoveFileConfirmation,function(){return b.removeFile(a)}):b.removeFile(a)}}(this),n=a.previewElement.querySelectorAll("[data-dz-remove]"),o=[],h=0,k=n.length;k>h;h++)e=n[h],o.push(e.addEventListener("click",d));return o}},removedfile:function(a){var b;return a.previewElement&&null!=(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c,d,e,f;if(a.previewElement){for(a.previewElement.classList.remove("dz-file-preview"),f=a.previewElement.querySelectorAll("[data-dz-thumbnail]"),d=0,e=f.length;e>d;d++)c=f[d],c.alt=a.name,c.src=b;return setTimeout(function(b){return function(){return a.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(a,b){var c,d,e,f,g;if(a.previewElement){for(a.previewElement.classList.add("dz-error"),"String"!=typeof b&&b.error&&(b=b.error),f=a.previewElement.querySelectorAll("[data-dz-errormessage]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.textContent=b);return g}},errormultiple:g,processing:function(a){return a.previewElement&&(a.previewElement.classList.add("dz-processing"),a._removeLink)?a._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:g,uploadprogress:function(a,b,c){var d,e,f,g,h;if(a.previewElement){for(g=a.previewElement.querySelectorAll("[data-dz-uploadprogress]"),h=[],e=0,f=g.length;f>e;e++)d=g[e],"PROGRESS"===d.nodeName?h.push(d.value=b):h.push(d.style.width=""+b+"%");return h}},totaluploadprogress:g,sending:g,sendingmultiple:g,success:function(a){return a.previewElement?a.previewElement.classList.add("dz-success"):void 0},successmultiple:g,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:g,complete:function(a){return a._removeLink&&(a._removeLink.textContent=this.options.dictRemoveFile),a.previewElement?a.previewElement.classList.add("dz-complete"):void 0},completemultiple:g,maxfilesexceeded:g,maxfilesreached:g,queuecomplete:g,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},d=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?i.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],d[a]=e}return d},c.prototype.getAcceptedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted&&e.push(a);return e},c.prototype.getRejectedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted||e.push(a);return e},c.prototype.getFilesWithStatus=function(a){var b,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.status===a&&f.push(b);return f},c.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(c.QUEUED)},c.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(c.UPLOADING)},c.prototype.getActiveFiles=function(){var a,b,d,e,f;for(e=this.files,f=[],b=0,d=e.length;d>b;b++)a=e[b],(a.status===c.UPLOADING||a.status===c.QUEUED)&&f.push(a);return f},c.prototype.init=function(){var a,b,d,e,f,g,h;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(c.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(d=function(a){return function(){return a.hiddenFileInput&&document.body.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(null==a.options.maxFiles||a.options.maxFiles>1)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.hiddenFileInput.className="dz-hidden-input",null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),null!=a.options.capture&&a.hiddenFileInput.setAttribute("capture",a.options.capture),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.body.appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var b,c,e,f;if(c=a.hiddenFileInput.files,c.length)for(e=0,f=c.length;f>e;e++)b=c[e],a.addFile(b);return d()})}}(this))(),this.URL=null!=(g=window.URL)?g:window.webkitURL,h=this.events,e=0,f=h.length;f>e;e++)a=h[e],this.on(a,this.options[a]);return this.on("uploadprogress",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("canceled",function(a){return function(b){return a.emit("complete",b)}}(this)),this.on("complete",function(a){return function(b){return 0===a.getUploadingFiles().length&&0===a.getQueuedFiles().length?setTimeout(function(){return a.emit("queuecomplete")},0):void 0}}(this)),b=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return function(b){return a.emit("dragstart",b)}}(this),dragenter:function(a){return function(c){return b(c),a.emit("dragenter",c)}}(this),dragover:function(a){return function(c){var d;try{d=c.dataTransfer.effectAllowed}catch(e){}return c.dataTransfer.dropEffect="move"===d||"linkMove"===d?"move":"copy",b(c),a.emit("dragover",c)}}(this),dragleave:function(a){return function(b){return a.emit("dragleave",b)}}(this),drop:function(a){return function(c){return b(c),a.drop(c)}}(this),dragend:function(a){return function(b){return a.emit("dragend",b)}}(this)}}],this.clickableElements.forEach(function(a){return function(b){return a.listeners.push({element:b,events:{click:function(d){return b!==a.element||d.target===a.element||c.elementInside(d.target,a.element.querySelector(".dz-message"))?a.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},c.prototype.destroy=function(){var a;return this.disable(),this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,c.instances.splice(c.instances.indexOf(this),1)},c.prototype.updateTotalUploadProgress=function(){var a,b,c,d,e,f,g,h;if(d=0,c=0,a=this.getActiveFiles(),a.length){for(h=this.getActiveFiles(),f=0,g=h.length;g>f;f++)b=h[f],d+=b.upload.bytesSent,c+=b.upload.total;e=100*d/c}else e=100;return this.emit("totaluploadprogress",e,c,d)},c.prototype._getParamName=function(a){return"function"==typeof this.options.paramName?this.options.paramName(a):""+this.options.paramName+(this.options.uploadMultiple?"["+a+"]":"")},c.prototype.getFallbackForm=function(){var a,b,d,e;return(a=this.getExistingFallback())?a:(d='<div class="dz-fallback">',this.options.dictFallbackText&&(d+="<p>"+this.options.dictFallbackText+"</p>"),d+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',b=c.createElement(d),"FORM"!==this.element.tagName?(e=c.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),e.appendChild(b)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:b)},c.prototype.getExistingFallback=function(){var a,b,c,d,e,f;for(b=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],/(^| )fallback($| )/.test(b.className))return b},f=["div","form"],d=0,e=f.length;e>d;d++)if(c=f[d],a=b(this.element.getElementsByTagName(c)))return a},c.prototype.setupEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.addEventListener(b,c,!1));return e}());return g},c.prototype.removeEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.removeEventListener(b,c,!1));return e}());return g},c.prototype.disable=function(){var a,b,c,d,e;for(this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")}),this.removeEventListeners(),d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.cancelUpload(a));return e},c.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},c.prototype.filesize=function(a){var b,c,d,e,f,g,h,i;for(g=["TB","GB","MB","KB","b"],d=e=null,c=h=0,i=g.length;i>h;c=++h)if(f=g[c],b=Math.pow(this.options.filesizeBase,4-c)/10,a>=b){d=a/Math.pow(this.options.filesizeBase,4-c),e=f;break}return d=Math.round(10*d)/10,"<strong>"+d+"</strong> "+e},c.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},c.prototype.drop=function(a){var b,c;a.dataTransfer&&(this.emit("drop",a),b=a.dataTransfer.files,b.length&&(c=a.dataTransfer.items,c&&c.length&&null!=c[0].webkitGetAsEntry?this._addFilesFromItems(c):this.handleFiles(b)))},c.prototype.paste=function(a){var b,c;if(null!=(null!=a&&null!=(c=a.clipboardData)?c.items:void 0))return this.emit("paste",a),b=a.clipboardData.items,b.length?this._addFilesFromItems(b):void 0},c.prototype.handleFiles=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addFile(b));return e},c.prototype._addFilesFromItems=function(a){var b,c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],null!=c.webkitGetAsEntry&&(b=c.webkitGetAsEntry())?b.isFile?f.push(this.addFile(c.getAsFile())):b.isDirectory?f.push(this._addFilesFromDirectory(b,b.name)):f.push(void 0):null!=c.getAsFile&&(null==c.kind||"file"===c.kind)?f.push(this.addFile(c.getAsFile())):f.push(void 0);return f},c.prototype._addFilesFromDirectory=function(a,b){var c,d;return c=a.createReader(),d=function(a){return function(c){var d,e,f;for(e=0,f=c.length;f>e;e++)d=c[e],d.isFile?d.file(function(c){return a.options.ignoreHiddenFiles&&"."===c.name.substring(0,1)?void 0:(c.fullPath=""+b+"/"+c.name,a.addFile(c))}):d.isDirectory&&a._addFilesFromDirectory(d,""+b+"/"+d.name)}}(this),c.readEntries(d,function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(a):void 0})},c.prototype.accept=function(a,b){return a.size>1024*this.options.maxFilesize*1024?b(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):c.isValidFile(a,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(b(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,b):b(this.options.dictInvalidFileType)},c.prototype.addFile=function(a){return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=c.ADDED,this.emit("addedfile",a),this._enqueueThumbnail(a),this.accept(a,function(b){return function(c){return c?(a.accepted=!1,b._errorProcessing([a],c)):(a.accepted=!0,b.options.autoQueue&&b.enqueueFile(a)),b._updateMaxFilesReachedClass()}}(this))},c.prototype.enqueueFiles=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.enqueueFile(b);return null},c.prototype.enqueueFile=function(a){if(a.status!==c.ADDED||a.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return a.status=c.QUEUED,this.options.autoProcessQueue?setTimeout(function(a){return function(){return a.processQueue()}}(this),0):void 0},c.prototype._thumbnailQueue=[],c.prototype._processingThumbnail=!1,c.prototype._enqueueThumbnail=function(a){return this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(a),setTimeout(function(a){return function(){return a._processThumbnailQueue()}}(this),0)):void 0},c.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(a){return function(){return a._processingThumbnail=!1,a._processThumbnailQueue()}}(this)))},c.prototype.removeFile=function(a){return a.status===c.UPLOADING&&this.cancelUpload(a),this.files=h(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},c.prototype.removeAllFiles=function(a){var b,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;e>d;d++)b=f[d],(b.status!==c.UPLOADING||a)&&this.removeFile(b);return null},c.prototype.createThumbnail=function(a,b){var c;return c=new FileReader,c.onload=function(d){return function(){return"image/svg+xml"===a.type?(d.emit("thumbnail",a,c.result),void(null!=b&&b())):d.createThumbnailFromUrl(a,c.result,b)}}(this),c.readAsDataURL(a)},c.prototype.createThumbnailFromUrl=function(a,b,c){var d;return d=document.createElement("img"),d.onload=function(b){return function(){var e,g,h,i,j,k,l,m;return a.width=d.width,a.height=d.height,h=b.options.resize.call(b,a),null==h.trgWidth&&(h.trgWidth=h.optWidth),null==h.trgHeight&&(h.trgHeight=h.optHeight),e=document.createElement("canvas"),g=e.getContext("2d"),e.width=h.trgWidth,e.height=h.trgHeight,f(g,d,null!=(j=h.srcX)?j:0,null!=(k=h.srcY)?k:0,h.srcWidth,h.srcHeight,null!=(l=h.trgX)?l:0,null!=(m=h.trgY)?m:0,h.trgWidth,h.trgHeight),i=e.toDataURL("image/png"),b.emit("thumbnail",a,i),null!=c?c():void 0}}(this),null!=c&&(d.onerror=c),d.src=b},c.prototype.processQueue=function(){
var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c));for(;b>a;){if(!d.length)return;this.processFile(d.shift()),a++}}},c.prototype.processFile=function(a){return this.processFiles([a])},c.prototype.processFiles=function(a){var b,d,e;for(d=0,e=a.length;e>d;d++)b=a[d],b.processing=!0,b.status=c.UPLOADING,this.emit("processing",b);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},c.prototype._getFilesWithXhr=function(a){var b,c;return c=function(){var c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.xhr===a&&f.push(b);return f}.call(this)},c.prototype.cancelUpload=function(a){var b,d,e,f,g,h,i;if(a.status===c.UPLOADING){for(d=this._getFilesWithXhr(a.xhr),e=0,g=d.length;g>e;e++)b=d[e],b.status=c.CANCELED;for(a.xhr.abort(),f=0,h=d.length;h>f;f++)b=d[f],this.emit("canceled",b);this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else((i=a.status)===c.ADDED||i===c.QUEUED)&&(a.status=c.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));return this.options.autoProcessQueue?this.processQueue():void 0},e=function(){var a,b;return b=arguments[0],a=2<=arguments.length?i.call(arguments,1):[],"function"==typeof b?b.apply(this,a):b},c.prototype.uploadFile=function(a){return this.uploadFiles([a])},c.prototype.uploadFiles=function(a){var b,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;for(w=new XMLHttpRequest,x=0,B=a.length;B>x;x++)b=a[x],b.xhr=w;p=e(this.options.method,a),u=e(this.options.url,a),w.open(p,u,!0),w.withCredentials=!!this.options.withCredentials,s=null,g=function(c){return function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],f.push(c._errorProcessing(a,s||c.options.dictResponseError.replace("{{statusCode}}",w.status),w));return f}}(this),t=function(c){return function(d){var e,f,g,h,i,j,k,l,m;if(null!=d)for(f=100*d.loaded/d.total,g=0,j=a.length;j>g;g++)b=a[g],b.upload={progress:f,total:d.total,bytesSent:d.loaded};else{for(e=!0,f=100,h=0,k=a.length;k>h;h++)b=a[h],(100!==b.upload.progress||b.upload.bytesSent!==b.upload.total)&&(e=!1),b.upload.progress=f,b.upload.bytesSent=b.upload.total;if(e)return}for(m=[],i=0,l=a.length;l>i;i++)b=a[i],m.push(c.emit("uploadprogress",b,f,b.upload.bytesSent));return m}}(this),w.onload=function(b){return function(d){var e;if(a[0].status!==c.CANCELED&&4===w.readyState){if(s=w.responseText,w.getResponseHeader("content-type")&&~w.getResponseHeader("content-type").indexOf("application/json"))try{s=JSON.parse(s)}catch(f){d=f,s="Invalid JSON response from server."}return t(),200<=(e=w.status)&&300>e?b._finished(a,s,d):g()}}}(this),w.onerror=function(b){return function(){return a[0].status!==c.CANCELED?g():void 0}}(this),r=null!=(G=w.upload)?G:w,r.onprogress=t,j={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&d(j,this.options.headers);for(h in j)i=j[h],w.setRequestHeader(h,i);if(f=new FormData,this.options.params){H=this.options.params;for(o in H)v=H[o],f.append(o,v)}for(y=0,C=a.length;C>y;y++)b=a[y],this.emit("sending",b,w,f);if(this.options.uploadMultiple&&this.emit("sendingmultiple",a,w,f),"FORM"===this.element.tagName)for(I=this.element.querySelectorAll("input, textarea, select, button"),z=0,D=I.length;D>z;z++)if(l=I[z],m=l.getAttribute("name"),n=l.getAttribute("type"),"SELECT"===l.tagName&&l.hasAttribute("multiple"))for(J=l.options,A=0,E=J.length;E>A;A++)q=J[A],q.selected&&f.append(m,q.value);else(!n||"checkbox"!==(K=n.toLowerCase())&&"radio"!==K||l.checked)&&f.append(m,l.value);for(k=F=0,L=a.length-1;L>=0?L>=F:F>=L;k=L>=0?++F:--F)f.append(this._getParamName(k),a[k],a[k].name);return w.send(f)},c.prototype._finished=function(a,b,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=c.SUCCESS,this.emit("success",e,b,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("successmultiple",a,b,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},c.prototype._errorProcessing=function(a,b,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=c.ERROR,this.emit("error",e,b,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("errormultiple",a,b,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},c}(b),a.version="4.0.1",a.options={},a.optionsForElement=function(b){return b.getAttribute("id")?a.options[c(b.getAttribute("id"))]:void 0},a.instances=[],a.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return a.dropzone},a.autoDiscover=!0,a.discover=function(){var b,c,d,e,f,g;for(document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],b=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],/(^| )dropzone($| )/.test(b.className)?f.push(d.push(b)):f.push(void 0);return f},b(document.getElementsByTagName("div")),b(document.getElementsByTagName("form"))),g=[],e=0,f=d.length;f>e;e++)c=d[e],a.optionsForElement(c)!==!1?g.push(new a(c)):g.push(void 0);return g},a.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],a.isBrowserSupported=function(){var b,c,d,e,f;if(b=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(f=a.blacklistedBrowsers,d=0,e=f.length;e>d;d++)c=f[d],c.test(navigator.userAgent)&&(b=!1);else b=!1;else b=!1;return b},h=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],c!==b&&f.push(c);return f},c=function(a){return a.replace(/[\-_](\w)/g,function(a){return a.charAt(1).toUpperCase()})},a.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},a.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1},a.getElement=function(a,b){var c;if("string"==typeof a?c=document.querySelector(a):null!=a.nodeType&&(c=a),null==c)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return c},a.getElements=function(a,b){var c,d,e,f,g,h,i,j;if(a instanceof Array){e=[];try{for(f=0,h=a.length;h>f;f++)d=a[f],e.push(this.getElement(d,b))}catch(k){c=k,e=null}}else if("string"==typeof a)for(e=[],j=document.querySelectorAll(a),g=0,i=j.length;i>g;g++)d=j[g],e.push(d);else null!=a.nodeType&&(e=[a]);if(null==e||!e.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return e},a.confirm=function(a,b,c){return window.confirm(a)?b():null!=c?c():void 0},a.isValidFile=function(a,b){var c,d,e,f,g;if(!b)return!0;for(b=b.split(","),d=a.type,c=d.replace(/\/.*$/,""),f=0,g=b.length;g>f;f++)if(e=b[f],e=e.trim(),"."===e.charAt(0)){if(-1!==a.name.toLowerCase().indexOf(e.toLowerCase(),a.name.length-e.length))return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(b){return this.each(function(){return new a(this,b)})}),"undefined"!=typeof module&&null!==module?module.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",e=function(a){var b,c,d,e,f,g,h,i,j,k;for(h=a.naturalWidth,g=a.naturalHeight,c=document.createElement("canvas"),c.width=1,c.height=g,d=c.getContext("2d"),d.drawImage(a,0,0),e=d.getImageData(0,0,1,g).data,k=0,f=g,i=g;i>k;)b=e[4*(i-1)+3],0===b?f=i:k=i,i=f+k>>1;return j=i/g,0===j?1:j},f=function(a,b,c,d,f,g,h,i,j,k){var l;return l=e(b),a.drawImage(b,c,d,f,g,h,i,j,k/l)},d=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){return"readystatechange"!==c.type||"complete"===d.readyState?(("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,void setTimeout(g,50)}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},a._autoDiscoverFunction=function(){return a.autoDiscover?a.discover():void 0},d(window,a._autoDiscoverFunction)}.call(this),!function(a,b){"use strict";function c(b){var c=a(this);if(n){b=a.extend({},o,b);for(var e=0,f=c.length;f>e;e++)d(c.eq(e),b)}return c}function d(b,c){c=a.extend({},c,b.data("dropper-options"));var d="";d+='<div class="dropper-dropzone">',d+=c.label,d+="</div>",d+='<input class="dropper-input" type="file"',c.maxQueue>1&&(d+=" multiple"),d+=">",b.addClass("dropper").append(d);var k=a.extend({$dropper:b,$input:b.find(".dropper-input"),queue:[],total:0,uploading:!1},c);b.on("click.dropper",".dropper-dropzone",k,e).on("dragenter.dropper",k,g).on("dragover.dropper",k,h).on("dragleave.dropper",k,i).on("drop.dropper",".dropper-dropzone",k,j).data("dropper",k),k.$input.on("change.dropper",k,f)}function e(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$input.trigger("click")}function f(a){a.stopPropagation(),a.preventDefault();var b=a.data,c=b.$input[0].files;c.length&&k(b,c)}function g(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$dropper.addClass("dropping")}function h(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$dropper.addClass("dropping")}function i(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$dropper.removeClass("dropping")}function j(a){a.preventDefault();var b=a.data,c=a.originalEvent.dataTransfer.files;b.$dropper.removeClass("dropping"),k(b,c)}function k(c,d){for(var e=[],f=0;f<d.length;f++){var g={index:c.total++,file:d[f],name:d[f].name,size:d[f].size,started:!1,complete:!1,error:!1,transfer:null};e.push(g),c.queue.push(g)}c.uploading||(a(b).on("beforeunload.dropper",function(){return"You have uploads pending, are you sure you want to leave this page?"}),c.uploading=!0),c.$dropper.trigger("start.dropper",[e]),l(c)}function l(c){var d=0,e=[];for(var f in c.queue)!c.queue.hasOwnProperty(f)||c.queue[f].complete||c.queue[f].error||e.push(c.queue[f]);c.queue=e;for(var g in c.queue)if(c.queue.hasOwnProperty(g)){if(!c.queue[g].started){var h=new FormData;h.append(c.postKey,c.queue[g].file);for(var i in c.postData)c.postData.hasOwnProperty(i)&&h.append(i,c.postData[i]);m(c,c.queue[g],h)}if(d++,d>=c.maxQueue)return;f++}0===d&&(a(b).off("beforeunload.dropper"),c.uploading=!1,c.$dropper.trigger("complete.dropper"))}function m(b,c,d){c.size>=b.maxSize?(c.error=!0,b.$dropper.trigger("fileError.dropper",[c,"Too large"]),l(b)):(c.started=!0,c.transfer=a.ajax({url:b.action,data:d,type:"POST",contentType:!1,processData:!1,cache:!1,xhr:function(){var d=a.ajaxSettings.xhr();return d.upload&&d.upload.addEventListener("progress",function(a){var d=0,e=a.loaded||a.position,f=a.total;a.lengthComputable&&(d=Math.ceil(e/f*100)),b.$dropper.trigger("fileProgress.dropper",[c,d])},!1),d},beforeSend:function(a){b.$dropper.trigger("fileStart.dropper",[c])},success:function(a,d,e){c.complete=!0,b.$dropper.trigger("fileComplete.dropper",[c,a]),l(b)},error:function(a,d,e){c.error=!0,b.$dropper.trigger("fileError.dropper",[c,e]),l(b)}}))}var n=b.File&&b.FileReader&&b.FileList,o={action:"",label:"Drag and drop files or click to select",maxQueue:2,maxSize:5242880,postData:{},postKey:"file"},p={defaults:function(b){return o=a.extend(o,b||{}),"object"==typeof this?a(this):!0}};a.fn.dropper=function(a){return p[a]?p[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a.dropper=function(a){"defaults"===a&&p.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window),HttpClient.prototype.createRequest=function(a,b,c,d){return{method:a,url:b,headers:c,body:d}},HttpClient.prototype.encodeParameters=function(a){var b="";for(var c in a)a.hasOwnProperty(c)&&(b.length>0&&(b+="&"),b+=encodeURI(c+"="+a[c]));return b},HttpClient.prototype.sendRequest=function(a){a.method=a.method||"GET",a.headers=a.headers||{};var b=new XMLHttpRequest;b.open(a.method,a.url,!0),b.setRequestHeader("Content-Type","application/vnd.api+json");for(var c in a.headers)a.headers.hasOwnProperty(c)&&b.setRequestHeader(c,a.headers.propr);return a.onload?b.onload=function(){a.onload(b)}:(a.onsuccess||a.onerror)&&(a.onsuccess=a.onsuccess||function(){},a.onerror=a.onerror||function(){},b.onload=function(){b.status>=200&&b.status<300?a.onsuccess(b.responseText,b.status,b):a.onerror(b.responseText,b.status,b)}),a.headers["Accept-Language"]||b.setRequestHeader("Accept-Language",document.documentElement.lang),a.body?("string"==typeof a.body?body=a.body:body=JSON.stringify(a.body),b.send(body)):b.send(),b},HttpClient.prototype.get=function(a,b,c){var d=this.createRequest("GET",a,b);d.async=!1,xhr=this.sendRequest(d)},JsonApiDataStoreModel.prototype.serialize=function(a){var b=this,c={data:{type:this._type}};return a=a||{},a.attributes=a.attributes||this._attributes,a.relationships=a.relationships||this._relationships,void 0!==this.id&&(c.data.id=this.id),0!==a.attributes.length&&(c.data.attributes={}),0!==a.relationships.length&&(c.data.relationships={}),void 0!==a.meta&&(c.data.meta=a.meta),a.attributes.forEach(function(a){c.data.attributes[a]=b[a]}),a.relationships.forEach(function(a){function d(a){return{type:a._type,id:a.id}}b[a].constructor===Array?c.data.relationships[a]={data:b[a].map(d)}:c.data.relationships[a]={data:d(b[a])}}),c},JsonApiDataStoreModel.prototype.setAttribute=function(a,b){void 0===this[a]&&this._attributes.push(a),this[a]=b},JsonApiDataStoreModel.prototype.setRelationship=function(a,b){void 0===this[a]&&this._relationships.push(a),this[a]=b},JsonApiDataStore.prototype.destroy=function(a){delete this.graph[a._type][a.id]},JsonApiDataStore.prototype.find=function(a,b){return this.graph[a]&&this.graph[a][b]?this.graph[a][b]:null},JsonApiDataStore.prototype.findAll=function(a){var b=this;return this.graph[a]?Object.keys(b.graph[a]).map(function(c){return b.graph[a][c]}):[]},JsonApiDataStore.prototype.reset=function(){this.graph={}},JsonApiDataStore.prototype.initModel=function(a,b){return this.graph[a]=this.graph[a]||{},this.graph[a][b]=this.graph[a][b]||new JsonApiDataStoreModel(a,b),this.graph[a][b]},JsonApiDataStore.prototype.syncRecord=function(a){function b(a){if(!d.find(a.type,a.id)){var b=d.initModel(a.type,a.id);b._placeHolder=!0}return d.graph[a.type][a.id]}var c,d=this,e=this.initModel(a.type,a.id);delete e._placeHolder;for(c in a.attributes)e._attributes.push(c),e[c]=a.attributes[c];if(a.relationships)for(c in a.relationships){var f=a.relationships[c];void 0!==f.data&&(e._relationships.push(c),null===f.data?e[c]=null:f.data.constructor===Array?e[c]=f.data.map(b):e[c]=b(f.data)),f.links}return a.meta&&(e._meta=a.meta),e},JsonApiDataStore.prototype.sync=function(a){var b=a.data,c=this.syncRecord.bind(this);return b?(a.included&&a.included.map(c),b.constructor===Array?b.map(c):c(b)):[]},JsonApiClient.prototype.find=function(a,b){return b?this.store.find(a,b):this.store.findAll(a)},JsonApiClient.prototype.load=function(a,b,c,d){var e=this.url+"/"+a;b&&(e+="/"+b),this.sendRequest("GET",e,null,c,d)},JsonApiClient.prototype.loadRelationship=function(a,b,c,d,e){var f=this.url+"/"+a+"/"+b+"/"+c;this.sendRequest("GET",f,null,d,e)},JsonApiClient.prototype.save=function(a,b,c){if(a=a.serialize(),!a.data&&!a.data.type)throw new Exception("Invalid data provided");var d="POST",e=this.url+"/"+a.data.type;a.data.id&&(d="PATCH",e+="/"+a.data.id),this.sendRequest(d,e,a,b,c)},JsonApiClient.prototype.saveBulk=function(a,b,c,d){var e={data:[]};for(var f in a){var g=a[f].serialize();if(!g.data||!g.data.type||g.data.type!=b)throw new Exception("Invalid data provided");e.data.push(g.data)}var h="POST",i=this.url+"/"+b;this.sendRequest(h,i,e,c,d)},JsonApiClient.prototype.sendRequest=function(a,b,c,d,e){var f=this,g=this.client.createRequest(a,b,{"Content-Type":"application/vnd.api+json"});g.type="json",c&&(g.body=c),g.onsuccess=function(a,b,c){a&&(a=f.store.sync(JSON.parse(a))),d(a)},g.onerror=e,this.client.sendRequest(g)},function(){function a(a){return null==a?"":a+""}function b(a){return ca[a]}function c(a){return"\\"+ea[a]}function d(a){return!!a&&"object"==typeof a}function e(){}function f(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}function g(a,b,c,d){return a!==D&&sa.call(d,c)?a:b}function h(a,b,c){for(var d=-1,e=Fa(b),f=e.length;++d<f;){var g=e[d],h=a[g],i=c(h,b[g],g,a,b);(i===i?i===h:h!==h)&&(h!==D||g in a)||(a[g]=i)}return a}function i(a,b){return null==b?a:j(b,Fa(b),a)}function j(a,b,c){c||(c={});for(var d=-1,e=b.length;++d<e;){var f=b[d];c[f]=a[f]}return c}function k(a){return function(b){return null==b?D:s(b)[a]}}function l(a,b){for(var c=-1,d=b.length,e=Array(d);++c<d;)e[c]=a[b[c]];return e}function m(a,b){var c=null==a?D:a[b];return y(c)?c:D}function n(a){return null!=a&&q(Da(a))}function o(a,b){return a="number"==typeof a||Z.test(a)?+a:-1,b=null==b?Aa:b,a>-1&&a%1==0&&b>a}function p(a,b,c){if(!x(c))return!1;var d=typeof b;if("number"==d?n(c)&&o(b,c.length):"string"==d&&b in c){var e=c[b];return a===a?a===e:e!==e}return!1}function q(a){return"number"==typeof a&&a>-1&&a%1==0&&Aa>=a}function r(a){for(var b=A(a),c=b.length,d=c&&a.length,e=!!d&&q(d)&&(Ea(a)||u(a)||z(a)),f=-1,g=[];++f<c;){var h=b[f];(e&&o(h,d)||sa.call(a,h))&&g.push(h)}return g}function s(a){if(e.support.unindexedChars&&z(a)){for(var b=-1,c=a.length,d=Object(a);++b<c;)d[b]=a.charAt(b);return d}return x(a)?a:Object(a)}function t(a,b){if("function"!=typeof a)throw new TypeError(F);return b=za(b===D?a.length-1:+b||0,0),function(){for(var c=arguments,d=-1,e=za(c.length-b,0),f=Array(e);++d<e;)f[d]=c[b+d];switch(b){case 0:return a.call(this,f);case 1:return a.call(this,c[0],f);case 2:return a.call(this,c[0],c[1],f)}var g=Array(b+1);for(d=-1;++d<b;)g[d]=c[d];return g[b]=f,a.apply(this,g)}}function u(a){return d(a)&&n(a)&&sa.call(a,"callee")&&!va.call(a,"callee")}function v(a){return d(a)&&"string"==typeof a.message&&ta.call(a)==J}function w(a){return x(a)&&ta.call(a)==K}function x(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function y(a){return null==a?!1:w(a)?ua.test(ra.call(a)):d(a)&&(ma(a)?ua:Y).test(a)}function z(a){return"string"==typeof a||d(a)&&ta.call(a)==O}function A(a){if(null==a)return[];x(a)||(a=Object(a));var b=a.length,c=e.support;b=b&&q(b)&&(Ea(a)||u(a)||z(a))&&b||0;for(var d=a.constructor,f=-1,g=w(d)&&d.prototype||pa,h=g===a,i=Array(b),j=b>0,k=c.enumErrorProps&&(a===oa||a instanceof Error),l=c.enumPrototypes&&w(a);++f<b;)i[f]=f+"";for(var m in a)l&&"prototype"==m||k&&("message"==m||"name"==m)||j&&o(m,b)||"constructor"==m&&(h||!sa.call(a,m))||i.push(m);if(c.nonEnumShadows&&a!==pa){var n=a===qa?O:a===oa?J:ta.call(a),p=Ba[n]||Ba[M];for(n==M&&(g=pa),b=aa.length;b--;){m=aa[b];var r=p[m];h&&r||(r?!sa.call(a,m):a[m]===g[m])||i.push(m)}}return i}function B(c){return c=a(c),c&&T.test(c)?c.replace(S,b):c}function C(b,d,f){var j=e.templateSettings;f&&p(b,d,f)&&(d=f=D),b=a(b),d=h(i({},f||d),j,g);var k,m,n=h(i({},d.imports),j.imports,g),o=Fa(n),q=l(n,o),r=0,s=d.interpolate||$,t="__p += '",u=RegExp((d.escape||$).source+"|"+s.source+"|"+(s===W?X:$).source+"|"+(d.evaluate||$).source+"|$","g"),w="//# sourceURL="+("sourceURL"in d?d.sourceURL:"lodash.templateSources["+ ++ba+"]")+"\n";b.replace(u,function(a,d,e,f,g,h){return e||(e=f),t+=b.slice(r,h).replace(_,c),d&&(k=!0,t+="' +\n__e("+d+") +\n'"),g&&(m=!0,t+="';\n"+g+";\n__p += '"),e&&(t+="' +\n((__t = ("+e+")) == null ? '' : __t) +\n'"),r=h+a.length,a}),t+="';\n";var x=d.variable;x||(t="with (obj) {\n"+t+"\n}\n"),t=(m?t.replace(P,""):t).replace(Q,"$1").replace(R,"$1;"),t="function("+(x||"obj")+") {\n"+(x?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(k?", __e = _.escape":"")+(m?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+t+"return __p\n}";var y=Ga(function(){return Function(o,w+"return "+t).apply(D,q)});if(y.source=t,v(y))throw y;return y}var D,E="3.10.1",F="Expected a function",G="[object Array]",H="[object Boolean]",I="[object Date]",J="[object Error]",K="[object Function]",L="[object Number]",M="[object Object]",N="[object RegExp]",O="[object String]",P=/\b__p \+= '';/g,Q=/\b(__p \+=) '' \+/g,R=/(__e\(.*?\)|\b__t\)) \+\n'';/g,S=/[&<>"'`]/g,T=RegExp(S.source),U=/<%-([\s\S]+?)%>/g,V=/<%([\s\S]+?)%>/g,W=/<%=([\s\S]+?)%>/g,X=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Y=/^\[object .+?Constructor\]$/,Z=/^\d+$/,$=/($^)/,_=/['\n\r\u2028\u2029\\]/g,aa=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],ba=-1,ca={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},da={"function":!0,object:!0},ea={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},fa=da[typeof exports]&&exports&&!exports.nodeType&&exports,ga=da[typeof module]&&module&&!module.nodeType&&module,ha=fa&&ga&&"object"==typeof global&&global&&global.Object&&global,ia=da[typeof self]&&self&&self.Object&&self,ja=da[typeof window]&&window&&window.Object&&window,ka=ga&&ga.exports===fa&&fa,la=ha||ja!==(this&&this.window)&&ja||ia||this,ma=function(){try{Object({toString:0}+"")}catch(a){return function(){return!1}}return function(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}}(),na=Array.prototype,oa=Error.prototype,pa=Object.prototype,qa=String.prototype,ra=Function.prototype.toString,sa=pa.hasOwnProperty,ta=pa.toString,ua=RegExp("^"+ra.call(sa).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),va=pa.propertyIsEnumerable,wa=na.splice,xa=m(Array,"isArray"),ya=m(Object,"keys"),za=Math.max,Aa=9007199254740991,Ba={};Ba[G]=Ba[I]=Ba[L]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},Ba[H]=Ba[O]={constructor:!0,toString:!0,valueOf:!0},Ba[J]=Ba[K]=Ba[N]={constructor:!0,toString:!0},Ba[M]={constructor:!0},f(aa,function(a){for(var b in Ba)if(sa.call(Ba,b)){var c=Ba[b];c[a]=sa.call(c,a)}});var Ca=e.support={};!function(a){var b=function(){this.x=a},c={0:a,length:a},d=[];b.prototype={valueOf:a,y:a};for(var e in new b)d.push(e);Ca.enumErrorProps=va.call(oa,"message")||va.call(oa,"name"),Ca.enumPrototypes=va.call(b,"prototype"),Ca.nonEnumShadows=!/valueOf/.test(d),Ca.spliceObjects=(wa.call(c,0,1),!c[0]),Ca.unindexedChars="x"[0]+Object("x")[0]!="xx"}(1,0),e.templateSettings={escape:U,evaluate:V,interpolate:W,variable:"",imports:{_:e}};var Da=k("length"),Ea=xa||function(a){return d(a)&&q(a.length)&&ta.call(a)==G},Fa=ya?function(a){var b=null==a?D:a.constructor;return"function"==typeof b&&b.prototype===a||("function"==typeof a?e.support.enumPrototypes:n(a))?r(a):x(a)?ya(a):[]}:r,Ga=t(function(a,b){try{return a.apply(D,b)}catch(c){return v(c)?c:new Error(c)}});e.keys=Fa,e.keysIn=A,e.restParam=t,e.attempt=Ga,e.escape=B,e.isArguments=u,e.isArray=Ea,e.isError=v,e.isFunction=w,e.isNative=y,e.isObject=x,e.isString=z,e.template=C,e.VERSION=E,"function"==typeof define&&"object"==typeof define.amd&&define.amd?(la._=e,define(function(){return e})):fa&&ga?ka?(ga.exports=e)._=e:fa._=e:la._=e}.call(this),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(a,b){return a.parsleyAdaptedCallback||(a.parsleyAdaptedCallback=function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(this),a.apply(b||q,c)}),a.parsleyAdaptedCallback}function c(a){return 0===a.lastIndexOf(s,0)?a.substr(s.length):a}"undefined"==typeof a&&"undefined"!=typeof window.jQuery&&(a=window.jQuery);var d=1,e={},f={attr:function(a,b,c){var d,e,f=new RegExp("^"+b,"i");if("undefined"==typeof c)c={};else for(var g in c)c.hasOwnProperty(g)&&delete c[g];if("undefined"==typeof a||"undefined"==typeof a[0])return c;e=a[0].attributes;for(var g=e.length;g--;)d=e[g],d&&d.specified&&f.test(d.name)&&(c[this.camelize(d.name.slice(b.length))]=this.deserializeValue(d.value));return c},checkAttr:function(a,b,c){return a.is("["+b+c+"]")},setAttr:function(a,b,c,d){a[0].setAttribute(this.dasherize(b+c),String(d))},generateID:function(){return""+d++},deserializeValue:function(b){var c;try{return b?"true"==b||("false"==b?!1:"null"==b?null:isNaN(c=Number(b))?/^[\[\{]/.test(b)?a.parseJSON(b):b:c):b}catch(d){return b}},camelize:function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},dasherize:function(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){window.console&&"function"==typeof window.console.warn&&window.console.warn.apply(window.console,arguments)},warnOnce:function(a){e[a]||(e[a]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){e={}},objectCreate:Object.create||function(){var a=function(){};return function(b){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof b)throw TypeError("Argument must be an object");a.prototype=b;var c=new a;return a.prototype=null,c}}()},g={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"},h=function(){};h.prototype={asyncSupport:!1,actualizeOptions:function(){return f.attr(this.$element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(a){this.domOptions=f.objectCreate(this.parent.options),this.options=f.objectCreate(this.domOptions);for(var b in a)a.hasOwnProperty(b)&&(this.options[b]=a[b]);this.actualizeOptions()},validateThroughValidator:function(a,b,c){return window.ParsleyValidator.validate(a,b,c)},_listeners:null,on:function(a,b){this._listeners=this._listeners||{};var c=this._listeners[a]=this._listeners[a]||[];return c.push(b),this},subscribe:function(b,c){a.listenTo(this,b.toLowerCase(),c)},off:function(a,b){var c=this._listeners&&this._listeners[a];if(c)if(b)for(var d=c.length;d--;)c[d]===b&&c.splice(d,1);else delete this._listeners[a];return this},unsubscribe:function(b){a.unsubscribeTo(this,b.toLowerCase())},trigger:function(a,b){b=b||this;var c,d=this._listeners&&this._listeners[a];if(d)for(var e=d.length;e--;)if(c=d[e].call(b,b),c===!1)return c;return this.parent?this.parent.trigger(a,b):!0},reset:function(){if("ParsleyForm"!==this.__class__)return this._trigger("reset");for(var a=0;a<this.fields.length;a++)this.fields[a]._trigger("reset");this._trigger("reset")},destroy:function(){if("ParsleyForm"!==this.__class__)return this.$element.removeData("Parsley"),this.$element.removeData("ParsleyFieldMultiple"),void this._trigger("destroy");for(var a=0;a<this.fields.length;a++)this.fields[a].destroy();this.$element.removeData("Parsley"),this._trigger("destroy")},_findRelatedMultiple:function(){return this.parent.$element.find("["+this.options.namespace+'multiple="'+this.options.multiple+'"]')}};var i=function(){var a={},b=function(a){this.__class__="Validator",this.__version__="1.0.1",this.options=a||{},this.bindingKey=this.options.bindingKey||"_validatorjsConstraint"};b.prototype={constructor:b,validate:function(a,b,c){if("string"!=typeof a&&"object"!=typeof a)throw new Error("You must validate an object or a string");return"string"==typeof a||g(a)?this._validateString(a,b,c):this.isBinded(a)?this._validateBindedObject(a,b):this._validateObject(a,b,c)},bind:function(a,b){if("object"!=typeof a)throw new Error("Must bind a Constraint to an object");return a[this.bindingKey]=new c(b),this},unbind:function(a){return"undefined"==typeof a._validatorjsConstraint?this:(delete a[this.bindingKey],this)},isBinded:function(a){return"undefined"!=typeof a[this.bindingKey]},getBinded:function(a){return this.isBinded(a)?a[this.bindingKey]:null},_validateString:function(a,b,c){var f,h=[];g(b)||(b=[b]);for(var i=0;i<b.length;i++){if(!(b[i]instanceof e))throw new Error("You must give an Assert or an Asserts array to validate a string");f=b[i].check(a,c),f instanceof d&&h.push(f)}return h.length?h:!0},_validateObject:function(a,b,d){if("object"!=typeof b)throw new Error("You must give a constraint to validate an object");return b instanceof c?b.check(a,d):new c(b).check(a,d)},_validateBindedObject:function(a,b){return a[this.bindingKey].check(a,b)}},b.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var c=function(a,b){if(this.__class__="Constraint",this.options=b||{},this.nodes={},a)try{this._bootstrap(a)}catch(c){throw new Error("Should give a valid mapping object to Constraint",c,a)}};c.prototype={constructor:c,check:function(a,b){var c,d={};for(var h in this.nodes){for(var i=!1,j=this.get(h),k=g(j)?j:[j],l=k.length-1;l>=0;l--)"Required"!==k[l].__class__||(i=k[l].requiresValidation(b));if(this.has(h,a)||this.options.strict||i)try{this.has(h,this.options.strict||i?a:void 0)||(new e).HaveProperty(h).validate(a),c=this._check(h,a[h],b),(g(c)&&c.length>0||!g(c)&&!f(c))&&(d[h]=c)}catch(m){d[h]=m}}return f(d)?!0:d},add:function(a,b){if(b instanceof e||g(b)&&b[0]instanceof e)return this.nodes[a]=b,this;if("object"==typeof b&&!g(b))return this.nodes[a]=b instanceof c?b:new c(b),this;throw new Error("Should give an Assert, an Asserts array, a Constraint",b)},has:function(a,b){return b="undefined"!=typeof b?b:this.nodes,"undefined"!=typeof b[a]},get:function(a,b){return this.has(a)?this.nodes[a]:b||null},remove:function(a){var b=[];for(var c in this.nodes)c!==a&&(b[c]=this.nodes[c]);return this.nodes=b,this},_bootstrap:function(a){if(a instanceof c)return this.nodes=a.nodes;for(var b in a)this.add(b,a[b])},_check:function(a,b,d){if(this.nodes[a]instanceof e)return this._checkAsserts(b,[this.nodes[a]],d);if(g(this.nodes[a]))return this._checkAsserts(b,this.nodes[a],d);if(this.nodes[a]instanceof c)return this.nodes[a].check(b,d);throw new Error("Invalid node",this.nodes[a])},_checkAsserts:function(a,b,c){for(var d,e=[],f=0;f<b.length;f++)d=b[f].check(a,c),"undefined"!=typeof d&&!0!==d&&e.push(d);return e}};var d=function(a,b,c){if(this.__class__="Violation",!(a instanceof e))throw new Error("Should give an assertion implementing the Assert interface");this.assert=a,this.value=b,"undefined"!=typeof c&&(this.violation=c)};d.prototype={show:function(){var a={assert:this.assert.__class__,value:this.value};return this.violation&&(a.violation=this.violation),a},__toString:function(){return"undefined"!=typeof this.violation&&(this.violation='", '+this.getViolation().constraint+" expected was "+this.getViolation().expected),this.assert.__class__+' assert failed for "'+this.value+this.violation||""},getViolation:function(){var a,b;for(a in this.violation)b=this.violation[a];return{constraint:a,expected:b}}};var e=function(a){this.__class__="Assert",this.__parentClass__=this.__class__,this.groups=[],"undefined"!=typeof a&&this.addGroup(a)};e.prototype={construct:e,requiresValidation:function(a){return a&&!this.hasGroup(a)?!1:!a&&this.hasGroups()?!1:!0},check:function(a,b){if(this.requiresValidation(b))try{
return this.validate(a,b)}catch(c){return c}},hasGroup:function(a){return g(a)?this.hasOneOf(a):"Any"===a?!0:this.hasGroups()?-1!==this.groups.indexOf(a):"Default"===a},hasOneOf:function(a){for(var b=0;b<a.length;b++)if(this.hasGroup(a[b]))return!0;return!1},hasGroups:function(){return this.groups.length>0},addGroup:function(a){return g(a)?this.addGroups(a):(this.hasGroup(a)||this.groups.push(a),this)},removeGroup:function(a){for(var b=[],c=0;c<this.groups.length;c++)a!==this.groups[c]&&b.push(this.groups[c]);return this.groups=b,this},addGroups:function(a){for(var b=0;b<a.length;b++)this.addGroup(a[b]);return this},HaveProperty:function(a){return this.__class__="HaveProperty",this.node=a,this.validate=function(a){if("undefined"==typeof a[this.node])throw new d(this,a,{value:this.node});return!0},this},Blank:function(){return this.__class__="Blank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""!==a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Callback:function(a){if(this.__class__="Callback",this.arguments=Array.prototype.slice.call(arguments),1===this.arguments.length?this.arguments=[]:this.arguments.splice(0,1),"function"!=typeof a)throw new Error("Callback must be instanciated with a function");return this.fn=a,this.validate=function(a){var b=this.fn.apply(this,[a].concat(this.arguments));if(!0!==b)throw new d(this,a,{result:b});return!0},this},Choice:function(a){if(this.__class__="Choice",!g(a)&&"function"!=typeof a)throw new Error("Choice must be instanciated with an array or a function");return this.list=a,this.validate=function(a){for(var b="function"==typeof this.list?this.list():this.list,c=0;c<b.length;c++)if(a===b[c])return!0;throw new d(this,a,{choices:b})},this},Collection:function(a){return this.__class__="Collection",this.constraint="undefined"!=typeof a?a instanceof e?a:new c(a):!1,this.validate=function(a,c){var e,h=new b,i=0,j={},k=this.groups.length?this.groups:c;if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});for(var l=0;l<a.length;l++)e=this.constraint?h.validate(a[l],this.constraint,k):h.validate(a[l],k),f(e)||(j[i]=e),i++;return f(j)?!0:j},this},Count:function(a){return this.__class__="Count",this.count=a,this.validate=function(a){if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});var c="function"==typeof this.count?this.count(a):this.count;if(isNaN(Number(c)))throw new Error("Count must be a valid interger",c);if(c!==a.length)throw new d(this,a,{count:c});return!0},this},Email:function(){return this.__class__="Email",this.validate=function(a){var c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},EqualTo:function(a){if(this.__class__="EqualTo","undefined"==typeof a)throw new Error("EqualTo must be instanciated with a value or a function");return this.reference=a,this.validate=function(a){var b="function"==typeof this.reference?this.reference(a):this.reference;if(b!==a)throw new d(this,a,{value:b});return!0},this},GreaterThan:function(a){if(this.__class__="GreaterThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>=a)throw new d(this,a,{threshold:this.threshold});return!0},this},GreaterThanOrEqual:function(a){if(this.__class__="GreaterThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>a)throw new d(this,a,{threshold:this.threshold});return!0},this},InstanceOf:function(a){if(this.__class__="InstanceOf","undefined"==typeof a)throw new Error("InstanceOf must be instanciated with a value");return this.classRef=a,this.validate=function(a){if(1!=a instanceof this.classRef)throw new d(this,a,{classRef:this.classRef});return!0},this},Length:function(a){if(this.__class__="Length",!a.min&&!a.max)throw new Error("Lenth assert must be instanciated with a { min: x, max: y } object");return this.min=a.min,this.max=a.max,this.validate=function(a){if("string"!=typeof a&&!g(a))throw new d(this,a,{value:b.errorCode.must_be_a_string_or_array});if("undefined"!=typeof this.min&&this.min===this.max&&a.length!==this.min)throw new d(this,a,{min:this.min,max:this.max});if("undefined"!=typeof this.max&&a.length>this.max)throw new d(this,a,{max:this.max});if("undefined"!=typeof this.min&&a.length<this.min)throw new d(this,a,{min:this.min});return!0},this},LessThan:function(a){if(this.__class__="LessThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<=a)throw new d(this,a,{threshold:this.threshold});return!0},this},LessThanOrEqual:function(a){if(this.__class__="LessThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<a)throw new d(this,a,{threshold:this.threshold});return!0},this},NotNull:function(){return this.__class__="NotNull",this.validate=function(a){if(null===a||"undefined"==typeof a)throw new d(this,a);return!0},this},NotBlank:function(){return this.__class__="NotBlank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""===a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Null:function(){return this.__class__="Null",this.validate=function(a){if(null!==a)throw new d(this,a);return!0},this},Range:function(a,b){if(this.__class__="Range","undefined"==typeof a||"undefined"==typeof b)throw new Error("Range assert expects min and max values");return this.min=a,this.max=b,this.validate=function(a){try{return"string"==typeof a&&isNaN(Number(a))||g(a)?(new e).Length({min:this.min,max:this.max}).validate(a):(new e).GreaterThanOrEqual(this.min).validate(a)&&(new e).LessThanOrEqual(this.max).validate(a),!0}catch(b){throw new d(this,a,b.violation)}return!0},this},Regexp:function(a,c){if(this.__class__="Regexp","undefined"==typeof a)throw new Error("You must give a regexp");return this.regexp=a,this.flag=c||"",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!new RegExp(this.regexp,this.flag).test(a))throw new d(this,a,{regexp:this.regexp,flag:this.flag});return!0},this},Required:function(){return this.__class__="Required",this.validate=function(a){if("undefined"==typeof a)throw new d(this,a);try{"string"==typeof a?(new e).NotNull().validate(a)&&(new e).NotBlank().validate(a):!0===g(a)&&(new e).Length({min:1}).validate(a)}catch(b){throw new d(this,a)}return!0},this},Unique:function(a){return this.__class__="Unique","object"==typeof a&&(this.key=a.key),this.validate=function(a){var c,e=[];if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});for(var f=0;f<a.length;f++)if(c="object"==typeof a[f]?a[f][this.key]:a[f],"undefined"!=typeof c){if(-1!==e.indexOf(c))throw new d(this,a,{value:c});e.push(c)}return!0},this}},a.Assert=e,a.Validator=b,a.Violation=d,a.Constraint=c,Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1});var f=function(a){for(var b in a)return!1;return!0},g=function(a){return"[object Array]"===Object.prototype.toString.call(a)};return"function"==typeof define&&define.amd?define("vendors/validator.js/dist/validator",[],function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window["undefined"!=typeof validatorjs_ns?validatorjs_ns:"Validator"]=a,a}();i="undefined"!=typeof i?i:"undefined"!=typeof module?module.exports:null;var j=function(a,b){this.__class__="ParsleyValidator",this.Validator=i,this.locale="en",this.init(a||{},b||{})};j.prototype={init:function(b,c){this.catalog=c,this.validators=a.extend({},this.validators);for(var d in b)this.addValidator(d,b[d].fn,b[d].priority,b[d].requirementsTransformer);window.Parsley.trigger("parsley:validator:init")},setLocale:function(a){if("undefined"==typeof this.catalog[a])throw new Error(a+" is not available in the catalog");return this.locale=a,this},addCatalog:function(a,b,c){return"object"==typeof b&&(this.catalog[a]=b),!0===c?this.setLocale(a):this},addMessage:function(a,b,c){return"undefined"==typeof this.catalog[a]&&(this.catalog[a]={}),this.catalog[a][b.toLowerCase()]=c,this},validate:function(){return(new this.Validator.Validator).validate.apply(new i.Validator,arguments)},addValidator:function(a,b,c,d){if(this.validators[a])f.warn('Validator "'+a+'" is already defined.');else if(g.hasOwnProperty(a))return void f.warn('"'+a+'" is a restricted keyword and is not a valid validator name.');return this._setValidator(a,b,c,d)},updateValidator:function(a,b,c,d){return this.validators[a]?this._setValidator(a,b,c,d):(f.warn('Validator "'+a+'" is not already defined.'),this.addValidator(a,b,c,d))},removeValidator:function(a){return this.validators[a]||f.warn('Validator "'+a+'" is not defined.'),delete this.validators[a],this},_setValidator:function(b,c,d,e){return this.validators[b]=function(b){return a.extend((new i.Assert).Callback(c,b),{priority:d,requirementsTransformer:e})},this},getErrorMessage:function(a){var b;if("type"===a.name){var c=this.catalog[this.locale][a.name]||{};b=c[a.requirements]}else b=this.formatMessage(this.catalog[this.locale][a.name],a.requirements);return b||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(a,b){if("object"==typeof b){for(var c in b)a=this.formatMessage(a,b[c]);return a}return"string"==typeof a?a.replace(new RegExp("%s","i"),b):""},validators:{notblank:function(){return a.extend((new i.Assert).NotBlank(),{priority:2})},required:function(){return a.extend((new i.Assert).Required(),{priority:512})},type:function(b){var c;switch(b){case"email":c=(new i.Assert).Email();break;case"range":case"number":c=(new i.Assert).Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":c=(new i.Assert).Regexp("^-?\\d+$");break;case"digits":c=(new i.Assert).Regexp("^\\d+$");break;case"alphanum":c=(new i.Assert).Regexp("^\\w+$","i");break;case"url":c=(new i.Assert).Regexp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i");break;default:throw new Error("validator type `"+b+"` is not supported")}return a.extend(c,{priority:256})},pattern:function(b){var c="";return/^\/.*\/(?:[gimy]*)$/.test(b)&&(c=b.replace(/.*\/([gimy]*)$/,"$1"),b=b.replace(new RegExp("^/(.*?)/"+c+"$"),"$1")),a.extend((new i.Assert).Regexp(b,c),{priority:64})},minlength:function(b){return a.extend((new i.Assert).Length({min:b}),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},maxlength:function(b){return a.extend((new i.Assert).Length({max:b}),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},length:function(b){return a.extend((new i.Assert).Length({min:b[0],max:b[1]}),{priority:32})},mincheck:function(a){return this.minlength(a)},maxcheck:function(a){return this.maxlength(a)},check:function(a){return this.length(a)},min:function(b){return a.extend((new i.Assert).GreaterThanOrEqual(b),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},max:function(b){return a.extend((new i.Assert).LessThanOrEqual(b),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},range:function(b){return a.extend((new i.Assert).Range(b[0],b[1]),{priority:32,requirementsTransformer:function(){for(var a=0;a<b.length;a++)b[a]="string"!=typeof b[a]||isNaN(b[a])?b[a]:parseInt(b[a],10);return b}})},equalto:function(b){return a.extend((new i.Assert).EqualTo(b),{priority:256,requirementsTransformer:function(){return a(b).length?a(b).val():b}})}}};var k=function(){this.__class__="ParsleyUI"};k.prototype={listen:function(){var a=this;return window.Parsley.on("form:init",function(){a.setupForm(this)}).on("field:init",function(){a.setupField(this)}).on("field:validated",function(){a.reflow(this)}).on("form:validated",function(){a.focus(this)}).on("field:reset",function(){a.reset(this)}).on("form:destroy",function(){a.destroy(this)}).on("field:destroy",function(){a.destroy(this)}),this},reflow:function(a){if("undefined"!=typeof a._ui&&!1!==a._ui.active){var b=this._diff(a.validationResult,a._ui.lastValidationResult);a._ui.lastValidationResult=a.validationResult,a._ui.validatedOnce=!0,this.manageStatusClass(a),this.manageErrorsMessages(a,b),this.actualizeTriggers(a),(b.kept.length||b.added.length)&&!0!==a._ui.failedOnce&&this.manageFailingFieldTrigger(a)}},getErrorsMessages:function(a){if(!0===a.validationResult)return[];for(var b=[],c=0;c<a.validationResult.length;c++)b.push(this._getErrorMessage(a,a.validationResult[c].assert));return b},manageStatusClass:function(a){a.hasConstraints()&&a.needsValidation()&&!0===a.validationResult?this._successClass(a):a.validationResult.length>0?this._errorClass(a):this._resetClass(a)},manageErrorsMessages:function(b,c){if("undefined"==typeof b.options.errorsMessagesDisabled){if("undefined"!=typeof b.options.errorMessage)return c.added.length||c.kept.length?(this._insertErrorWrapper(b),0===b._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&b._ui.$errorsWrapper.append(a(b.options.errorTemplate).addClass("parsley-custom-error-message")),b._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(b.options.errorMessage)):b._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove();for(var d=0;d<c.removed.length;d++)this.removeError(b,c.removed[d].assert.name,!0);for(d=0;d<c.added.length;d++)this.addError(b,c.added[d].assert.name,void 0,c.added[d].assert,!0);for(d=0;d<c.kept.length;d++)this.updateError(b,c.kept[d].assert.name,void 0,c.kept[d].assert,!0)}},addError:function(b,c,d,e,f){this._insertErrorWrapper(b),b._ui.$errorsWrapper.addClass("filled").append(a(b.options.errorTemplate).addClass("parsley-"+c).html(d||this._getErrorMessage(b,e))),!0!==f&&this._errorClass(b)},updateError:function(a,b,c,d,e){a._ui.$errorsWrapper.addClass("filled").find(".parsley-"+b).html(c||this._getErrorMessage(a,d)),!0!==e&&this._errorClass(a)},removeError:function(a,b,c){a._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+b).remove(),!0!==c&&this.manageStatusClass(a)},focus:function(a){if(a._focusedField=null,!0===a.validationResult||"none"===a.options.focus)return null;for(var b=0;b<a.fields.length;b++){var c=a.fields[b];if(!0!==c.validationResult&&c.validationResult.length>0&&"undefined"==typeof c.options.noFocus&&(a._focusedField=c.$element,"first"===a.options.focus))break}return null===a._focusedField?null:a._focusedField.focus()},_getErrorMessage:function(a,b){var c=b.name+"Message";return"undefined"!=typeof a.options[c]?window.ParsleyValidator.formatMessage(a.options[c],b.requirements):window.ParsleyValidator.getErrorMessage(b)},_diff:function(a,b,c){for(var d=[],e=[],f=0;f<a.length;f++){for(var g=!1,h=0;h<b.length;h++)if(a[f].assert.name===b[h].assert.name){g=!0;break}g?e.push(a[f]):d.push(a[f])}return{kept:e,added:d,removed:c?[]:this._diff(b,a,!0).added}},setupForm:function(b){b.$element.on("submit.Parsley",!1,a.proxy(b.onSubmitValidate,b)),!1!==b.options.uiEnabled&&b.$element.attr("novalidate","")},setupField:function(b){var c={active:!1};!1!==b.options.uiEnabled&&(c.active=!0,b.$element.attr(b.options.namespace+"id",b.__id__),c.$errorClassHandler=this._manageClassHandler(b),c.errorsWrapperId="parsley-id-"+(b.options.multiple?"multiple-"+b.options.multiple:b.__id__),c.$errorsWrapper=a(b.options.errorsWrapper).attr("id",c.errorsWrapperId),c.lastValidationResult=[],c.validatedOnce=!1,c.validationInformationVisible=!1,b._ui=c,this.actualizeTriggers(b))},_manageClassHandler:function(b){if("string"==typeof b.options.classHandler&&a(b.options.classHandler).length)return a(b.options.classHandler);var c=b.options.classHandler(b);return"undefined"!=typeof c&&c.length?c:!b.options.multiple||b.$element.is("select")?b.$element:b.$element.parent()},_insertErrorWrapper:function(b){var c;if(0!==b._ui.$errorsWrapper.parent().length)return b._ui.$errorsWrapper.parent();if("string"==typeof b.options.errorsContainer){if(a(b.options.errorsContainer).length)return a(b.options.errorsContainer).append(b._ui.$errorsWrapper);f.warn("The errors container `"+b.options.errorsContainer+"` does not exist in DOM")}else"function"==typeof b.options.errorsContainer&&(c=b.options.errorsContainer(b));if("undefined"!=typeof c&&c.length)return c.append(b._ui.$errorsWrapper);var d=b.$element;return b.options.multiple&&(d=d.parent()),d.after(b._ui.$errorsWrapper)},actualizeTriggers:function(b){var c=b.$element;if(b.options.multiple&&(c=a("["+b.options.namespace+'multiple="'+b.options.multiple+'"]')),c.off(".Parsley"),!1!==b.options.trigger){var d=b.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,"");""!==d&&c.on(d.split(" ").join(".Parsley ")+".Parsley",a.proxy("function"==typeof b.eventValidate?b.eventValidate:this.eventValidate,b))}},eventValidate:function(a){new RegExp("key").test(a.type)&&!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold||(this._ui.validatedOnce=!0,this.validate())},manageFailingFieldTrigger:function(b){return b._ui.failedOnce=!0,b.options.multiple&&a("["+b.options.namespace+'multiple="'+b.options.multiple+'"]').each(function(){return new RegExp("change","i").test(a(this).parsley().options.trigger||"")?void 0:a(this).on("change.ParsleyFailedOnce",!1,a.proxy(b.validate,b))}),b.$element.is("select")&&!new RegExp("change","i").test(b.options.trigger||"")?b.$element.on("change.ParsleyFailedOnce",!1,a.proxy(b.validate,b)):new RegExp("keyup","i").test(b.options.trigger||"")?void 0:b.$element.on("keyup.ParsleyFailedOnce",!1,a.proxy(b.validate,b))},reset:function(a){this.actualizeTriggers(a),a.$element.off(".ParsleyFailedOnce"),"undefined"!=typeof a._ui&&"ParsleyForm"!==a.__class__&&(a._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(a),a._ui.validatedOnce=!1,a._ui.lastValidationResult=[],a._ui.validationInformationVisible=!1,a._ui.failedOnce=!1)},destroy:function(a){this.reset(a),"ParsleyForm"!==a.__class__&&("undefined"!=typeof a._ui&&a._ui.$errorsWrapper.remove(),delete a._ui)},_successClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.errorClass).addClass(a.options.successClass)},_errorClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.successClass).addClass(a.options.errorClass)},_resetClass:function(a){a._ui.$errorClassHandler.removeClass(a.options.successClass).removeClass(a.options.errorClass)}};var l=function(b,c,d){this.__class__="ParsleyForm",this.__id__=f.generateID(),this.$element=a(b),this.domOptions=c,this.options=d,this.parent=window.Parsley,this.fields=[],this.validationResult=null};l.prototype={onSubmitValidate:function(b){return this.validate(void 0,void 0,b),(!1===this.validationResult||!this._trigger("submit"))&&b instanceof a.Event&&(b.stopImmediatePropagation(),b.preventDefault()),this},validate:function(a,b,c){this.submitEvent=c,this.validationResult=!0;var d=[];return this._trigger("validate"),this._refreshFields(),this._withoutReactualizingFormOptions(function(){for(var c=0;c<this.fields.length;c++)(!a||this._isFieldInGroup(this.fields[c],a))&&(d=this.fields[c].validate(b),!0!==d&&d.length>0&&this.validationResult&&(this.validationResult=!1))}),this._trigger(this.validationResult?"success":"error"),this._trigger("validated"),this.validationResult},isValid:function(a,b){return this._refreshFields(),this._withoutReactualizingFormOptions(function(){for(var c=0;c<this.fields.length;c++)if((!a||this._isFieldInGroup(this.fields[c],a))&&!1===this.fields[c].isValid(b))return!1;return!0})},_isFieldInGroup:function(b,c){return a.isArray(b.options.group)?-1!==a.inArray(c,b.options.group):b.options.group===c},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var b=this,c=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){this.$element.find(this.options.inputs).not(this.options.excluded).each(function(){var a=new t.Factory(this,{},b);"ParsleyField"!==a.__class__&&"ParsleyFieldMultiple"!==a.__class__||!0===a.options.excluded||"undefined"==typeof b.fieldsMappedById[a.__class__+"-"+a.__id__]&&(b.fieldsMappedById[a.__class__+"-"+a.__id__]=a,b.fields.push(a))}),a(c).not(b.fields).each(function(){this._trigger("reset")})}),this},_withoutReactualizingFormOptions:function(a){var b=this.actualizeOptions;this.actualizeOptions=function(){return this};var c=a.call(this);return this.actualizeOptions=b,c},_trigger:function(a){return a="form:"+a,this.trigger.apply(this,arguments)}};var m=function(b,c,d,e,g){var h={};if(!new RegExp("ParsleyField").test(b.__class__))throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");if("function"==typeof window.ParsleyValidator.validators[c]&&(h=window.ParsleyValidator.validators[c](d)),"Assert"!==h.__parentClass__)throw new Error("Valid validator expected");var i=function(){return"undefined"!=typeof b.options[c+"Priority"]?b.options[c+"Priority"]:h.priority||2};return e=e||i(),"function"==typeof h.requirementsTransformer&&(d=h.requirementsTransformer(),h=window.ParsleyValidator.validators[c](d)),a.extend(h,{name:c,requirements:d,priority:e,groups:[e],isDomConstraint:g||f.checkAttr(b.$element,b.options.namespace,c)})},n=function(b,c,d,e){this.__class__="ParsleyField",this.__id__=f.generateID(),this.$element=a(b),"undefined"!=typeof e&&(this.parent=e),this.options=d,this.domOptions=c,this.constraints=[],this.constraintsByName={},this.validationResult=[],this._bindConstraints()};n.prototype={validate:function(a){return this.value=this.getValue(),this._trigger("validate"),this._trigger(this.isValid(a,this.value)?"success":"error"),this._trigger("validated"),this.validationResult},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(a){return"undefined"==typeof a&&(a=this.getValue()),a.length||this._isRequired()||"undefined"!=typeof this.options.validateIfEmpty?!0:!1},isValid:function(a,b){if(this.refreshConstraints(),this.validationResult=!0,!this.hasConstraints())return!0;if(("undefined"==typeof b||null===b)&&(b=this.getValue()),!this.needsValidation(b)&&!0!==a)return!0;var c=["Any"];!1!==this.options.priorityEnabled&&(c=this._getConstraintsSortedPriorities());for(var d=0;d<c.length;d++)if(!0!==(this.validationResult=this.validateThroughValidator(b,this.constraints,c[d])))return!1;return!0},getValue:function(){var a;return a="function"==typeof this.options.value?this.options.value(this):"undefined"!=typeof this.options.value?this.options.value:this.$element.val(),"undefined"==typeof a||null===a?"":this._handleWhitespace(a)},refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},addConstraint:function(a,b,c,d){if("function"==typeof window.ParsleyValidator.validators[a]){var e=new m(this,a,b,c,d);"undefined"!==this.constraintsByName[e.name]&&this.removeConstraint(e.name),this.constraints.push(e),this.constraintsByName[e.name]=e}return this},removeConstraint:function(a){for(var b=0;b<this.constraints.length;b++)if(a===this.constraints[b].name){this.constraints.splice(b,1);break}return delete this.constraintsByName[a],this},updateConstraint:function(a,b,c){return this.removeConstraint(a).addConstraint(a,b,c)},_bindConstraints:function(){for(var a=[],b={},c=0;c<this.constraints.length;c++)!1===this.constraints[c].isDomConstraint&&(a.push(this.constraints[c]),b[this.constraints[c].name]=this.constraints[c]);this.constraints=a,this.constraintsByName=b;for(var d in this.options)this.addConstraint(d,this.options[d]);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&this.addConstraint("required",!0,void 0,!0),"string"==typeof this.$element.attr("pattern")&&this.addConstraint("pattern",this.$element.attr("pattern"),void 0,!0),"undefined"!=typeof this.$element.attr("min")&&"undefined"!=typeof this.$element.attr("max")?this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],void 0,!0):"undefined"!=typeof this.$element.attr("min")?this.addConstraint("min",this.$element.attr("min"),void 0,!0):"undefined"!=typeof this.$element.attr("max")&&this.addConstraint("max",this.$element.attr("max"),void 0,!0),"undefined"!=typeof this.$element.attr("minlength")&&"undefined"!=typeof this.$element.attr("maxlength")?this.addConstraint("length",[this.$element.attr("minlength"),this.$element.attr("maxlength")],void 0,!0):"undefined"!=typeof this.$element.attr("minlength")?this.addConstraint("minlength",this.$element.attr("minlength"),void 0,!0):"undefined"!=typeof this.$element.attr("maxlength")&&this.addConstraint("maxlength",this.$element.attr("maxlength"),void 0,!0);var a=this.$element.attr("type");return"undefined"==typeof a?this:"number"===a?"undefined"==typeof this.$element.attr("step")||0===parseFloat(this.$element.attr("step"))%1?this.addConstraint("type","integer",void 0,!0):this.addConstraint("type","number",void 0,!0):/^(email|url|range)$/i.test(a)?this.addConstraint("type",a,void 0,!0):this},_isRequired:function(){return"undefined"==typeof this.constraintsByName.required?!1:!1!==this.constraintsByName.required.requirements},_trigger:function(a){return a="field:"+a,this.trigger.apply(this,arguments)},_handleWhitespace:function(a){return!0===this.options.trimValue&&f.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(a=a.replace(/\s{2,}/g," ")),("trim"===this.options.whitespace||"squish"===this.options.whitespace||!0===this.options.trimValue)&&(a=a.replace(/^\s+|\s+$/g,"")),a},_getConstraintsSortedPriorities:function(){for(var a=[],b=0;b<this.constraints.length;b++)-1===a.indexOf(this.constraints[b].priority)&&a.push(this.constraints[b].priority);return a.sort(function(a,b){return b-a}),a}};var o=function(){this.__class__="ParsleyFieldMultiple"};o.prototype={addElement:function(a){return this.$elements.push(a),this},refreshConstraints:function(){var b;if(this.constraints=[],this.$element.is("select"))return this.actualizeOptions()._bindConstraints(),this;for(var c=0;c<this.$elements.length;c++)if(a("html").has(this.$elements[c]).length){b=this.$elements[c].data("ParsleyFieldMultiple").refreshConstraints().constraints;for(var d=0;d<b.length;d++)this.addConstraint(b[d].name,b[d].requirements,b[d].priority,b[d].isDomConstraint)}else this.$elements.splice(c,1);return this},getValue:function(){if("undefined"!=typeof this.options.value)return this.options.value;if(this.$element.is("input[type=radio]"))return this._findRelatedMultiple().filter(":checked").val()||"";if(this.$element.is("input[type=checkbox]")){var b=[];return this._findRelatedMultiple().filter(":checked").each(function(){b.push(a(this).val())}),b}return this.$element.is("select")&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}};var p=function(b,c,d){this.$element=a(b);var e=this.$element.data("Parsley");if(e)return"undefined"!=typeof d&&e.parent===window.Parsley&&(e.parent=d,e._resetOptions(e.options)),e;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if("undefined"!=typeof d&&"ParsleyForm"!==d.__class__)throw new Error("Parent instance must be a ParsleyForm instance");return this.parent=d||window.Parsley,this.init(c)};p.prototype={init:function(a){return this.__class__="Parsley",this.__version__="2.1.3",this.__id__=f.generateID(),this._resetOptions(a),this.$element.is("form")||f.checkAttr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){return this.$element.is("input[type=radio], input[type=checkbox]")||this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple")},handleMultiple:function(){var b,c,d=this;if(this.options.multiple||("undefined"!=typeof this.$element.attr("name")&&this.$element.attr("name").length?this.options.multiple=b=this.$element.attr("name"):"undefined"!=typeof this.$element.attr("id")&&this.$element.attr("id").length&&(this.options.multiple=this.$element.attr("id"))),this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return f.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),"undefined"!=typeof b&&a('input[name="'+b+'"]').each(function(){a(this).is("input[type=radio], input[type=checkbox]")&&a(this).attr(d.options.namespace+"multiple",d.options.multiple)});for(var e=this._findRelatedMultiple(),g=0;g<e.length;g++)if(c=a(e.get(g)).data("Parsley"),"undefined"!=typeof c){this.$element.data("ParsleyFieldMultiple")||c.addElement(this.$element);break}return this.bind("parsleyField",!0),c||this.bind("parsleyFieldMultiple")},bind:function(b,c){var d;switch(b){case"parsleyForm":d=a.extend(new l(this.$element,this.domOptions,this.options),window.ParsleyExtend)._bindFields();break;case"parsleyField":d=a.extend(new n(this.$element,this.domOptions,this.options,this.parent),window.ParsleyExtend);break;case"parsleyFieldMultiple":d=a.extend(new n(this.$element,this.domOptions,this.options,this.parent),new o,window.ParsleyExtend)._init();break;default:throw new Error(b+"is not a supported Parsley type")}return this.options.multiple&&f.setAttr(this.$element,this.options.namespace,"multiple",this.options.multiple),"undefined"!=typeof c?(this.$element.data("ParsleyFieldMultiple",d),d):(this.$element.data("Parsley",d),
d._trigger("init"),d)}};var q=a({}),r=function(){f.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")},s="parsley:";a.listen=function(a,d){var e;if(r(),"object"==typeof arguments[1]&&"function"==typeof arguments[2]&&(e=arguments[1],d=arguments[2]),"function"!=typeof arguments[1])throw new Error("Wrong parameters");window.Parsley.on(c(a),b(d,e))},a.listenTo=function(a,d,e){if(r(),!(a instanceof n||a instanceof l))throw new Error("Must give Parsley instance");if("string"!=typeof d||"function"!=typeof e)throw new Error("Wrong parameters");a.on(c(d),b(e))},a.unsubscribe=function(a,b){if(r(),"string"!=typeof a||"function"!=typeof b)throw new Error("Wrong arguments");window.Parsley.off(c(a),b.parsleyAdaptedCallback)},a.unsubscribeTo=function(a,b){if(r(),!(a instanceof n||a instanceof l))throw new Error("Must give Parsley instance");a.off(c(b))},a.unsubscribeAll=function(b){r(),window.Parsley.off(c(b)),a("form,input,textarea,select").each(function(){var d=a(this).data("Parsley");d&&d.off(c(b))})},a.emit=function(a,b){r();var d=b instanceof n||b instanceof l,e=Array.prototype.slice.call(arguments,d?2:1);e.unshift(c(a)),d||(b=window.Parsley),b.trigger.apply(b,e)},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.en=jQuery.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,!0);var t=a.extend(new h,{$element:a(document),actualizeOptions:null,_resetOptions:null,Factory:p,version:"2.1.3"});return a.extend(n.prototype,h.prototype),a.extend(l.prototype,h.prototype),a.extend(p.prototype,h.prototype),a.fn.parsley=a.fn.psly=function(b){if(this.length>1){var c=[];return this.each(function(){c.push(a(this).parsley(b))}),c}return a(this).length?new p(this,b):void f.warn("You must bind Parsley on an existing element.")},"undefined"==typeof window.ParsleyExtend&&(window.ParsleyExtend={}),t.options=a.extend(f.objectCreate(g),window.ParsleyConfig),window.ParsleyConfig=t.options,window.Parsley=window.psly=t,window.ParsleyUtils=f,window.ParsleyValidator=new j(window.ParsleyConfig.validators,window.ParsleyConfig.i18n),window.ParsleyUI="function"==typeof window.ParsleyConfig.ParsleyUI?(new window.ParsleyConfig.ParsleyUI).listen():(new k).listen(),!1!==window.ParsleyConfig.autoBind&&a(function(){a("[data-parsley-validate]").length&&a("[data-parsley-validate]").parsley()}),window.Parsley}),function(){"use strict";var a={};a.parse=function(a){return"string"!=typeof a?{}:(a=a.trim().replace(/^(\?|#)/,""),a?a.trim().split("&").reduce(function(a,b){var c=b.replace(/\+/g," ").split("="),d=c[0],e=c[1];return d=decodeURIComponent(d),e=void 0===e?null:decodeURIComponent(e),a.hasOwnProperty(d)?Array.isArray(a[d])?a[d].push(e):a[d]=[a[d],e]:a[d]=e,a},{}):{})},a.stringify=function(a){return a?Object.keys(a).map(function(b){var c=a[b];return Array.isArray(c)?c.map(function(a){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&"):encodeURIComponent(b)+"="+encodeURIComponent(c)}).join("&"):""},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window.queryString=a}(),function(a){"use strict";function b(a,b){f.push({selector:a,fn:b}),e||(e=new h(c),e.observe(g.documentElement,{childList:!0,subtree:!0})),d(a,b)}function c(){for(var a,b=0,c=f.length;c>b;b++)a=f[b],d(a.selector,a.fn)}function d(a,b){for(var c,d=g.querySelectorAll(a),e=0,f=d.length;f>e;e++)c=d[e],c.ready||(c.ready=!0,b.call(c,c))}var e,f=[],g=a.document,h=a.MutationObserver||a.WebKitMutationObserver;a.ready=b}(this),!function(a,b){"function"==typeof define&&define.amd?define("sifter",b):"object"==typeof exports?module.exports=b():a.Sifter=b()}(this,function(){var a=function(a,b){this.items=a,this.settings=b||{diacritics:!0}};a.prototype.tokenize=function(a){if(a=d(String(a||"").toLowerCase()),!a||!a.length)return[];var b,c,f,h,i=[],j=a.split(/ +/);for(b=0,c=j.length;c>b;b++){if(f=e(j[b]),this.settings.diacritics)for(h in g)g.hasOwnProperty(h)&&(f=f.replace(new RegExp(h,"g"),g[h]));i.push({string:j[b],regex:new RegExp(f,"i")})}return i},a.prototype.iterator=function(a,b){var c;c=f(a)?Array.prototype.forEach||function(a){for(var b=0,c=this.length;c>b;b++)a(this[b],b,this)}:function(a){for(var b in this)this.hasOwnProperty(b)&&a(this[b],b,this)},c.apply(a,[b])},a.prototype.getScoreFunction=function(a,b){var c,d,e,f;c=this,a=c.prepareSearch(a,b),e=a.tokens,d=a.options.fields,f=e.length;var g=function(a,b){var c,d;return a?(a=String(a||""),d=a.search(b.regex),-1===d?0:(c=b.string.length/a.length,0===d&&(c+=.5),c)):0},h=function(){var a=d.length;return a?1===a?function(a,b){return g(b[d[0]],a)}:function(b,c){for(var e=0,f=0;a>e;e++)f+=g(c[d[e]],b);return f/a}:function(){return 0}}();return f?1===f?function(a){return h(e[0],a)}:"and"===a.options.conjunction?function(a){for(var b,c=0,d=0;f>c;c++){if(b=h(e[c],a),0>=b)return 0;d+=b}return d/f}:function(a){for(var b=0,c=0;f>b;b++)c+=h(e[b],a);return c/f}:function(){return 0}},a.prototype.getSortFunction=function(a,c){var d,e,f,g,h,i,j,k,l,m,n;if(f=this,a=f.prepareSearch(a,c),n=!a.query&&c.sort_empty||c.sort,l=function(a,b){return"$score"===a?b.score:f.items[b.id][a]},h=[],n)for(d=0,e=n.length;e>d;d++)(a.query||"$score"!==n[d].field)&&h.push(n[d]);if(a.query){for(m=!0,d=0,e=h.length;e>d;d++)if("$score"===h[d].field){m=!1;break}m&&h.unshift({field:"$score",direction:"desc"})}else for(d=0,e=h.length;e>d;d++)if("$score"===h[d].field){h.splice(d,1);break}for(k=[],d=0,e=h.length;e>d;d++)k.push("desc"===h[d].direction?-1:1);return i=h.length,i?1===i?(g=h[0].field,j=k[0],function(a,c){return j*b(l(g,a),l(g,c))}):function(a,c){var d,e,f;for(d=0;i>d;d++)if(f=h[d].field,e=k[d]*b(l(f,a),l(f,c)))return e;return 0}:null},a.prototype.prepareSearch=function(a,b){if("object"==typeof a)return a;b=c({},b);var d=b.fields,e=b.sort,g=b.sort_empty;return d&&!f(d)&&(b.fields=[d]),e&&!f(e)&&(b.sort=[e]),g&&!f(g)&&(b.sort_empty=[g]),{options:b,query:String(a||"").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},a.prototype.search=function(a,b){var c,d,e,f,g=this;return d=this.prepareSearch(a,b),b=d.options,a=d.query,f=b.score||g.getScoreFunction(d),a.length?g.iterator(g.items,function(a,e){c=f(a),(b.filter===!1||c>0)&&d.items.push({score:c,id:e})}):g.iterator(g.items,function(a,b){d.items.push({score:1,id:b})}),e=g.getSortFunction(d,b),e&&d.items.sort(e),d.total=d.items.length,"number"==typeof b.limit&&(d.items=d.items.slice(0,b.limit)),d};var b=function(a,b){return"number"==typeof a&&"number"==typeof b?a>b?1:b>a?-1:0:(a=String(a||"").toLowerCase(),b=String(b||"").toLowerCase(),a>b?1:b>a?-1:0)},c=function(a){var b,c,d,e;for(b=1,c=arguments.length;c>b;b++)if(e=arguments[b])for(d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);return a},d=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},e=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},f=Array.isArray||$&&$.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g={a:"[aÀÁÂÃÄÅàáâãäåĀā]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒē]",i:"[iÌÍÎÏìíîïĪī]",n:"[nÑñňŇ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠš]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽž]"};return a}),function(a,b){"function"==typeof define&&define.amd?define("microplugin",b):"object"==typeof exports?module.exports=b():a.MicroPlugin=b()}(this,function(){var a={};a.mixin=function(a){a.plugins={},a.prototype.initializePlugins=function(a){var c,d,e,f=this,g=[];if(f.plugins={names:[],settings:{},requested:{},loaded:{}},b.isArray(a))for(c=0,d=a.length;d>c;c++)"string"==typeof a[c]?g.push(a[c]):(f.plugins.settings[a[c].name]=a[c].options,g.push(a[c].name));else if(a)for(e in a)a.hasOwnProperty(e)&&(f.plugins.settings[e]=a[e],g.push(e));for(;g.length;)f.require(g.shift())},a.prototype.loadPlugin=function(b){var c=this,d=c.plugins,e=a.plugins[b];if(!a.plugins.hasOwnProperty(b))throw new Error('Unable to find "'+b+'" plugin');d.requested[b]=!0,d.loaded[b]=e.fn.apply(c,[c.plugins.settings[b]||{}]),d.names.push(b)},a.prototype.require=function(a){var b=this,c=b.plugins;if(!b.plugins.loaded.hasOwnProperty(a)){if(c.requested[a])throw new Error('Plugin has circular dependency ("'+a+'")');b.loadPlugin(a)}return c.loaded[a]},a.define=function(b,c){a.plugins[b]={name:b,fn:c}}};var b={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}};return a}),function(a,b){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("sifter"),require("microplugin")):a.Selectize=b(a.jQuery,a.Sifter,a.MicroPlugin)}(this,function(a,b,c){"use strict";var d=function(a,b){if("string"!=typeof b||b.length){var c="string"==typeof b?new RegExp(b,"i"):b,d=function(a){var b=0;if(3===a.nodeType){var e=a.data.search(c);if(e>=0&&a.data.length>0){var f=a.data.match(c),g=document.createElement("span");g.className="highlight";var h=a.splitText(e),i=(h.splitText(f[0].length),h.cloneNode(!0));g.appendChild(i),h.parentNode.replaceChild(g,h),b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(var j=0;j<a.childNodes.length;++j)j+=d(a.childNodes[j]);return b};return a.each(function(){d(this)})}},e=function(){};e.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){var c=arguments.length;return 0===c?delete this._events:1===c?delete this._events[a]:(this._events=this._events||{},void(a in this._events!=0&&this._events[a].splice(this._events[a].indexOf(b),1)))},trigger:function(a){if(this._events=this._events||{},a in this._events!=0)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(a){for(var b=["on","off","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=e.prototype[b[c]]};var f=/Mac/.test(navigator.userAgent),g=65,h=13,i=27,j=37,k=38,l=80,m=39,n=40,o=78,p=8,q=46,r=16,s=f?91:17,t=f?18:17,u=9,v=1,w=2,x=function(a){return"undefined"!=typeof a},y=function(a){return"undefined"==typeof a||null===a?null:"boolean"==typeof a?a?"1":"0":a+""},z=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},A=function(a){return(a+"").replace(/\$/g,"$$$$")},B={};B.before=function(a,b,c){var d=a[b];a[b]=function(){return c.apply(a,arguments),d.apply(a,arguments)}},B.after=function(a,b,c){var d=a[b];a[b]=function(){var b=d.apply(a,arguments);return c.apply(a,arguments),b}};var C=function(b,c){if(!a.isArray(c))return c;var d,e,f={};for(d=0,e=c.length;e>d;d++)c[d].hasOwnProperty(b)&&(f[c[d][b]]=c[d]);return f},D=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}},E=function(a,b){var c;return function(){var d=this,e=arguments;window.clearTimeout(c),c=window.setTimeout(function(){a.apply(d,e)},b)}},F=function(a,b,c){var d,e=a.trigger,f={};a.trigger=function(){var c=arguments[0];return-1===b.indexOf(c)?e.apply(a,arguments):void(f[c]=arguments)},c.apply(a,[]),a.trigger=e;for(d in f)f.hasOwnProperty(d)&&e.apply(a,f[d])},G=function(a,b,c,d){a.on(b,c,function(b){for(var c=b.target;c&&c.parentNode!==a[0];)c=c.parentNode;return b.currentTarget=c,d.apply(this,[b])})},H=function(a){var b={};if("selectionStart"in a)b.start=a.selectionStart,b.length=a.selectionEnd-b.start;else if(document.selection){a.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;c.moveStart("character",-a.value.length),b.start=c.text.length-d,b.length=d}return b},I=function(a,b,c){var d,e,f={};if(c)for(d=0,e=c.length;e>d;d++)f[c[d]]=a.css(c[d]);else f=a.css();b.css(f)},J=function(b,c){if(!b)return 0;var d=a("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(b).appendTo("body");I(c,d,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var e=d.width();return d.remove(),e},K=function(a){var b=null,c=function(c,d){var e,f,g,h,i,j,k,l;c=c||window.event||{},d=d||{},c.metaKey||c.altKey||(d.force||a.data("grow")!==!1)&&(e=a.val(),c.type&&"keydown"===c.type.toLowerCase()&&(f=c.keyCode,g=f>=97&&122>=f||f>=65&&90>=f||f>=48&&57>=f||32===f,f===q||f===p?(l=H(a[0]),l.length?e=e.substring(0,l.start)+e.substring(l.start+l.length):f===p&&l.start?e=e.substring(0,l.start-1)+e.substring(l.start+1):f===q&&"undefined"!=typeof l.start&&(e=e.substring(0,l.start)+e.substring(l.start+1))):g&&(j=c.shiftKey,k=String.fromCharCode(c.keyCode),k=j?k.toUpperCase():k.toLowerCase(),e+=k)),h=a.attr("placeholder"),!e&&h&&(e=h),i=J(e,a)+4,i!==b&&(b=i,a.width(i),a.triggerHandler("resize")))};a.on("keydown keyup update blur",c),c()},L=function(c,d){var e,f,g=this;f=c[0],f.selectize=g;var h=window.getComputedStyle&&window.getComputedStyle(f,null);e=h?h.getPropertyValue("direction"):f.currentStyle&&f.currentStyle.direction,e=e||c.parents("[dir]:first").attr("dir")||"",a.extend(g,{settings:d,$input:c,tagType:"select"===f.tagName.toLowerCase()?v:w,rtl:/rtl/i.test(e),eventNS:".selectize"+ ++L.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:c.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===d.loadThrottle?g.onSearchChange:E(g.onSearchChange,d.loadThrottle)}),g.sifter=new b(this.options,{diacritics:d.diacritics}),a.extend(g.options,C(d.valueField,d.options)),delete g.settings.options,a.extend(g.optgroups,C(d.optgroupValueField,d.optgroups)),delete g.settings.optgroups,g.settings.mode=g.settings.mode||(1===g.settings.maxItems?"single":"multi"),"boolean"!=typeof g.settings.hideSelected&&(g.settings.hideSelected="multi"===g.settings.mode),g.initializePlugins(g.settings.plugins),g.setupCallbacks(),g.setupTemplates(),g.setup()};return e.mixin(L),c.mixin(L),a.extend(L.prototype,{setup:function(){var b,c,d,e,g,h,i,j,k,l,m=this,n=m.settings,o=m.eventNS,p=a(window),q=a(document),u=m.$input;i=m.settings.mode,j=u.attr("tabindex")||"",k=u.attr("class")||"",b=a("<div>").addClass(n.wrapperClass).addClass(k).addClass(i),c=a("<div>").addClass(n.inputClass).addClass("items").appendTo(b),d=a('<input type="text" autocomplete="off" />').appendTo(c).attr("tabindex",j),h=a(n.dropdownParent||b),e=a("<div>").addClass(n.dropdownClass).addClass(i).hide().appendTo(h),g=a("<div>").addClass(n.dropdownContentClass).appendTo(e),m.settings.copyClassesToDropdown&&e.addClass(k),b.css({width:u[0].style.width}),m.plugins.names.length&&(l="plugin-"+m.plugins.names.join(" plugin-"),b.addClass(l),e.addClass(l)),(null===n.maxItems||n.maxItems>1)&&m.tagType===v&&u.attr("multiple","multiple"),m.settings.placeholder&&d.attr("placeholder",n.placeholder),u.attr("autocorrect")&&d.attr("autocorrect",u.attr("autocorrect")),u.attr("autocapitalize")&&d.attr("autocapitalize",u.attr("autocapitalize")),m.$wrapper=b,m.$control=c,m.$control_input=d,m.$dropdown=e,m.$dropdown_content=g,e.on("mouseenter","[data-selectable]",function(){return m.onOptionHover.apply(m,arguments)}),e.on("mousedown","[data-selectable]",function(){return m.onOptionSelect.apply(m,arguments)}),G(c,"mousedown","*:not(input)",function(){return m.onItemSelect.apply(m,arguments)}),K(d),c.on({mousedown:function(){return m.onMouseDown.apply(m,arguments)},click:function(){return m.onClick.apply(m,arguments)}}),d.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return m.onKeyDown.apply(m,arguments)},keyup:function(){return m.onKeyUp.apply(m,arguments)},keypress:function(){return m.onKeyPress.apply(m,arguments)},resize:function(){m.positionDropdown.apply(m,[])},blur:function(){return m.onBlur.apply(m,arguments)},focus:function(){return m.ignoreBlur=!1,m.onFocus.apply(m,arguments)},paste:function(){return m.onPaste.apply(m,arguments)}}),q.on("keydown"+o,function(a){m.isCmdDown=a[f?"metaKey":"ctrlKey"],m.isCtrlDown=a[f?"altKey":"ctrlKey"],m.isShiftDown=a.shiftKey}),q.on("keyup"+o,function(a){a.keyCode===t&&(m.isCtrlDown=!1),a.keyCode===r&&(m.isShiftDown=!1),a.keyCode===s&&(m.isCmdDown=!1)}),q.on("mousedown"+o,function(a){if(m.isFocused){if(a.target===m.$dropdown[0]||a.target.parentNode===m.$dropdown[0])return!1;m.$control.has(a.target).length||a.target===m.$control[0]||m.blur()}}),p.on(["scroll"+o,"resize"+o].join(" "),function(){m.isOpen&&m.positionDropdown.apply(m,arguments)}),p.on("mousemove"+o,function(){m.ignoreHover=!1}),this.revertSettings={$children:u.children().detach(),tabindex:u.attr("tabindex")},u.attr("tabindex",-1).hide().after(m.$wrapper),a.isArray(n.items)&&(m.setValue(n.items),delete n.items),u[0].validity&&u.on("invalid"+o,function(a){a.preventDefault(),m.isInvalid=!0,m.refreshState()}),m.updateOriginalInput(),m.refreshItems(),m.refreshState(),m.updatePlaceholder(),m.isSetup=!0,u.is(":disabled")&&m.disable(),m.on("change",this.onChange),u.data("selectize",m),u.addClass("selectized"),m.trigger("initialize"),n.preload===!0&&m.onSearchChange("")},setupTemplates:function(){var b=this,c=b.settings.labelField,d=b.settings.optgroupLabelField,e={optgroup:function(a){return'<div class="optgroup">'+a.html+"</div>"},optgroup_header:function(a,b){return'<div class="optgroup-header">'+b(a[d])+"</div>"},option:function(a,b){return'<div class="option">'+b(a[c])+"</div>"},item:function(a,b){return'<div class="item">'+b(a[c])+"</div>"},option_create:function(a,b){return'<div class="create">Add <strong>'+b(a.input)+"</strong>&hellip;</div>"}};b.settings.render=a.extend({},e,b.settings.render)},setupCallbacks:function(){var a,b,c={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad"};for(a in c)c.hasOwnProperty(a)&&(b=this.settings[c[a]],b&&this.on(a,b))},onClick:function(a){var b=this;b.isFocused||(b.focus(),a.preventDefault())},onMouseDown:function(b){var c=this,d=b.isDefaultPrevented();if(a(b.target),c.isFocused){if(b.target!==c.$control_input[0])return"single"===c.settings.mode?c.isOpen?c.close():c.open():d||c.setActiveItem(null),!1}else d||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(a){var b=this;(b.isFull()||b.isInputHidden||b.isLocked)&&a.preventDefault()},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var b=String.fromCharCode(a.keyCode||a.which);return this.settings.create&&b===this.settings.delimiter?(this.createItem(),a.preventDefault(),!1):void 0},onKeyDown:function(a){var b=(a.target===this.$control_input[0],this);if(b.isLocked)return void(a.keyCode!==u&&a.preventDefault());switch(a.keyCode){case g:if(b.isCmdDown)return void b.selectAll();break;case i:return void b.close();case o:if(!a.ctrlKey||a.altKey)break;case n:if(!b.isOpen&&b.hasOptions)b.open();else if(b.$activeOption){b.ignoreHover=!0;var c=b.getAdjacentOption(b.$activeOption,1);c.length&&b.setActiveOption(c,!0,!0)}return void a.preventDefault();case l:if(!a.ctrlKey||a.altKey)break;case k:if(b.$activeOption){b.ignoreHover=!0;var d=b.getAdjacentOption(b.$activeOption,-1);d.length&&b.setActiveOption(d,!0,!0)}return void a.preventDefault();case h:return b.isOpen&&b.$activeOption&&b.onOptionSelect({currentTarget:b.$activeOption}),void a.preventDefault();case j:return void b.advanceSelection(-1,a);case m:return void b.advanceSelection(1,a);case u:return b.settings.selectOnTab&&b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),a.preventDefault()),void(b.settings.create&&b.createItem()&&a.preventDefault());case p:case q:return void b.deleteSelection(a)}return!b.isFull()&&!b.isInputHidden||(f?a.metaKey:a.ctrlKey)?void 0:void a.preventDefault()},onKeyUp:function(a){var b=this;if(b.isLocked)return a&&a.preventDefault();var c=b.$control_input.val()||"";b.lastValue!==c&&(b.lastValue=c,b.onSearchChange(c),b.refreshOptions(),b.trigger("type",c))},onSearchChange:function(a){var b=this,c=b.settings.load;c&&(b.loadedSearches.hasOwnProperty(a)||(b.loadedSearches[a]=!0,b.load(function(d){c.apply(b,[a,d])})))},onFocus:function(a){var b=this;return b.isFocused=!0,b.isDisabled?(b.blur(),a&&a.preventDefault(),!1):void(b.ignoreFocus||("focus"===b.settings.preload&&b.onSearchChange(""),b.$activeItems.length||(b.showInput(),b.setActiveItem(null),b.refreshOptions(!!b.settings.openOnFocus)),b.refreshState()))},onBlur:function(a){var b=this;if(b.isFocused=!1,!b.ignoreFocus){if(!b.ignoreBlur&&document.activeElement===b.$dropdown_content[0])return b.ignoreBlur=!0,void b.onFocus(a);b.settings.create&&b.settings.createOnBlur&&b.createItem(!1),b.close(),b.setTextboxValue(""),b.setActiveItem(null),b.setActiveOption(null),b.setCaret(b.items.length),b.refreshState()}},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)},onOptionSelect:function(b){var c,d,e=this;b.preventDefault&&(b.preventDefault(),b.stopPropagation()),d=a(b.currentTarget),d.hasClass("create")?e.createItem():(c=d.attr("data-value"),"undefined"!=typeof c&&(e.lastQuery=null,e.setTextboxValue(""),e.addItem(c),!e.settings.hideSelected&&b.type&&/mouse/.test(b.type)&&e.setActiveOption(e.getOption(c))))},onItemSelect:function(a){var b=this;b.isLocked||"multi"===b.settings.mode&&(a.preventDefault(),b.setActiveItem(a.currentTarget,a))},load:function(a){var b=this,c=b.$wrapper.addClass("loading");b.loading++,a.apply(b,[function(a){b.loading=Math.max(b.loading-1,0),a&&a.length&&(b.addOption(a),b.refreshOptions(b.isFocused&&!b.isInputHidden)),b.loading||c.removeClass("loading"),b.trigger("load",a)}])},setTextboxValue:function(a){var b=this.$control_input,c=b.val()!==a;c&&(b.val(a).triggerHandler("update"),this.lastValue=a)},getValue:function(){return this.tagType===v&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(a){F(this,["change"],function(){this.clear(),this.addItems(a)})},setActiveItem:function(b,c){var d,e,f,g,h,i,j,k,l=this;if("single"!==l.settings.mode){if(b=a(b),!b.length)return a(l.$activeItems).removeClass("active"),l.$activeItems=[],void(l.isFocused&&l.showInput());if(d=c&&c.type.toLowerCase(),"mousedown"===d&&l.isShiftDown&&l.$activeItems.length){for(k=l.$control.children(".active:last"),g=Array.prototype.indexOf.apply(l.$control[0].childNodes,[k[0]]),h=Array.prototype.indexOf.apply(l.$control[0].childNodes,[b[0]]),g>h&&(j=g,g=h,h=j),e=g;h>=e;e++)i=l.$control[0].childNodes[e],-1===l.$activeItems.indexOf(i)&&(a(i).addClass("active"),l.$activeItems.push(i));c.preventDefault()}else"mousedown"===d&&l.isCtrlDown||"keydown"===d&&this.isShiftDown?b.hasClass("active")?(f=l.$activeItems.indexOf(b[0]),l.$activeItems.splice(f,1),b.removeClass("active")):l.$activeItems.push(b.addClass("active")[0]):(a(l.$activeItems).removeClass("active"),l.$activeItems=[b.addClass("active")[0]]);l.hideInput(),this.isFocused||l.focus()}},setActiveOption:function(b,c,d){var e,f,g,h,i,j=this;j.$activeOption&&j.$activeOption.removeClass("active"),j.$activeOption=null,b=a(b),b.length&&(j.$activeOption=b.addClass("active"),(c||!x(c))&&(e=j.$dropdown_content.height(),f=j.$activeOption.outerHeight(!0),c=j.$dropdown_content.scrollTop()||0,g=j.$activeOption.offset().top-j.$dropdown_content.offset().top+c,h=g,i=g-e+f,g+f>e+c?j.$dropdown_content.stop().animate({scrollTop:i},d?j.settings.scrollDuration:0):c>g&&j.$dropdown_content.stop().animate({scrollTop:h},d?j.settings.scrollDuration:0)))},selectAll:function(){var a=this;"single"!==a.settings.mode&&(a.$activeItems=Array.prototype.slice.apply(a.$control.children(":not(input)").addClass("active")),a.$activeItems.length&&(a.hideInput(),a.close()),a.focus())},hideInput:function(){var a=this;a.setTextboxValue(""),a.$control_input.css({opacity:0,position:"absolute",left:a.rtl?1e4:-1e4}),a.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1,a.onFocus()},0))},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=this.settings,b=a.sortField;return"string"==typeof b&&(b={field:b}),{fields:a.searchField,conjunction:a.searchConjunction,sort:b}},search:function(b){var c,d,e,f=this,g=f.settings,h=this.getSearchOptions();if(g.score&&(e=f.settings.score.apply(this,[b]),"function"!=typeof e))throw new Error('Selectize "score" setting must be a function that returns a function');if(b!==f.lastQuery?(f.lastQuery=b,d=f.sifter.search(b,a.extend(h,{score:e})),f.currentResults=d):d=a.extend(!0,{},f.currentResults),g.hideSelected)for(c=d.items.length-1;c>=0;c--)-1!==f.items.indexOf(y(d.items[c].id))&&d.items.splice(c,1);return d},refreshOptions:function(b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;"undefined"==typeof b&&(b=!0);var t=this,u=a.trim(t.$control_input.val()),v=t.search(u),w=t.$dropdown_content,x=t.$activeOption&&y(t.$activeOption.attr("data-value"));if(g=v.items.length,"number"==typeof t.settings.maxOptions&&(g=Math.min(g,t.settings.maxOptions)),h={},t.settings.optgroupOrder)for(i=t.settings.optgroupOrder,c=0;c<i.length;c++)h[i[c]]=[];else i=[];for(c=0;g>c;c++)for(j=t.options[v.items[c].id],k=t.render("option",j),l=j[t.settings.optgroupField]||"",m=a.isArray(l)?l:[l],e=0,f=m&&m.length;f>e;e++)l=m[e],t.optgroups.hasOwnProperty(l)||(l=""),h.hasOwnProperty(l)||(h[l]=[],i.push(l)),h[l].push(k);for(n=[],c=0,g=i.length;g>c;c++)l=i[c],t.optgroups.hasOwnProperty(l)&&h[l].length?(o=t.render("optgroup_header",t.optgroups[l])||"",o+=h[l].join(""),n.push(t.render("optgroup",a.extend({},t.optgroups[l],{html:o})))):n.push(h[l].join(""));if(w.html(n.join("")),t.settings.highlight&&v.query.length&&v.tokens.length)for(c=0,g=v.tokens.length;g>c;c++)d(w,v.tokens[c].regex);if(!t.settings.hideSelected)for(c=0,g=t.items.length;g>c;c++)t.getOption(t.items[c]).addClass("selected");p=t.canCreate(u),p&&(w.prepend(t.render("option_create",{input:u})),s=a(w[0].childNodes[0])),t.hasOptions=v.items.length>0||p,t.hasOptions?(v.items.length>0?(r=x&&t.getOption(x),r&&r.length?q=r:"single"===t.settings.mode&&t.items.length&&(q=t.getOption(t.items[0])),q&&q.length||(q=s&&!t.settings.addPrecedence?t.getAdjacentOption(s,1):w.find("[data-selectable]:first"))):q=s,t.setActiveOption(q),b&&!t.isOpen&&t.open()):(t.setActiveOption(null),b&&t.isOpen&&t.close())},addOption:function(b){var c,d,e,f=this;if(a.isArray(b))for(c=0,d=b.length;d>c;c++)f.addOption(b[c]);else e=y(b[f.settings.valueField]),"string"!=typeof e||f.options.hasOwnProperty(e)||(f.userOptions[e]=!0,f.options[e]=b,f.lastQuery=null,f.trigger("option_add",e,b))},addOptionGroup:function(a,b){this.optgroups[a]=b,this.trigger("optgroup_add",a,b)},updateOption:function(b,c){var d,e,f,g,h,i,j=this;if(b=y(b),f=y(c[j.settings.valueField]),null!==b&&j.options.hasOwnProperty(b)){if("string"!=typeof f)throw new Error("Value must be set in option data");f!==b&&(delete j.options[b],g=j.items.indexOf(b),-1!==g&&j.items.splice(g,1,f)),j.options[f]=c,h=j.renderCache.item,i=j.renderCache.option,h&&(delete h[b],delete h[f]),i&&(delete i[b],delete i[f]),-1!==j.items.indexOf(f)&&(d=j.getItem(b),e=a(j.render("item",c)),d.hasClass("active")&&e.addClass("active"),d.replaceWith(e)),j.lastQuery=null,j.isOpen&&j.refreshOptions(!1)}},removeOption:function(a){var b=this;a=y(a);var c=b.renderCache.item,d=b.renderCache.option;c&&delete c[a],d&&delete d[a],delete b.userOptions[a],delete b.options[a],b.lastQuery=null,b.trigger("option_remove",a),b.removeItem(a)},clearOptions:function(){var a=this;a.loadedSearches={},a.userOptions={},a.renderCache={},a.options=a.sifter.items={},a.lastQuery=null,a.trigger("option_clear"),a.clear()},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(b,c){var d=this.$dropdown.find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},getElementWithValue:function(b,c){if(b=y(b),"undefined"!=typeof b&&null!==b)for(var d=0,e=c.length;e>d;d++)if(c[d].getAttribute("data-value")===b)return a(c[d]);return a()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(b){for(var c=a.isArray(b)?b:[b],d=0,e=c.length;e>d;d++)this.isPending=e-1>d,this.addItem(c[d])},addItem:function(b){F(this,["change"],function(){var c,d,e,f,g,h=this,i=h.settings.mode;return b=y(b),-1!==h.items.indexOf(b)?void("single"===i&&h.close()):void(h.options.hasOwnProperty(b)&&("single"===i&&h.clear(),"multi"===i&&h.isFull()||(c=a(h.render("item",h.options[b])),g=h.isFull(),h.items.splice(h.caretPos,0,b),h.insertAtCaret(c),(!h.isPending||!g&&h.isFull())&&h.refreshState(),h.isSetup&&(e=h.$dropdown_content.find("[data-selectable]"),h.isPending||(d=h.getOption(b),f=h.getAdjacentOption(d,1).attr("data-value"),h.refreshOptions(h.isFocused&&"single"!==i),f&&h.setActiveOption(h.getOption(f))),!e.length||h.isFull()?h.close():h.positionDropdown(),h.updatePlaceholder(),h.trigger("item_add",b,c),h.updateOriginalInput()))))})},removeItem:function(a){var b,c,d,e=this;b="object"==typeof a?a:e.getItem(a),a=y(b.attr("data-value")),c=e.items.indexOf(a),-1!==c&&(b.remove(),b.hasClass("active")&&(d=e.$activeItems.indexOf(b[0]),e.$activeItems.splice(d,1)),e.items.splice(c,1),e.lastQuery=null,!e.settings.persist&&e.userOptions.hasOwnProperty(a)&&e.removeOption(a),c<e.caretPos&&e.setCaret(e.caretPos-1),e.refreshState(),e.updatePlaceholder(),e.updateOriginalInput(),e.positionDropdown(),e.trigger("item_remove",a))},createItem:function(b){var c=this,d=a.trim(c.$control_input.val()||""),e=c.caretPos;if(!c.canCreate(d))return!1;c.lock(),"undefined"==typeof b&&(b=!0);var f="function"==typeof c.settings.create?this.settings.create:function(a){var b={};return b[c.settings.labelField]=a,b[c.settings.valueField]=a,b},g=D(function(a){if(c.unlock(),a&&"object"==typeof a){var d=y(a[c.settings.valueField]);"string"==typeof d&&(c.setTextboxValue(""),c.addOption(a),c.setCaret(e),c.addItem(d),c.refreshOptions(b&&"single"!==c.settings.mode))}}),h=f.apply(this,[d,g]);return"undefined"!=typeof h&&g(h),!0},refreshItems:function(){if(this.lastQuery=null,this.isSetup)for(var a=0;a<this.items.length;a++)this.addItem(this.items);this.refreshState(),this.updateOriginalInput()},refreshState:function(){var a,b=this;b.isRequired&&(b.items.length&&(b.isInvalid=!1),b.$control_input.prop("required",a)),b.refreshClasses();
},refreshClasses:function(){var b=this,c=b.isFull(),d=b.isLocked;b.$wrapper.toggleClass("rtl",b.rtl),b.$control.toggleClass("focus",b.isFocused).toggleClass("disabled",b.isDisabled).toggleClass("required",b.isRequired).toggleClass("invalid",b.isInvalid).toggleClass("locked",d).toggleClass("full",c).toggleClass("not-full",!c).toggleClass("input-active",b.isFocused&&!b.isInputHidden).toggleClass("dropdown-active",b.isOpen).toggleClass("has-options",!a.isEmptyObject(b.options)).toggleClass("has-items",b.items.length>0),b.$control_input.data("grow",!c&&!d)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var a,b,c,d=this;if(d.tagType===v){for(c=[],a=0,b=d.items.length;b>a;a++)c.push('<option value="'+z(d.items[a])+'" selected="selected"></option>');c.length||this.$input.attr("multiple")||c.push('<option value="" selected="selected"></option>'),d.$input.html(c.join(""))}else d.$input.val(d.getValue()),d.$input.attr("value",d.$input.val());d.isSetup&&d.trigger("change",d.$input.val())},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr("placeholder"):a.attr("placeholder",this.settings.placeholder),a.triggerHandler("update",{force:!0})}},open:function(){var a=this;a.isLocked||a.isOpen||"multi"===a.settings.mode&&a.isFull()||(a.focus(),a.isOpen=!0,a.refreshState(),a.$dropdown.css({visibility:"hidden",display:"block"}),a.positionDropdown(),a.$dropdown.css({visibility:"visible"}),a.trigger("dropdown_open",a.$dropdown))},close:function(){var a=this,b=a.isOpen;"single"===a.settings.mode&&a.items.length&&a.hideInput(),a.isOpen=!1,a.$dropdown.hide(),a.setActiveOption(null),a.refreshState(),b&&a.trigger("dropdown_close",a.$dropdown)},positionDropdown:function(){var a=this.$control,b="body"===this.settings.dropdownParent?a.offset():a.position();b.top+=a.outerHeight(!0),this.$dropdown.css({width:a.outerWidth(),top:b.top,left:b.left})},clear:function(){var a=this;a.items.length&&(a.$control.children(":not(input)").remove(),a.items=[],a.lastQuery=null,a.setCaret(0),a.setActiveItem(null),a.updatePlaceholder(),a.updateOriginalInput(),a.refreshState(),a.showInput(),a.trigger("clear"))},insertAtCaret:function(b){var c=Math.min(this.caretPos,this.items.length);0===c?this.$control.prepend(b):a(this.$control[0].childNodes[c]).before(b),this.setCaret(c+1)},deleteSelection:function(b){var c,d,e,f,g,h,i,j,k,l=this;if(e=b&&b.keyCode===p?-1:1,f=H(l.$control_input[0]),l.$activeOption&&!l.settings.hideSelected&&(i=l.getAdjacentOption(l.$activeOption,-1).attr("data-value")),g=[],l.$activeItems.length){for(k=l.$control.children(".active:"+(e>0?"last":"first")),h=l.$control.children(":not(input)").index(k),e>0&&h++,c=0,d=l.$activeItems.length;d>c;c++)g.push(a(l.$activeItems[c]).attr("data-value"));b&&(b.preventDefault(),b.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(0>e&&0===f.start&&0===f.length?g.push(l.items[l.caretPos-1]):e>0&&f.start===l.$control_input.val().length&&g.push(l.items[l.caretPos]));if(!g.length||"function"==typeof l.settings.onDelete&&l.settings.onDelete.apply(l,[g])===!1)return!1;for("undefined"!=typeof h&&l.setCaret(h);g.length;)l.removeItem(g.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),i&&(j=l.getOption(i),j.length&&l.setActiveOption(j)),!0},advanceSelection:function(a,b){var c,d,e,f,g,h,i=this;0!==a&&(i.rtl&&(a*=-1),c=a>0?"last":"first",d=H(i.$control_input[0]),i.isFocused&&!i.isInputHidden?(f=i.$control_input.val().length,g=0>a?0===d.start&&0===d.length:d.start===f,g&&!f&&i.advanceCaret(a,b)):(h=i.$control.children(".active:"+c),h.length&&(e=i.$control.children(":not(input)").index(h),i.setActiveItem(null),i.setCaret(a>0?e+1:e))))},advanceCaret:function(a,b){var c,d,e=this;0!==a&&(c=a>0?"next":"prev",e.isShiftDown?(d=e.$control_input[c](),d.length&&(e.hideInput(),e.setActiveItem(d),b&&b.preventDefault())):e.setCaret(e.caretPos+a))},setCaret:function(b){var c=this;if(b="single"===c.settings.mode?c.items.length:Math.max(0,Math.min(c.items.length,b)),!c.isPending){var d,e,f,g;for(f=c.$control.children(":not(input)"),d=0,e=f.length;e>d;d++)g=a(f[d]).detach(),b>d?c.$control_input.before(g):c.$control.append(g)}c.caretPos=b},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var a=this;a.$input.prop("disabled",!0),a.isDisabled=!0,a.lock()},enable:function(){var a=this;a.$input.prop("disabled",!1),a.isDisabled=!1,a.unlock()},destroy:function(){var b=this,c=b.eventNS,d=b.revertSettings;b.trigger("destroy"),b.off(),b.$wrapper.remove(),b.$dropdown.remove(),b.$input.html("").append(d.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:d.tabindex}).show(),b.$control_input.removeData("grow"),b.$input.removeData("selectize"),a(window).off(c),a(document).off(c),a(document.body).off(c),delete b.$input[0].selectize},render:function(a,b){var c,d,e="",f=!1,g=this,h=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===a||"item"===a)&&(c=y(b[g.settings.valueField]),f=!!c),f&&(x(g.renderCache[a])||(g.renderCache[a]={}),g.renderCache[a].hasOwnProperty(c))?g.renderCache[a][c]:(e=g.settings.render[a].apply(this,[b,z]),("option"===a||"option_create"===a)&&(e=e.replace(h,"<$1 data-selectable")),"optgroup"===a&&(d=b[g.settings.optgroupValueField]||"",e=e.replace(h,'<$1 data-group="'+A(z(d))+'"')),("option"===a||"item"===a)&&(e=e.replace(h,'<$1 data-value="'+A(z(c||""))+'"')),f&&(g.renderCache[a][c]=e),e)},clearCache:function(a){var b=this;"undefined"==typeof a?b.renderCache={}:delete b.renderCache[a]},canCreate:function(a){var b=this;if(!b.settings.create)return!1;var c=b.settings.createFilter;return!(!a.length||"function"==typeof c&&!c.apply(b,[a])||"string"==typeof c&&!new RegExp(c).test(a)||c instanceof RegExp&&!c.test(a))}}),L.count=0,L.defaults={plugins:[],delimiter:",",persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},a.fn.selectize=function(b){var c=a.fn.selectize.defaults,d=a.extend({},c,b),e=d.dataAttr,f=d.labelField,g=d.valueField,h=d.optgroupField,i=d.optgroupLabelField,j=d.optgroupValueField,k=function(b,c){var e,h,i,j,k=a.trim(b.val()||"");if(d.allowEmptyOption||k.length){for(i=k.split(d.delimiter),e=0,h=i.length;h>e;e++)j={},j[f]=i[e],j[g]=i[e],c.options[i[e]]=j;c.items=i}},l=function(b,c){var k,l,m,n,o=0,p=c.options,q=function(a){var b=e&&a.attr(e);return"string"==typeof b&&b.length?JSON.parse(b):null},r=function(b,e){var i,j;if(b=a(b),i=b.attr("value")||"",i.length||d.allowEmptyOption){if(p.hasOwnProperty(i))return void(e&&(p[i].optgroup?a.isArray(p[i].optgroup)?p[i].optgroup.push(e):p[i].optgroup=[p[i].optgroup,e]:p[i].optgroup=e));j=q(b)||{},j[f]=j[f]||b.text(),j[g]=j[g]||i,j[h]=j[h]||e,j.$order=++o,p[i]=j,b.is(":selected")&&c.items.push(i)}},s=function(b){var d,e,f,g,h;for(b=a(b),f=b.attr("label"),f&&(g=q(b)||{},g[i]=f,g[j]=f,c.optgroups[f]=g),h=a("option",b),d=0,e=h.length;e>d;d++)r(h[d],f)};for(c.maxItems=b.attr("multiple")?null:1,n=b.children(),k=0,l=n.length;l>k;k++)m=n[k].tagName.toLowerCase(),"optgroup"===m?s(n[k]):"option"===m&&r(n[k])};return this.each(function(){if(!this.selectize){var e,f=a(this),g=this.tagName.toLowerCase(),h=f.attr("placeholder")||f.attr("data-placeholder");h||d.allowEmptyOption||(h=f.children('option[value=""]').text());var i={placeholder:h,options:{},optgroups:{},items:[]};"select"===g?l(f,i):k(f,i),e=new L(f,a.extend(!0,{},c,i,b))}})},a.fn.selectize.defaults=L.defaults,L.define("drag_drop",function(){if(!a.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var b=this;b.lock=function(){var a=b.lock;return function(){var c=b.$control.data("sortable");return c&&c.disable(),a.apply(b,arguments)}}(),b.unlock=function(){var a=b.unlock;return function(){var c=b.$control.data("sortable");return c&&c.enable(),a.apply(b,arguments)}}(),b.setup=function(){var c=b.setup;return function(){c.apply(this,arguments);var d=b.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:b.isLocked,start:function(a,b){b.placeholder.css("width",b.helper.css("width")),d.css({overflow:"visible"})},stop:function(){d.css({overflow:"hidden"});var c=b.$activeItems?b.$activeItems.slice():null,e=[];d.children("[data-value]").each(function(){e.push(a(this).attr("data-value"))}),b.setValue(e),b.setActiveItem(c)}})}}()}}),L.define("dropdown_header",function(b){var c=this;b=a.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(a){return'<div class="'+a.headerClass+'"><div class="'+a.titleRowClass+'"><span class="'+a.labelClass+'">'+a.title+'</span><a href="javascript:void(0)" class="'+a.closeClass+'">&times;</a></div></div>'}},b),c.setup=function(){var d=c.setup;return function(){d.apply(c,arguments),c.$dropdown_header=a(b.html(b)),c.$dropdown.prepend(c.$dropdown_header)}}()}),L.define("optgroup_columns",function(b){var c=this;b=a.extend({equalizeWidth:!0,equalizeHeight:!0},b),this.getAdjacentOption=function(b,c){var d=b.closest("[data-group]").find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var d,e,f,g;return!this.isOpen||b.keyCode!==j&&b.keyCode!==m?a.apply(this,arguments):(c.ignoreHover=!0,g=this.$activeOption.closest("[data-group]"),d=g.find("[data-selectable]").index(this.$activeOption),g=b.keyCode===j?g.prev("[data-group]"):g.next("[data-group]"),f=g.find("[data-selectable]"),e=f.eq(Math.min(f.length-1,d)),void(e.length&&this.setActiveOption(e)))}}();var d=function(){var a,b=d.width,c=document;return"undefined"==typeof b&&(a=c.createElement("div"),a.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',a=a.firstChild,c.body.appendChild(a),b=d.width=a.offsetWidth-a.clientWidth,c.body.removeChild(a)),b},e=function(){var e,f,g,h,i,j,k;if(k=a("[data-group]",c.$dropdown_content),f=k.length,f&&c.$dropdown_content.width()){if(b.equalizeHeight){for(g=0,e=0;f>e;e++)g=Math.max(g,k.eq(e).height());k.css({height:g})}b.equalizeWidth&&(j=c.$dropdown_content.innerWidth()-d(),h=Math.round(j/f),k.css({width:h}),f>1&&(i=j-h*(f-1),k.eq(f-1).css({width:i})))}};(b.equalizeHeight||b.equalizeWidth)&&(B.after(this,"positionDropdown",e),B.after(this,"refreshOptions",e))}),L.define("remove_button",function(b){if("single"!==this.settings.mode){b=a.extend({label:"&times;",title:"Remove",className:"remove",append:!0},b);var c=this,d='<a href="javascript:void(0)" class="'+b.className+'" tabindex="-1" title="'+z(b.title)+'">'+b.label+"</a>",e=function(a,b){var c=a.search(/(<\/[^>]+>\s*)$/);return a.substring(0,c)+b+a.substring(c)};this.setup=function(){var f=c.setup;return function(){if(b.append){var g=c.settings.render.item;c.settings.render.item=function(){return e(g.apply(this,arguments),d)}}f.apply(this,arguments),this.$control.on("click","."+b.className,function(b){if(b.preventDefault(),!c.isLocked){var d=a(b.currentTarget).parent();c.setActiveItem(d),c.deleteSelection()&&c.setCaret(c.items.length)}})}}()}}),L.define("restore_on_backspace",function(a){var b=this;a.text=a.text||function(a){return a[this.settings.labelField]},this.onKeyDown=function(){var c=b.onKeyDown;return function(b){var d,e;return b.keyCode===p&&""===this.$control_input.val()&&!this.$activeItems.length&&(d=this.caretPos-1,d>=0&&d<this.items.length)?(e=this.options[this.items[d]],this.deleteSelection(b)&&(this.setTextboxValue(a.text.apply(this,[e])),this.refreshOptions(!0)),void b.preventDefault()):c.apply(this,arguments)}}()}),L}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?exports.SirTrevor=b(require("jquery")):a.SirTrevor=b(a.jQuery)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){"use strict";var d=c(2);c(50).shim(),c(53),c(54),c(55);var e=c(57),f={config:c(58),log:e.log,Locales:c(59),Events:c(60),EventBus:c(62),EditorStore:c(63),Submittable:c(64),FileUploader:c(65),BlockMixins:c(66),BlockPositioner:c(186),BlockReorder:c(189),BlockDeletion:c(190),BlockValidations:c(191),BlockStore:c(192),BlockManager:c(193),SimpleBlock:c(197),Block:c(196),Blocks:c(194),BlockControl:c(208),BlockControls:c(209),FloatingBlockControls:c(210),FormatBar:c(211),Editor:c(212),toMarkdown:c(215),toHTML:c(200),setDefaults:function(a){Object.assign(f.config.defaults,a||{})},getInstance:e.getInstance,setBlockOptions:function(a,b){var c=f.Blocks[a];d.isUndefined(c)||Object.assign(c.prototype,b||{})},runOnAllInstances:function(a){if(f.Editor.prototype.hasOwnProperty(a)){var b=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(f.config.instances,function(c){c[a].apply(null,b)})}else f.log("method doesn't exist")}};Object.assign(f,c(213)),a.exports=f},function(a,b,c){"use strict";b.isEmpty=c(3),b.isFunction=c(22),b.isObject=c(11),b.isString=c(30),b.isUndefined=c(31),b.result=c(32),b.template=c(33),b.uniqueId=c(49)},function(a,b,c){function d(a){var b=!0;if(!a)return b;var c=l.call(a),d=a.length;return c==h||c==j||c==g||c==i&&"number"==typeof d&&f(a.splice)?!d:(e(a,function(){return b=!1}),b)}var e=c(4),f=c(22),g="[object Arguments]",h="[object Array]",i="[object Object]",j="[object String]",k=Object.prototype,l=k.toString;a.exports=d},function(a,b,c){var d=c(5),e=c(26),f=c(29),g=function(a,b,c){var g,h=a,i=h;if(!h)return i;if(!f[typeof h])return i;b=b&&"undefined"==typeof c?b:d(b,c,3);for(var j=-1,k=f[typeof h]&&e(h),l=k?k.length:0;++j<l;)if(g=k[j],b(h[g],g,a)===!1)return i;return i};a.exports=g},function(a,b,c){function d(a,b,c){if("function"!=typeof a)return f;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(h.funcNames&&(d=!a.name),d=d||!h.funcDecomp,!d)){var l=k.call(a);h.funcNames||(d=!i.test(l)),d||(d=j.test(l),g(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return e(a,b)}var e=c(6),f=c(23),g=c(14),h=c(24),i=/^\s*function[ \n\r\t]+\w/,j=/\bthis\b/,k=Function.prototype.toString;a.exports=d},function(a,b,c){function d(a,b){return arguments.length>2?e(a,17,f(arguments,2),null,b):e(a,1,null,null,b)}var e=c(7),f=c(17);a.exports=d},function(a,b,c){function d(a,b,c,i,l,m){var n=1&b,o=2&b,p=4&b,q=16&b,r=32&b;if(!o&&!g(a))throw new TypeError;q&&!c.length&&(b&=-17,q=c=!1),r&&!i.length&&(b&=-33,r=i=!1);var s=a&&a.__bindData__;if(s&&s!==!0)return s=h(s),s[2]&&(s[2]=h(s[2])),s[3]&&(s[3]=h(s[3])),!n||1&s[1]||(s[4]=l),!n&&1&s[1]&&(b|=8),!p||4&s[1]||(s[5]=m),q&&j.apply(s[2]||(s[2]=[]),c),r&&k.apply(s[3]||(s[3]=[]),i),s[1]|=b,d.apply(null,s);var t=1==b||17===b?e:f;return t([a,b,c,i,l,m])}var e=c(8),f=c(18),g=c(22),h=c(17),i=[],j=i.push,k=i.unshift;a.exports=d},function(a,b,c){function d(a){function b(){if(d){var a=h(d);j.apply(a,arguments)}if(this instanceof b){var g=e(c.prototype),k=c.apply(g,a||arguments);return f(k)?k:g}return c.apply(i,a||arguments)}var c=a[0],d=a[2],i=a[4];return g(b,a),b}var e=c(9),f=c(11),g=c(14),h=c(17),i=[],j=i.push;a.exports=d},function(a,b,c){(function(b){function d(a,b){return f(a)?g(a):{}}var e=c(10),f=c(11),g=(c(13),e(g=Object.create)&&g);g||(d=function(){function a(){}return function(c){if(f(c)){a.prototype=c;var d=new a;a.prototype=null}return d||b.Object()}}()),a.exports=d}).call(b,function(){return this}())},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b,c){function d(a){return!(!a||!e[typeof a])}var e=c(12);a.exports=d},function(a,b){var c={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=c},function(a,b){function c(){}a.exports=c},function(a,b,c){var d=c(15),e=c(16),f={configurable:!1,enumerable:!1,value:null,writable:!1},g=function(){try{var a={},b=d(b=Object.defineProperty)&&b,c=b(a,a,a)&&b}catch(e){}return c}(),h=g?function(a,b){f.value=b,g(a,"__bindData__",f)}:e;a.exports=h},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b){function c(){}a.exports=c},function(a,b){function c(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}a.exports=c},function(a,b,c){function d(a){function b(){var a=o?m:this;if(k){var g=h(k);j.apply(g,arguments)}if((l||q)&&(g||(g=h(arguments)),l&&j.apply(g,l),q&&g.length<n))return i|=16,d([c,r?i:-4&i,g,null,m,n]);if(g||(g=arguments),p&&(c=a[s]),this instanceof b){a=e(c.prototype);var t=c.apply(a,g);return f(t)?t:a}return c.apply(a,g)}var c=a[0],i=a[1],k=a[2],l=a[3],m=a[4],n=a[5],o=1&i,p=2&i,q=4&i,r=8&i,s=c;return g(b,a),b}var e=c(19),f=c(11),g=c(14),h=c(17),i=[],j=i.push;a.exports=d},function(a,b,c){(function(b){function d(a,b){return f(a)?g(a):{}}var e=c(20),f=c(11),g=(c(21),e(g=Object.create)&&g);g||(d=function(){function a(){}return function(c){if(f(c)){a.prototype=c;var d=new a;a.prototype=null}return d||b.Object()}}()),a.exports=d}).call(b,function(){return this}())},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b){function c(){}a.exports=c},function(a,b){function c(a){return"function"==typeof a}a.exports=c},function(a,b){function c(a){return a}a.exports=c},function(a,b,c){(function(b){var d=c(25),e=/\bthis\b/,f={};f.funcDecomp=!d(b.WinRTError)&&e.test(function(){return this}),f.funcNames="string"==typeof Function.name,a.exports=f}).call(b,function(){return this}())},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b,c){var d=c(27),e=c(11),f=c(28),g=d(g=Object.keys)&&g,h=g?function(a){return e(a)?g(a):[]}:f;a.exports=h},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b,c){var d=c(29),e=Object.prototype,f=e.hasOwnProperty,g=function(a){var b,c=a,e=[];if(!c)return e;if(!d[typeof a])return e;for(b in c)f.call(c,b)&&e.push(b);return e};a.exports=g},function(a,b){var c={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=c},function(a,b){function c(a){return"string"==typeof a||a&&"object"==typeof a&&f.call(a)==d||!1}var d="[object String]",e=Object.prototype,f=e.toString;a.exports=c},function(a,b){function c(a){return"undefined"==typeof a}a.exports=c},function(a,b,c){function d(a,b){if(a){var c=a[b];return e(c)?a[b]():c}}var e=c(22);a.exports=d},function(a,b,c){function d(a,b,c){var d=i.imports._.templateSettings||i;a=String(a||""),c=e({},c,d);var q,r=e({},c.imports,d.imports),s=g(r),t=j(r),u=0,v=c.interpolate||o,w="__p += '",x=RegExp((c.escape||o).source+"|"+v.source+"|"+(v===h?n:o).source+"|"+(c.evaluate||o).source+"|$","g");a.replace(x,function(b,c,d,e,g,h){return d||(d=e),w+=a.slice(u,h).replace(p,f),c&&(w+="' +\n__e("+c+") +\n'"),g&&(q=!0,w+="';\n"+g+";\n__p += '"),d&&(w+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),u=h+b.length,b}),w+="';\n";var y=c.variable,z=y;z||(y="obj",w="with ("+y+") {\n"+w+"\n}\n"),w=(q?w.replace(k,""):w).replace(l,"$1").replace(m,"$1;"),w="function("+y+") {\n"+(z?"":y+" || ("+y+" = {});\n")+"var __t, __p = '', __e = _.escape"+(q?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+w+"return __p\n}";try{var A=Function(s,"return "+w).apply(void 0,t)}catch(B){throw B.source=w,B}return b?A(b):(A.source=w,A)}var e=c(34),f=(c(40),c(45)),g=c(35),h=c(46),i=c(47),j=c(48),k=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,m=/(__e\(.*?\)|\b__t\)) \+\n'';/g,n=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,o=/($^)/,p=/['\n\r\t\u2028\u2029\\]/g;a.exports=d},function(a,b,c){var d=c(35),e=c(39),f=function(a,b,c){var f,g=a,h=g;if(!g)return h;for(var i=arguments,j=0,k="number"==typeof c?2:i.length;++j<k;)if(g=i[j],g&&e[typeof g])for(var l=-1,m=e[typeof g]&&d(g),n=m?m.length:0;++l<n;)f=m[l],"undefined"==typeof h[f]&&(h[f]=g[f]);return h};a.exports=f},function(a,b,c){var d=c(36),e=c(11),f=c(37),g=d(g=Object.keys)&&g,h=g?function(a){return e(a)?g(a):[]}:f;a.exports=h},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b,c){var d=c(38),e=Object.prototype,f=e.hasOwnProperty,g=function(a){var b,c=a,e=[];if(!c)return e;if(!d[typeof a])return e;for(b in c)f.call(c,b)&&e.push(b);return e};a.exports=g},function(a,b){var c={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=c},function(a,b){var c={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=c},function(a,b,c){function d(a){return null==a?"":String(a).replace(f,e)}var e=c(41),f=(c(35),c(43));a.exports=d},function(a,b,c){function d(a){return e[a]}var e=c(42);a.exports=d},function(a,b){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.exports=c},function(a,b,c){var d=c(44),e=c(35),f=RegExp("["+e(d).join("")+"]","g");a.exports=f},function(a,b){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.exports=c},function(a,b){function c(a){return"\\"+d[a]}var d={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};a.exports=c},function(a,b){var c=/<%=([\s\S]+?)%>/g;a.exports=c},function(a,b,c){var d=c(40),e=c(46),f={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:e,variable:"",imports:{_:{escape:d}}};a.exports=f},function(a,b,c){function d(a){for(var b=-1,c=e(a),d=c.length,f=Array(d);++b<d;)f[b]=a[c[b]];return f}var e=c(35);a.exports=d},function(a,b){function c(a){var b=++d;return String(null==a?"":a)+b}var d=0;a.exports=c},function(a,b,c){"use strict";var d=c(51),e=function(a){return"undefined"!=typeof a&&null!==a},f=function(a,b){if(!e(a))throw new TypeError("target must be an object");var c,f,g,h,i=Object(a);for(c=1;c<arguments.length;++c)for(f=Object(arguments[c]),h=d(f),g=0;g<h.length;++g)i[h[g]]=f[h[g]];return i};f.shim=function(){return Object.assign||(Object.assign=f),Object.assign||f},a.exports=f},function(a,b,c){"use strict";var d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=Array.prototype.slice,g=c(52),h=!{toString:null}.propertyIsEnumerable("toString"),i=function(){}.propertyIsEnumerable("prototype"),j=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],k=function(a){var b=a.constructor;return b&&b.prototype===a},l={$window:!0,$console:!0,$parent:!0,$self:!0,$frames:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0},m=function(){if("undefined"==typeof window)return!1;for(var a in window)if(!l["$"+a]&&d.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{k(window[a])}catch(b){return!0}return!1}(),n=function(a){if("undefined"==typeof window&&!m)return k(a);try{return k(a)}catch(b){return!1}},o=function(a){var b=null!==a&&"object"==typeof a,c="[object Function]"===e.call(a),f=g(a),k=b&&"[object String]"===e.call(a),l=[];if(!b&&!c&&!f)throw new TypeError("Object.keys called on a non-object");var m=i&&c;if(k&&a.length>0&&!d.call(a,0))for(var o=0;o<a.length;++o)l.push(String(o));if(f&&a.length>0)for(var p=0;p<a.length;++p)l.push(String(p));else for(var q in a)m&&"prototype"===q||!d.call(a,q)||l.push(String(q));if(h)for(var r=n(a),s=0;s<j.length;++s)r&&"constructor"===j[s]||!d.call(a,j[s])||l.push(j[s]);return l};o.shim=function(){if(Object.keys){var a=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!a){var b=Object.keys;Object.keys=function(a){return b(g(a)?f.call(a):a)}}}else Object.keys=o;return Object.keys||o},a.exports=o},function(a,b){"use strict";var c=Object.prototype.toString;a.exports=function(a){var b=c.call(a),d="[object Arguments]"===b;return d||(d="[object Array]"!==b&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Function]"===c.call(a.callee)),d}},function(a,b){!function(a){if(!Array.prototype.find){var b=function(a){var b=Object(this),c=b.length<0?0:b.length>>>0;if(0!==c){if("function"!=typeof a||"[object Function]"!==Object.prototype.toString.call(a))throw new TypeError("Array#find: predicate must be a function");for(var d,e=arguments[1],f=0;c>f;f++)if(d=b[f],a.call(e,d,f,b))return d}};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:b,configurable:!0,enumerable:!1,writable:!0})}catch(c){}Array.prototype.find||(Array.prototype.find=b)}}(this)},function(a,b){"use strict";[].includes||(Array.prototype.includes=function(a){if(void 0===this||null===this)throw new TypeError("Cannot convert this value to object");var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d,e=parseInt(arguments[1])||0;for(e>=0?d=e:(d=c+e,0>d&&(d=0));c>d;){var f=b[d];if(a===f||a!==a&&f!==f)return!0;d++}return!1})},function(a,b,c){"use strict";function d(a){a.preventDefault()}function e(a){a.originalEvent.dataTransfer.dropEffect="copy",g(a.currentTarget).addClass("st-drag-over"),a.preventDefault()}function f(a){g(a.currentTarget).removeClass("st-drag-over"),a.preventDefault()}var g=c(56);g.fn.dropArea=function(){return this.bind("dragenter",d).bind("dragover",e).bind("dragleave",f),this},g.fn.noDropArea=function(){return this.unbind("dragenter").unbind("dragover").unbind("dragleave"),this},g.fn.caretToEnd=function(){var a,b;return a=document.createRange(),a.selectNodeContents(this[0]),a.collapse(!1),b=window.getSelection(),b.removeAllRanges(),b.addRange(a),this}},function(b,c){b.exports=a},function(a,b,c){"use strict";var d=c(56),e=c(2),f=c(58),g=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,h={getInstance:function(a){return e.isUndefined(a)?f.instances[0]:e.isString(a)?f.instances.find(function(b){return b.ID===a}):f.instances[a]},getInstanceBySelection:function(){return h.getInstance(d(window.getSelection().anchorNode).parents(".st-block").data("instance"))},getBlockBySelection:function(){return h.getInstanceBySelection().findBlockById(d(window.getSelection().anchorNode).parents(".st-block").get(0).id)},log:function(){!e.isUndefined(console)&&f.debug&&console.log.apply(console,arguments)},isURI:function(a){return g.test(a)},titleize:function(a){return null===a?"":(a=String(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()}))},classify:function(a){return h.titleize(String(a).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},flatten:function(a){var b={};return(Array.isArray(a)?a:Object.keys(a)).forEach(function(a){b[a]=!0}),b},underscored:function(a){return a.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(a){return a.split("").reverse().join("")},toSlug:function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}};a.exports=h},function(a,b){"use strict";var c={html:['<div class="st-block__dropzone">','<span class="st-icon"><%= _.result(block, "icon_name") %></span>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},d={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},e={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};a.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:c,paste_options:d,upload_options:e},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",baseImageUrl:"/sir-trevor-uploads/",errorsContainer:void 0,convertFromMarkdown:!0,formatBar:{commands:[{name:"Bold",title:"bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"link",cmd:"unlink",text:"link"}]}}}},function(a,b,c){"use strict";var d=c(2),e=c(58),f=c(57),g={en:{general:{"delete":"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(f.log("Using i18n stub"),window.i18n={t:function(a,b){var c,f,h,i,j=a.split(":");for(f=g[e.language],i=0;i<j.length;i++)h=j[i],d.isUndefined(f[h])||(f=f[h]);return c=f,d.isString(c)?(c.indexOf("__")>=0&&Object.keys(b).forEach(function(a){c=c.replace("__"+a+"__",b[a])}),c):""}}):(f.log("Using i18next"),i18n.init({resStore:g,fallbackLng:e.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),a.exports=g},function(a,b,c){"use strict";a.exports=c(61)},function(a,b,c){var d;!function(e,f){d=function(){return e.Eventable=f()}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))}(this,function(){function a(a){var b,c=2;return function(){return--c>0?b=a.apply(this,arguments):a=null,b}}function b(a,b){e[a]=function(a,c,d){var e=this._listeners||(this._listeners={}),f=a._listenerId||(a._listenerId=(new Date).getTime());return e[f]=a,"object"==typeof c&&(d=this),a[b](c,d,this),
this}}var c=[],d=c.slice,e={on:function(a,b,c){if(!g(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(b,c,d){if(!g(this,"once",b,[c,d])||!c)return this;var e=this,f=a(function(){e.off(b,f),c.apply(this,arguments)});return f._callback=c,this.on(b,f,d)},off:function(a,b,c){var d,e,f,h,i,j,k,l;if(!this._events||!g(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:Object.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=f.length;l>k;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=d.call(arguments,1);if(!g(this,"trigger",a,b))return this;var c=this._events[a],e=this._events.all;return c&&h(c,b),e&&h(e,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},f=/\s+/,g=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(f.test(c)){for(var g=c.split(f),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(d));return!1}return!0},h=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}};return b("listenTo","on"),b("listenToOnce","once"),e.bind=e.on,e.unbind=e.off,e})},function(a,b,c){"use strict";a.exports=Object.assign({},c(60))},function(a,b,c){"use strict";var d=c(2),e=c(57),f=function(a,b){this.mediator=b,this.initialize(a?a.trim():"")};Object.assign(f.prototype,{initialize:function(a){this.store=this._parseData(a)||{data:[]}},retrieve:function(){return this.store},toString:function(a){return JSON.stringify(this.store,void 0,a)},reset:function(){e.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(a){return this.store.data.push(a),this.store},_parseData:function(a){var b;if(0===a.length)return b;try{var c=JSON.parse(a);d.isUndefined(c.data)||(b=c)}catch(e){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(e)}return b}}),a.exports=f},function(a,b,c){"use strict";var d=c(56),e=c(57),f=c(62),g=function(a){this.$form=a,this.initialize()};Object.assign(g.prototype,{initialize:function(){this.submitBtn=this.$form.find("input[type='submit']");var a=[];this.submitBtn.each(function(b,c){a.push(d(c).attr("value"))}),this.submitBtnTitles=a,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(a,b){this.submitBtn.attr("value",b)},resetSubmitButton:function(){var a=this.submitBtnTitles;this.submitBtn.each(function(b,c){d(c).attr("value",a[b])})},onUploadStart:function(a){this.globalUploadCount++,e.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(a){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,e.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(a){e.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(a){this.setSubmitButton(null,a||i18n.t("general:wait")),this.submitBtn.attr("disabled","disabled").addClass("disabled")},_enableSubmitButton:function(){this.resetSubmitButton(),this.submitBtn.removeAttr("disabled").removeClass("disabled")},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){Object.keys(this._events).forEach(function(a){f.on(a,this[this._events[a]],this)},this)}}),a.exports=g},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(62);a.exports=function(a,b,c,i){h.trigger("onUploadStart");var j=[a.blockID,(new Date).getTime(),"raw"].join("-"),k=new FormData;k.append("attachment[name]",b.name),k.append("attachment[file]",b),k.append("attachment[uid]",j),a.resetMessages();var l=function(b){g.log("Upload callback called"),h.trigger("onUploadStop",b),!d.isUndefined(c)&&d.isFunction(c)&&c.apply(a,arguments,b)},m=function(b,c,e){g.log("Upload callback error called"),h.trigger("onUploadStop",void 0,e,c,b),!d.isUndefined(i)&&d.isFunction(i)&&i.call(a,c)},n=a.uploadUrl||f.defaults.uploadUrl,o=e.ajax({url:n,data:k,cache:!1,contentType:!1,processData:!1,dataType:"json",type:"POST"});return a.addQueuedItem(j,o),o.done(l).fail(m).always(a.removeQueuedItem.bind(a,j)),o}},function(a,b,c){"use strict";a.exports={Ajaxable:c(67),Controllable:c(68),Droppable:c(69),Fetchable:c(70),Pastable:c(71),Uploadable:c(72),MultiEditable:c(73)}},function(a,b,c){"use strict";var d=c(57);a.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(a,b){d.log("Adding queued item for "+this.blockID+" called "+a),this._queued.push({name:a,deferred:b})},removeQueuedItem:function(a){d.log("Removing queued item for "+this.blockID+" called "+a),this._queued=this._queued.filter(function(b){return b.name!==a})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(a){d.log("Aborting queued request: "+a.name),a.deferred.abort()},this)}}},function(a,b,c){"use strict";var d=c(56),e=c(57);a.exports={mixinName:"Controllable",initializeControllable:function(){e.log("Adding controllable to block "+this.blockID),this.$control_ui=d("<div>",{"class":"st-block__control-ui"}),Object.keys(this.controls).forEach(function(a){this.addUiControl(a,this.controls[a].bind(this))},this),this.$inner.append(this.$control_ui)},getControlTemplate:function(a){return d("<a>",{"data-icon":a,"class":"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+a})},addUiControl:function(a,b){this.$control_ui.append(this.getControlTemplate(a)),this.$control_ui.on("click",".st-block-control-ui-btn--"+a,b)}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(62);a.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){g.log("Adding droppable to block "+this.blockID),this.drop_options=Object.assign({},f.defaults.Block.drop_options,this.drop_options);var a=e(d.template(this.drop_options.html,{block:this,_:d}));this.$editor.hide(),this.$inputs.append(a),this.$dropzone=a,this.$dropzone.dropArea().bind("drop",this._handleDrop.bind(this)),this.$inner.addClass("st-block__inner--droppable")},_handleDrop:function(a){a.preventDefault(),a=a.originalEvent;var b=e(a.target),c=a.dataTransfer.types;b.removeClass("st-dropzone--dragover"),c&&c.some(function(a){return this.valid_drop_file_types.includes(a)},this)&&this.onDrop(a.dataTransfer),h.trigger("block:content:dropped",this.blockID)}}},function(a,b,c){"use strict";var d=c(2),e=c(56);a.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(c(67))},fetch:function(a,b,c){var f=d.uniqueId(this.blockID+"_fetch"),g=e.ajax(a);return this.resetMessages(),this.addQueuedItem(f,g),d.isUndefined(b)||g.done(b.bind(this)),d.isUndefined(c)||g.fail(c.bind(this)),g.always(this.removeQueuedItem.bind(this,f)),g}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57);a.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){g.log("Adding pastable to block "+this.blockID),this.paste_options=Object.assign({},f.defaults.Block.paste_options,this.paste_options),this.$inputs.append(d.template(this.paste_options.html,this)),this.$(".st-paste-block").bind("click",function(){e(this).select()}).bind("paste",this._handleContentPaste).bind("submit",this._handleContentPaste)}}},function(a,b,c){"use strict";var d=c(2),e=c(58),f=c(57),g=c(65);a.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){f.log("Adding uploadable to block "+this.blockID),this.withMixin(c(67)),this.upload_options=Object.assign({},e.defaults.Block.upload_options,this.upload_options),this.$inputs.append(d.template(this.upload_options.html,this))},uploader:function(a,b,c){return g(this,a,b,c)}}},function(a,b,c){"use strict";var d=c(2),e=c(74);a.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(a,b){var c=document.createElement("div");c.innerHTML=a;var f=c.querySelector(".st-block__editor"),g=d.uniqueId("editor-");f.dataset.editorId=g,f.addEventListener("keyup",this.getSelectionForFormatter),f.addEventListener("mouseup",this.getSelectionForFormatter);var h=d.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,i=e.initScribeInstance(f,this.scribeOptions,h);i.setContent(b);var j={node:c.removeChild(c.firstChild),el:f,scribe:i,id:g};return this.editors[g]=j,j},getCurrentTextEditor:function(){var a=document.activeElement.dataset.editorId,b=this.getTextEditor(a);return b&&(this.currentEditor=b),this.currentEditor},appendToTextEditor:function(a,b){var c=this.getTextEditor(a).scribe,d=new c.api.Selection,e=d.range.cloneRange(),f=c.el.lastChild;e.setStartAfter(f),e.collapse(!0),d.selection.removeAllRanges(),d.selection.addRange(e),b&&c.insertHTML(b)},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(a){return this.editors[a]},removeTextEditor:function(a){delete this.editors[a]},execTextBlockCommand:function(a){return e.execTextBlockCommand(this.getCurrentScribeInstance(),a)},queryTextBlockCommandState:function(a){return e.queryTextBlockCommandState(this.getCurrentScribeInstance(),a)}}},function(a,b,c){"use strict";var d=c(75),e=c(77),f=c(58),g=c(143),h=c(144),i=c(145),j={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0};a.exports={initScribeInstance:function(a,b,c){b=b||{};var k={debug:f.scribeDebug},l=j;d.isObject(b)&&(k=Object.assign(k,b));var m=new e(a,k);return b.hasOwnProperty("tags")&&(l=Object.assign(j,b.tags)),m.use(g()),m.use(h()),m.use(i({tags:l})),d.isFunction(c)&&c.call(this,m),m},execTextBlockCommand:function(a,b){if(d.isUndefined(a))throw"No Scribe instance found to query command";var c=a.getCommand(b);return a.el.focus(),c.execute()},queryTextBlockCommandState:function(a,b){if(d.isUndefined(a))throw"No Scribe instance found to query command";var c=a.getCommand(b),e=new a.api.Selection;return e.range&&c.queryState()}}},function(a,b,c){var d;(function(a,e){(function(){function f(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function g(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var d="number"==c?b:z+b;return a=(a=a[c])&&a[d],"object"==c?a&&f(a,b)>-1?0:-1:a?0:-1}function h(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:z+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function i(a){return a.charCodeAt(0)}function j(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function l(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],f=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&f&&"object"==typeof f)return!1;var g=o();g["false"]=g["null"]=g["true"]=g.undefined=!1;var i=o();for(i.array=a,i.cache=g,i.push=h;++b<c;)i.push(a[b]);return i}function m(a){return"\\"+ea[a]}function n(){return v.pop()||[]}function o(){return w.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function p(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function q(a){a.length=0,v.length<B&&v.push(a)}function r(a){var b=a.cache;b&&r(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,w.length<B&&w.push(a)}function s(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function t(a){function b(a){return a&&"object"==typeof a&&!kd(a)&&Rc.call(a,"__wrapped__")?a:new c(a)}function c(a,b){this.__chain__=!!b,this.__wrapped__=a}function d(a){function b(){if(d){var a=s(d);Sc.apply(a,arguments)}if(this instanceof b){var f=h(c.prototype),g=c.apply(f,a||arguments);return La(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return jd(b,a),b}function e(a,b,c,d,f){if(c){var g=c(a);if("undefined"!=typeof g)return g}var h=La(a);if(!h)return a;var i=Kc.call(a);if(!_[i]||!hd.nodeClass&&p(a))return a;var j=fd[i];switch(i){case T:case U:return new j(+a);case X:case $:return new j(a);case Z:return g=j(a.source,H.exec(a)),g.lastIndex=a.lastIndex,g}var k=kd(a);if(b){var l=!d;d||(d=n()),f||(f=n());for(var m=d.length;m--;)if(d[m]==a)return f[m];g=k?j(a.length):{}}else g=k?s(a):vd({},a);return k&&(Rc.call(a,"index")&&(g.index=a.index),Rc.call(a,"input")&&(g.input=a.input)),b?(d.push(a),f.push(g),(k?ud:yd)(a,function(a,h){g[h]=e(a,b,c,d,f)}),l&&(q(d),q(f)),g):g}function h(a,b){return La(a)?Yc(a):{}}function v(a,b,c){if("function"!=typeof a)return ec;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(hd.funcNames&&(d=!a.name),d=d||!hd.funcDecomp,!d)){var e=Pc.call(a);hd.funcNames||(d=!I.test(e)),d||(d=M.test(e),jd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Pb(a,b)}function w(a){function b(){var a=j?g:this;if(e){var o=s(e);Sc.apply(o,arguments)}if((f||l)&&(o||(o=s(arguments)),f&&Sc.apply(o,f),l&&o.length<i))return d|=16,w([c,m?d:-4&d,o,null,g,i]);if(o||(o=arguments),k&&(c=a[n]),this instanceof b){a=h(c.prototype);var p=c.apply(a,o);return La(p)?p:a}return c.apply(a,o)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],i=a[5],j=1&d,k=2&d,l=4&d,m=8&d,n=c;return jd(b,a),b}function B(a,b){var c=-1,d=pa(),e=a?a.length:0,h=e>=A&&d===f,i=[];if(h){var j=l(b);j?(d=g,b=j):h=!1}for(;++c<e;){var k=a[c];d(b,k)<0&&i.push(k)}return h&&r(b),i}function ea(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(kd(h)||ta(h))){b||(h=ea(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function ga(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&da[h]||b&&da[i]))return!1;if(null==a||null==b)return a===b;var j=Kc.call(a),k=Kc.call(b);if(j==R&&(j=Y),k==R&&(k=Y),j!=k)return!1;switch(j){case T:case U:return+a==+b;case X:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Z:case $:return a==Dc(b)}var l=j==S;if(!l){var m=Rc.call(a,"__wrapped__"),o=Rc.call(b,"__wrapped__");if(m||o)return ga(m?a.__wrapped__:a,o?b.__wrapped__:b,c,d,e,f);if(j!=Y||!hd.nodeClass&&(p(a)||p(b)))return!1;var r=!hd.argsObject&&ta(a)?Bc:a.constructor,s=!hd.argsObject&&ta(b)?Bc:b.constructor;if(r!=s&&!(Ka(r)&&r instanceof r&&Ka(s)&&s instanceof s)&&"constructor"in a&&"constructor"in b)return!1}var t=!e;e||(e=n()),f||(f=n());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(g=!0,e.push(a),f.push(b),l){if(u=a.length,v=b.length,g=v==u,g||d)for(;v--;){var w=u,x=b[v];if(d)for(;w--&&!(g=ga(a[w],x,c,d,e,f)););else if(!(g=ga(a[v],x,c,d,e,f)))break}}else xd(b,function(b,h,i){return Rc.call(i,h)?(v++,g=Rc.call(a,h)&&ga(a[h],b,c,d,e,f)):void 0}),g&&!d&&xd(a,function(a,b,c){return Rc.call(c,b)?g=--v>-1:void 0});return e.pop(),f.pop(),t&&(q(e),q(f)),g}function ha(a,b,c,d,e){(kd(b)?db:yd)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=kd(b))||zd(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?kd(j)?j:[]:zd(j)?j:{}),d.push(b),e.push(j),l||ha(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function ia(a,b){return a+Oc(ed()*(b-a+1))}function ka(a,b,c){var d=-1,e=pa(),h=a?a.length:0,i=[],j=!b&&h>=A&&e===f,k=c||j?n():i;if(j){var m=l(k);e=g,k=m}for(;++d<h;){var o=a[d],p=c?c(o,d,a):o;(b?!d||k[k.length-1]!==p:e(k,p)<0)&&((c||j)&&k.push(p),i.push(o))}return j?(q(k.array),r(k)):c&&q(k),i}function la(a){return function(c,d,e){var f={};if(d=b.createCallback(d,e,3),kd(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else ud(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ma(a,b,c,e,f,g){var h=1&b,i=2&b,j=4&b,k=16&b,l=32&b;if(!i&&!Ka(a))throw new Ec;k&&!c.length&&(b&=-17,k=c=!1),l&&!e.length&&(b&=-33,l=e=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=s(m),m[2]&&(m[2]=s(m[2])),m[3]&&(m[3]=s(m[3])),!h||1&m[1]||(m[4]=f),!h&&1&m[1]&&(b|=8),!j||4&m[1]||(m[5]=g),k&&Sc.apply(m[2]||(m[2]=[]),c),l&&Wc.apply(m[3]||(m[3]=[]),e),m[1]|=b,ma.apply(null,m);var n=1==b||17===b?d:w;return n([a,b,c,e,f,g])}function na(){ca.shadowedProps=P,ca.array=ca.bottom=ca.loop=ca.top="",ca.init="iterable",ca.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)ca[c]=a[c];var d=ca.args;ca.firstArg=/^[^,]+/.exec(d)[0];var e=yc("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+id(ca)+"\n}");return e(v,V,Gc,Rc,y,ta,kd,Qa,ca.keys,Hc,da,gd,$,Ic,Kc)}function oa(a){return qd[a]}function pa(){var a=(a=b.indexOf)===yb?f:a;return a}function qa(a){return"function"==typeof a&&Lc.test(a)}function ra(a){var b,c;return!a||Kc.call(a)!=Y||(b=a.constructor,Ka(b)&&!(b instanceof b))||!hd.argsClass&&ta(a)||!hd.nodeClass&&p(a)?!1:hd.ownLast?(xd(a,function(a,b,d){return c=Rc.call(d,b),!1}),c!==!1):(xd(a,function(a,b){c=b}),"undefined"==typeof c||Rc.call(a,c))}function sa(a){return rd[a]}function ta(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kc.call(a)==R||!1}function ua(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),e(a,b,"function"==typeof c&&v(c,d,1))}function va(a,b,c){return e(a,!0,"function"==typeof b&&v(b,c,1))}function wa(a,b){var c=h(a);return b?vd(c,b):c}function xa(a,c,d){var e;return c=b.createCallback(c,d,3),yd(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function ya(a,c,d){var e;return c=b.createCallback(c,d,3),Aa(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function za(a,b,c){var d=[];xd(a,function(a,b){d.push(b,a)});var e=d.length;for(b=v(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function Aa(a,b,c){var d=md(a),e=d.length;for(b=v(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function Ba(a){var b=[];return xd(a,function(a,c){Ka(a)&&b.push(c)}),b.sort()}function Ca(a,b){return a?Rc.call(a,b):!1}function Da(a){for(var b=-1,c=md(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function Ea(a){return a===!0||a===!1||a&&"object"==typeof a&&Kc.call(a)==T||!1}function Fa(a){return a&&"object"==typeof a&&Kc.call(a)==U||!1}function Ga(a){return a&&1===a.nodeType||!1}function Ha(a){var b=!0;if(!a)return b;var c=Kc.call(a),d=a.length;return c==S||c==$||(hd.argsClass?c==R:ta(a))||c==Y&&"number"==typeof d&&Ka(a.splice)?!d:(yd(a,function(){return b=!1}),b)}function Ia(a,b,c,d){return ga(a,b,"function"==typeof c&&v(c,d,2))}function Ja(a){return $c(a)&&!_c(parseFloat(a))}function Ka(a){return"function"==typeof a}function La(a){return!(!a||!da[typeof a])}function Ma(a){return Oa(a)&&a!=+a}function Na(a){return null===a}function Oa(a){return"number"==typeof a||a&&"object"==typeof a&&Kc.call(a)==X||!1}function Pa(a){return a&&da[typeof a]&&Kc.call(a)==Z||!1}function Qa(a){return"string"==typeof a||a&&"object"==typeof a&&Kc.call(a)==$||!1}function Ra(a){return"undefined"==typeof a}function Sa(a,c,d){var e={};return c=b.createCallback(c,d,3),yd(a,function(a,b,d){e[b]=c(a,b,d)}),e}function Ta(a){var b=arguments,c=2;if(!La(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=v(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=s(arguments,1,c),f=-1,g=n(),h=n();++f<c;)ha(a,e[f],d,g,h);return q(g),q(h),a}function Ua(a,c,d){var e={};if("function"!=typeof c){var f=[];xd(a,function(a,b){f.push(b)}),f=B(f,ea(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else c=b.createCallback(c,d,3),xd(a,function(a,b,d){c(a,b,d)||(e[b]=a)});return e}function Va(a){for(var b=-1,c=md(a),d=c.length,e=uc(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Wa(a,c,d){var e={};if("function"!=typeof c)for(var f=-1,g=ea(arguments,!0,!1,1),h=La(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else c=b.createCallback(c,d,3),xd(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e}function Xa(a,c,d,e){var f=kd(a);if(null==d)if(f)d=[];else{var g=a&&a.constructor,i=g&&g.prototype;d=h(i)}return c&&(c=b.createCallback(c,e,4),(f?ud:yd)(a,function(a,b,e){return c(d,a,b,e)})),d}function Ya(a){for(var b=-1,c=md(a),d=c.length,e=uc(d);++b<d;)e[b]=a[c[b]];return e}function Za(a){var b=arguments,c=-1,d=ea(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=uc(e);for(hd.unindexedChars&&Qa(a)&&(a=a.split(""));++c<e;)f[c]=a[d[c]];return f}function $a(a,b,c){var d=-1,e=pa(),f=a?a.length:0,g=!1;return c=(0>c?bd(0,f+c):c)||0,kd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Qa(a)?a.indexOf(b,c):e(a,b,c))>-1:ud(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function _a(a,c,d){var e=!0;if(c=b.createCallback(c,d,3),kd(a))for(var f=-1,g=a.length;++f<g&&(e=!!c(a[f],f,a)););else ud(a,function(a,b,d){return e=!!c(a,b,d)});return e}function ab(a,c,d){var e=[];if(c=b.createCallback(c,d,3),kd(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];c(h,f,a)&&e.push(h)}else ud(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e}function bb(a,c,d){if(c=b.createCallback(c,d,3),!kd(a)){var e;return ud(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}for(var f=-1,g=a.length;++f<g;){var h=a[f];if(c(h,f,a))return h}}function cb(a,c,d){var e;return c=b.createCallback(c,d,3),eb(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}function db(a,b,c){if(b&&"undefined"==typeof c&&kd(a))for(var d=-1,e=a.length;++d<e&&b(a[d],d,a)!==!1;);else ud(a,b,c);return a}function eb(a,b,c){var d=a,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:v(b,c,3),kd(a))for(;e--&&b(a[e],e,a)!==!1;);else{if("number"!=typeof e){var f=md(a);e=f.length}else hd.unindexedChars&&Qa(a)&&(d=a.split(""));ud(a,function(a,c,g){return c=f?f[--e]:--e,b(d[c],c,g)})}return a}function fb(a,b){var c=s(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=uc("number"==typeof f?f:0);return db(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function gb(a,c,d){var e=-1,f=a?a.length:0,g=uc("number"==typeof f?f:0);if(c=b.createCallback(c,d,3),kd(a))for(;++e<f;)g[e]=c(a[e],e,a);else ud(a,function(a,b,d){g[++e]=c(a,b,d)});return g}function hb(a,c,d){var e=-(1/0),f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&kd(a))for(var g=-1,h=a.length;++g<h;){var j=a[g];j>f&&(f=j)}else c=null==c&&Qa(a)?i:b.createCallback(c,d,3),ud(a,function(a,b,d){var g=c(a,b,d);g>e&&(e=g,f=a)});return f}function ib(a,c,d){var e=1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&kd(a))for(var g=-1,h=a.length;++g<h;){var j=a[g];f>j&&(f=j)}else c=null==c&&Qa(a)?i:b.createCallback(c,d,3),ud(a,function(a,b,d){var g=c(a,b,d);e>g&&(e=g,f=a)});return f}function jb(a,c,d,e){var f=arguments.length<3;if(c=b.createCallback(c,e,4),kd(a)){var g=-1,h=a.length;for(f&&(d=a[++g]);++g<h;)d=c(d,a[g],g,a)}else ud(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)});return d}function kb(a,c,d,e){var f=arguments.length<3;return c=b.createCallback(c,e,4),eb(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)}),d}function lb(a,c,d){return c=b.createCallback(c,d,3),ab(a,function(a,b,d){return!c(a,b,d)})}function mb(a,b,c){if(a&&"number"!=typeof a.length?a=Ya(a):hd.unindexedChars&&Qa(a)&&(a=a.split("")),null==b||c)return a?a[ia(0,a.length-1)]:u;var d=nb(a);return d.length=cd(bd(0,b),d.length),d}function nb(a){var b=-1,c=a?a.length:0,d=uc("number"==typeof c?c:0);return db(a,function(a){var c=ia(0,++b);d[b]=d[c],d[c]=a}),d}function ob(a){var b=a?a.length:0;return"number"==typeof b?b:md(a).length}function pb(a,c,d){var e;if(c=b.createCallback(c,d,3),kd(a))for(var f=-1,g=a.length;++f<g&&!(e=c(a[f],f,a)););else ud(a,function(a,b,d){return!(e=c(a,b,d))});return!!e}function qb(a,c,d){var e=-1,f=kd(c),g=a?a.length:0,h=uc("number"==typeof g?g:0);for(f||(c=b.createCallback(c,d,3)),db(a,function(a,b,d){var g=h[++e]=o();f?g.criteria=gb(c,function(b){return a[b]}):(g.criteria=n())[0]=c(a,b,d),g.index=e,g.value=a}),g=h.length,h.sort(j);g--;){var i=h[g];h[g]=i.value,f||q(i.criteria),r(i)}return h}function rb(a){return a&&"number"==typeof a.length?hd.unindexedChars&&Qa(a)?a.split(""):s(a):Ya(a)}function sb(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function tb(a){return B(a,ea(arguments,!0,!0,1))}function ub(a,c,d){var e=-1,f=a?a.length:0;for(c=b.createCallback(c,d,3);++e<f;)if(c(a[e],e,a))return e;return-1}function vb(a,c,d){var e=a?a.length:0;for(c=b.createCallback(c,d,3);e--;)if(c(a[e],e,a))return e;return-1}function wb(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=b.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:u;return s(a,0,cd(bd(0,e),f))}function xb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=gb(a,c,d)),ea(a,b)}function yb(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=0>c?bd(0,d+c):c||0}else if(c){var e=Hb(a,b);return a[e]===b?e:-1}return f(a,b,c)}function zb(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else e=null==c||d?1:c||e;return s(a,0,cd(bd(0,f-e),f))}function Ab(){for(var a=[],b=-1,c=arguments.length,d=n(),e=pa(),h=e===f,i=n();++b<c;){var j=arguments[b];(kd(j)||ta(j))&&(a.push(j),d.push(h&&j.length>=A&&l(b?a[b]:i)))}var k=a[0],m=-1,o=k?k.length:0,p=[];a:for(;++m<o;){var s=d[0];if(j=k[m],(s?g(s,j):e(i,j))<0){for(b=c,(s||i).push(j);--b;)if(s=d[b],(s?g(s,j):e(a[b],j))<0)continue a;p.push(j)}}for(;c--;)s=d[c],s&&r(s);return q(d),q(i),p}function Bb(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:u;return s(a,bd(0,f-e))}function Cb(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?bd(0,d+c):cd(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function Db(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Vc.call(a,f--,1),e--);return a}function Eb(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=bd(0,Mc((b-a)/(c||1))),f=uc(e);++d<e;)f[d]=a,a+=c;return f}function Fb(a,c,d){var e=-1,f=a?a.length:0,g=[];for(c=b.createCallback(c,d,3);++e<f;){var h=a[e];c(h,e,a)&&(g.push(h),Vc.call(a,e--,1),f--)}return g}function Gb(a,c,d){if("number"!=typeof c&&null!=c){var e=0,f=-1,g=a?a.length:0;for(c=b.createCallback(c,d,3);++f<g&&c(a[f],f,a);)e++}else e=null==c||d?1:bd(0,c);return s(a,e)}function Hb(a,c,d,e){var f=0,g=a?a.length:f;for(d=d?b.createCallback(d,e,1):ec,c=d(c);g>f;){var h=f+g>>>1;d(a[h])<c?f=h+1:g=h}return f}function Ib(){return ka(ea(arguments,!0,!0))}function Jb(a,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d="function"!=typeof c&&e&&e[c]===a?null:c,c=!1),null!=d&&(d=b.createCallback(d,e,3)),ka(a,c,d)}function Kb(a){return B(a,s(arguments,1))}function Lb(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(kd(c)||ta(c))var d=d?ka(B(d,c).concat(B(c,d))):c}return d||[]}function Mb(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?hb(Dd(a,"length")):0,d=uc(0>c?0:c);++b<c;)d[b]=Dd(a,b);return d}function Nb(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||kd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Ob(a,b){if(!Ka(b))throw new Ec;return function(){return--a<1?b.apply(this,arguments):void 0}}function Pb(a,b){return arguments.length>2?ma(a,17,s(arguments,2),null,b):ma(a,1,null,null,b)}function Qb(a){for(var b=arguments.length>1?ea(arguments,!0,!1,1):Ba(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ma(a[e],1,null,null,a)}return a}function Rb(a,b){return arguments.length>2?ma(b,19,s(arguments,2),null,a):ma(b,3,null,null,a)}function Sb(){for(var a=arguments,b=a.length;b--;)if(!Ka(a[b]))throw new Ec;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Tb(a,b){return b="number"==typeof b?b:+b||a.length,ma(a,4,null,null,null,b)}function Ub(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Ka(a))throw new Ec;if(b=bd(0,b)||0,c===!0){var n=!0;m=!1}else La(c)&&(n=c.leading,l="maxWait"in c&&(bd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Fd()-g);if(0>=c){e&&Nc(e);var l=j;e=i=j=u,l&&(k=Fd(),f=a.apply(h,d),i||e||(d=h=null))}else i=Uc(o,c)},p=function(){i&&Nc(i),e=i=j=u,(m||l!==b)&&(k=Fd(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=Fd(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=Nc(e)),k=g,f=a.apply(h,d)):e||(e=Uc(p,q))}return r&&i?i=Nc(i):i||b===l||(i=Uc(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Vb(a){if(!Ka(a))throw new Ec;var b=s(arguments,1);return Uc(function(){a.apply(u,b)},1)}function Wb(a,b){if(!Ka(a))throw new Ec;var c=s(arguments,2);return Uc(function(){a.apply(u,c)},b)}function Xb(a,b){if(!Ka(a))throw new Ec;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):z+arguments[0];return Rc.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Yb(a){var b,c;if(!Ka(a))throw new Ec;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Zb(a){return ma(a,16,s(arguments,1))}function $b(a){return ma(a,32,null,s(arguments,1))}function _b(a,b,c){var d=!0,e=!0;if(!Ka(a))throw new Ec;return c===!1?d=!1:La(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),aa.leading=d,aa.maxWait=b,aa.trailing=e,Ub(a,b,aa)}function ac(a,b){return ma(b,16,[a])}function bc(a){return function(){return a}}function cc(a,b,c){var d=typeof a;if(null==a||"function"==d)return v(a,b,c);if("object"!=d)return ic(a);var e=md(a),f=e[0],g=a[f];return 1!=e.length||g!==g||La(g)?function(b){for(var c=e.length,d=!1;c--&&(d=ga(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function dc(a){return null==a?"":Dc(a).replace(td,oa)}function ec(a){return a}function fc(a,d,e){var f=!0,g=d&&Ba(d);d&&(e||g.length)||(null==e&&(e=d),h=c,d=a,a=b,g=Ba(d)),e===!1?f=!1:La(e)&&"chain"in e&&(f=e.chain);var h=a,i=Ka(h);db(g,function(b){var c=a[b]=d[b];i&&(h.prototype[b]=function(){var b=this.__chain__,d=this.__wrapped__,e=[d];Sc.apply(e,arguments);var g=c.apply(a,e);if(f||b){if(d===g&&La(g))return this;g=new h(g),g.__chain__=b}return g})})}function gc(){return a._=Jc,this}function hc(){}function ic(a){return function(b){return b[a]}}function jc(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=ed();return cd(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return ia(a,b)}function kc(a,b){if(a){var c=a[b];return Ka(c)?a[b]():c}}function lc(a,c,d){
var e=b.templateSettings;a=Dc(a||""),d=wd({},d,e);var f,g=wd({},d.imports,e.imports),h=md(g),i=Ya(g),j=0,k=d.interpolate||L,l="__p += '",n=Cc((d.escape||L).source+"|"+k.source+"|"+(k===J?G:L).source+"|"+(d.evaluate||L).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),l+=a.slice(j,h).replace(N,m),c&&(l+="' +\n__e("+c+") +\n'"),g&&(f=!0,l+="';\n"+g+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=h+b.length,b}),l+="';\n";var o=d.variable,p=o;p||(o="obj",l="with ("+o+") {\n"+l+"\n}\n"),l=(f?l.replace(D,""):l).replace(E,"$1").replace(F,"$1;"),l="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var q="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+Q++ +"]")+"\n*/";try{var r=yc(h,"return "+l+q).apply(u,i)}catch(s){throw s.source=l,s}return c?r(c):(r.source=l,r)}function mc(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=uc(a);for(b=v(b,c,1);++d<a;)e[d]=b(d);return e}function nc(a){return null==a?"":Dc(a).replace(sd,sa)}function oc(a){var b=++x;return Dc(null==a?"":a)+b}function pc(a){return a=new c(a),a.__chain__=!0,a}function qc(a,b){return b(a),a}function rc(){return this.__chain__=!0,this}function sc(){return Dc(this.__wrapped__)}function tc(){return this.__wrapped__}a=a?ja.defaults(fa.Object(),a,ja.pick(fa,O)):fa;var uc=a.Array,vc=a.Boolean,wc=a.Date,xc=a.Error,yc=a.Function,zc=a.Math,Ac=a.Number,Bc=a.Object,Cc=a.RegExp,Dc=a.String,Ec=a.TypeError,Fc=[],Gc=xc.prototype,Hc=Bc.prototype,Ic=Dc.prototype,Jc=a._,Kc=Hc.toString,Lc=Cc("^"+Dc(Kc).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Mc=zc.ceil,Nc=a.clearTimeout,Oc=zc.floor,Pc=yc.prototype.toString,Qc=qa(Qc=Bc.getPrototypeOf)&&Qc,Rc=Hc.hasOwnProperty,Sc=Fc.push,Tc=Hc.propertyIsEnumerable,Uc=a.setTimeout,Vc=Fc.splice,Wc=Fc.unshift,Xc=function(){try{var a={},b=qa(b=Bc.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Yc=qa(Yc=Bc.create)&&Yc,Zc=qa(Zc=uc.isArray)&&Zc,$c=a.isFinite,_c=a.isNaN,ad=qa(ad=Bc.keys)&&ad,bd=zc.max,cd=zc.min,dd=a.parseInt,ed=zc.random,fd={};fd[S]=uc,fd[T]=vc,fd[U]=wc,fd[W]=yc,fd[Y]=Bc,fd[X]=Ac,fd[Z]=Cc,fd[$]=Dc;var gd={};gd[S]=gd[U]=gd[X]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},gd[T]=gd[$]={constructor:!0,toString:!0,valueOf:!0},gd[V]=gd[W]=gd[Z]={constructor:!0,toString:!0},gd[Y]={constructor:!0},function(){for(var a=P.length;a--;){var b=P[a];for(var c in gd)Rc.call(gd,c)&&!Rc.call(gd[c],b)&&(gd[c][b]=!1)}}(),c.prototype=b.prototype;var hd=b.support={};!function(){var b=function(){this.x=1},c={0:1,length:1},d=[];b.prototype={valueOf:1,y:1};for(var e in new b)d.push(e);for(e in arguments);hd.argsClass=Kc.call(arguments)==R,hd.argsObject=arguments.constructor==Bc&&!(arguments instanceof uc),hd.enumErrorProps=Tc.call(Gc,"message")||Tc.call(Gc,"name"),hd.enumPrototypes=Tc.call(b,"prototype"),hd.funcDecomp=!qa(a.WinRTError)&&M.test(t),hd.funcNames="string"==typeof yc.name,hd.nonEnumArgs=0!=e,hd.nonEnumShadows=!/valueOf/.test(d),hd.ownLast="x"!=d[0],hd.spliceObjects=(Fc.splice.call(c,0,1),!c[0]),hd.unindexedChars="x"[0]+Bc("x")[0]!="xx";try{hd.nodeClass=!(Kc.call(document)==Y&&!({toString:0}+""))}catch(f){hd.nodeClass=!0}}(1),b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:J,variable:"",imports:{_:b}};var id=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",hd.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):hd.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),hd.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),hd.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(hd.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),hd.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",hd.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||hd.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};Yc||(h=function(){function b(){}return function(c){if(La(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var jd=Xc?function(a,b){ba.value=b,Xc(a,"__bindData__",ba),ba.value=null}:hc;hd.argsClass||(ta=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Rc.call(a,"callee")&&!Tc.call(a,"callee")||!1});var kd=Zc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kc.call(a)==S||!1},ld=na({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),md=ad?function(a){return La(a)?hd.enumPrototypes&&"function"==typeof a||hd.nonEnumArgs&&a.length&&ta(a)?ld(a):ad(a):[]}:ld,nd={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:md,loop:"if (callback(iterable[index], index, collection) === false) return result"},od={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:md,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pd={top:"if (!objectTypes[typeof iterable]) return result;\n"+nd.top,array:!1},qd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rd=Da(qd),sd=Cc("("+md(rd).join("|")+")","g"),td=Cc("["+md(qd).join("")+"]","g"),ud=na(nd),vd=na(od,{top:od.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),wd=na(od),xd=na(nd,pd,{useHas:!1}),yd=na(nd,pd);Ka(/x/)&&(Ka=function(a){return"function"==typeof a&&Kc.call(a)==W});var zd=Qc?function(a){if(!a||Kc.call(a)!=Y||!hd.argsClass&&ta(a))return!1;var b=a.valueOf,c=qa(b)&&(c=Qc(b))&&Qc(c);return c?a==c||Qc(a)==c:ra(a)}:ra,Ad=la(function(a,b,c){Rc.call(a,c)?a[c]++:a[c]=1}),Bd=la(function(a,b,c){(Rc.call(a,c)?a[c]:a[c]=[]).push(b)}),Cd=la(function(a,b,c){a[c]=b}),Dd=gb,Ed=ab,Fd=qa(Fd=wc.now)&&Fd||function(){return(new wc).getTime()},Gd=8==dd(C+"08")?dd:function(a,b){return dd(Qa(a)?a.replace(K,""):a,b||0)};return b.after=Ob,b.assign=vd,b.at=Za,b.bind=Pb,b.bindAll=Qb,b.bindKey=Rb,b.chain=pc,b.compact=sb,b.compose=Sb,b.constant=bc,b.countBy=Ad,b.create=wa,b.createCallback=cc,b.curry=Tb,b.debounce=Ub,b.defaults=wd,b.defer=Vb,b.delay=Wb,b.difference=tb,b.filter=ab,b.flatten=xb,b.forEach=db,b.forEachRight=eb,b.forIn=xd,b.forInRight=za,b.forOwn=yd,b.forOwnRight=Aa,b.functions=Ba,b.groupBy=Bd,b.indexBy=Cd,b.initial=zb,b.intersection=Ab,b.invert=Da,b.invoke=fb,b.keys=md,b.map=gb,b.mapValues=Sa,b.max=hb,b.memoize=Xb,b.merge=Ta,b.min=ib,b.omit=Ua,b.once=Yb,b.pairs=Va,b.partial=Zb,b.partialRight=$b,b.pick=Wa,b.pluck=Dd,b.property=ic,b.pull=Db,b.range=Eb,b.reject=lb,b.remove=Fb,b.rest=Gb,b.shuffle=nb,b.sortBy=qb,b.tap=qc,b.throttle=_b,b.times=mc,b.toArray=rb,b.transform=Xa,b.union=Ib,b.uniq=Jb,b.values=Ya,b.where=Ed,b.without=Kb,b.wrap=ac,b.xor=Lb,b.zip=Mb,b.zipObject=Nb,b.collect=gb,b.drop=Gb,b.each=db,b.eachRight=eb,b.extend=vd,b.methods=Ba,b.object=Nb,b.select=ab,b.tail=Gb,b.unique=Jb,b.unzip=Mb,fc(b),b.clone=ua,b.cloneDeep=va,b.contains=$a,b.escape=dc,b.every=_a,b.find=bb,b.findIndex=ub,b.findKey=xa,b.findLast=cb,b.findLastIndex=vb,b.findLastKey=ya,b.has=Ca,b.identity=ec,b.indexOf=yb,b.isArguments=ta,b.isArray=kd,b.isBoolean=Ea,b.isDate=Fa,b.isElement=Ga,b.isEmpty=Ha,b.isEqual=Ia,b.isFinite=Ja,b.isFunction=Ka,b.isNaN=Ma,b.isNull=Na,b.isNumber=Oa,b.isObject=La,b.isPlainObject=zd,b.isRegExp=Pa,b.isString=Qa,b.isUndefined=Ra,b.lastIndexOf=Cb,b.mixin=fc,b.noConflict=gc,b.noop=hc,b.now=Fd,b.parseInt=Gd,b.random=jc,b.reduce=jb,b.reduceRight=kb,b.result=kc,b.runInContext=t,b.size=ob,b.some=pb,b.sortedIndex=Hb,b.template=lc,b.unescape=nc,b.uniqueId=oc,b.all=_a,b.any=pb,b.detect=bb,b.findWhere=bb,b.foldl=jb,b.foldr=kb,b.include=$a,b.inject=jb,fc(function(){var a={};return yd(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.first=wb,b.last=Bb,b.sample=mb,b.take=wb,b.head=wb,yd(b,function(a,d){var e="sample"!==d;b.prototype[d]||(b.prototype[d]=function(b,d){var f=this.__chain__,g=a(this.__wrapped__,b,d);return f||null!=b&&(!d||e&&"function"==typeof b)?new c(g,f):g})}),b.VERSION="2.4.2",b.prototype.chain=rc,b.prototype.toString=sc,b.prototype.value=tc,b.prototype.valueOf=tc,ud(["join","pop","shift"],function(a){var d=Fc[a];b.prototype[a]=function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new c(b,a):b}}),ud(["push","reverse","sort","unshift"],function(a){var c=Fc[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,arguments),this}}),ud(["concat","slice","splice"],function(a){var d=Fc[a];b.prototype[a]=function(){return new c(d.apply(this.__wrapped__,arguments),this.__chain__)}}),hd.spliceObjects||ud(["pop","shift","splice"],function(a){var d=Fc[a],e="splice"==a;b.prototype[a]=function(){var a=this.__chain__,b=this.__wrapped__,f=d.apply(b,arguments);return 0===b.length&&delete b[0],a||e?new c(f,a):f}}),b}var u,v=[],w=[],x=0,y={},z=+new Date+"",A=75,B=40,C=" 	\x0B\f \ufeff\n\r\u2028\u2029 ᠎             　",D=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,F=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,H=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,J=/<%=([\s\S]+?)%>/g,K=RegExp("^["+C+"]*0+(?=.$)"),L=/($^)/,M=/\bthis\b/,N=/['\n\r\t\u2028\u2029\\]/g,O=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],P=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Q=0,R="[object Arguments]",S="[object Array]",T="[object Boolean]",U="[object Date]",V="[object Error]",W="[object Function]",X="[object Number]",Y="[object Object]",Z="[object RegExp]",$="[object String]",_={};_[W]=!1,_[R]=_[S]=_[T]=_[U]=_[X]=_[Y]=_[Z]=_[$]=!0;var aa={leading:!1,maxWait:0,trailing:!1},ba={configurable:!1,enumerable:!1,value:null,writable:!1},ca={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},da={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},ea={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},fa=da[typeof window]&&window||this,ga=da[typeof b]&&b&&!b.nodeType&&b,ha=da[typeof a]&&a&&!a.nodeType&&a,ia=(ha&&ha.exports===ga&&ga,da[typeof e]&&e);!ia||ia.global!==ia&&ia.window!==ia||(fa=ia);var ja=t();fa._=ja,d=function(){return ja}.call(b,c,b,a),!(d!==u&&(a.exports=d))}).call(this)}).call(b,c(76)(a),function(){return this}())},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},function(a,b,c){var d,e;d=[c(100),c(129),c(109),c(114),c(116),c(124),c(78),c(137),c(138),c(105),c(103),c(139)],e=function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(j,m){i.call(this),this.el=j,this.commands={},this.options=l.checkOptions(m),this.commandPatches={},this._plainTextFormatterFactory=new n,this._htmlFormatterFactory=new o,this.api=new f(this),this.Immutable=k;var p=g(this);this.transactionManager=new p,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new h(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1);var q=k.OrderedSet(this.options.defaultPlugins).sort(l.sortByPlugin("setRootPElement")).filter(l.filterByBlockLevelMode(this.allowsBlockElements())).map(function(b){return a[b]}),r=k.List(this.options.defaultFormatters).filter(function(a){return!!c[a]}).map(function(a){return c[a]}),s=k.List.of(e.events),t=k.List(this.options.defaultCommandPatches).map(function(a){return e.commands[a]}),u=k.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(a){return b[a]}),v=k.List().concat(q,r,s,t,u);v.forEach(function(a){this.use(a())}.bind(this)),this.use(d())}function n(){this.formatters=k.List()}function o(){this.formatters={sanitize:k.List(),normalize:k.List(),"export":k.List()}}return m.prototype=Object.create(i.prototype),m.prototype.node=j,m.prototype.element=m.prototype.node,m.prototype.use=function(a){return a(this),this},m.prototype.setHTML=function(a,b){this._lastItem.content=a,b&&(this._skipFormatters=!0),this.el.innerHTML!==a&&(this.el.innerHTML=a)},m.prototype.getHTML=function(){return this.el.innerHTML},m.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},m.prototype.getTextContent=function(){return this.el.textContent},m.prototype.pushHistory=function(){var a=this;if(a.options.undo.enabled){var b=a._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(a.getHTML()!==b){var c=new a.api.Selection;c.placeMarkers();var d=a.getHTML();c.removeMarkers();var e=a.undoManager.item(a.undoManager.position);return(a._merge||a._forceMerge)&&e&&a._lastItem==e[0]?a._lastItem.content=d:(a._lastItem={previousItem:a._lastItem,content:d,scribe:a,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},a.undoManager.transact(a._lastItem,!1)),clearTimeout(a._mergeTimer),a._merge=!0,a._mergeTimer=setTimeout(function(){a._merge=!1},a.options.undo.interval),!0}}return!1},m.prototype.getCommand=function(a){return this.commands[a]||this.commandPatches[a]||new this.api.Command(a)},m.prototype.restoreFromHistory=function(a){this._lastItem=a,this.setHTML(a.content,!0);var b=new this.api.Selection;b.selectMarkers(),this.trigger("content-changed")},m.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},m.prototype.setContent=function(a){this.allowsBlockElements()||(a+="<br>"),this.setHTML(a),this.trigger("content-changed")},m.prototype.insertPlainText=function(a){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(a)+"</p>")},m.prototype.insertHTML=function(a){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(a))},m.prototype.isDebugModeEnabled=function(){return this.options.debug},m.prototype.registerHTMLFormatter=function(a,b){this._htmlFormatterFactory.formatters[a]=this._htmlFormatterFactory.formatters[a].push(b)},m.prototype.registerPlainTextFormatter=function(a){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(a)},n.prototype.format=function(a){var b=this.formatters.reduce(function(a,b){return b(a)},a);return b},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.format=function(a){var b=this.formatters.sanitize.concat(this.formatters.normalize),c=b.reduce(function(a,b){return b(a)},a);return c},o.prototype.formatForExport=function(a){return this.formatters["export"].reduce(function(a,b){return b(a)},a)},m}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(79)],e=function(a){"use strict";return function(b){function c(){this.history=[]}return a(c.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(b.pushHistory(),b.trigger("content-changed"))},run:function(a,c){this.start();try{a&&a()}finally{b._forceMerge=c===!0,this.end(),b._forceMerge=!1}}}),c}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(80),c(96)],e=function(a,b){var c=b(a);return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(81),c(82)],e=function(a,b){function c(c,d,e){var f=b(d);if(!e)return a(d,c,f);for(var g=-1,h=f.length;++g<h;){var i=f[g],j=c[i],k=e(j,d[i],i,c,d);(k===k?k===j:j!==j)&&("undefined"!=typeof j||i in c)||(c[i]=k)}return c}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(83),c(84),c(88),c(89)],e=function(a,b,c,d){var e=b(e=Object.keys)&&e,f=e?function(b){if(b)var f=b.constructor,g=b.length;return"function"==typeof f&&f.prototype===b||"function"!=typeof b&&g&&a(g)?d(b):c(b)?e(b):[]}:d;return f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return"number"==typeof a&&a>-1&&a%1==0&&b>=a}var b=Math.pow(2,53)-1;return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(85),c(87)],e=function(a,b){function c(a){return null==a?!1:h.call(a)==d?i.test(g.call(a)):b(a)&&e.test(a)||!1}var d="[object Function]",e=/^\[object .+?Constructor\]$/,f=Object.prototype,g=Function.prototype.toString,h=f.toString,i=RegExp("^"+a(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(86)],e=function(a){function b(b){return b=a(b),b&&d.test(b)?b.replace(c,"\\$&"):b}var c=/[.*+?^${}()|[\]\/\\]/g,d=RegExp(c.source);return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return"string"==typeof a?a:null==a?"":a+""}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return a&&"object"==typeof a||!1}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(90),c(91),c(92),c(83),c(93),c(94)],e=function(a,b,c,d,e,f){function g(g){for(var h=e(g),j=h.length,k=j&&g.length,l=k&&d(k)&&(b(g)||f.nonEnumArgs&&a(g)),m=-1,n=[];++m<j;){var o=h[m];(l&&c(o,k)||i.call(g,o))&&n.push(o)}return n}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(83),c(87)],e=function(a,b){function c(c){var f=b(c)?c.length:d;return a(f)&&g.call(c)==e||!1}var d,e="[object Arguments]",f=Object.prototype,g=f.toString;return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(83),c(84),c(87)],e=function(a,b,c){var d="[object Array]",e=Object.prototype,f=e.toString,g=b(g=Array.isArray)&&g,h=g||function(b){return c(b)&&a(b.length)&&f.call(b)==d||!1};return h}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a,c){return a=+a,c=null==c?b:c,a>-1&&a%1==0&&c>a}var b=Math.pow(2,53)-1;return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(90),c(91),c(92),c(83),c(88),c(94)],e=function(a,b,c,d,e,f){function g(g){if(null==g)return[];e(g)||(g=Object(g));var h=g.length;h=h&&d(h)&&(b(g)||f.nonEnumArgs&&a(g))&&h||0;for(var j=g.constructor,k=-1,l="function"==typeof j&&j.prototype===g,m=Array(h),n=h>0;++k<h;)m[k]=k+"";for(var o in g)n&&c(o,h)||"constructor"==o&&(l||!i.call(g,o))||m.push(o);return m}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(84),c(95)],e=function(a,b){var c=/\bthis\b/,d=Object.prototype,e=(e=b.window)&&e.document,f=d.propertyIsEnumerable,g={};return function(d){g.funcDecomp=!a(b.WinRTError)&&c.test(function(){return this}),g.funcNames="string"==typeof Function.name;try{g.dom=11===e.createDocumentFragment().nodeType}catch(h){g.dom=!1}try{g.nonEnumArgs=!f.call(arguments,1)}catch(h){g.nonEnumArgs=!0}}(0,0),g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;(function(a,c){d=[],e=function(){var d={"function":!0,object:!0},e=d[typeof b]&&b&&!b.nodeType&&b,f=d[typeof a]&&a&&!a.nodeType&&a,g=e&&f&&"object"==typeof c&&c,h=d[typeof window]&&window,i=g||h!==(this&&this.window)&&h||this;return i}.apply(b,d),!(void 0!==e&&(a.exports=e))}).call(b,c(76)(a),function(){return this}())},function(a,b,c){var d,e;d=[c(97),c(99)],e=function(a,b){function c(c){return function(){var d=arguments,e=d.length,f=d[0];if(2>e||null==f)return f;var g=d[e-2],h=d[e-1],i=d[3];e>3&&"function"==typeof g?(g=a(g,h,5),e-=2):(g=e>2&&"function"==typeof h?h:null,e-=g?1:0),i&&b(d[1],d[2],i)&&(g=3==e?null:g,e=2);for(var j=0;++j<e;){var k=d[j];k&&c(f,k,g)}return f}}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(98)],e=function(a){function b(b,c,d){if("function"!=typeof b)return a;if("undefined"==typeof c)return b;switch(d){case 1:return function(a){return b.call(c,a)};case 3:return function(a,d,e){return b.call(c,a,d,e)};case 4:return function(a,d,e,f){return b.call(c,a,d,e,f)};case 5:return function(a,d,e,f,g){return b.call(c,a,d,e,f,g)}}return function(){return b.apply(c,arguments)}}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return a}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(92),c(83),c(88)],e=function(a,b,c){function d(d,e,f){if(!c(f))return!1;var g=typeof e;if("number"==g)var h=f.length,i=b(h)&&a(e,h);else i="string"==g&&e in f;if(i){var j=f[e];return d===d?d===j:j!==j}return!1}return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(101),c(102),c(104),c(108)],e=function(a,b,c,d){"use strict";return{setRootPElement:a,enforcePElements:b,ensureSelectableContainers:c,inlineElementsMode:d}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){""===a.getHTML().trim()&&a.setContent("<p><br></p>")}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(103)],e=function(a){"use strict";return function(){return function(b){function c(b){var c=0;a.List(b.childNodes).filter(function(a){return a.nodeType===Node.TEXT_NODE||!e.isBlockElement(a)}).groupBy(function(a,b,d){return 0===b||a.previousSibling===d.get(b-1)?c:c+=1}).forEach(function(a){e.wrap(a.toArray(),document.createElement("p"))})}function d(a){for(var b,d=0;b=a.children[d++];)"BLOCKQUOTE"===b.tagName&&c(b)}var e=b.node;b.registerHTMLFormatter("normalize",function(a){var b=document.createElement("div");return b.innerHTML=a,c(b),d(b),b.innerHTML})}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){!function(b,c){a.exports=c()}(this,function(){"use strict";function a(a,b){b&&(a.prototype=Object.create(b.prototype)),a.prototype.constructor=a}function b(a){return a.value=!1,a}function c(a){a&&(a.value=!0)}function d(){}function e(a,b){b=b||0;for(var c=Math.max(0,a.length-b),d=new Array(c),e=0;c>e;e++)d[e]=a[e+b];return d}function f(a){return void 0===a.size&&(a.size=a.__iterate(h)),a.size}function g(a,b){return b>=0?+b:f(a)+ +b}function h(){return!0}function i(a,b,c){return(0===a||void 0!==c&&-c>=a)&&(void 0===b||void 0!==c&&b>=c)}function j(a,b){return l(a,b,0)}function k(a,b){return l(a,b,b)}function l(a,b,c){return void 0===a?c:0>a?Math.max(0,b+a):void 0===b?a:Math.min(b,a)}function m(a){return q(a)?a:D(a)}function n(a){return r(a)?a:E(a)}function o(a){return s(a)?a:F(a)}function p(a){return q(a)&&!t(a)?a:G(a)}function q(a){return!(!a||!a[oc])}function r(a){return!(!a||!a[pc])}function s(a){return!(!a||!a[qc])}function t(a){return r(a)||s(a)}function u(a){return!(!a||!a[rc])}function v(a){this.next=a}function w(a,b,c,d){var e=0===a?b:1===a?c:[b,c];return d?d.value=e:d={value:e,done:!1},d}function x(){return{value:void 0,done:!0}}function y(a){return!!B(a)}function z(a){return a&&"function"==typeof a.next}function A(a){var b=B(a);return b&&b.call(a)}function B(a){var b=a&&(vc&&a[vc]||a[wc]);return"function"==typeof b?b:void 0}function C(a){return a&&"number"==typeof a.length}function D(a){return null===a||void 0===a?M():q(a)?a.toSeq():P(a)}function E(a){return null===a||void 0===a?M().toKeyedSeq():q(a)?r(a)?a.toSeq():a.fromEntrySeq():N(a)}function F(a){return null===a||void 0===a?M():q(a)?r(a)?a.entrySeq():a.toIndexedSeq():O(a)}function G(a){return(null===a||void 0===a?M():q(a)?r(a)?a.entrySeq():a:O(a)).toSetSeq()}function H(a){this._array=a,this.size=a.length}function I(a){var b=Object.keys(a);this._object=a,this._keys=b,this.size=b.length}function J(a){this._iterable=a,this.size=a.length||a.size}function K(a){this._iterator=a,this._iteratorCache=[]}function L(a){return!(!a||!a[yc])}function M(){return zc||(zc=new H([]))}function N(a){var b=Array.isArray(a)?new H(a).fromEntrySeq():z(a)?new K(a).fromEntrySeq():y(a)?new J(a).fromEntrySeq():"object"==typeof a?new I(a):void 0;if(!b)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+a);return b}function O(a){var b=Q(a);if(!b)throw new TypeError("Expected Array or iterable object of values: "+a);return b}function P(a){var b=Q(a)||"object"==typeof a&&new I(a);if(!b)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+a);return b}function Q(a){return C(a)?new H(a):z(a)?new K(a):y(a)?new J(a):void 0}function R(a,b,c,d){var e=a._cache;if(e){for(var f=e.length-1,g=0;f>=g;g++){var h=e[c?f-g:g];if(b(h[1],d?h[0]:g,a)===!1)return g+1}return g}return a.__iterateUncached(b,c)}function S(a,b,c,d){var e=a._cache;if(e){var f=e.length-1,g=0;return new v(function(){var a=e[c?f-g:g];return g++>f?x():w(b,d?a[0]:g-1,a[1])})}return a.__iteratorUncached(b,c)}function T(){throw TypeError("Abstract")}function U(){}function V(){}function W(){}function X(a,b){if(a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1;if("function"==typeof a.valueOf&&"function"==typeof b.valueOf){if(a=a.valueOf(),b=b.valueOf(),a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1}return"function"==typeof a.equals&&"function"==typeof b.equals&&a.equals(b)?!0:!1}function Y(a,b){return b?Z(b,a,"",{"":a}):$(a)}function Z(a,b,c,d){return Array.isArray(b)?a.call(d,c,F(b).map(function(c,d){return Z(a,c,d,b)})):_(b)?a.call(d,c,E(b).map(function(c,d){return Z(a,c,d,b)})):b}function $(a){return Array.isArray(a)?F(a).map($).toList():_(a)?E(a).map($).toMap():a}function _(a){return a&&(a.constructor===Object||void 0===a.constructor)}function aa(a){return a>>>1&1073741824|3221225471&a}function ba(a){if(a===!1||null===a||void 0===a)return 0;if("function"==typeof a.valueOf&&(a=a.valueOf(),a===!1||null===a||void 0===a))return 0;if(a===!0)return 1;var b=typeof a;if("number"===b){var c=0|a;for(c!==a&&(c^=4294967295*a);a>4294967295;)a/=4294967295,c^=a;return aa(c)}return"string"===b?a.length>Hc?ca(a):da(a):"function"==typeof a.hashCode?a.hashCode():ea(a)}function ca(a){var b=Kc[a];return void 0===b&&(b=da(a),Jc===Ic&&(Jc=0,Kc={}),Jc++,Kc[a]=b),b}function da(a){for(var b=0,c=0;c<a.length;c++)b=31*b+a.charCodeAt(c)|0;return aa(b)}function ea(a){var b;if(Ec&&(b=Ac.get(a),void 0!==b))return b;if(b=a[Gc],void 0!==b)return b;if(!Dc){if(b=a.propertyIsEnumerable&&a.propertyIsEnumerable[Gc],void 0!==b)return b;if(b=fa(a),void 0!==b)return b}if(b=++Fc,1073741824&Fc&&(Fc=0),Ec)Ac.set(a,b);else{if(void 0!==Cc&&Cc(a)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Dc)Object.defineProperty(a,Gc,{enumerable:!1,configurable:!1,writable:!1,value:b});else if(void 0!==a.propertyIsEnumerable&&a.propertyIsEnumerable===a.constructor.prototype.propertyIsEnumerable)a.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},a.propertyIsEnumerable[Gc]=b;else{if(void 0===a.nodeType)throw new Error("Unable to set a non-enumerable property on object.");a[Gc]=b}}return b}function fa(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}function ga(a,b){if(!a)throw new Error(b)}function ha(a){ga(a!==1/0,"Cannot perform this action with an infinite size.")}function ia(a,b){this._iter=a,this._useKeys=b,this.size=a.size}function ja(a){this._iter=a,this.size=a.size}function ka(a){this._iter=a,this.size=a.size}function la(a){this._iter=a,this.size=a.size}function ma(a){var b=Ha(a);return b._iter=a,b.size=a.size,b.flip=function(){return a},b.reverse=function(){var b=a.reverse.apply(this);return b.flip=function(){return a.reverse()},b},b.has=function(b){return a.includes(b)},b.includes=function(b){return a.has(b)},b.cacheResult=Ia,b.__iterateUncached=function(b,c){var d=this;return a.__iterate(function(a,c){return b(c,a,d)!==!1},c)},b.__iteratorUncached=function(b,c){if(b===uc){var d=a.__iterator(b,c);return new v(function(){var a=d.next();if(!a.done){var b=a.value[0];a.value[0]=a.value[1],a.value[1]=b}return a})}return a.__iterator(b===tc?sc:tc,c)},b}function na(a,b,c){var d=Ha(a);return d.size=a.size,d.has=function(b){return a.has(b)},d.get=function(d,e){var f=a.get(d,lc);return f===lc?e:b.call(c,f,d,a)},d.__iterateUncached=function(d,e){var f=this;return a.__iterate(function(a,e,g){return d(b.call(c,a,e,g),e,f)!==!1},e)},d.__iteratorUncached=function(d,e){var f=a.__iterator(uc,e);return new v(function(){var e=f.next();if(e.done)return e;var g=e.value,h=g[0];return w(d,h,b.call(c,g[1],h,a),e)})},d}function oa(a,b){var c=Ha(a);return c._iter=a,c.size=a.size,c.reverse=function(){return a},a.flip&&(c.flip=function(){var b=ma(a);return b.reverse=function(){return a.flip()},b}),c.get=function(c,d){return a.get(b?c:-1-c,d)},c.has=function(c){return a.has(b?c:-1-c)},c.includes=function(b){return a.includes(b)},c.cacheResult=Ia,c.__iterate=function(b,c){var d=this;return a.__iterate(function(a,c){return b(a,c,d)},!c)},c.__iterator=function(b,c){return a.__iterator(b,!c)},c}function pa(a,b,c,d){var e=Ha(a);return d&&(e.has=function(d){var e=a.get(d,lc);return e!==lc&&!!b.call(c,e,d,a)},e.get=function(d,e){var f=a.get(d,lc);return f!==lc&&b.call(c,f,d,a)?f:e}),e.__iterateUncached=function(e,f){var g=this,h=0;return a.__iterate(function(a,f,i){return b.call(c,a,f,i)?(h++,e(a,d?f:h-1,g)):void 0},f),h},e.__iteratorUncached=function(e,f){var g=a.__iterator(uc,f),h=0;return new v(function(){for(;;){var f=g.next();if(f.done)return f;var i=f.value,j=i[0],k=i[1];if(b.call(c,k,j,a))return w(e,d?j:h++,k,f)}})},e}function qa(a,b,c){
var d=La().asMutable();return a.__iterate(function(e,f){d.update(b.call(c,e,f,a),0,function(a){return a+1})}),d.asImmutable()}function ra(a,b,c){var d=r(a),e=(u(a)?xb():La()).asMutable();a.__iterate(function(f,g){e.update(b.call(c,f,g,a),function(a){return a=a||[],a.push(d?[g,f]:f),a})});var f=Ga(a);return e.map(function(b){return Da(a,f(b))})}function sa(a,b,c,d){var e=a.size;if(i(b,c,e))return a;var f=j(b,e),h=k(c,e);if(f!==f||h!==h)return sa(a.toSeq().cacheResult(),b,c,d);var l,m=h-f;m===m&&(l=0>m?0:m);var n=Ha(a);return n.size=l,!d&&L(a)&&l>=0&&(n.get=function(b,c){return b=g(this,b),b>=0&&l>b?a.get(b+f,c):c}),n.__iterateUncached=function(b,c){var e=this;if(0===l)return 0;if(c)return this.cacheResult().__iterate(b,c);var g=0,h=!0,i=0;return a.__iterate(function(a,c){return h&&(h=g++<f)?void 0:(i++,b(a,d?c:i-1,e)!==!1&&i!==l)}),i},n.__iteratorUncached=function(b,c){if(0!==l&&c)return this.cacheResult().__iterator(b,c);var e=0!==l&&a.__iterator(b,c),g=0,h=0;return new v(function(){for(;g++<f;)e.next();if(++h>l)return x();var a=e.next();return d||b===tc?a:b===sc?w(b,h-1,void 0,a):w(b,h-1,a.value[1],a)})},n}function ta(a,b,c){var d=Ha(a);return d.__iterateUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterate(d,e);var g=0;return a.__iterate(function(a,e,h){return b.call(c,a,e,h)&&++g&&d(a,e,f)}),g},d.__iteratorUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterator(d,e);var g=a.__iterator(uc,e),h=!0;return new v(function(){if(!h)return x();var a=g.next();if(a.done)return a;var e=a.value,i=e[0],j=e[1];return b.call(c,j,i,f)?d===uc?a:w(d,i,j,a):(h=!1,x())})},d}function ua(a,b,c,d){var e=Ha(a);return e.__iterateUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterate(e,f);var h=!0,i=0;return a.__iterate(function(a,f,j){return h&&(h=b.call(c,a,f,j))?void 0:(i++,e(a,d?f:i-1,g))}),i},e.__iteratorUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterator(e,f);var h=a.__iterator(uc,f),i=!0,j=0;return new v(function(){var a,f,k;do{if(a=h.next(),a.done)return d||e===tc?a:e===sc?w(e,j++,void 0,a):w(e,j++,a.value[1],a);var l=a.value;f=l[0],k=l[1],i&&(i=b.call(c,k,f,g))}while(i);return e===uc?a:w(e,f,k,a)})},e}function va(a,b){var c=r(a),d=[a].concat(b).map(function(a){return q(a)?c&&(a=n(a)):a=c?N(a):O(Array.isArray(a)?a:[a]),a}).filter(function(a){return 0!==a.size});if(0===d.length)return a;if(1===d.length){var e=d[0];if(e===a||c&&r(e)||s(a)&&s(e))return e}var f=new H(d);return c?f=f.toKeyedSeq():s(a)||(f=f.toSetSeq()),f=f.flatten(!0),f.size=d.reduce(function(a,b){if(void 0!==a){var c=b.size;if(void 0!==c)return a+c}},0),f}function wa(a,b,c){var d=Ha(a);return d.__iterateUncached=function(d,e){function f(a,i){var j=this;a.__iterate(function(a,e){return(!b||b>i)&&q(a)?f(a,i+1):d(a,c?e:g++,j)===!1&&(h=!0),!h},e)}var g=0,h=!1;return f(a,0),g},d.__iteratorUncached=function(d,e){var f=a.__iterator(d,e),g=[],h=0;return new v(function(){for(;f;){var a=f.next();if(a.done===!1){var i=a.value;if(d===uc&&(i=i[1]),b&&!(g.length<b)||!q(i))return c?a:w(d,h++,i,a);g.push(f),f=i.__iterator(d,e)}else f=g.pop()}return x()})},d}function xa(a,b,c){var d=Ga(a);return a.toSeq().map(function(e,f){return d(b.call(c,e,f,a))}).flatten(!0)}function ya(a,b){var c=Ha(a);return c.size=a.size&&2*a.size-1,c.__iterateUncached=function(c,d){var e=this,f=0;return a.__iterate(function(a,d){return(!f||c(b,f++,e)!==!1)&&c(a,f++,e)!==!1},d),f},c.__iteratorUncached=function(c,d){var e,f=a.__iterator(tc,d),g=0;return new v(function(){return(!e||g%2)&&(e=f.next(),e.done)?e:g%2?w(c,g++,b):w(c,g++,e.value,e)})},c}function za(a,b,c){b||(b=Ja);var d=r(a),e=0,f=a.toSeq().map(function(b,d){return[d,b,e++,c?c(b,d,a):b]}).toArray();return f.sort(function(a,c){return b(a[3],c[3])||a[2]-c[2]}).forEach(d?function(a,b){f[b].length=2}:function(a,b){f[b]=a[1]}),d?E(f):s(a)?F(f):G(f)}function Aa(a,b,c){if(b||(b=Ja),c){var d=a.toSeq().map(function(b,d){return[b,c(b,d,a)]}).reduce(function(a,c){return Ba(b,a[1],c[1])?c:a});return d&&d[0]}return a.reduce(function(a,c){return Ba(b,a,c)?c:a})}function Ba(a,b,c){var d=a(c,b);return 0===d&&c!==b&&(void 0===c||null===c||c!==c)||d>0}function Ca(a,b,c){var d=Ha(a);return d.size=new H(c).map(function(a){return a.size}).min(),d.__iterate=function(a,b){for(var c,d=this.__iterator(tc,b),e=0;!(c=d.next()).done&&a(c.value,e++,this)!==!1;);return e},d.__iteratorUncached=function(a,d){var e=c.map(function(a){return a=m(a),A(d?a.reverse():a)}),f=0,g=!1;return new v(function(){var c;return g||(c=e.map(function(a){return a.next()}),g=c.some(function(a){return a.done})),g?x():w(a,f++,b.apply(null,c.map(function(a){return a.value})))})},d}function Da(a,b){return L(a)?b:a.constructor(b)}function Ea(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function Fa(a){return ha(a.size),f(a)}function Ga(a){return r(a)?n:s(a)?o:p}function Ha(a){return Object.create((r(a)?E:s(a)?F:G).prototype)}function Ia(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):D.prototype.cacheResult.call(this)}function Ja(a,b){return a>b?1:b>a?-1:0}function Ka(a){var b=A(a);if(!b){if(!C(a))throw new TypeError("Expected iterable or array-like: "+a);b=A(m(a))}return b}function La(a){return null===a||void 0===a?Wa():Ma(a)?a:Wa().withMutations(function(b){var c=n(a);ha(c.size),c.forEach(function(a,c){return b.set(c,a)})})}function Ma(a){return!(!a||!a[Lc])}function Na(a,b){this.ownerID=a,this.entries=b}function Oa(a,b,c){this.ownerID=a,this.bitmap=b,this.nodes=c}function Pa(a,b,c){this.ownerID=a,this.count=b,this.nodes=c}function Qa(a,b,c){this.ownerID=a,this.keyHash=b,this.entries=c}function Ra(a,b,c){this.ownerID=a,this.keyHash=b,this.entry=c}function Sa(a,b,c){this._type=b,this._reverse=c,this._stack=a._root&&Ua(a._root)}function Ta(a,b){return w(a,b[0],b[1])}function Ua(a,b){return{node:a,index:0,__prev:b}}function Va(a,b,c,d){var e=Object.create(Mc);return e.size=a,e._root=b,e.__ownerID=c,e.__hash=d,e.__altered=!1,e}function Wa(){return Nc||(Nc=Va(0))}function Xa(a,c,d){var e,f;if(a._root){var g=b(mc),h=b(nc);if(e=Ya(a._root,a.__ownerID,0,void 0,c,d,g,h),!h.value)return a;f=a.size+(g.value?d===lc?-1:1:0)}else{if(d===lc)return a;f=1,e=new Na(a.__ownerID,[[c,d]])}return a.__ownerID?(a.size=f,a._root=e,a.__hash=void 0,a.__altered=!0,a):e?Va(f,e):Wa()}function Ya(a,b,d,e,f,g,h,i){return a?a.update(b,d,e,f,g,h,i):g===lc?a:(c(i),c(h),new Ra(b,e,[f,g]))}function Za(a){return a.constructor===Ra||a.constructor===Qa}function $a(a,b,c,d,e){if(a.keyHash===d)return new Qa(b,d,[a.entry,e]);var f,g=(0===c?a.keyHash:a.keyHash>>>c)&kc,h=(0===c?d:d>>>c)&kc,i=g===h?[$a(a,b,c+ic,d,e)]:(f=new Ra(b,d,e),h>g?[a,f]:[f,a]);return new Oa(b,1<<g|1<<h,i)}function _a(a,b,c,e){a||(a=new d);for(var f=new Ra(a,ba(c),[c,e]),g=0;g<b.length;g++){var h=b[g];f=f.update(a,0,void 0,h[0],h[1])}return f}function ab(a,b,c,d){for(var e=0,f=0,g=new Array(c),h=0,i=1,j=b.length;j>h;h++,i<<=1){var k=b[h];void 0!==k&&h!==d&&(e|=i,g[f++]=k)}return new Oa(a,e,g)}function bb(a,b,c,d,e){for(var f=0,g=new Array(jc),h=0;0!==c;h++,c>>>=1)g[h]=1&c?b[f++]:void 0;return g[d]=e,new Pa(a,f+1,g)}function cb(a,b,c){for(var d=[],e=0;e<c.length;e++){var f=c[e],g=n(f);q(f)||(g=g.map(function(a){return Y(a)})),d.push(g)}return eb(a,b,d)}function db(a){return function(b,c,d){return b&&b.mergeDeepWith&&q(c)?b.mergeDeepWith(a,c):a?a(b,c,d):c}}function eb(a,b,c){return c=c.filter(function(a){return 0!==a.size}),0===c.length?a:0!==a.size||a.__ownerID||1!==c.length?a.withMutations(function(a){for(var d=b?function(c,d){a.update(d,lc,function(a){return a===lc?c:b(a,c,d)})}:function(b,c){a.set(c,b)},e=0;e<c.length;e++)c[e].forEach(d)}):a.constructor(c[0])}function fb(a,b,c,d){var e=a===lc,f=b.next();if(f.done){var g=e?c:a,h=d(g);return h===g?a:h}ga(e||a&&a.set,"invalid keyPath");var i=f.value,j=e?lc:a.get(i,lc),k=fb(j,b,c,d);return k===j?a:k===lc?a.remove(i):(e?Wa():a).set(i,k)}function gb(a){return a-=a>>1&1431655765,a=(858993459&a)+(a>>2&858993459),a=a+(a>>4)&252645135,a+=a>>8,a+=a>>16,127&a}function hb(a,b,c,d){var f=d?a:e(a);return f[b]=c,f}function ib(a,b,c,d){var e=a.length+1;if(d&&b+1===e)return a[b]=c,a;for(var f=new Array(e),g=0,h=0;e>h;h++)h===b?(f[h]=c,g=-1):f[h]=a[h+g];return f}function jb(a,b,c){var d=a.length-1;if(c&&b===d)return a.pop(),a;for(var e=new Array(d),f=0,g=0;d>g;g++)g===b&&(f=1),e[g]=a[g+f];return e}function kb(a){var b=pb();if(null===a||void 0===a)return b;if(lb(a))return a;var c=o(a),d=c.size;return 0===d?b:(ha(d),d>0&&jc>d?ob(0,d,ic,null,new mb(c.toArray())):b.withMutations(function(a){a.setSize(d),c.forEach(function(b,c){return a.set(c,b)})}))}function lb(a){return!(!a||!a[Rc])}function mb(a,b){this.array=a,this.ownerID=b}function nb(a,b){function c(a,b,c){return 0===b?d(a,c):e(a,b,c)}function d(a,c){var d=c===h?i&&i.array:a&&a.array,e=c>f?0:f-c,j=g-c;return j>jc&&(j=jc),function(){if(e===j)return Uc;var a=b?--j:e++;return d&&d[a]}}function e(a,d,e){var h,i=a&&a.array,j=e>f?0:f-e>>d,k=(g-e>>d)+1;return k>jc&&(k=jc),function(){for(;;){if(h){var a=h();if(a!==Uc)return a;h=null}if(j===k)return Uc;var f=b?--k:j++;h=c(i&&i[f],d-ic,e+(f<<d))}}}var f=a._origin,g=a._capacity,h=wb(g),i=a._tail;return c(a._root,a._level,0)}function ob(a,b,c,d,e,f,g){var h=Object.create(Sc);return h.size=b-a,h._origin=a,h._capacity=b,h._level=c,h._root=d,h._tail=e,h.__ownerID=f,h.__hash=g,h.__altered=!1,h}function pb(){return Tc||(Tc=ob(0,0,ic))}function qb(a,c,d){if(c=g(a,c),c>=a.size||0>c)return a.withMutations(function(a){0>c?ub(a,c).set(0,d):ub(a,0,c+1).set(c,d)});c+=a._origin;var e=a._tail,f=a._root,h=b(nc);return c>=wb(a._capacity)?e=rb(e,a.__ownerID,0,c,d,h):f=rb(f,a.__ownerID,a._level,c,d,h),h.value?a.__ownerID?(a._root=f,a._tail=e,a.__hash=void 0,a.__altered=!0,a):ob(a._origin,a._capacity,a._level,f,e):a}function rb(a,b,d,e,f,g){var h=e>>>d&kc,i=a&&h<a.array.length;if(!i&&void 0===f)return a;var j;if(d>0){var k=a&&a.array[h],l=rb(k,b,d-ic,e,f,g);return l===k?a:(j=sb(a,b),j.array[h]=l,j)}return i&&a.array[h]===f?a:(c(g),j=sb(a,b),void 0===f&&h===j.array.length-1?j.array.pop():j.array[h]=f,j)}function sb(a,b){return b&&a&&b===a.ownerID?a:new mb(a?a.array.slice():[],b)}function tb(a,b){if(b>=wb(a._capacity))return a._tail;if(b<1<<a._level+ic){for(var c=a._root,d=a._level;c&&d>0;)c=c.array[b>>>d&kc],d-=ic;return c}}function ub(a,b,c){var e=a.__ownerID||new d,f=a._origin,g=a._capacity,h=f+b,i=void 0===c?g:0>c?g+c:f+c;if(h===f&&i===g)return a;if(h>=i)return a.clear();for(var j=a._level,k=a._root,l=0;0>h+l;)k=new mb(k&&k.array.length?[void 0,k]:[],e),j+=ic,l+=1<<j;l&&(h+=l,f+=l,i+=l,g+=l);for(var m=wb(g),n=wb(i);n>=1<<j+ic;)k=new mb(k&&k.array.length?[k]:[],e),j+=ic;var o=a._tail,p=m>n?tb(a,i-1):n>m?new mb([],e):o;if(o&&n>m&&g>h&&o.array.length){k=sb(k,e);for(var q=k,r=j;r>ic;r-=ic){var s=m>>>r&kc;q=q.array[s]=sb(q.array[s],e)}q.array[m>>>ic&kc]=o}if(g>i&&(p=p&&p.removeAfter(e,0,i)),h>=n)h-=n,i-=n,j=ic,k=null,p=p&&p.removeBefore(e,0,h);else if(h>f||m>n){for(l=0;k;){var t=h>>>j&kc;if(t!==n>>>j&kc)break;t&&(l+=(1<<j)*t),j-=ic,k=k.array[t]}k&&h>f&&(k=k.removeBefore(e,j,h-l)),k&&m>n&&(k=k.removeAfter(e,j,n-l)),l&&(h-=l,i-=l)}return a.__ownerID?(a.size=i-h,a._origin=h,a._capacity=i,a._level=j,a._root=k,a._tail=p,a.__hash=void 0,a.__altered=!0,a):ob(h,i,j,k,p)}function vb(a,b,c){for(var d=[],e=0,f=0;f<c.length;f++){var g=c[f],h=o(g);h.size>e&&(e=h.size),q(g)||(h=h.map(function(a){return Y(a)})),d.push(h)}return e>a.size&&(a=a.setSize(e)),eb(a,b,d)}function wb(a){return jc>a?0:a-1>>>ic<<ic}function xb(a){return null===a||void 0===a?Ab():yb(a)?a:Ab().withMutations(function(b){var c=n(a);ha(c.size),c.forEach(function(a,c){return b.set(c,a)})})}function yb(a){return Ma(a)&&u(a)}function zb(a,b,c,d){var e=Object.create(xb.prototype);return e.size=a?a.size:0,e._map=a,e._list=b,e.__ownerID=c,e.__hash=d,e}function Ab(){return Vc||(Vc=zb(Wa(),pb()))}function Bb(a,b,c){var d,e,f=a._map,g=a._list,h=f.get(b),i=void 0!==h;if(c===lc){if(!i)return a;g.size>=jc&&g.size>=2*f.size?(e=g.filter(function(a,b){return void 0!==a&&h!==b}),d=e.toKeyedSeq().map(function(a){return a[0]}).flip().toMap(),a.__ownerID&&(d.__ownerID=e.__ownerID=a.__ownerID)):(d=f.remove(b),e=h===g.size-1?g.pop():g.set(h,void 0))}else if(i){if(c===g.get(h)[1])return a;d=f,e=g.set(h,[b,c])}else d=f.set(b,g.size),e=g.set(g.size,[b,c]);return a.__ownerID?(a.size=d.size,a._map=d,a._list=e,a.__hash=void 0,a):zb(d,e)}function Cb(a){return null===a||void 0===a?Fb():Db(a)?a:Fb().unshiftAll(a)}function Db(a){return!(!a||!a[Wc])}function Eb(a,b,c,d){var e=Object.create(Xc);return e.size=a,e._head=b,e.__ownerID=c,e.__hash=d,e.__altered=!1,e}function Fb(){return Yc||(Yc=Eb(0))}function Gb(a){return null===a||void 0===a?Kb():Hb(a)?a:Kb().withMutations(function(b){var c=p(a);ha(c.size),c.forEach(function(a){return b.add(a)})})}function Hb(a){return!(!a||!a[Zc])}function Ib(a,b){return a.__ownerID?(a.size=b.size,a._map=b,a):b===a._map?a:0===b.size?a.__empty():a.__make(b)}function Jb(a,b){var c=Object.create($c);return c.size=a?a.size:0,c._map=a,c.__ownerID=b,c}function Kb(){return _c||(_c=Jb(Wa()))}function Lb(a){return null===a||void 0===a?Ob():Mb(a)?a:Ob().withMutations(function(b){var c=p(a);ha(c.size),c.forEach(function(a){return b.add(a)})})}function Mb(a){return Hb(a)&&u(a)}function Nb(a,b){var c=Object.create(ad);return c.size=a?a.size:0,c._map=a,c.__ownerID=b,c}function Ob(){return bd||(bd=Nb(Ab()))}function Pb(a,b){var c,d=function(f){if(f instanceof d)return f;if(!(this instanceof d))return new d(f);if(!c){c=!0;var g=Object.keys(a);Sb(e,g),e.size=g.length,e._name=b,e._keys=g,e._defaultValues=a}this._map=La(f)},e=d.prototype=Object.create(cd);return e.constructor=d,d}function Qb(a,b,c){var d=Object.create(Object.getPrototypeOf(a));return d._map=b,d.__ownerID=c,d}function Rb(a){return a._name||a.constructor.name||"Record"}function Sb(a,b){try{b.forEach(Tb.bind(void 0,a))}catch(c){}}function Tb(a,b){Object.defineProperty(a,b,{get:function(){return this.get(b)},set:function(a){ga(this.__ownerID,"Cannot set on an immutable record."),this.set(b,a)}})}function Ub(a,b){if(a===b)return!0;if(!q(b)||void 0!==a.size&&void 0!==b.size&&a.size!==b.size||void 0!==a.__hash&&void 0!==b.__hash&&a.__hash!==b.__hash||r(a)!==r(b)||s(a)!==s(b)||u(a)!==u(b))return!1;if(0===a.size&&0===b.size)return!0;var c=!t(a);if(u(a)){var d=a.entries();return b.every(function(a,b){var e=d.next().value;return e&&X(e[1],a)&&(c||X(e[0],b))})&&d.next().done}var e=!1;if(void 0===a.size)if(void 0===b.size)"function"==typeof a.cacheResult&&a.cacheResult();else{e=!0;var f=a;a=b,b=f}var g=!0,h=b.__iterate(function(b,d){return(c?a.has(b):e?X(b,a.get(d,lc)):X(a.get(d,lc),b))?void 0:(g=!1,!1)});return g&&a.size===h}function Vb(a,b,c){if(!(this instanceof Vb))return new Vb(a,b,c);if(ga(0!==c,"Cannot step a Range by 0"),a=a||0,void 0===b&&(b=1/0),c=void 0===c?1:Math.abs(c),a>b&&(c=-c),this._start=a,this._end=b,this._step=c,this.size=Math.max(0,Math.ceil((b-a)/c-1)+1),0===this.size){if(dd)return dd;dd=this}}function Wb(a,b){if(!(this instanceof Wb))return new Wb(a,b);if(this._value=a,this.size=void 0===b?1/0:Math.max(0,b),0===this.size){if(ed)return ed;ed=this}}function Xb(a,b){var c=function(c){a.prototype[c]=b[c]};return Object.keys(b).forEach(c),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(b).forEach(c),a}function Yb(a,b){return b}function Zb(a,b){return[b,a]}function $b(a){return function(){return!a.apply(this,arguments)}}function _b(a){return function(){return-a.apply(this,arguments)}}function ac(a){return"string"==typeof a?JSON.stringify(a):a}function bc(){return e(arguments)}function cc(a,b){return b>a?1:a>b?-1:0}function dc(a){if(a.size===1/0)return 0;var b=u(a),c=r(a),d=b?1:0,e=a.__iterate(c?b?function(a,b){d=31*d+fc(ba(a),ba(b))|0}:function(a,b){d=d+fc(ba(a),ba(b))|0}:b?function(a){d=31*d+ba(a)|0}:function(a){d=d+ba(a)|0});return ec(e,d)}function ec(a,b){return b=Bc(b,3432918353),b=Bc(b<<15|b>>>-15,461845907),b=Bc(b<<13|b>>>-13,5),b=(b+3864292196|0)^a,b=Bc(b^b>>>16,2246822507),b=Bc(b^b>>>13,3266489909),b=aa(b^b>>>16)}function fc(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}var gc=Array.prototype.slice,hc="delete",ic=5,jc=1<<ic,kc=jc-1,lc={},mc={value:!1},nc={value:!1};a(n,m),a(o,m),a(p,m),m.isIterable=q,m.isKeyed=r,m.isIndexed=s,m.isAssociative=t,m.isOrdered=u,m.Keyed=n,m.Indexed=o,m.Set=p;var oc="@@__IMMUTABLE_ITERABLE__@@",pc="@@__IMMUTABLE_KEYED__@@",qc="@@__IMMUTABLE_INDEXED__@@",rc="@@__IMMUTABLE_ORDERED__@@",sc=0,tc=1,uc=2,vc="function"==typeof Symbol&&Symbol.iterator,wc="@@iterator",xc=vc||wc;v.prototype.toString=function(){return"[Iterator]"},v.KEYS=sc,v.VALUES=tc,v.ENTRIES=uc,v.prototype.inspect=v.prototype.toSource=function(){return this.toString()},v.prototype[xc]=function(){return this},a(D,m),D.of=function(){return D(arguments)},D.prototype.toSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq {","}")},D.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},D.prototype.__iterate=function(a,b){return R(this,a,b,!0)},D.prototype.__iterator=function(a,b){return S(this,a,b,!0)},a(E,D),E.prototype.toKeyedSeq=function(){return this},a(F,D),F.of=function(){return F(arguments)},F.prototype.toIndexedSeq=function(){return this},F.prototype.toString=function(){return this.__toString("Seq [","]")},F.prototype.__iterate=function(a,b){return R(this,a,b,!1)},F.prototype.__iterator=function(a,b){return S(this,a,b,!1)},a(G,D),G.of=function(){return G(arguments)},G.prototype.toSetSeq=function(){return this},D.isSeq=L,D.Keyed=E,D.Set=G,D.Indexed=F;var yc="@@__IMMUTABLE_SEQ__@@";D.prototype[yc]=!0,a(H,F),H.prototype.get=function(a,b){return this.has(a)?this._array[g(this,a)]:b},H.prototype.__iterate=function(a,b){for(var c=this._array,d=c.length-1,e=0;d>=e;e++)if(a(c[b?d-e:e],e,this)===!1)return e+1;return e},H.prototype.__iterator=function(a,b){var c=this._array,d=c.length-1,e=0;return new v(function(){return e>d?x():w(a,e,c[b?d-e++:e++])})},a(I,E),I.prototype.get=function(a,b){return void 0===b||this.has(a)?this._object[a]:b},I.prototype.has=function(a){return this._object.hasOwnProperty(a)},I.prototype.__iterate=function(a,b){for(var c=this._object,d=this._keys,e=d.length-1,f=0;e>=f;f++){var g=d[b?e-f:f];if(a(c[g],g,this)===!1)return f+1}return f},I.prototype.__iterator=function(a,b){var c=this._object,d=this._keys,e=d.length-1,f=0;return new v(function(){var g=d[b?e-f:f];return f++>e?x():w(a,g,c[g])})},I.prototype[rc]=!0,a(J,F),J.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);var c=this._iterable,d=A(c),e=0;if(z(d))for(var f;!(f=d.next()).done&&a(f.value,e++,this)!==!1;);return e},J.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);var c=this._iterable,d=A(c);if(!z(d))return new v(x);var e=0;return new v(function(){var b=d.next();return b.done?b:w(a,e++,b.value)})},a(K,F),K.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);for(var c=this._iterator,d=this._iteratorCache,e=0;e<d.length;)if(a(d[e],e++,this)===!1)return e;for(var f;!(f=c.next()).done;){var g=f.value;if(d[e]=g,a(g,e++,this)===!1)break}return e},K.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);var c=this._iterator,d=this._iteratorCache,e=0;return new v(function(){if(e>=d.length){var b=c.next();if(b.done)return b;d[e]=b.value}return w(a,e,d[e++])})};var zc;a(T,m),a(U,T),a(V,T),a(W,T),T.Keyed=U,T.Indexed=V,T.Set=W;var Ac,Bc="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(a,b){a=0|a,b=0|b;var c=65535&a,d=65535&b;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0},Cc=Object.isExtensible,Dc=function(){try{return Object.defineProperty({},"@",{}),!0}catch(a){return!1}}(),Ec="function"==typeof WeakMap;Ec&&(Ac=new WeakMap);var Fc=0,Gc="__immutablehash__";"function"==typeof Symbol&&(Gc=Symbol(Gc));var Hc=16,Ic=255,Jc=0,Kc={};a(ia,E),ia.prototype.get=function(a,b){return this._iter.get(a,b)},ia.prototype.has=function(a){return this._iter.has(a)},ia.prototype.valueSeq=function(){return this._iter.valueSeq()},ia.prototype.reverse=function(){var a=this,b=oa(this,!0);return this._useKeys||(b.valueSeq=function(){return a._iter.toSeq().reverse()}),b},ia.prototype.map=function(a,b){var c=this,d=na(this,a,b);return this._useKeys||(d.valueSeq=function(){return c._iter.toSeq().map(a,b)}),d},ia.prototype.__iterate=function(a,b){var c,d=this;return this._iter.__iterate(this._useKeys?function(b,c){return a(b,c,d)}:(c=b?Fa(this):0,function(e){return a(e,b?--c:c++,d)}),b)},ia.prototype.__iterator=function(a,b){if(this._useKeys)return this._iter.__iterator(a,b);var c=this._iter.__iterator(tc,b),d=b?Fa(this):0;return new v(function(){var e=c.next();return e.done?e:w(a,b?--d:d++,e.value,e)})},ia.prototype[rc]=!0,a(ja,F),ja.prototype.includes=function(a){return this._iter.includes(a)},ja.prototype.__iterate=function(a,b){var c=this,d=0;return this._iter.__iterate(function(b){return a(b,d++,c)},b)},ja.prototype.__iterator=function(a,b){var c=this._iter.__iterator(tc,b),d=0;return new v(function(){var b=c.next();return b.done?b:w(a,d++,b.value,b)})},a(ka,G),ka.prototype.has=function(a){return this._iter.includes(a)},ka.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){return a(b,b,c)},b)},ka.prototype.__iterator=function(a,b){var c=this._iter.__iterator(tc,b);return new v(function(){var b=c.next();return b.done?b:w(a,b.value,b.value,b)})},a(la,E),la.prototype.entrySeq=function(){return this._iter.toSeq()},la.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){if(b){Ea(b);var d=q(b);return a(d?b.get(1):b[1],d?b.get(0):b[0],c)}},b)},la.prototype.__iterator=function(a,b){var c=this._iter.__iterator(tc,b);return new v(function(){for(;;){var b=c.next();if(b.done)return b;var d=b.value;if(d){Ea(d);var e=q(d);return w(a,e?d.get(0):d[0],e?d.get(1):d[1],b)}}})},ja.prototype.cacheResult=ia.prototype.cacheResult=ka.prototype.cacheResult=la.prototype.cacheResult=Ia,a(La,U),La.prototype.toString=function(){return this.__toString("Map {","}")},La.prototype.get=function(a,b){return this._root?this._root.get(0,void 0,a,b):b},La.prototype.set=function(a,b){return Xa(this,a,b)},La.prototype.setIn=function(a,b){return this.updateIn(a,lc,function(){return b})},La.prototype.remove=function(a){return Xa(this,a,lc)},La.prototype.deleteIn=function(a){return this.updateIn(a,function(){return lc})},La.prototype.update=function(a,b,c){return 1===arguments.length?a(this):this.updateIn([a],b,c)},La.prototype.updateIn=function(a,b,c){c||(c=b,b=void 0);var d=fb(this,Ka(a),b,c);return d===lc?void 0:d},La.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Wa()},La.prototype.merge=function(){return cb(this,void 0,arguments)},La.prototype.mergeWith=function(a){var b=gc.call(arguments,1);return cb(this,a,b)},La.prototype.mergeIn=function(a){var b=gc.call(arguments,1);return this.updateIn(a,Wa(),function(a){return"function"==typeof a.merge?a.merge.apply(a,b):b[b.length-1]})},La.prototype.mergeDeep=function(){return cb(this,db(void 0),arguments)},La.prototype.mergeDeepWith=function(a){var b=gc.call(arguments,1);return cb(this,db(a),b)},La.prototype.mergeDeepIn=function(a){var b=gc.call(arguments,1);return this.updateIn(a,Wa(),function(a){return"function"==typeof a.mergeDeep?a.mergeDeep.apply(a,b):b[b.length-1]})},La.prototype.sort=function(a){return xb(za(this,a))},La.prototype.sortBy=function(a,b){return xb(za(this,b,a))},La.prototype.withMutations=function(a){var b=this.asMutable();return a(b),b.wasAltered()?b.__ensureOwner(this.__ownerID):this},La.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},La.prototype.asImmutable=function(){return this.__ensureOwner()},La.prototype.wasAltered=function(){return this.__altered},La.prototype.__iterator=function(a,b){return new Sa(this,a,b)},La.prototype.__iterate=function(a,b){var c=this,d=0;return this._root&&this._root.iterate(function(b){return d++,a(b[1],b[0],c)},b),d},La.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Va(this.size,this._root,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)},La.isMap=Ma;var Lc="@@__IMMUTABLE_MAP__@@",Mc=La.prototype;Mc[Lc]=!0,Mc[hc]=Mc.remove,Mc.removeIn=Mc.deleteIn,Na.prototype.get=function(a,b,c,d){for(var e=this.entries,f=0,g=e.length;g>f;f++)if(X(c,e[f][0]))return e[f][1];return d},Na.prototype.update=function(a,b,d,f,g,h,i){for(var j=g===lc,k=this.entries,l=0,m=k.length;m>l&&!X(f,k[l][0]);l++);var n=m>l;if(n?k[l][1]===g:j)return this;if(c(i),(j||!n)&&c(h),!j||1!==k.length){if(!n&&!j&&k.length>=Oc)return _a(a,k,f,g);var o=a&&a===this.ownerID,p=o?k:e(k);return n?j?l===m-1?p.pop():p[l]=p.pop():p[l]=[f,g]:p.push([f,g]),o?(this.entries=p,this):new Na(a,p)}},Oa.prototype.get=function(a,b,c,d){void 0===b&&(b=ba(c));var e=1<<((0===a?b:b>>>a)&kc),f=this.bitmap;return 0===(f&e)?d:this.nodes[gb(f&e-1)].get(a+ic,b,c,d)},Oa.prototype.update=function(a,b,c,d,e,f,g){void 0===c&&(c=ba(d));var h=(0===b?c:c>>>b)&kc,i=1<<h,j=this.bitmap,k=0!==(j&i);if(!k&&e===lc)return this;var l=gb(j&i-1),m=this.nodes,n=k?m[l]:void 0,o=Ya(n,a,b+ic,c,d,e,f,g);if(o===n)return this;if(!k&&o&&m.length>=Pc)return bb(a,m,j,h,o);if(k&&!o&&2===m.length&&Za(m[1^l]))return m[1^l];if(k&&o&&1===m.length&&Za(o))return o;var p=a&&a===this.ownerID,q=k?o?j:j^i:j|i,r=k?o?hb(m,l,o,p):jb(m,l,p):ib(m,l,o,p);return p?(this.bitmap=q,this.nodes=r,this):new Oa(a,q,r)},Pa.prototype.get=function(a,b,c,d){void 0===b&&(b=ba(c));var e=(0===a?b:b>>>a)&kc,f=this.nodes[e];return f?f.get(a+ic,b,c,d):d},Pa.prototype.update=function(a,b,c,d,e,f,g){void 0===c&&(c=ba(d));var h=(0===b?c:c>>>b)&kc,i=e===lc,j=this.nodes,k=j[h];if(i&&!k)return this;var l=Ya(k,a,b+ic,c,d,e,f,g);if(l===k)return this;var m=this.count;if(k){if(!l&&(m--,Qc>m))return ab(a,j,m,h)}else m++;var n=a&&a===this.ownerID,o=hb(j,h,l,n);return n?(this.count=m,this.nodes=o,this):new Pa(a,m,o)},Qa.prototype.get=function(a,b,c,d){for(var e=this.entries,f=0,g=e.length;g>f;f++)if(X(c,e[f][0]))return e[f][1];return d},Qa.prototype.update=function(a,b,d,f,g,h,i){void 0===d&&(d=ba(f));var j=g===lc;if(d!==this.keyHash)return j?this:(c(i),c(h),$a(this,a,b,d,[f,g]));for(var k=this.entries,l=0,m=k.length;m>l&&!X(f,k[l][0]);l++);var n=m>l;if(n?k[l][1]===g:j)return this;if(c(i),(j||!n)&&c(h),j&&2===m)return new Ra(a,this.keyHash,k[1^l]);var o=a&&a===this.ownerID,p=o?k:e(k);return n?j?l===m-1?p.pop():p[l]=p.pop():p[l]=[f,g]:p.push([f,g]),o?(this.entries=p,this):new Qa(a,this.keyHash,p)},Ra.prototype.get=function(a,b,c,d){return X(c,this.entry[0])?this.entry[1]:d},Ra.prototype.update=function(a,b,d,e,f,g,h){var i=f===lc,j=X(e,this.entry[0]);return(j?f===this.entry[1]:i)?this:(c(h),i?void c(g):j?a&&a===this.ownerID?(this.entry[1]=f,this):new Ra(a,this.keyHash,[e,f]):(c(g),$a(this,a,b,ba(e),[e,f])))},Na.prototype.iterate=Qa.prototype.iterate=function(a,b){for(var c=this.entries,d=0,e=c.length-1;e>=d;d++)if(a(c[b?e-d:d])===!1)return!1},Oa.prototype.iterate=Pa.prototype.iterate=function(a,b){for(var c=this.nodes,d=0,e=c.length-1;e>=d;d++){var f=c[b?e-d:d];if(f&&f.iterate(a,b)===!1)return!1}},Ra.prototype.iterate=function(a,b){return a(this.entry)},a(Sa,v),Sa.prototype.next=function(){for(var a=this._type,b=this._stack;b;){var c,d=b.node,e=b.index++;if(d.entry){if(0===e)return Ta(a,d.entry)}else if(d.entries){if(c=d.entries.length-1,c>=e)return Ta(a,d.entries[this._reverse?c-e:e])}else if(c=d.nodes.length-1,c>=e){var f=d.nodes[this._reverse?c-e:e];if(f){if(f.entry)return Ta(a,f.entry);b=this._stack=Ua(f,b)}continue}b=this._stack=this._stack.__prev}return x()};var Nc,Oc=jc/4,Pc=jc/2,Qc=jc/4;a(kb,V),kb.of=function(){return this(arguments)},kb.prototype.toString=function(){return this.__toString("List [","]")},kb.prototype.get=function(a,b){if(a=g(this,a),0>a||a>=this.size)return b;a+=this._origin;var c=tb(this,a);return c&&c.array[a&kc]},kb.prototype.set=function(a,b){return qb(this,a,b)},kb.prototype.remove=function(a){return this.has(a)?0===a?this.shift():a===this.size-1?this.pop():this.splice(a,1):this},kb.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=ic,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):pb()},kb.prototype.push=function(){var a=arguments,b=this.size;return this.withMutations(function(c){ub(c,0,b+a.length);for(var d=0;d<a.length;d++)c.set(b+d,a[d])})},kb.prototype.pop=function(){return ub(this,0,-1)},kb.prototype.unshift=function(){var a=arguments;return this.withMutations(function(b){ub(b,-a.length);for(var c=0;c<a.length;c++)b.set(c,a[c])})},kb.prototype.shift=function(){return ub(this,1)},kb.prototype.merge=function(){return vb(this,void 0,arguments)},kb.prototype.mergeWith=function(a){var b=gc.call(arguments,1);return vb(this,a,b)},kb.prototype.mergeDeep=function(){return vb(this,db(void 0),arguments)},kb.prototype.mergeDeepWith=function(a){var b=gc.call(arguments,1);return vb(this,db(a),b)},kb.prototype.setSize=function(a){return ub(this,0,a)},kb.prototype.slice=function(a,b){var c=this.size;return i(a,b,c)?this:ub(this,j(a,c),k(b,c))},kb.prototype.__iterator=function(a,b){var c=0,d=nb(this,b);return new v(function(){var b=d();return b===Uc?x():w(a,c++,b)})},kb.prototype.__iterate=function(a,b){for(var c,d=0,e=nb(this,b);(c=e())!==Uc&&a(c,d++,this)!==!1;);return d},kb.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?ob(this._origin,this._capacity,this._level,this._root,this._tail,a,this.__hash):(this.__ownerID=a,this)},kb.isList=lb;var Rc="@@__IMMUTABLE_LIST__@@",Sc=kb.prototype;Sc[Rc]=!0,Sc[hc]=Sc.remove,Sc.setIn=Mc.setIn,Sc.deleteIn=Sc.removeIn=Mc.removeIn,Sc.update=Mc.update,Sc.updateIn=Mc.updateIn,Sc.mergeIn=Mc.mergeIn,Sc.mergeDeepIn=Mc.mergeDeepIn,Sc.withMutations=Mc.withMutations,Sc.asMutable=Mc.asMutable,Sc.asImmutable=Mc.asImmutable,Sc.wasAltered=Mc.wasAltered,mb.prototype.removeBefore=function(a,b,c){if(c===b?1<<b:0===this.array.length)return this;var d=c>>>b&kc;if(d>=this.array.length)return new mb([],a);var e,f=0===d;if(b>0){var g=this.array[d];if(e=g&&g.removeBefore(a,b-ic,c),e===g&&f)return this}if(f&&!e)return this;var h=sb(this,a);if(!f)for(var i=0;d>i;i++)h.array[i]=void 0;return e&&(h.array[d]=e),h},mb.prototype.removeAfter=function(a,b,c){if(c===b?1<<b:0===this.array.length)return this;var d=c-1>>>b&kc;if(d>=this.array.length)return this;var e,f=d===this.array.length-1;if(b>0){var g=this.array[d];if(e=g&&g.removeAfter(a,b-ic,c),e===g&&f)return this}if(f&&!e)return this;var h=sb(this,a);return f||h.array.pop(),e&&(h.array[d]=e),h};var Tc,Uc={};a(xb,La),xb.of=function(){return this(arguments)},xb.prototype.toString=function(){return this.__toString("OrderedMap {","}")},xb.prototype.get=function(a,b){var c=this._map.get(a);return void 0!==c?this._list.get(c)[1]:b},xb.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ab()},xb.prototype.set=function(a,b){return Bb(this,a,b)},xb.prototype.remove=function(a){return Bb(this,a,lc)},xb.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},xb.prototype.__iterate=function(a,b){var c=this;return this._list.__iterate(function(b){return b&&a(b[1],b[0],c)},b)},xb.prototype.__iterator=function(a,b){return this._list.fromEntrySeq().__iterator(a,b)},xb.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a),c=this._list.__ensureOwner(a);return a?zb(b,c,a,this.__hash):(this.__ownerID=a,this._map=b,this._list=c,this)},xb.isOrderedMap=yb,xb.prototype[rc]=!0,xb.prototype[hc]=xb.prototype.remove;var Vc;a(Cb,V),Cb.of=function(){return this(arguments)},Cb.prototype.toString=function(){return this.__toString("Stack [","]")},Cb.prototype.get=function(a,b){var c=this._head;for(a=g(this,a);c&&a--;)c=c.next;
return c?c.value:b},Cb.prototype.peek=function(){return this._head&&this._head.value},Cb.prototype.push=function(){if(0===arguments.length)return this;for(var a=this.size+arguments.length,b=this._head,c=arguments.length-1;c>=0;c--)b={value:arguments[c],next:b};return this.__ownerID?(this.size=a,this._head=b,this.__hash=void 0,this.__altered=!0,this):Eb(a,b)},Cb.prototype.pushAll=function(a){if(a=o(a),0===a.size)return this;ha(a.size);var b=this.size,c=this._head;return a.reverse().forEach(function(a){b++,c={value:a,next:c}}),this.__ownerID?(this.size=b,this._head=c,this.__hash=void 0,this.__altered=!0,this):Eb(b,c)},Cb.prototype.pop=function(){return this.slice(1)},Cb.prototype.unshift=function(){return this.push.apply(this,arguments)},Cb.prototype.unshiftAll=function(a){return this.pushAll(a)},Cb.prototype.shift=function(){return this.pop.apply(this,arguments)},Cb.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Fb()},Cb.prototype.slice=function(a,b){if(i(a,b,this.size))return this;var c=j(a,this.size),d=k(b,this.size);if(d!==this.size)return V.prototype.slice.call(this,a,b);for(var e=this.size-c,f=this._head;c--;)f=f.next;return this.__ownerID?(this.size=e,this._head=f,this.__hash=void 0,this.__altered=!0,this):Eb(e,f)},Cb.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Eb(this.size,this._head,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)},Cb.prototype.__iterate=function(a,b){if(b)return this.reverse().__iterate(a);for(var c=0,d=this._head;d&&a(d.value,c++,this)!==!1;)d=d.next;return c},Cb.prototype.__iterator=function(a,b){if(b)return this.reverse().__iterator(a);var c=0,d=this._head;return new v(function(){if(d){var b=d.value;return d=d.next,w(a,c++,b)}return x()})},Cb.isStack=Db;var Wc="@@__IMMUTABLE_STACK__@@",Xc=Cb.prototype;Xc[Wc]=!0,Xc.withMutations=Mc.withMutations,Xc.asMutable=Mc.asMutable,Xc.asImmutable=Mc.asImmutable,Xc.wasAltered=Mc.wasAltered;var Yc;a(Gb,W),Gb.of=function(){return this(arguments)},Gb.fromKeys=function(a){return this(n(a).keySeq())},Gb.prototype.toString=function(){return this.__toString("Set {","}")},Gb.prototype.has=function(a){return this._map.has(a)},Gb.prototype.add=function(a){return Ib(this,this._map.set(a,!0))},Gb.prototype.remove=function(a){return Ib(this,this._map.remove(a))},Gb.prototype.clear=function(){return Ib(this,this._map.clear())},Gb.prototype.union=function(){var a=gc.call(arguments,0);return a=a.filter(function(a){return 0!==a.size}),0===a.length?this:0!==this.size||this.__ownerID||1!==a.length?this.withMutations(function(b){for(var c=0;c<a.length;c++)p(a[c]).forEach(function(a){return b.add(a)})}):this.constructor(a[0])},Gb.prototype.intersect=function(){var a=gc.call(arguments,0);if(0===a.length)return this;a=a.map(function(a){return p(a)});var b=this;return this.withMutations(function(c){b.forEach(function(b){a.every(function(a){return a.includes(b)})||c.remove(b)})})},Gb.prototype.subtract=function(){var a=gc.call(arguments,0);if(0===a.length)return this;a=a.map(function(a){return p(a)});var b=this;return this.withMutations(function(c){b.forEach(function(b){a.some(function(a){return a.includes(b)})&&c.remove(b)})})},Gb.prototype.merge=function(){return this.union.apply(this,arguments)},Gb.prototype.mergeWith=function(a){var b=gc.call(arguments,1);return this.union.apply(this,b)},Gb.prototype.sort=function(a){return Lb(za(this,a))},Gb.prototype.sortBy=function(a,b){return Lb(za(this,b,a))},Gb.prototype.wasAltered=function(){return this._map.wasAltered()},Gb.prototype.__iterate=function(a,b){var c=this;return this._map.__iterate(function(b,d){return a(d,d,c)},b)},Gb.prototype.__iterator=function(a,b){return this._map.map(function(a,b){return b}).__iterator(a,b)},Gb.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a);return a?this.__make(b,a):(this.__ownerID=a,this._map=b,this)},Gb.isSet=Hb;var Zc="@@__IMMUTABLE_SET__@@",$c=Gb.prototype;$c[Zc]=!0,$c[hc]=$c.remove,$c.mergeDeep=$c.merge,$c.mergeDeepWith=$c.mergeWith,$c.withMutations=Mc.withMutations,$c.asMutable=Mc.asMutable,$c.asImmutable=Mc.asImmutable,$c.__empty=Kb,$c.__make=Jb;var _c;a(Lb,Gb),Lb.of=function(){return this(arguments)},Lb.fromKeys=function(a){return this(n(a).keySeq())},Lb.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Lb.isOrderedSet=Mb;var ad=Lb.prototype;ad[rc]=!0,ad.__empty=Ob,ad.__make=Nb;var bd;a(Pb,U),Pb.prototype.toString=function(){return this.__toString(Rb(this)+" {","}")},Pb.prototype.has=function(a){return this._defaultValues.hasOwnProperty(a)},Pb.prototype.get=function(a,b){if(!this.has(a))return b;var c=this._defaultValues[a];return this._map?this._map.get(a,c):c},Pb.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var a=this.constructor;return a._empty||(a._empty=Qb(this,Wa()))},Pb.prototype.set=function(a,b){if(!this.has(a))throw new Error('Cannot set unknown key "'+a+'" on '+Rb(this));var c=this._map&&this._map.set(a,b);return this.__ownerID||c===this._map?this:Qb(this,c)},Pb.prototype.remove=function(a){if(!this.has(a))return this;var b=this._map&&this._map.remove(a);return this.__ownerID||b===this._map?this:Qb(this,b)},Pb.prototype.wasAltered=function(){return this._map.wasAltered()},Pb.prototype.__iterator=function(a,b){var c=this;return n(this._defaultValues).map(function(a,b){return c.get(b)}).__iterator(a,b)},Pb.prototype.__iterate=function(a,b){var c=this;return n(this._defaultValues).map(function(a,b){return c.get(b)}).__iterate(a,b)},Pb.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map&&this._map.__ensureOwner(a);return a?Qb(this,b,a):(this.__ownerID=a,this._map=b,this)};var cd=Pb.prototype;cd[hc]=cd.remove,cd.deleteIn=cd.removeIn=Mc.removeIn,cd.merge=Mc.merge,cd.mergeWith=Mc.mergeWith,cd.mergeIn=Mc.mergeIn,cd.mergeDeep=Mc.mergeDeep,cd.mergeDeepWith=Mc.mergeDeepWith,cd.mergeDeepIn=Mc.mergeDeepIn,cd.setIn=Mc.setIn,cd.update=Mc.update,cd.updateIn=Mc.updateIn,cd.withMutations=Mc.withMutations,cd.asMutable=Mc.asMutable,cd.asImmutable=Mc.asImmutable,a(Vb,F),Vb.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Vb.prototype.get=function(a,b){return this.has(a)?this._start+g(this,a)*this._step:b},Vb.prototype.includes=function(a){var b=(a-this._start)/this._step;return b>=0&&b<this.size&&b===Math.floor(b)},Vb.prototype.slice=function(a,b){return i(a,b,this.size)?this:(a=j(a,this.size),b=k(b,this.size),a>=b?new Vb(0,0):new Vb(this.get(a,this._end),this.get(b,this._end),this._step))},Vb.prototype.indexOf=function(a){var b=a-this._start;if(b%this._step===0){var c=b/this._step;if(c>=0&&c<this.size)return c}return-1},Vb.prototype.lastIndexOf=function(a){return this.indexOf(a)},Vb.prototype.__iterate=function(a,b){for(var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start,f=0;c>=f;f++){if(a(e,f,this)===!1)return f+1;e+=b?-d:d}return f},Vb.prototype.__iterator=function(a,b){var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start,f=0;return new v(function(){var g=e;return e+=b?-d:d,f>c?x():w(a,f++,g)})},Vb.prototype.equals=function(a){return a instanceof Vb?this._start===a._start&&this._end===a._end&&this._step===a._step:Ub(this,a)};var dd;a(Wb,F),Wb.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Wb.prototype.get=function(a,b){return this.has(a)?this._value:b},Wb.prototype.includes=function(a){return X(this._value,a)},Wb.prototype.slice=function(a,b){var c=this.size;return i(a,b,c)?this:new Wb(this._value,k(b,c)-j(a,c))},Wb.prototype.reverse=function(){return this},Wb.prototype.indexOf=function(a){return X(this._value,a)?0:-1},Wb.prototype.lastIndexOf=function(a){return X(this._value,a)?this.size:-1},Wb.prototype.__iterate=function(a,b){for(var c=0;c<this.size;c++)if(a(this._value,c,this)===!1)return c+1;return c},Wb.prototype.__iterator=function(a,b){var c=this,d=0;return new v(function(){return d<c.size?w(a,d++,c._value):x()})},Wb.prototype.equals=function(a){return a instanceof Wb?X(this._value,a._value):Ub(a)};var ed;m.Iterator=v,Xb(m,{toArray:function(){ha(this.size);var a=new Array(this.size||0);return this.valueSeq().__iterate(function(b,c){a[c]=b}),a},toIndexedSeq:function(){return new ja(this)},toJS:function(){return this.toSeq().map(function(a){return a&&"function"==typeof a.toJS?a.toJS():a}).__toJS()},toJSON:function(){return this.toSeq().map(function(a){return a&&"function"==typeof a.toJSON?a.toJSON():a}).__toJS()},toKeyedSeq:function(){return new ia(this,!0)},toMap:function(){return La(this.toKeyedSeq())},toObject:function(){ha(this.size);var a={};return this.__iterate(function(b,c){a[c]=b}),a},toOrderedMap:function(){return xb(this.toKeyedSeq())},toOrderedSet:function(){return Lb(r(this)?this.valueSeq():this)},toSet:function(){return Gb(r(this)?this.valueSeq():this)},toSetSeq:function(){return new ka(this)},toSeq:function(){return s(this)?this.toIndexedSeq():r(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Cb(r(this)?this.valueSeq():this)},toList:function(){return kb(r(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(a,b){return 0===this.size?a+b:a+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+b},concat:function(){var a=gc.call(arguments,0);return Da(this,va(this,a))},contains:function(a){return this.includes(a)},includes:function(a){return this.some(function(b){return X(b,a)})},entries:function(){return this.__iterator(uc)},every:function(a,b){ha(this.size);var c=!0;return this.__iterate(function(d,e,f){return a.call(b,d,e,f)?void 0:(c=!1,!1)}),c},filter:function(a,b){return Da(this,pa(this,a,b,!0))},find:function(a,b,c){var d=this.findEntry(a,b);return d?d[1]:c},findEntry:function(a,b){var c;return this.__iterate(function(d,e,f){return a.call(b,d,e,f)?(c=[e,d],!1):void 0}),c},findLastEntry:function(a,b){return this.toSeq().reverse().findEntry(a,b)},forEach:function(a,b){return ha(this.size),this.__iterate(b?a.bind(b):a)},join:function(a){ha(this.size),a=void 0!==a?""+a:",";var b="",c=!0;return this.__iterate(function(d){c?c=!1:b+=a,b+=null!==d&&void 0!==d?d.toString():""}),b},keys:function(){return this.__iterator(sc)},map:function(a,b){return Da(this,na(this,a,b))},reduce:function(a,b,c){ha(this.size);var d,e;return arguments.length<2?e=!0:d=b,this.__iterate(function(b,f,g){e?(e=!1,d=b):d=a.call(c,d,b,f,g)}),d},reduceRight:function(a,b,c){var d=this.toKeyedSeq().reverse();return d.reduce.apply(d,arguments)},reverse:function(){return Da(this,oa(this,!0))},slice:function(a,b){return Da(this,sa(this,a,b,!0))},some:function(a,b){return!this.every($b(a),b)},sort:function(a){return Da(this,za(this,a))},values:function(){return this.__iterator(tc)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(a,b){return f(a?this.toSeq().filter(a,b):this)},countBy:function(a,b){return qa(this,a,b)},equals:function(a){return Ub(this,a)},entrySeq:function(){var a=this;if(a._cache)return new H(a._cache);var b=a.toSeq().map(Zb).toIndexedSeq();return b.fromEntrySeq=function(){return a.toSeq()},b},filterNot:function(a,b){return this.filter($b(a),b)},findLast:function(a,b,c){return this.toKeyedSeq().reverse().find(a,b,c)},first:function(){return this.find(h)},flatMap:function(a,b){return Da(this,xa(this,a,b))},flatten:function(a){return Da(this,wa(this,a,!0))},fromEntrySeq:function(){return new la(this)},get:function(a,b){return this.find(function(b,c){return X(c,a)},void 0,b)},getIn:function(a,b){for(var c,d=this,e=Ka(a);!(c=e.next()).done;){var f=c.value;if(d=d&&d.get?d.get(f,lc):lc,d===lc)return b}return d},groupBy:function(a,b){return ra(this,a,b)},has:function(a){return this.get(a,lc)!==lc},hasIn:function(a){return this.getIn(a,lc)!==lc},isSubset:function(a){return a="function"==typeof a.includes?a:m(a),this.every(function(b){return a.includes(b)})},isSuperset:function(a){return a="function"==typeof a.isSubset?a:m(a),a.isSubset(this)},keySeq:function(){return this.toSeq().map(Yb).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(a){return Aa(this,a)},maxBy:function(a,b){return Aa(this,b,a)},min:function(a){return Aa(this,a?_b(a):cc)},minBy:function(a,b){return Aa(this,b?_b(b):cc,a)},rest:function(){return this.slice(1)},skip:function(a){return this.slice(Math.max(0,a))},skipLast:function(a){return Da(this,this.toSeq().reverse().skip(a).reverse())},skipWhile:function(a,b){return Da(this,ua(this,a,b,!0))},skipUntil:function(a,b){return this.skipWhile($b(a),b)},sortBy:function(a,b){return Da(this,za(this,b,a))},take:function(a){return this.slice(0,Math.max(0,a))},takeLast:function(a){return Da(this,this.toSeq().reverse().take(a).reverse())},takeWhile:function(a,b){return Da(this,ta(this,a,b))},takeUntil:function(a,b){return this.takeWhile($b(a),b)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=dc(this))}});var fd=m.prototype;fd[oc]=!0,fd[xc]=fd.values,fd.__toJS=fd.toArray,fd.__toStringMapper=ac,fd.inspect=fd.toSource=function(){return this.toString()},fd.chain=fd.flatMap,function(){try{Object.defineProperty(fd,"length",{get:function(){if(!m.noLengthWarning){var a;try{throw new Error}catch(b){a=b.stack}if(-1===a.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+a),this.size}}})}catch(a){}}(),Xb(n,{flip:function(){return Da(this,ma(this))},findKey:function(a,b){var c=this.findEntry(a,b);return c&&c[0]},findLastKey:function(a,b){return this.toSeq().reverse().findKey(a,b)},keyOf:function(a){return this.findKey(function(b){return X(b,a)})},lastKeyOf:function(a){return this.findLastKey(function(b){return X(b,a)})},mapEntries:function(a,b){var c=this,d=0;return Da(this,this.toSeq().map(function(e,f){return a.call(b,[f,e],d++,c)}).fromEntrySeq())},mapKeys:function(a,b){var c=this;return Da(this,this.toSeq().flip().map(function(d,e){return a.call(b,d,e,c)}).flip())}});var gd=n.prototype;gd[pc]=!0,gd[xc]=fd.entries,gd.__toJS=fd.toObject,gd.__toStringMapper=function(a,b){return JSON.stringify(b)+": "+ac(a)},Xb(o,{toKeyedSeq:function(){return new ia(this,!1)},filter:function(a,b){return Da(this,pa(this,a,b,!1))},findIndex:function(a,b){var c=this.findEntry(a,b);return c?c[0]:-1},indexOf:function(a){var b=this.toKeyedSeq().keyOf(a);return void 0===b?-1:b},lastIndexOf:function(a){return this.toSeq().reverse().indexOf(a)},reverse:function(){return Da(this,oa(this,!1))},slice:function(a,b){return Da(this,sa(this,a,b,!1))},splice:function(a,b){var c=arguments.length;if(b=Math.max(0|b,0),0===c||2===c&&!b)return this;a=j(a,this.size);var d=this.slice(0,a);return Da(this,1===c?d:d.concat(e(arguments,2),this.slice(a+b)))},findLastIndex:function(a,b){var c=this.toKeyedSeq().findLastKey(a,b);return void 0===c?-1:c},first:function(){return this.get(0)},flatten:function(a){return Da(this,wa(this,a,!1))},get:function(a,b){return a=g(this,a),0>a||this.size===1/0||void 0!==this.size&&a>this.size?b:this.find(function(b,c){return c===a},void 0,b)},has:function(a){return a=g(this,a),a>=0&&(void 0!==this.size?this.size===1/0||a<this.size:-1!==this.indexOf(a))},interpose:function(a){return Da(this,ya(this,a))},interleave:function(){var a=[this].concat(e(arguments)),b=Ca(this.toSeq(),F.of,a),c=b.flatten(!0);return b.size&&(c.size=b.size*a.length),Da(this,c)},last:function(){return this.get(-1)},skipWhile:function(a,b){return Da(this,ua(this,a,b,!1))},zip:function(){var a=[this].concat(e(arguments));return Da(this,Ca(this,bc,a))},zipWith:function(a){var b=e(arguments);return b[0]=this,Da(this,Ca(this,a,b))}}),o.prototype[qc]=!0,o.prototype[rc]=!0,Xb(p,{get:function(a,b){return this.has(a)?a:b},includes:function(a){return this.has(a)},keySeq:function(){return this.valueSeq()}}),p.prototype.has=fd.includes,Xb(E,n.prototype),Xb(F,o.prototype),Xb(G,p.prototype),Xb(U,n.prototype),Xb(V,o.prototype),Xb(W,p.prototype);var hd={Iterable:m,Seq:D,Collection:T,Map:La,OrderedMap:xb,List:kb,Stack:Cb,Set:Gb,OrderedSet:Lb,Record:Pb,Range:Vb,Repeat:Wb,is:X,fromJS:Y};return hd})},function(a,b,c){var d,e;d=[c(105),c(103)],e=function(a,b){"use strict";function c(b){return a.isCaretPositionNode(b)?!0:""===b.parentNode.textContent.trim()}function d(b){function f(b){return 0===b.children.length&&a.isBlockElement(b)||1===b.children.length&&a.isSelectionMarkerNode(b.children[0])?!0:a.isBlockElement(b)||0!==b.children.length?!1:c(b)}for(var g=b.firstElementChild;g;)a.isSelectionMarkerNode(g)||(f(g)&&""===g.textContent.trim()&&!e.includes(g.nodeName)?g.appendChild(document.createElement("br")):g.children.length>0&&d(g)),g=g.nextElementSibling}var e=b.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");return function(){return function(a){a.registerHTMLFormatter("normalize",function(a){var b=document.createElement("div");return b.innerHTML=a,d(b),b.innerHTML})}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(106),c(107),c(103)],e=function(a,b,c){"use strict";function d(a){return b.includes(a.nodeName)}function e(b){return a.includes(b.nodeName)}function f(a){return a.children.length>1?!1:1===a.children.length&&""!==a.textContent.trim()?!1:0===a.children.length?""===a.textContent.trim():f(a.children[0])}function g(a){return a.nodeType===Node.TEXT_NODE}function h(a){return g(a)&&""===a.data}function i(a){return a.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function j(a,b){return a.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING}function k(a){return a.nodeType===Node.ELEMENT_NODE&&"scribe-marker"===a.className}function l(a){return a.nodeType===Node.ELEMENT_NODE&&"caret-position"===a.className}function m(a){var b=a.firstChild;return b&&"BR"!==b.nodeName?m(b):a}function n(a,b){return b.parentNode.insertBefore(a,b.nextSibling)}function o(a){return a.parentNode.removeChild(a)}function p(a,b,c){function d(a){return b===a}if(!d(a))for(var e=a.parentNode;e&&!d(e);){if(c(e))return e;e=e.parentNode}}function q(a){for(var b=c.List();a=a.nextSibling;)b=b.push(a);return b}function r(a,b){return a[0].parentNode.insertBefore(b,a[0]),a.forEach(function(a){b.appendChild(a)}),b}function s(a,b){for(;b.childNodes.length>0;)a.insertBefore(b.childNodes[0],b);a.removeChild(b)}function t(b){function d(a,b){return window.getComputedStyle(b).lineHeight===a.lineHeight}var e=c.List(b.querySelectorAll(a.map(function(a){return a+'[style*="line-height"]'}).join(",")));e=e.filter(d.bind(null,window.getComputedStyle(b)));var f=c.List();e.forEach(function(a){a.style.lineHeight=null,a.getAttribute("style")||a.removeAttribute("style"),"SPAN"===a.nodeName&&0===a.attributes.length&&(f=f.push(a))}),f.forEach(function(a){s(a.parentNode,a)})}return{isInlineElement:e,isBlockElement:d,isEmptyInlineElement:f,isText:g,isEmptyTextNode:h,isFragment:i,isBefore:j,isSelectionMarkerNode:k,isCaretPositionNode:l,firstDeepestChild:m,insertAfter:n,removeNode:o,getAncestor:p,nextSiblings:q,wrap:r,unwrap:s,removeChromeArtifacts:t}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(103)],e=function(a){var b=a.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA");return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(103)],e=function(a){var b=a.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO");return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";function a(a){for(var b=document.createTreeWalker(a,NodeFilter.SHOW_ALL,null,!1);b.nextNode();)if(b.currentNode&&(~["br"].indexOf(b.currentNode.nodeName.toLowerCase())||b.currentNode.length>0))return!0;return!1}return function(){return function(b){b.el.addEventListener("keydown",function(c){if(13===c.keyCode){var d=new b.api.Selection,e=d.range,f=d.getContaining(function(a){return"LI"===a.nodeName||/^(H[1-6])$/.test(a.nodeName)});f||(c.preventDefault(),b.transactionManager.run(function(){"BR"===b.el.lastChild.nodeName&&b.el.removeChild(b.el.lastChild);var c=document.createElement("br");e.insertNode(c),e.collapse(!1);var f=e.cloneRange();f.setEndAfter(b.el.lastChild,0);var g=f.cloneContents();if(!a(g)){var h=document.createElement("br");e.insertNode(h)}var i=e.cloneRange();i.setStartAfter(c,0),i.setEndAfter(c,0),d.selection.removeAllRanges(),d.selection.addRange(i)}))}}.bind(this)),""===b.getHTML().trim()&&b.setContent("")}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(110),c(111)],e=function(a,b){"use strict";return{replaceNbspCharsFormatter:a,escapeHtmlCharactersFormatter:b}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=/(\s|&nbsp;)+/g;a.registerHTMLFormatter("export",function(a){return a.replace(b," ")})}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(112)],e=function(a){"use strict";return function(){return function(b){b.registerPlainTextFormatter(a)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(86),c(113)],e=function(a,b){function c(c){return c=a(c),c&&e.test(c)?c.replace(d,b):c}var d=/[&<>"'`]/g,e=RegExp(d.source);return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return b[a]}var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(115),c(103)],e=function(a,b){"use strict";return function(){return function(c){var d=c.node;c.el.addEventListener("focus",function(){var a=new c.api.Selection;if(a.range){var b=c.allowsBlockElements()&&a.range.startContainer===c.el;if(b){var e=d.firstDeepestChild(c.el),f=a.range;f.setStart(e,0),f.setEnd(e,0),a.selection.removeAllRanges(),a.selection.addRange(f)}}}.bind(c));var e=function(){if(!c._skipFormatters){var a=new c.api.Selection,b=a.range,d=function(){b&&a.placeMarkers(),c.setHTML(c._htmlFormatterFactory.format(c.getHTML())),a.selectMarkers()}.bind(c);c.transactionManager.run(d)}delete c._skipFormatters}.bind(c);a(c.el,e),c.allowsBlockElements()&&c.el.addEventListener("keydown",function(a){if(13===a.keyCode){var b=new c.api.Selection,d=b.range,e=b.getContaining(function(a){return/^(H[1-6])$/.test(a.nodeName)});if(e&&d.collapsed){var f=d.cloneRange();f.setEndAfter(e,0);var g=f.cloneContents();""===g.firstChild.textContent&&(a.preventDefault(),c.transactionManager.run(function(){var a=document.createElement("p"),c=document.createElement("br");a.appendChild(c),e.parentNode.insertBefore(a,e.nextElementSibling),d.setStart(a,0),d.setEnd(a,0),b.selection.removeAllRanges(),b.selection.addRange(d)}))}}}),c.allowsBlockElements()&&c.el.addEventListener("keydown",function(a){if(13===a.keyCode||8===a.keyCode){var b=new c.api.Selection,d=b.range;if(d.collapsed){var e=b.getContaining(function(a){return"LI"===a.nodeName});if(e&&""===e.textContent.trim()){a.preventDefault();var f=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName}),g=c.getCommand("OL"===f.nodeName?"insertOrderedList":"insertUnorderedList");g.execute()}}}}),c.el.addEventListener("paste",function(a){if(a.clipboardData)a.preventDefault(),b.List(a.clipboardData.types).includes("text/html")?c.insertHTML(a.clipboardData.getData("text/html")):c.insertPlainText(a.clipboardData.getData("text/plain"));else{var d=new c.api.Selection;d.placeMarkers();var e=document.createElement("div");document.body.appendChild(e),e.setAttribute("contenteditable",!0),e.focus(),setTimeout(function(){var a=e.innerHTML;e.parentNode.removeChild(e),d.selectMarkers(),c.el.focus(),c.insertHTML(a)},1)}})}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(105)],e=function(a){function b(b){return!a.isEmptyTextNode(b)&&!a.isSelectionMarkerNode(b)}function c(a){return a.some(function(a){return Array.prototype.some.call(a.addedNodes,b)||Array.prototype.some.call(a.removedNodes,b)})}function d(a,b){var d=!1,f=new e(function(a){if(!d&&c(a)){d=!0;try{b()}catch(e){throw e}finally{setTimeout(function(){d=!1},0)}}});return f.observe(a,{childList:!0,subtree:!0}),f}var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(117),c(118),c(119),c(120),c(121),c(122),c(123)],e=function(a,b,c,d,e,f,g){"use strict";return{commands:{bold:a,indent:b,insertHTML:c,insertList:d,outdent:e,createLink:f},events:g}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("bold");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return/^(H[1-6])$/.test(a.nodeName)});return a.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!c},a.commandPatches.bold=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";var a="\ufeff";return function(){return function(b){var c=new b.api.CommandPatch("indent");c.execute=function(c){b.transactionManager.run(function(){var d=new b.api.Selection,e=d.range,f="P"===e.commonAncestorContainer.nodeName&&"<br>"===e.commonAncestorContainer.innerHTML;if(f){var g=document.createTextNode(a);e.insertNode(g),e.setStart(g,0),e.setEnd(g,0),d.selection.removeAllRanges(),d.selection.addRange(e)}b.api.CommandPatch.prototype.execute.call(this,c),d=new b.api.Selection;var h=d.getContaining(function(a){return"BLOCKQUOTE"===a.nodeName});h&&h.removeAttribute("style")}.bind(this))},b.commandPatches.indent=c}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[],e=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("insertHTML"),c=a.node;b.execute=function(b){a.transactionManager.run(function(){a.api.CommandPatch.prototype.execute.call(this,b),c.removeChromeArtifacts(a.el)}.bind(this))},a.commandPatches.insertHTML=b}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){"use strict";return function(){return function(a){var b=a.node,c=function(b){a.api.CommandPatch.call(this,b)};c.prototype=Object.create(a.api.CommandPatch.prototype),c.prototype.constructor=c,c.prototype.execute=function(c){a.transactionManager.run(function(){if(a.api.CommandPatch.prototype.execute.call(this,c),this.queryState()){var d=new a.api.Selection,e=d.getContaining(function(a){return"OL"===a.nodeName||"UL"===a.nodeName});if(e.nextElementSibling&&0===e.nextElementSibling.childNodes.length&&b.removeNode(e.nextElementSibling),e){var f=e.parentNode;f&&/^(H[1-6]|P)$/.test(f.nodeName)&&(d.placeMarkers(),b.insertAfter(e,f),d.selectMarkers(),2===f.childNodes.length&&b.isEmptyTextNode(f.firstChild)&&b.removeNode(f),0===f.childNodes.length&&b.removeNode(f))}b.removeChromeArtifacts(e)}}.bind(this))},c.prototype.queryState=function(){try{return a.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(b){if("NS_ERROR_UNEXPECTED"==b.name)return!1;throw b}},a.commandPatches.insertOrderedList=new c("insertOrderedList"),a.commandPatches.insertUnorderedList=new c("insertUnorderedList")}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=a.node,c=new a.api.CommandPatch("outdent");c.execute=function(){a.transactionManager.run(function(){var c=new a.api.Selection,d=c.range,e=c.getContaining(function(a){return"BLOCKQUOTE"===a.nodeName});if("BLOCKQUOTE"===d.commonAncestorContainer.nodeName){c.placeMarkers(),c.selectMarkers(!0);var f=d.cloneContents();e.parentNode.insertBefore(f,e),d.deleteContents(),c.selectMarkers(),""===e.textContent&&e.parentNode.removeChild(e)}else{var g=c.getContaining(function(a){return"P"===a.nodeName});if(g){var h=b.nextSiblings(g);if(h.size){for(var i=document.createElement(e.nodeName);h.size;)i.appendChild(h.first()),h=h.shift();e.parentNode.insertBefore(i,e.nextElementSibling)}c.placeMarkers(),e.parentNode.insertBefore(g,e.nextElementSibling),c.selectMarkers(),""===e.innerHTML&&e.parentNode.removeChild(e)}else a.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},a.commandPatches.outdent=c}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("createLink");a.commandPatches.createLink=b,b.execute=function(b){var c=new a.api.Selection;if(c.range.collapsed){var d=document.createElement("a");d.setAttribute("href",b),d.textContent=b,c.range.insertNode(d);var e=document.createRange();e.setStartBefore(d),e.setEndAfter(d),c.selection.removeAllRanges(),c.selection.addRange(e)}else a.api.CommandPatch.prototype.execute.call(this,b)}}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[],e=function(){"use strict";return function(){return function(a){var b=a.node;a.allowsBlockElements()&&a.el.addEventListener("keyup",function(c){if(8===c.keyCode||46===c.keyCode){var d=new a.api.Selection,e=d.getContaining(function(a){return"P"===a.nodeName});e&&a.transactionManager.run(function(){d.placeMarkers(),b.removeChromeArtifacts(e),d.selectMarkers()},!0)}})}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(125),c(126),c(127),c(128)],e=function(a,b,c,d){"use strict";return function(e){this.CommandPatch=a(e),this.Command=b(e),this.Selection=c(e),this.SimpleCommand=d(this,e)}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(a){function b(a){this.commandName=a}return b.prototype.execute=function(b){a.transactionManager.run(function(){document.execCommand(this.commandName,!1,b||null)}.bind(this))},b.prototype.queryState=function(){return document.queryCommandState(this.commandName)},b.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},b}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(a){function b(b){this.commandName=b,this.patch=a.commandPatches[this.commandName]}return b.prototype.execute=function(b){this.patch?this.patch.execute(b):a.transactionManager.run(function(){document.execCommand(this.commandName,!1,b||null)}.bind(this))},b.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},b.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},b}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(a){function b(){var a=document.createElement("em");return a.style.display="none",a.classList.add("scribe-marker"),a}function c(a,b){a.insertNode(b),b.nextSibling&&f.isEmptyTextNode(b.nextSibling)&&f.removeNode(b.nextSibling),b.previousSibling&&f.isEmptyTextNode(b.previousSibling)&&f.removeNode(b.previousSibling)}function d(){if(this.selection=e.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var a=this.selection.anchorNode,b=this.selection.anchorOffset,c=this.selection.focusNode,d=this.selection.focusOffset;if(a===c&&b>d){var g=b;b=d,d=g}else if(f.isBefore(c,a)){var h=a,i=b;a=c,b=d,c=h,d=i}this.range=document.createRange(),this.range.setStart(a,b),this.range.setEnd(c,d)}}var e=a.el.ownerDocument,f=a.node;
if(e.compareDocumentPosition(a.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var g=a.el.parentNode;g&&f.isFragment(g);)g=g.parentNode;g&&g.getSelection&&(e=g)}return d.prototype.getContaining=function(b){var c=this.range;if(c){var d=this.range.commonAncestorContainer;return d&&a.el===d||!b(d)?f.getAncestor(d,a.el,b):d}},d.prototype.placeMarkers=function(){var d=this.range;if(d&&document.contains(a.el)&&a.el.contains(d.startContainer)&&a.el.contains(d.endContainer)){if(c(d.cloneRange(),b()),!d.collapsed){var e=d.cloneRange();e.collapse(!1),c(e,b())}this.selection.removeAllRanges(),this.selection.addRange(d)}},d.prototype.getMarkers=function(){return a.el.querySelectorAll("em.scribe-marker")},d.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(a){f.removeNode(a)})},d.prototype.selectMarkers=function(a){var b=this.getMarkers();if(b.length){var c=document.createRange();c.setStartBefore(b[0]),c.setEndAfter(b.length>=2?b[1]:b[0]),a||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(c)}},d.prototype.isCaretOnNewLine=function(){var a=this.getContaining(function(a){return"P"===a.nodeName});return!!a&&f.isEmptyInlineElement(a)},d}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(a,b){function c(a,c){b.api.Command.call(this,a),this._nodeName=c}return c.prototype=Object.create(a.Command.prototype),c.prototype.constructor=c,c.prototype.queryState=function(){var a=new b.api.Selection;return b.api.Command.prototype.queryState.call(this)&&!!a.getContaining(function(a){return a.nodeName===this._nodeName}.bind(this))},c}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(130),c(131),c(132),c(133),c(134),c(135),c(136)],e=function(a,b,c,d,e,f,g){"use strict";return{indent:a,insertList:b,outdent:c,redo:d,subscript:e,superscript:f,undo:g}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("indent");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName});return a.api.Command.prototype.queryEnabled.call(this)&&a.allowsBlockElements()&&!c},a.commands.indent=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(103)],e=function(a){"use strict";return function(){return function(b){var c=b.node,d=function(a){b.api.Command.call(this,a)};d.prototype=Object.create(b.api.Command.prototype),d.prototype.constructor=d,d.prototype.execute=function(d){function e(a){if(a.size){for(var b=document.createElement(h.nodeName);a.size;)b.appendChild(a.first()),a=a.shift();h.parentNode.insertBefore(b,h.nextElementSibling)}}if(this.queryState()){var f=new b.api.Selection,g=f.range,h=f.getContaining(function(a){return"OL"===a.nodeName||"UL"===a.nodeName}),i=f.getContaining(function(a){return"LI"===a.nodeName});b.transactionManager.run(function(){if(i){var b=c.nextSiblings(i);e(b),f.placeMarkers();var d=document.createElement("p");d.innerHTML=i.innerHTML,h.parentNode.insertBefore(d,h.nextElementSibling),i.parentNode.removeChild(i)}else{var j=a.List(h.querySelectorAll("li")).filter(function(a){return g.intersectsNode(a)}),k=j.last(),l=c.nextSiblings(k);e(l),f.placeMarkers();var m=document.createDocumentFragment();j.forEach(function(a){var b=document.createElement("p");b.innerHTML=a.innerHTML,m.appendChild(b)}),h.parentNode.insertBefore(m,h.nextElementSibling),j.forEach(function(a){a.parentNode.removeChild(a)})}0===h.childNodes.length&&h.parentNode.removeChild(h),f.selectMarkers()}.bind(this))}else b.api.Command.prototype.execute.call(this,d)},d.prototype.queryEnabled=function(){return b.api.Command.prototype.queryEnabled.call(this)&&b.allowsBlockElements()},b.commands.insertOrderedList=new d("insertOrderedList"),b.commands.insertUnorderedList=new d("insertUnorderedList")}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("outdent");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName});return a.api.Command.prototype.queryEnabled.call(this)&&a.allowsBlockElements()&&!c},a.commands.outdent=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("redo");b.execute=function(){a.undoManager.redo()},b.queryEnabled=function(){return a.undoManager.position>0},a.commands.redo=b,a.options.undo.enabled&&a.el.addEventListener("keydown",function(a){a.shiftKey&&(a.metaKey||a.ctrlKey)&&90===a.keyCode&&(a.preventDefault(),b.execute())})}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("subscript");a.commands.subscript=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("superscript");a.commands.superscript=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("undo");b.execute=function(){a.undoManager.undo()},b.queryEnabled=function(){return a.undoManager.position<a.undoManager.length},a.commands.undo=b,a.options.undo.enabled&&a.el.addEventListener("keydown",function(a){a.shiftKey||!a.metaKey&&!a.ctrlKey||90!==a.keyCode||(a.preventDefault(),b.execute())})}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(103)],e=function(a){"use strict";function b(b,c){this._stack=a.List(),this._limit=b,this._fireEvent="undefined"!=typeof CustomEvent&&c&&c.dispatchEvent,this._ush=c,this.position=0,this.length=0}return b.prototype.transact=function(b,c){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");b.execute(),this.position>0&&this.clearRedo();var d;c&&this.length?(d=this._stack.first().push(b),this._stack=this._stack.shift().unshift(d)):(d=a.List.of(b),this._stack=this._stack.unshift(d),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",d)},b.prototype.undo=function(){if(!(this.position>=this.length)){for(var a=this._stack.get(this.position),b=a.size;b--;)a.get(b).undo();this.position++,this._dispatch("undo",a)}},b.prototype.redo=function(){if(0!==this.position){this.position--;for(var a=this._stack.get(this.position),b=0;b<a.size;b++)a.get(b).redo();this._dispatch("redo",a)}},b.prototype.item=function(a){return a>=0&&a<this.length?this._stack.get(a).toArray():null},b.prototype.clearUndo=function(a){this._stack=this._stack.take(void 0!==a?a:this.position),this.length=this._stack.size},b.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},b.prototype._dispatch=function(a,b){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(a,{detail:{transactions:b.toArray()},bubbles:!0,cancelable:!1}))},b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(103)],e=function(a){"use strict";function b(){this._listeners={}}return b.prototype.on=function(b,c){var d=this._listeners[b]||a.Set();this._listeners[b]=d.add(c)},b.prototype.off=function(b,c){var d=this._listeners[b]||a.Set();c?this._listeners[b]=d["delete"](c):this._listeners[b]=d.clear()},b.prototype.trigger=function(b,c){for(var d=b.split(":");d.length;){var e=d.join(":"),f=this._listeners[e]||a.Set();f.forEach(function(a){a.apply(null,c)}),d.splice(d.length-1,1)}},b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(140)],e=function(a){function b(b){var c=b||{};return c.defaultPlugins&&(c.defaultPlugins=c.defaultPlugins.filter(e(h.defaultPlugins))),c.defaultFormatters&&(c.defaultFormatters=c.defaultFormatters.filter(e(h.defaultFormatters))),Object.freeze(a(c,h))}function c(a){return function(b,c){return b===a?-1:c===a?1:0}}function d(a){return function(b){return-1!==(a?f:g).indexOf(b)}}function e(a){return function(b){return-1!==a.indexOf(b)}}var f=["setRootPElement","enforcePElements","ensureSelectableContainers"],g=["inlineElementsMode"],h={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:f.concat(g),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};return{defaultOptions:h,checkOptions:b,sortByPlugin:c,filterByBlockLevelMode:d,filterByPluginExists:e}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(141),c(79),c(142)],e=function(a,b,c){function d(d){if(null==d)return d;var f=a(arguments);return f.push(c),b.apply(e,f)}var e;return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a,b){return"undefined"==typeof a?b:a}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){a.registerPlainTextFormatter(function(a){return a.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("createLink");b.nodeName="A",b.execute=function(){var b=new a.api.Selection,c=b.range,d=b.getContaining(function(a){return a.nodeName===this.nodeName}.bind(this)),e=d?d.href:"",f=window.prompt("Enter a link.",e);if(d&&(c.selectNode(d),b.selection.removeAllRanges(),b.selection.addRange(c)),f){var g=/^https?\:\/\//,h=/^mailto\:/;if(!g.test(f)&&!h.test(f))if(/@/.test(f)){var i=window.confirm("The URL you entered appears to be an email address. Do you want to add the required “mailto:” prefix?");i&&(f="mailto:"+f)}else{var j=window.confirm("The URL you entered appears to be a link. Do you want to add the required “http://” prefix?");j&&(f="http://"+f)}a.api.SimpleCommand.prototype.execute.call(this,f)}},b.queryState=function(){var b=new a.api.Selection;return!!b.getContaining(function(a){return a.nodeName===this.nodeName}.bind(this))},a.commands.linkPrompt=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(146),c(147),c(179)],e=function(a,b,c){"use strict";return function(d){var e=b(c(d),{tags:{em:{"class":"scribe-marker"},br:{}}});return function(b){var c=new a(e);b.registerHTMLFormatter("sanitize",c.clean.bind(c))}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;!function(f,g){d=g,e="function"==typeof d?d.call(b,c,b,a):d,!(void 0!==e&&(a.exports=e))}(this,function(){function a(a){this.config=a}function b(a){return-1!==e.indexOf(a.nodeName)}function c(a){return-1!==f.indexOf(a.nodeName)}function d(a){return document.createTreeWalker(a,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],f=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return a.prototype.clean=function(a){var b=document.createElement("div");return b.innerHTML=a,this._sanitize(b),b.innerHTML},a.prototype._sanitize=function(a){var e=d(a),f=e.firstChild();if(f)do{var g=f.nodeName.toLowerCase(),h=this.config.tags[g];if(!f._sanitized)if(f.nodeType!==Node.TEXT_NODE){if(f.nodeType===Node.COMMENT_NODE){a.removeChild(f),this._sanitize(a);break}var i,j=c(f);j&&(i=Array.prototype.some.call(f.childNodes,b));var k=j&&i,l=!!a.parentNode,m=b(a)&&b(f)&&l;if(!this.config.tags[g]||k||!this.config.keepNestedBlockElements&&m){if("SCRIPT"!==f.nodeName&&"STYLE"!==f.nodeName)for(;f.childNodes.length>0;)a.insertBefore(f.childNodes[0],f);a.removeChild(f),this._sanitize(a);break}for(var n=0;n<f.attributes.length;n+=1){var o=f.attributes[n],p=o.name.toLowerCase(),q=h[p]||h===!0,r=!q,s=q!==!0&&o.value!==q;(r||s)&&(f.removeAttribute(o.name),n-=1)}this._sanitize(f),f._sanitized=!0}else if(""===f.data.trim()&&(f.previousElementSibling&&b(f.previousElementSibling)||f.nextElementSibling&&b(f.nextElementSibling))){a.removeChild(f),this._sanitize(a);break}}while(f=e.nextSibling())},a})},function(a,b,c){var d,e;d=[c(148),c(175)],e=function(a,b){var c=b(a);return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(149),c(150),c(167),c(162),c(155),c(153),c(159),c(172)],e=function(a,b,c,d,e,f,g,h){function i(k,l,m,n,o){if(!f(k))return k;var p=e(l.length)&&(d(l)||h(l));return(p?a:b)(l,function(a,b,d){if(g(a))return n||(n=[]),o||(o=[]),c(k,d,b,i,m,n,o);var e=k[b],f=m?m(e,a,b,k,d):j,h="undefined"==typeof f;h&&(f=a),!p&&"undefined"==typeof f||!h&&(f===f?f===e:e!==e)||(k[b]=f)}),k}var j;return i}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(151),c(154)],e=function(a,b){function c(c,d){return a(c,d,b)}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(152)],e=function(a){function b(b,c,d){for(var e=-1,f=a(b),g=d(b),h=g.length;++e<h;){var i=g[e];if(c(f[i],i,f)===!1)break}return b}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(153)],e=function(a){function b(b){return a(b)?b:Object(b)}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(155),c(156),c(153),c(160)],e=function(a,b,c,d){var e=b(e=Object.keys)&&e,f=e?function(b){if(b)var f=b.constructor,g=b.length;return"function"==typeof f&&f.prototype===b||"function"!=typeof b&&g&&a(g)?d(b):c(b)?e(b):[]}:d;return f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return"number"==typeof a&&a>-1&&a%1==0&&b>=a}var b=Math.pow(2,53)-1;return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(157),c(159)],e=function(a,b){function c(a){return null==a?!1:h.call(a)==d?i.test(g.call(a)):b(a)&&e.test(a)||!1}var d="[object Function]",e=/^\[object .+?Constructor\]$/,f=Object.prototype,g=Function.prototype.toString,h=f.toString,i=RegExp("^"+a(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(158)],e=function(a){function b(b){return b=a(b),b&&d.test(b)?b.replace(c,"\\$&"):b}var c=/[.*+?^${}()|[\]\/\\]/g,d=RegExp(c.source);return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return"string"==typeof a?a:null==a?"":a+""}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return a&&"object"==typeof a||!1}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(161),c(162),c(163),c(155),c(164),c(165)],e=function(a,b,c,d,e,f){function g(g){for(var h=e(g),j=h.length,k=j&&g.length,l=k&&d(k)&&(b(g)||f.nonEnumArgs&&a(g)),m=-1,n=[];++m<j;){var o=h[m];(l&&c(o,k)||i.call(g,o))&&n.push(o)}return n}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(155),c(159)],e=function(a,b){function c(c){var f=b(c)?c.length:d;return a(f)&&g.call(c)==e||!1}var d,e="[object Arguments]",f=Object.prototype,g=f.toString;return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(155),c(156),c(159)],e=function(a,b,c){var d="[object Array]",e=Object.prototype,f=e.toString,g=b(g=Array.isArray)&&g,h=g||function(b){return c(b)&&a(b.length)&&f.call(b)==d||!1};return h}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a,c){return a=+a,c=null==c?b:c,a>-1&&a%1==0&&c>a}var b=Math.pow(2,53)-1;return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(161),c(162),c(163),c(155),c(153),c(165)],e=function(a,b,c,d,e,f){function g(g){if(null==g)return[];e(g)||(g=Object(g));var h=g.length;h=h&&d(h)&&(b(g)||f.nonEnumArgs&&a(g))&&h||0;for(var j=g.constructor,k=-1,l="function"==typeof j&&j.prototype===g,m=Array(h),n=h>0;++k<h;)m[k]=k+"";for(var o in g)n&&c(o,h)||"constructor"==o&&(l||!i.call(g,o))||m.push(o);return m}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(156),c(166)],e=function(a,b){var c=/\bthis\b/,d=Object.prototype,e=(e=b.window)&&e.document,f=d.propertyIsEnumerable,g={};return function(d){g.funcDecomp=!a(b.WinRTError)&&c.test(function(){return this}),g.funcNames="string"==typeof Function.name;try{g.dom=11===e.createDocumentFragment().nodeType}catch(h){g.dom=!1}try{g.nonEnumArgs=!f.call(arguments,1)}catch(h){g.nonEnumArgs=!0}}(0,0),g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;(function(a,c){d=[],e=function(){var d={"function":!0,object:!0},e=d[typeof b]&&b&&!b.nodeType&&b,f=d[typeof a]&&a&&!a.nodeType&&a,g=e&&f&&"object"==typeof c&&c,h=d[typeof window]&&window,i=g||h!==(this&&this.window)&&h||this;return i}.apply(b,d),!(void 0!==e&&(a.exports=e))}).call(b,c(76)(a),function(){return this}())},function(a,b,c){var d,e;d=[c(168),c(161),c(162),c(155),c(169),c(172),c(173)],e=function(a,b,c,d,e,f,g){function h(h,j,k,l,m,n,o){for(var p=n.length,q=j[k];p--;)if(n[p]==q)return void(h[k]=o[p]);var r=h[k],s=m?m(r,q,k,h,j):i,t="undefined"==typeof s;t&&(s=q,d(q.length)&&(c(q)||f(q))?s=c(r)?r:r?a(r):[]:e(q)||b(q)?s=b(r)?g(r):e(r)?r:{}:t=!1),n.push(q),o.push(s),t?h[k]=l(s,q,m,n,o):(s===s?s!==r:r===r)&&(h[k]=s)}var i;return h}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(156),c(170)],e=function(a,b){var c="[object Object]",d=Object.prototype,e=d.toString,f=a(f=Object.getPrototypeOf)&&f,g=f?function(d){if(!d||e.call(d)!=c)return!1;var g=d.valueOf,h=a(g)&&(h=f(g))&&f(h);return h?d==h||f(d)==h:b(d)}:b;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(171),c(159)],e=function(a,b){function c(c){var e;if(!b(c)||g.call(c)!=d||!f.call(c,"constructor")&&(e=c.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var h;return a(c,function(a,b){h=b}),"undefined"==typeof h||f.call(c,h)}var d="[object Object]",e=Object.prototype,f=e.hasOwnProperty,g=e.toString;return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(151),c(164)],e=function(a,b){function c(c,d){return a(c,d,b)}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(155),c(159)],e=function(a,b){function c(c){return b(c)&&a(c.length)&&A[C.call(c)]||!1}var d="[object Arguments]",e="[object Array]",f="[object Boolean]",g="[object Date]",h="[object Error]",i="[object Function]",j="[object Map]",k="[object Number]",l="[object Object]",m="[object RegExp]",n="[object Set]",o="[object String]",p="[object WeakMap]",q="[object ArrayBuffer]",r="[object Float32Array]",s="[object Float64Array]",t="[object Int8Array]",u="[object Int16Array]",v="[object Int32Array]",w="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",z="[object Uint32Array]",A={};A[r]=A[s]=A[t]=A[u]=A[v]=A[w]=A[x]=A[y]=A[z]=!0,A[d]=A[e]=A[q]=A[f]=A[g]=A[h]=A[i]=A[j]=A[k]=A[l]=A[m]=A[n]=A[o]=A[p]=!1;var B=Object.prototype,C=B.toString;return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(174),c(164)],e=function(a,b){function c(c){return a(c,b(c))}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(176),c(178)],e=function(a,b){function c(c){return function(){var d=arguments,e=d.length,f=d[0];if(2>e||null==f)return f;var g=d[e-2],h=d[e-1],i=d[3];e>3&&"function"==typeof g?(g=a(g,h,5),e-=2):(g=e>2&&"function"==typeof h?h:null,e-=g?1:0),i&&b(d[1],d[2],i)&&(g=3==e?null:g,e=2);for(var j=0;++j<e;){var k=d[j];k&&c(f,k,g)}return f}}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(177)],e=function(a){function b(b,c,d){if("function"!=typeof b)return a;if("undefined"==typeof c)return b;switch(d){case 1:return function(a){return b.call(c,a)};case 3:return function(a,d,e){return b.call(c,a,d,e)};case 4:return function(a,d,e,f){return b.call(c,a,d,e,f)};case 5:return function(a,d,e,f,g){return b.call(c,a,d,e,f,g)}}return function(){return b.apply(c,arguments)}}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return a}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(163),c(155),c(153)],e=function(a,b,c){function d(d,e,f){if(!c(f))return!1;var g=typeof e;if("number"==g)var h=f.length,i=b(h)&&a(e,h);else i="string"==g&&e in f;if(i){var j=f[e];return d===d?d===j:j!==j}return!1}return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(180),c(176)],e=function(a,b){function c(c,d,e){return d="function"==typeof d&&b(d,e,1),a(c,!0,d)}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(168),c(149),c(174),c(150),c(184),c(181),c(185),c(162),c(153),c(154)],e=function(a,b,c,d,e,f,g,h,i,j){function k(m,n,o,p,r,s,u){var v;if(o&&(v=r?o(m,p,r):o(m)),"undefined"!=typeof v)return v;if(!i(m))return m;var w=h(m);if(w){if(v=e(m),!n)return a(m,v)}else{var x=K.call(m),y=x==q;if(x!=t&&x!=l&&(!y||r))return I[x]?f(m,x,n):r?m:{};if(v=g(y?{}:m),!n)return c(m,v,j(m))}s||(s=[]),u||(u=[]);for(var z=s.length;z--;)if(s[z]==m)return u[z];return s.push(m),u.push(v),(w?b:d)(m,function(a,b){v[b]=k(a,n,o,b,m,s,u)}),v}var l="[object Arguments]",m="[object Array]",n="[object Boolean]",o="[object Date]",p="[object Error]",q="[object Function]",r="[object Map]",s="[object Number]",t="[object Object]",u="[object RegExp]",v="[object Set]",w="[object String]",x="[object WeakMap]",y="[object ArrayBuffer]",z="[object Float32Array]",A="[object Float64Array]",B="[object Int8Array]",C="[object Int16Array]",D="[object Int32Array]",E="[object Uint8Array]",F="[object Uint8ClampedArray]",G="[object Uint16Array]",H="[object Uint32Array]",I={};I[l]=I[m]=I[y]=I[n]=I[o]=I[z]=I[A]=I[B]=I[C]=I[D]=I[s]=I[t]=I[u]=I[w]=I[E]=I[F]=I[G]=I[H]=!0,I[p]=I[q]=I[r]=I[v]=I[x]=!1;var J=Object.prototype,K=J.toString;return k}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(182)],e=function(a){function b(b,s,t){var u=b.constructor;switch(s){case h:return a(b);case c:case d:return new u(+b);case i:case j:case k:case l:case m:case n:case o:case p:case q:var v=b.buffer;return new u(t?a(v):v,b.byteOffset,b.length);case e:case g:return new u(b);case f:var w=new u(b.source,r.exec(b));w.lastIndex=b.lastIndex}return w}var c="[object Boolean]",d="[object Date]",e="[object Number]",f="[object RegExp]",g="[object String]",h="[object ArrayBuffer]",i="[object Float32Array]",j="[object Float64Array]",k="[object Int8Array]",l="[object Int16Array]",m="[object Int32Array]",n="[object Uint8Array]",o="[object Uint8ClampedArray]",p="[object Uint16Array]",q="[object Uint32Array]",r=/\w*$/;return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(183),c(156),c(166)],e=function(a,b,c){function d(a){return f.call(a,0)}var e=b(e=c.ArrayBuffer)&&e,f=b(f=e&&new e(0).slice)&&f,g=Math.floor,h=b(h=c.Uint8Array)&&h,i=function(){try{var a=b(a=c.Float64Array)&&a,d=new a(new e(10),0,1)&&a}catch(f){}return d}(),j=i?i.BYTES_PER_ELEMENT:0;return f||(d=e&&h?function(a){var b=a.byteLength,c=i?g(b/j):0,d=c*j,f=new e(b);if(c){var k=new i(f,0,c);k.set(new i(a,0,c))}return b!=d&&(k=new h(f,d),k.set(new h(a,d))),f}:a(null)),d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){return function(){return a}}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){var b=a.length,d=new a.constructor(b);return b&&"string"==typeof a[0]&&c.call(a,"index")&&(d.index=a.index,d.input=a.input),d}var b=Object.prototype,c=b.hasOwnProperty;return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[],e=function(){function a(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Object),new b}return a}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){"use strict";var d=["<div class='st-block-positioner__inner'>","<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>","</div>"].join("\n"),e=function(a,b){this.mediator=b,this.$block=a,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(e.prototype,c(187),c(188),{total_blocks:0,bound:["onBlockCountChange","onSelectChange","toggle","show","hide"],className:"st-block-positioner",visibleClass:"st-block-positioner--is-visible",initialize:function(){this.$el.append(d),this.$select=this.$(".st-block-positioner__select"),this.$select.on("change",this.onSelectChange),this.mediator.on("block:countUpdate",this.onBlockCountChange)},onBlockCountChange:function(a){a!==this.total_blocks&&(this.total_blocks=a,this.renderPositionList())},onSelectChange:function(){var a=this.$select.val();0!==a&&(this.mediator.trigger("block:changePosition",this.$block,a,1===a?"before":"after"),this.toggle())},renderPositionList:function(){for(var a="<option value='0'>"+i18n.t("general:position")+"</option>",b=1;b<=this.total_blocks;b++)a+="<option value="+b+">"+b+"</option>";this.$select.html(a)},toggle:function(){this.$select.val(0),this.$el.toggleClass(this.visibleClass)},show:function(){this.$el.addClass(this.visibleClass)},hide:function(){this.$el.removeClass(this.visibleClass)}}),a.exports=e},function(a,b){"use strict";a.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(a){this[a]=this[a].bind(this)},this)}}},function(a,b,c){"use strict";var d=c(2),e=c(56);a.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(a){return this.$el.find(a)},render:function(){return this},destroy:function(){d.isUndefined(this.stopListening)||this.stopListening(),this.$el.remove()},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var a,b=Object.assign({},d.result(this,"attributes"));this.id&&(b.id=this.id),this.className&&(b["class"]=this.className),b.html&&(a=b.html,delete b.html);var c=e("<"+this.tagName+">").attr(b);a&&c.html(a),this._setElement(c)}},_setElement:function(a){return this.$el=e(a),this.el=this.$el[0],this}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(62),g=function(a,b){this.$block=a,this.blockID=this.$block.attr("id"),this.mediator=b,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(g.prototype,c(187),c(188),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn st-block-ui-btn--reorder st-icon",tagName:"a",attributes:function(){return{html:"reorder",draggable:"true","data-icon":"move"}},initialize:function(){this.$el.bind("mousedown touchstart",this.onMouseDown).bind("dragstart",this.onDragStart).bind("dragend touchend",this.onDragEnd),this.$block.dropArea().bind("drop",this.onDrop)},blockId:function(){return this.$block.attr("id")},onMouseDown:function(){this.mediator.trigger("block-controls:hide"),f.trigger("block:reorder:down")},onDrop:function(a){a.preventDefault();var b=this.$block,c=a.originalEvent.dataTransfer.getData("text/plain"),g=e("#"+c);d.isUndefined(c)||d.isEmpty(g)||b.attr("id")===c||b.attr("data-instance")!==g.attr("data-instance")||b.after(g),this.mediator.trigger("block:rerender",c),f.trigger("block:reorder:dropped",c)},onDragStart:function(a){var b=e(a.currentTarget).parent();a.originalEvent.dataTransfer.setDragImage(this.$block[0],b.position().left,b.position().top),a.originalEvent.dataTransfer.setData("Text",this.blockId()),f.trigger("block:reorder:dragstart"),this.$block.addClass("st-block--dragging")},onDragEnd:function(a){f.trigger("block:reorder:dragend"),this.$block.removeClass("st-block--dragging")},render:function(){return this}}),a.exports=g},function(a,b,c){"use strict";var d=function(){this._ensureElement(),this._bindFunctions()};Object.assign(d.prototype,c(187),c(188),{tagName:"a",className:"st-block-ui-btn st-block-ui-btn--delete st-icon",attributes:{html:"delete","data-icon":"bin"}}),a.exports=d},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(57),g=function(a){var b=a.attr("data-st-name")||a.attr("name");return b||(b="Field"),f.capitalize(b)};a.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var a=this.$(".st-required");a.each(function(a,b){this.validateField(b)}.bind(this)),this.validations.forEach(this.runValidator,this),this.$el.toggleClass("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(a){a=e(a);var b=a.attr("contenteditable")?a.text():a.val();0===b.length&&this.setError(a,i18n.t("errors:block_empty",{name:g(a)}))},runValidator:function(a){d.isUndefined(this[a])||this[a].call(this)},setError:function(a,b){var c=this.addMessage(b,"st-msg--error");a.addClass("st-error"),this.errors.push({field:a,reason:b,msg:c})},resetErrors:function(){this.errors.forEach(function(a){a.field.removeClass("st-error"),a.msg.remove()}),this.$messages.removeClass("st-block__messages--is-visible"),this.errors=[]}}},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(62);a.exports={blockStorage:{},createStore:function(a){this.blockStorage={type:e.underscored(this.type),data:a||{}}},save:function(){var a=this._serializeData();d.isEmpty(a)||this.setData(a)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(a){e.log("Setting data for block "+this.blockID),Object.assign(this.blockStorage.data,a||{})},setAndLoadData:function(a){this.setData(a),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){e.log("loadData for "+this.blockID),f.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){e.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){d.isEmpty(this._getData())||this.beforeLoadingData()}}},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(58),g=c(62),h=c(194),i=["convertToMarkdown","convertFromMarkdown","formatBar"],j=function(a,b,c){this.options=a,this.blockOptions=i.reduce(function(b,c){return b[c]=a[c],b},{}),this.instance_scope=b,this.mediator=c,this.blocks=[],this.blockCounts={},this.blockTypes={},this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};Object.assign(j.prototype,c(187),c(207),c(60),{eventNamespace:"block",mediatedEvents:{create:"createBlock",remove:"removeBlock",rerender:"rerenderBlock"},initialize:function(){},createBlock:function(a,b){if(a=e.classify(a),this.canCreateBlock(a)){var c=new h[a](b,this.instance_scope,this.mediator,this.blockOptions);this.blocks.push(c),this._incrementBlockTypeCount(a),this.mediator.trigger("block:render",c),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),g.trigger(b?"block:create:existing":"block:create:new",c),e.log("Block created of type "+a)}},removeBlock:function(a){var b=this.findBlockById(a),c=e.classify(b.type);this.mediator.trigger("block-controls:reset"),
this.blocks=this.blocks.filter(function(a){return a.blockID!==b.blockID}),this._decrementBlockTypeCount(c),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),g.trigger("block:remove")},rerenderBlock:function(a){var b=this.findBlockById(a);d.isUndefined(b)||b.isEmpty()||!b.drop_options.re_render_on_reorder||b.beforeLoadingData()},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(a){return this.blockLimitReached()?(e.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(a)?this.canAddBlockType(a)?!0:(e.log("Block Limit reached for type "+a),!1):(e.log("Block type not available "+a),!1)},validateBlockTypesExist:function(a){return f.skipValidation||!a?!1:void(this.required||[]).forEach(function(a,b){if(this.isBlockTypeAvailable(a))if(0===this._getBlockTypeCount(a))e.log("Failed validation on required block type "+a),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:a})});else{var c=this.getBlocksByType(a).filter(function(a){return!a.isEmpty()});if(c.length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:a})}),e.log("A required block type "+a+" is empty")}},this)},findBlockById:function(a){return this.blocks.find(function(b){return b.blockID===a})},getBlocksByType:function(a){return this.blocks.filter(function(b){return e.classify(b.type)===a})},getBlocksByIDs:function(a){return this.blocks.filter(function(b){return a.includes(b.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(a){return!d.isUndefined(this.blockTypes[a])},canAddBlockType:function(a){var b=this._getBlockTypeLimit(a);return!(0!==b&&this._getBlockTypeCount(a)>=b)},_setBlocksTypes:function(){this.blockTypes=e.flatten(d.isUndefined(this.options.blockTypes)?h:this.options.blockTypes)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!d.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(a){this.blockCounts[a]=d.isUndefined(this.blockCounts[a])?1:this.blockCounts[a]+1},_decrementBlockTypeCount:function(a){this.blockCounts[a]=d.isUndefined(this.blockCounts[a])?1:this.blockCounts[a]-1},_getBlockTypeCount:function(a){return d.isUndefined(this.blockCounts[a])?0:this.blockCounts[a]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(a){return this.isBlockTypeAvailable(a)?parseInt(d.isUndefined(this.options.blockTypeLimits[a])?0:this.options.blockTypeLimits[a],10):0}}),a.exports=j},function(a,b,c){"use strict";a.exports={Text:c(195),Quote:c(201),Image:c(202),Heading:c(203),List:c(204),Tweet:c(205),Video:c(206)}},function(a,b,c){"use strict";var d=c(196),e=c(200);a.exports=d.extend({type:"text",title:function(){return i18n.t("blocks:text:title")},editorHTML:'<div class="st-required st-text-block" contenteditable="true"></div>',icon_name:"text",loadData:function(a){this.options.convertFromMarkdown&&"html"!==a.format?this.setTextBlockHTML(e(a.text,this.type)):this.setTextBlockHTML(a.text)}})},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(74),g=c(58),h=c(57),i=c(66),j=c(197),k=c(189),l=c(190),m=c(186),n=c(62),o=c(199),p=function(a,b,c,d){j.apply(this,arguments)};p.prototype=Object.create(j.prototype),p.prototype.constructor=p;var q=["<div class='st-block__ui-delete-controls'>","<label class='st-block__delete-label'>","<%= i18n.t('general:delete') %>","</label>","<a class='st-block-ui-btn st-block-ui-btn--confirm-delete st-icon' data-icon='tick'></a>","<a class='st-block-ui-btn st-block-ui-btn--deny-delete st-icon' data-icon='close'></a>","</div>"].join("\n");Object.assign(p.prototype,j.fn,c(191),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender"],className:"st-block st-icon--add",attributes:function(){return Object.assign(j.fn.attributes.call(this),{"data-icon-after":"add"})},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,multi_editable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,_previousSelection:"",initialize:function(){},toMarkdown:function(a){return a},toHTML:function(a){return a},withMixin:function(a){if(d.isObject(a)){var b="initialize"+a.mixinName;d.isUndefined(this[b])&&(Object.assign(this,a),this[b]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.$editor=this.$inner.children().first(),this.mixinsRequireInputs=!1,this.availableMixins.forEach(function(a){if(this[a]){var b=i[h.classify(a)];!d.isUndefined(b.requireInputs)&&b.requireInputs&&(this.mixinsRequireInputs=!0)}},this),this.mixinsRequireInputs){var a=e("<div>",{"class":"st-block__inputs"});this.$inner.append(a),this.$inputs=a}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(a){this[a]&&this.withMixin(i[h.classify(a)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),this.$el.remove()},loading:function(){d.isUndefined(this.spinner)||this.ready(),this.spinner=new o(g.defaults.spinner),this.spinner.spin(this.$el[0]),this.$el.addClass("st--is-loading")},ready:function(){this.$el.removeClass("st--is-loading"),d.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){h.log("toData for "+this.blockID);var a={};return this.hasTextBlock()&&(a.text=this.getTextBlockHTML(),a.format="html"),this.$(":input").not(".st-paste-block").length>0&&this.$(":input").each(function(b,c){c.getAttribute("name")&&(a[c.getAttribute("name")]=c.value)}),a},focus:function(){this.getTextBlock().focus()},blur:function(){this.getTextBlock().blur()},onFocus:function(){this.getTextBlock().bind("focus",this._onFocus)},onBlur:function(){this.getTextBlock().bind("blur",this._onBlur)},_onFocus:function(){this.trigger("blockFocus",this.$el)},_onBlur:function(){},onBlockRender:function(){this.focus()},onDrop:function(a){},onDeleteClick:function(a){a.preventDefault();var b=function(a){a.preventDefault(),this.mediator.trigger("block:remove",this.blockID),this.remove()},c=function(a){a.preventDefault(),this.$el.removeClass("st-block--delete-active"),e.remove()};if(this.isEmpty())return void b.call(this,new Event("click"));this.$inner.append(d.template(q)),this.$el.addClass("st-block--delete-active");var e=this.$inner.find(".st-block__ui-delete-controls");this.$inner.on("click",".st-block-ui-btn--confirm-delete",b.bind(this)).on("click",".st-block-ui-btn--deny-delete",c.bind(this))},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(this.$editor.show(),this.$inputs.hide()),j.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(a){if(d.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return f.execTextBlockCommand(this._scribe,a)},queryTextBlockCommandState:function(a){if(d.isUndefined(this._scribe))throw"No Scribe instance found to query command";return f.queryTextBlockCommandState(this._scribe,a)},_handleContentPaste:function(a){setTimeout(this.onContentPasted.bind(this,a,e(a.currentTarget)),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){var a=new m(this.$el,this.mediator);this._withUIComponent(a,".st-block-ui-btn--reorder",a.toggle),this._withUIComponent(new k(this.$el,this.mediator)),this._withUIComponent(new l,".st-block-ui-btn--delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var a=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(b){if(!d.isUndefined(b.keyCode)){var c=!1;a.$el.on("keyup",".st-text-block",function(a){(17===a.which||224===a.which||91===a.which)&&(c=!1)}).on("keydown",".st-text-block",{formatter:b},function(b){(17===b.which||224===b.which||91===b.which)&&(c=!0),b.which===b.data.formatter.keyCode&&c&&(b.preventDefault(),a.execTextBlockCommand(b.data.formatter.cmd))})}})},_initTextBlocks:function(){this.getTextBlock().bind("keyup",this.getSelectionForFormatter).bind("mouseup",this.getSelectionForFormatter).bind("DOMNodeInserted",this.clearInsertedStyles);var a=this.getTextBlock().get(0);if(!d.isUndefined(a)&&d.isUndefined(this._scribe)){var b=d.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=f.initScribeInstance(a,this.scribeOptions,b)}},getSelectionForFormatter:function(){var a=this;setTimeout(function(){var b=window.getSelection(),c=b.toString().trim(),d="formatter:"+(""===c?"hide":"position");a.mediator.trigger(d,a),n.trigger(d,a)},1)},clearInsertedStyles:function(a){var b=a.target;b.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return d.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(a){return this._scribe.setContent(a)},isEmpty:function(){return d.isEmpty(this.getBlockData())}}),p.extend=c(198),a.exports=p},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(56),g=c(189),h=function(a,b,c,e){this.createStore(a),this.blockID=d.uniqueId("st-block-"),this.instanceID=b,this.mediator=c,this.options=e||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};Object.assign(h.prototype,c(187),c(60),c(188),c(192),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:d.template("<div class='st-block__inner'><%= editor_html %></div>"),attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return e.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=e.toSlug(this.type),this.blockCSSClass},type:"","class":function(){return e.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var a=d.result(this,"editorHTML");this.$el.append(this.block_template({editor_html:a})),this.$inner=this.$el.find(".st-block__inner"),this.$inner.bind("click mouseover",function(a){a.stopPropagation()})},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.$el.addClass("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(a,b,c){this.$ui.append(a.render().$el),b&&c&&this.$ui.on("click",b,c)},_initUI:function(){var a=f("<div>",{"class":"st-block__ui"});this.$inner.append(a),this.$ui=a,this._initUIComponents()},_initMessages:function(){var a=f("<div>",{"class":"st-block__messages"});this.$inner.prepend(a),this.$messages=a},addMessage:function(a,b){var c=f("<span>",{html:a,"class":"st-msg "+b});return this.$messages.append(c).addClass("st-block__messages--is-visible"),c},resetMessages:function(){this.$messages.html("").removeClass("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new g(this.$el))}}),h.fn=h.prototype,h.extend=c(198),a.exports=h},function(a,b){"use strict";a.exports=function(a,b){var c,d=this;c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return d.apply(this,arguments)},Object.assign(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&Object.assign(c.prototype,a),c.__super__=d.prototype,c}},function(a,b,c){var d,e;!function(f,g){"object"==typeof a&&a.exports?a.exports=g():(d=g,e="function"==typeof d?d.call(b,c,b,a):d,!(void 0!==e&&(a.exports=e)))}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(k.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",k.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;if(b=b.charAt(0).toUpperCase()+b.slice(1),void 0!==e[b])return b;for(d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}k.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.scale*(d.length+d.width),k=2*d.scale*j,l=-(d.width+d.length)*d.scale*2+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k,l=["webkit","Moz","ms","O"],m={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=a(null,{className:d.className});if(e(f,{position:d.position,width:0,zIndex:d.zIndex,left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),"undefined"!=typeof document){k=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}();var o=e(a("group"),{behavior:"url(#default#VML)"});!d(o,"transform")&&o.adj?i():j=d(o,"animation")}return h})},function(a,b,c){"use strict";var d=c(2),e=c(57);a.exports=function(a,b){var f=c(194);b=e.classify(b);var g=a,h="Text"===b;d.isUndefined(h)&&(h=!1),h&&(g="<p>"+g),g=g.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(a,b,c){return"<a href='"+c+"'>"+b.replace(/\n/g,"")+"</a>"}),g=e.reverse(e.reverse(g).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(a,b){return">i/<"+b.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(a,b){return">b/<"+b.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"})),g=g.replace(/^\> (.+)$/gm,"$1");var i;return f.hasOwnProperty(b)&&(i=f[b],!d.isUndefined(i.prototype.toHTML)&&d.isFunction(i.prototype.toHTML)&&(g=i.prototype.toHTML(g))),h&&(g=g.replace(/\n\s*\n/gm,"</p><p>"),g=g.replace(/\n/gm,"<br>")),g=g.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,""),g=g.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),h&&(g+="</p>"),g}},function(a,b,c){"use strict";var d=c(2),e=c(196),f=c(200),g=d.template(['<blockquote class="st-required st-text-block" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string st-required js-cite-input" type="text" />'].join("\n"));a.exports=e.extend({type:"quote",title:function(){return i18n.t("blocks:quote:title")},icon_name:"quote",editorHTML:function(){return g(this)},loadData:function(a){this.options.convertFromMarkdown&&"html"!==a.format?this.setTextBlockHTML(f(a.text,this.type)):this.setTextBlockHTML(a.text),this.$(".js-cite-input").val(a.cite)}})},function(a,b,c){"use strict";var d=c(56),e=c(196);a.exports=e.extend({type:"image",title:function(){return i18n.t("blocks:image:title")},droppable:!0,uploadable:!0,icon_name:"image",loadData:function(a){this.$editor.html(d("<img>",{src:a.file.url}))},onBlockRender:function(){this.$inputs.find("button").bind("click",function(a){a.preventDefault()}),this.$inputs.find("input").on("change",function(a){this.onDrop(a.currentTarget)}.bind(this))},onDrop:function(a){var b=a.files[0],c="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(b.type)&&(this.loading(),this.$inputs.hide(),this.$editor.html(d("<img>",{src:c.createObjectURL(b)})).show(),this.uploader(b,function(a){this.setData(a),this.ready()},function(a){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))}})},function(a,b,c){"use strict";var d=c(196),e=c(200);a.exports=d.extend({type:"Heading",title:function(){return i18n.t("blocks:heading:title")},editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(a){this.options.convertFromMarkdown&&"html"!==a.format?this.setTextBlockHTML(e(a.text,this.type)):this.setTextBlockHTML(a.text)}})},function(a,b,c){"use strict";var d=c(196),e=c(200),f=function(a){return function(b){b.el.addEventListener("keydown",function(c){var d,e=function(a){var b=document.createElement("div");return b.appendChild(a.extractContents()),b.innerHTML},f=function(){var a=new b.api.Selection,c=a.range.cloneRange();return c.setEndAfter(b.el.lastChild,0),c},g=function(){var a=new b.api.Selection;return a.range.startOffset};13!==c.keyCode||c.shiftKey?a.isLastListItem()||(8===c.keyCode&&0===g()?(c.preventDefault(),d=b.getContent(),a.removeCurrentListItem(),a.appendToCurrentItem(d)):46===c.keyCode):(c.preventDefault(),d=e(f()),a.addListItemAfterCurrent(d))})}};a.exports=d.extend({type:"list",title:function(){return i18n.t("blocks:list:title")},icon_name:"list",multi_editable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(a){a.use(new f(this))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.$ul=this.$inner.find("ul"),this.ul=this.$ul.get(0)},loadData:function(a){var b=this;this.options.convertFromMarkdown&&"html"!==a.format&&(a=this.parseFromMarkdown(a.text)),a.listItems.length?a.listItems.forEach(function(a){b.addListItem(a.content)}):b.addListItem()},parseFromMarkdown:function(a){var b=a.replace(/^ - (.+)$/gm,"$1").split("\n");return b=b.filter(function(a){return a.length}).map(function(a){return{content:e(a,this.type)}}.bind(this)),{listItems:b,format:"html"}},_serializeData:function(){var a={format:"html",listItems:[]};return this.editorIds.forEach(function(b){var c={content:this.getTextEditor(b).scribe.getContent()};a.listItems.push(c)}.bind(this)),a},addListItemAfterCurrent:function(a){this.addListItem(a,this.getCurrentTextEditor())},addListItem:function(a,b){a=a||"","<br>"===a.trim()&&(a="");var c=this.newTextEditor(this.listItemEditorHTML,a);if(b&&this.ul.lastchild!==b.node){var d=b.node.nextSibling;this.ul.insertBefore(c.node,d);var e=this.editorIds.indexOf(b.id)+1;this.editorIds.splice(e,0,c.id)}else this.$ul.append(c.node),this.editorIds.push(c.id);this.focusOn(c)},focusOnNeighbor:function(a){var b=this.previousListItem()||this.nextListItem();b&&this.focusOn(b)},focusOn:function(a){var b,c=a.scribe,d=new c.api.Selection,e=c.el.lastChild;d.range&&(b=d.range.cloneRange()),a.el.focus(),b&&(b.setStartAfter(e,1),b.collapse(!1))},removeCurrentListItem:function(){if(1!==this.editorIds.length){var a=this.getCurrentTextEditor(),b=this.editorIds.indexOf(a.id);this.focusOnNeighbor(a),this.editorIds.splice(b,1),this.ul.removeChild(a.node),this.removeTextEditor(a.id)}},appendToCurrentItem:function(a){this.appendToTextEditor(this.getCurrentTextEditor().id,a)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var a=this.editorIds.indexOf(this.getCurrentTextEditor().id),b=this.editorIds[a+1];return void 0!==b?this.getTextEditor(b):null},previousListItem:function(){var a=this.editorIds.indexOf(this.getCurrentTextEditor().id),b=this.editorIds[a-1];return void 0!==b?this.getTextEditor(b):null}})},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(57),g=c(196),h=d.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>",'<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>'].join("\n"));a.exports=g.extend({type:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},title:function(){return i18n.t("blocks:tweet:title")},fetchUrl:function(a){return"/tweets/?tweet_id="+a},icon_name:"twitter",loadData:function(a){d.isUndefined(a.status_url)&&(a.status_url=""),this.$inner.find("iframe").remove(),this.$inner.prepend(h(a))},onContentPasted:function(a){var b=e(a.target),c=b.val();this.handleTwitterDropPaste(c)},handleTwitterDropPaste:function(a){if(!this.validTweetUrl(a))return void f.log("Invalid Tweet URL");var b=a.match(/[^\/]+$/);if(!d.isEmpty(b)){this.loading(),b=b[0];var c={url:this.fetchUrl(b),dataType:"json"};this.fetch(c,this.onTweetSuccess,this.onTweetFail)}},validTweetUrl:function(a){return f.isURI(a)&&-1!==a.indexOf("twitter")&&-1!==a.indexOf("status")},onTweetSuccess:function(a){var b={user:{profile_image_url:a.user.profile_image_url,profile_image_url_https:a.user.profile_image_url_https,screen_name:a.user.screen_name,name:a.user.name},id:a.id_str,text:a.text,created_at:a.created_at,entities:a.entities,status_url:"https://twitter.com/"+a.user.screen_name+"/status/"+a.id_str};this.setAndLoadData(b),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(a){var b=a.getData("text/plain");this.handleTwitterDropPaste(b)}})},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(196);a.exports=f.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}},type:"video",title:function(){return i18n.t("blocks:video:title")},droppable:!0,pastable:!0,icon_name:"video",loadData:function(a){if(this.providers.hasOwnProperty(a.source)){var b=this.providers[a.source],c="file:"===window.location.protocol?"http:":window.location.protocol,e=b.square?"with-square-media":"with-sixteen-by-nine-media";this.$editor.addClass("st-block__editor--"+e).html(d.template(b.html,{protocol:c,remote_id:a.remote_id,width:this.$editor.width()}))}},onContentPasted:function(a){this.handleDropPaste(a.target.value)},matchVideoProvider:function(a,b,c){var e=a.regex.exec(c);return null==e||d.isUndefined(e[1])?{}:{source:b,remote_id:e[1]}},handleDropPaste:function(a){if(e.isURI(a))for(var b in this.providers)this.providers.hasOwnProperty(b)&&this.setAndLoadData(this.matchVideoProvider(this.providers[b],b,a))},onDrop:function(a){var b=a.getData("text/plain");this.handleDropPaste(b)}})},function(a,b){"use strict";a.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){Object.keys(this.mediatedEvents).forEach(function(a){var b=this.mediatedEvents[a];a=this.eventNamespace?this.eventNamespace+":"+a:a,this.mediator.on(a,this[b].bind(this))},this)}}},function(a,b,c){"use strict";var d=c(2),e=c(194),f=function(a){this.type=a,this.block_type=e[this.type].prototype,this.can_be_rendered=this.block_type.toolbarEnabled,this._ensureElement()};Object.assign(f.prototype,c(187),c(188),c(60),{tagName:"a",className:"st-block-control",attributes:function(){return{"data-type":this.block_type.type}},render:function(){return this.$el.html('<span class="st-icon">'+d.result(this.block_type,"icon_name")+"</span>"+d.result(this.block_type,"title")),this}}),a.exports=f},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(194),g=c(208),h=c(62),i=function(a,b){this.available_types=a||[],this.mediator=b,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(i.prototype,c(187),c(207),c(188),c(60),{bound:["handleControlButtonClick"],block_controls:null,className:"st-block-controls",eventNamespace:"block-controls",mediatedEvents:{render:"renderInContainer",show:"show",hide:"hide"},initialize:function(){for(var a in this.available_types)if(f.hasOwnProperty(a)){var b=new g(a);b.can_be_rendered&&this.$el.append(b.render().$el)}this.$el.delegate(".st-block-control","click",this.handleControlButtonClick),this.mediator.on("block-controls:show",this.renderInContainer)},show:function(){this.$el.addClass("st-block-controls--active"),h.trigger("block:controls:shown")},hide:function(){this.removeCurrentContainer(),this.$el.removeClass("st-block-controls--active"),h.trigger("block:controls:hidden")},handleControlButtonClick:function(a){a.stopPropagation(),this.mediator.trigger("block:create",e(a.currentTarget).attr("data-type"))},renderInContainer:function(a){this.removeCurrentContainer(),a.append(this.$el.detach()),a.addClass("with-st-controls"),this.currentContainer=a,this.show()},removeCurrentContainer:function(){d.isUndefined(this.currentContainer)||(this.currentContainer.removeClass("with-st-controls"),this.currentContainer=void 0)}}),a.exports=i},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(62),g=function(a,b,c){this.$wrapper=a,this.instance_id=b,this.mediator=c,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(g.prototype,c(187),c(188),c(60),{className:"st-block-controls__top",attributes:function(){return{"data-icon":"add"}},bound:["handleBlockMouseOut","handleBlockMouseOver","handleBlockClick","onDrop"],initialize:function(){this.$el.on("click",this.handleBlockClick).dropArea().bind("drop",this.onDrop),this.$wrapper.on("mouseover",".st-block",this.handleBlockMouseOver).on("mouseout",".st-block",this.handleBlockMouseOut).on("click",".st-block--with-plus",this.handleBlockClick)},onDrop:function(a){a.preventDefault();var b=this.$el,c=a.originalEvent.dataTransfer.getData("text/plain"),g=e("#"+c);d.isUndefined(c)||d.isEmpty(g)||b.attr("id")===c||this.instance_id!==g.attr("data-instance")||b.after(g),f.trigger("block:reorder:dropped",c)},handleBlockMouseOver:function(a){var b=e(a.currentTarget);b.hasClass("st-block--with-plus")||b.addClass("st-block--with-plus")},handleBlockMouseOut:function(a){var b=e(a.currentTarget);b.hasClass("st-block--with-plus")&&b.removeClass("st-block--with-plus")},handleBlockClick:function(a){a.stopPropagation(),this.mediator.trigger("block-controls:render",e(a.currentTarget))}}),a.exports=g},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=function(a,b,c){this.editor=c,this.options=Object.assign({},f.defaults.formatBar,a||{}),this.commands=this.options.commands,this.mediator=b,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};Object.assign(h.prototype,c(187),c(207),c(60),c(188),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){this.$btns=[],this.commands.forEach(function(a){var b=e("<button>",{"class":"st-format-btn st-format-btn--"+a.name+" "+(a.iconName?"st-icon":""),text:a.text,"data-cmd":a.cmd});this.$btns.push(b),b.appendTo(this.$el)},this),this.$b=e(document)},hide:function(){this.$el.removeClass("st-format-bar--is-ready"),this.$el.remove()},show:function(){this.hide(),this.editor.$outer.append(this.$el),this.$el.addClass("st-format-bar--is-ready"),this.$el.bind("click",".st-format-btn",this.onFormatButtonClick)},remove:function(){this.$el.remove()},renderBySelection:function(){this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var a=window.getSelection(),b=a.getRangeAt(0),c=b.getBoundingClientRect(),d={},e=this.editor.$outer.get(0),f=e.getBoundingClientRect();d.top=c.top-f.top+"px",d.left=(c.left+c.right)/2-this.el.offsetWidth/2-f.left+"px",this.$el.css(d)},highlightSelectedButtons:function(){var a=g.getBlockBySelection();this.$btns.forEach(function(b){var c=e(b).data("cmd");b.toggleClass("st-format-btn--is-active",a.queryTextBlockCommandState(c))},this)},onFormatButtonClick:function(a){a.stopPropagation();var b=g.getBlockBySelection();if(d.isUndefined(b))throw"Associated block not found";var c=e(a.target),f=c.data("cmd");return d.isUndefined(f)?!1:(b.execTextBlockCommand(f),this.highlightSelectedButtons(),!1)}}),a.exports=h},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(60),i=c(62),j=c(213),k=c(209),l=c(193),m=c(210),n=c(211),o=c(63),p=c(214),q=function(a){this.initialize(a)};Object.assign(q.prototype,c(187),c(60),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","renderBlock","resetBlockControls","blockLimitReached"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(a){return g.log("Init SirTrevor.Editor"),
this.options=Object.assign({},f.defaults,a||{}),this.ID=d.uniqueId("st-editor-"),this._ensureAndSetElements()?(!d.isUndefined(this.options.onEditorRender)&&d.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=Object.assign({},h),this._bindFunctions(),f.instances.push(this),this.build(),void j.bindFormSubmit(this.$form)):!1},build:function(){this.$el.hide(),this.errorHandler=new p(this.$outer,this.mediator,this.options.errorsContainer),this.store=new o(this.$el.val(),this.mediator),this.block_manager=new l(this.options,this.ID,this.mediator),this.block_controls=new k(this.block_manager.blockTypes,this.mediator),this.fl_block_controls=new m(this.$wrapper,this.ID,this.mediator),this.formatBar=new n(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block-controls:reset",this.resetBlockControls),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:render",this.renderBlock),this.dataStore="Please use store.retrieve();",this._setEvents(),this.$wrapper.prepend(this.fl_block_controls.render().$el),this.$outer.append(this.block_controls.render().$el),e(window).bind("click",this.hideAllTheThings),this.createBlocks(),this.$wrapper.addClass("st-ready"),d.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var a=this.store.retrieve();a.data.length>0?a.data.forEach(function(a){this.mediator.trigger("block:create",a.type,a.data)},this):this.options.defaultType!==!1&&this.mediator.trigger("block:create",this.options.defaultType,{})},destroy:function(){this.formatBar.destroy(),this.fl_block_controls.destroy(),this.block_controls.destroy(),this.block_manager.blocks.forEach(function(a){this.mediator.trigger("block:remove",a.blockID)},this),this.mediator.stopListening(),this.stopListening(),f.instances=f.instances.filter(function(a){return a.ID!==this.ID},this),this.store.reset(),this.$outer.replaceWith(this.$el.detach())},reinitialize:function(a){this.destroy(),this.initialize(a||this.options)},resetBlockControls:function(){this.block_controls.renderInContainer(this.$wrapper),this.block_controls.hide()},blockLimitReached:function(a){this.$wrapper.toggleClass("st--block-limit-reached",a)},_setEvents:function(){Object.keys(this.events).forEach(function(a){i.on(a,this[this.events[a]],this)},this)},hideAllTheThings:function(a){this.block_controls.hide(),this.formatBar.hide()},store:function(a,b){return g.log("The store method has been removed, please call store[methodName]"),this.store[a].call(this,b||{})},renderBlock:function(a){this._renderInPosition(a.render().$el),this.hideAllTheThings(),a.trigger("onRender")},removeBlockDragOver:function(){this.$outer.find(".st-drag-over").removeClass("st-drag-over")},changeBlockPosition:function(a,b){b-=1;var c=this.getBlockPosition(a),d=this.$wrapper.find(".st-block").eq(b),e=c>b?"Before":"After";d&&d.attr("id")!==a.attr("id")&&(this.hideAllTheThings(),a["insert"+e](d))},_renderInPosition:function(a){this.block_controls.currentContainer?this.block_controls.currentContainer.after(a):this.$wrapper.append(a)},validateAndSaveBlock:function(a,b){if((!f.skipValidation||b)&&!a.valid())return this.mediator.trigger("errors:add",{text:d.result(a,"validationFailMsg")}),void g.log("Block "+a.blockID+" failed validation");var c=a.getData();g.log("Adding data for block "+a.blockID+" to block store:",c),this.store.addData(c)},onFormSubmit:function(a){return a=a===!1?!1:!0,g.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(a),this.block_manager.validateBlockTypesExist(a),this.mediator.trigger("errors:render"),this.$el.val(this.store.toString()),this.errorHandler.errors.length},validateBlocks:function(a){var b=this;this.$wrapper.find(".st-block").each(function(c,f){var g=b.block_manager.findBlockById(e(f).attr("id"));d.isUndefined(g)||b.validateAndSaveBlock(g,a)})},findBlockById:function(a){return this.block_manager.findBlockById(a)},getBlocksByType:function(a){return this.block_manager.getBlocksByType(a)},getBlocksByIDs:function(a){return this.block_manager.getBlocksByIDs(a)},getBlockPosition:function(a){return this.$wrapper.find(".st-block").index(a)},_ensureAndSetElements:function(){if(d.isUndefined(this.options.el)||d.isEmpty(this.options.el))return g.log("You must provide an el"),!1;this.$el=this.options.el,this.el=this.options.el[0],this.$form=this.$el.parents("form");var a=e("<div>").attr({id:this.ID,"class":"st-outer notranslate",dropzone:"copy link move"}),b=e("<div>").attr({"class":"st-blocks"});return this.$el.wrap(a).wrap(b),this.$outer=this.$form.find("#"+this.ID),this.$wrapper=this.$outer.find(".st-blocks"),!0}}),a.exports=q},function(a,b,c){"use strict";var d=c(58),e=c(57),f=c(62),g=c(64),h=!1,i={bindFormSubmit:function(a){h||(new g(a),a.bind("submit",this.onFormSubmit),h=!0)},onBeforeSubmit:function(a){var b=0;return d.instances.forEach(function(c,d){b+=c.onFormSubmit(a)}),e.log("Total errors: "+b),b},onFormSubmit:function(a){var b=i.onBeforeSubmit();b>0&&(f.trigger("onError"),a.preventDefault())}};a.exports=i},function(a,b,c){"use strict";var d=c(2),e=c(56),f=function(a,b,c){this.$wrapper=a,this.mediator=b,this.$el=c,d.isUndefined(this.$el)&&(this._ensureElement(),this.$wrapper.prepend(this.$el)),this.$el.hide(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(f.prototype,c(187),c(207),c(188),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var a=e("<ul>");this.$el.append("<p>"+i18n.t("errors:title")+"</p>").append(a),this.$list=a},render:function(){return 0===this.errors.length?!1:(this.errors.forEach(this.createErrorItem,this),void this.$el.show())},createErrorItem:function(a){var b=e("<li>",{"class":"st-errors__msg",html:a.text});this.$list.append(b)},addMessage:function(a){this.errors.push(a)},reset:function(){return 0===this.errors.length?!1:(this.errors=[],this.$list.html(""),void this.$el.hide())}}),a.exports=f},function(a,b,c){"use strict";var d=c(2),e=c(57);a.exports=function(a,b){function f(a,b,c){return d.isUndefined(c)&&(c=""),"**"+b.replace(/<(.)?br(.)?>/g,"")+"**"+c}function g(a,b,c){return d.isUndefined(c)&&(c=""),"_"+b.replace(/<(.)?br(.)?>/g,"")+"_"+c}var h=c(194);b=e.classify(b);var i=a;i=i.replace(/&nbsp;/g," "),i=i.replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var j,k,l=["style","script","applet","embed","noframes","noscript"];for(k=0;k<l.length;k++)j=new RegExp("<"+l[k]+".*?"+l[k]+"(.*?)>","gi"),i=i.replace(j,"");i=i.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var m=["em","i","strong","b"];for(k=0;k<m.length;k++)j=new RegExp("<"+m[k]+"><br></"+m[k]+">","gi"),i=i.replace(j,"<br>");i=i.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(a,b,c){return"["+c.trim().replace(/<(.)?br(.)?>/g,"")+"]("+b+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,f).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,f).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,g).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,g),i=i.replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">");var n;return h.hasOwnProperty(b)&&(n=h[b],!d.isUndefined(n.prototype.toMarkdown)&&d.isFunction(n.prototype.toMarkdown)&&(i=n.prototype.toMarkdown(i))),i=i.replace(/<\/?[^>]+(>|$)/g,"")}}])}),window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.nl=$.extend(window.ParsleyConfig.i18n.nl||{},{defaultMessage:"Deze waarde lijkt onjuist.",type:{email:"Dit lijkt geen geldig e-mail adres te zijn.",url:"Dit lijkt geen geldige URL te zijn.",urlstrict:"Dit is geen geldige URL.",number:"Deze waarde moet een nummer zijn.",digits:"Deze waarde moet numeriek zijn.",dateIso:"Deze waarde moet een datum in het volgende formaat zijn: (YYYY-MM-DD).",alphanum:"Deze waarde moet alfanumeriek zijn.",phone:"Deze waarde moet een geldig telefoonnummer zijn."},notnull:"Deze waarde mag niet leeg zijn.",notblank:"Deze waarde mag niet leeg zijn.",required:"Dit veld is verplicht",regexp:"Deze waarde lijkt onjuist te zijn.",min:"Deze waarde mag niet lager zijn dan %s.",max:"Deze waarde mag niet groter zijn dan %s.",range:"Deze waarde moet tussen %s en %s liggen.",minlength:"Deze tekst is te kort. Deze moet uit minimaal %s karakters bestaan.",maxlength:"Deze waarde is te lang. Deze mag maximaal %s karakters lang zijn.",mincheck:"Je moet minstens %s opties selecteren.",maxcheck:"Je moet %s of minder opties selecteren.",rangecheck:"Je moet tussen de %s en %s opties selecteren.",rangelength:"Deze waarde moet tussen %s en %s karakters lang zijn.",equalto:"Deze waardes moeten identiek zijn."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("nl",window.ParsleyConfig.i18n.nl,!0),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.2.0",d.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(150):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault(),b.call(a(this),"show")})}(jQuery),window.rideApp=window.rideApp||{},rideApp.common=function(a,b){var c=(a(document),a(window)),d=a("html"),e=(a("body"),function(){this.windowResize(),c.on("resize",debounce(rideApp.common.windowResize,250,!1)),this.svgFallback(),f()}),f=function(){a(".roll-in--pre").each(function(){var a=this;setTimeout(function(){a.classList.remove("roll-in--pre")},500)})},g=function(){a.extend(rideApp.variables,{windowWidth:c.width(),windowHeight:c.height()})},h=function(){if(!Modernizr.svg){var b=a("html"),c=a('img[src$=".svg"]');c.each(function(c,d){var e=a(d),f=e.attr("data-url"),g=e.attr("width"),h=e.attr("height");e.attr("src",f),b.hasClass("lt-ie9")&&e.parent("a").css({width:g,height:h})})}},i=function(){var b=a(".toggle-menu"),c=a("[class*=pane-menu-sidebar]"),d=a("span",c);b.on("click",function(a){a.preventDefault(),c.toggle()}),d.on("click",function(b){b.preventDefault(),a(this).next("ul").toggle()})},j=function(){function a(){d.hasClass(b)||d.addClass(b)}var b="js-done";c.on("load",function(){d.addClass(b)}),window.setTimeout(a,4e3)},k=function(a,c,d){alertify!==b&&(a.done(function(){alertify.logPosition("bottom right").success(c)}),a.fail(function(){alertify.logPosition("bottom right").error(d)}))};return{init:e,windowResize:g,toggleSubmenu:i,svgFallback:h,handleXHRCallback:k,finalize:j}}(jQuery),window.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},window.rideApp=window.rideApp||{},rideApp.dropzone=function(a,b){var c=a("#asset-dropzone"),d=c.data("maxFilesize")||16,e=c.data("errorFilesize")||"This file is too big.",f=c.data("upload-success")||"File added.";e=e.replace("%size%",""+d),Dropzone.options.assetDropzone={maxFilesize:d,parallelUploads:1,dictDefaultMessage:"Upload",dictFileTooBig:e,init:function(){a("#dropzone-upload").click(function(){location.reload()})},success:function(b,c){var d=f.replace("%file%",""+b.name);alertify.logPosition("bottom right"),alertify.success(d);var e=a(c);a(".gridOverview").append(e),this.removeFile(b)}}}(jQuery),window.rideApp=window.rideApp||{},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig={excluded:'[style*="none"] input, input.novalidate',classHandler:function(a){return a.$element.closest(".form__item").append('<div class="parsley-errors-container" />')},errorsContainer:function(a){return a.$element.closest(".form__item").children(".parsley-errors-container")}},window.ParsleyValidator.setLocale("nl"),rideApp.formComponent=function(a,b){var c=a("form"),d=function(){c.on("click","button[type=submit]",this.submit),c.length&&c.parsley().on!==b&&(c.parsley().on("form:error",function(){e(this.$element)}),c.parsley().on("field:success",function(){e(this.$element.parents("form"))}))},e=function(b){var c=b.find(".tabs__tab");c.removeClass("error"),c.length&&c.each(function(){var b=a(this),c=b.find("a").attr("href"),d=a(c).find(".parsley-error");d.length&&b.addClass("error")})},f=function(b){var c=a(this.form);return c.data("is-submitted")?!1:void(c.parsley().isValid()&&c.data("is-submitted",!0).addClass("is-submitted"))};return{init:d,submit:f}}(jQuery),window.rideApp=window.rideApp||{},rideApp.xhrhandle=function(a,b){alertify.logPosition("bottom right");var c=function(c,d,e,f,g){jQuery.isFunction(e)&&(g=g||f,f=e,e=b);var h=a.ajax(c,{method:d,data:e});h.done(function(a){alertify.logPosition("bottom right").success("success"),f&&f()}),h.fail(function(a){alertify.logPosition("bottom right").error("error"),g&&g()})};return{request:c}}(jQuery),window.rideApp=window.rideApp||{},rideApp.variables=rideApp.variables||{},rideApp.main=function(a,b){var c=function(a,c,d){c=c===b?"init":c,""!==a&&rideApp[a]&&"function"==typeof rideApp[a][c]&&rideApp[a][c](d)},d=function(){var b=a("body").data("components");if(this.fire("common"),this.fire("dropzone"),this.fire("formComponent"),b){var c=b.split(" ");for(var d in c)this.fire(c[d])}this.fire("common","finalize")};return{init:d,fire:c}}(jQuery),$(document).ready(function(){rideApp.main.init()});