(function(){var a,b,c,d,e,f,g,h,i=[].slice,j={}.hasOwnProperty,k=function(a,b){function c(){this.constructor=a}for(var d in b)j.call(b,d)&&(a[d]=b[d]);return c.prototype=b.prototype,a.prototype=new c,a.__super__=b.prototype,a};g=function(){},b=function(){function a(){}return a.prototype.addEventListener=a.prototype.on,a.prototype.on=function(a,b){return this._callbacks=this._callbacks||{},this._callbacks[a]||(this._callbacks[a]=[]),this._callbacks[a].push(b),this},a.prototype.emit=function(){var a,b,c,d,e,f;if(d=arguments[0],a=2<=arguments.length?i.call(arguments,1):[],this._callbacks=this._callbacks||{},c=this._callbacks[d])for(e=0,f=c.length;f>e;e++)b=c[e],b.apply(this,a);return this},a.prototype.removeListener=a.prototype.off,a.prototype.removeAllListeners=a.prototype.off,a.prototype.removeEventListener=a.prototype.off,a.prototype.off=function(a,b){var c,d,e,f,g;if(!this._callbacks||0===arguments.length)return this._callbacks={},this;if(d=this._callbacks[a],!d)return this;if(1===arguments.length)return delete this._callbacks[a],this;for(e=f=0,g=d.length;g>f;e=++f)if(c=d[e],c===b){d.splice(e,1);break}return this},a}(),a=function(a){function c(a,b){var e,f,g;if(this.element=a,this.version=c.version,this.defaultOptions.previewTemplate=this.defaultOptions.previewTemplate.replace(/\n*/g,""),this.clickableElements=[],this.listeners=[],this.files=[],"string"==typeof this.element&&(this.element=document.querySelector(this.element)),!this.element||null==this.element.nodeType)throw new Error("Invalid dropzone element.");if(this.element.dropzone)throw new Error("Dropzone already attached.");if(c.instances.push(this),this.element.dropzone=this,e=null!=(g=c.optionsForElement(this.element))?g:{},this.options=d({},this.defaultOptions,e,null!=b?b:{}),this.options.forceFallback||!c.isBrowserSupported())return this.options.fallback.call(this);if(null==this.options.url&&(this.options.url=this.element.getAttribute("action")),!this.options.url)throw new Error("No URL provided.");if(this.options.acceptedFiles&&this.options.acceptedMimeTypes)throw new Error("You can't provide both 'acceptedFiles' and 'acceptedMimeTypes'. 'acceptedMimeTypes' is deprecated.");this.options.acceptedMimeTypes&&(this.options.acceptedFiles=this.options.acceptedMimeTypes,delete this.options.acceptedMimeTypes),this.options.method=this.options.method.toUpperCase(),(f=this.getExistingFallback())&&f.parentNode&&f.parentNode.removeChild(f),this.options.previewsContainer!==!1&&(this.previewsContainer=this.options.previewsContainer?c.getElement(this.options.previewsContainer,"previewsContainer"):this.element),this.options.clickable&&(this.clickableElements=this.options.clickable===!0?[this.element]:c.getElements(this.options.clickable,"clickable")),this.init()}var d,e;return k(c,a),c.prototype.Emitter=b,c.prototype.events=["drop","dragstart","dragend","dragenter","dragover","dragleave","addedfile","removedfile","thumbnail","error","errormultiple","processing","processingmultiple","uploadprogress","totaluploadprogress","sending","sendingmultiple","success","successmultiple","canceled","canceledmultiple","complete","completemultiple","reset","maxfilesexceeded","maxfilesreached","queuecomplete"],c.prototype.defaultOptions={url:null,method:"post",withCredentials:!1,parallelUploads:2,uploadMultiple:!1,maxFilesize:256,paramName:"file",createImageThumbnails:!0,maxThumbnailFilesize:10,thumbnailWidth:120,thumbnailHeight:120,filesizeBase:1e3,maxFiles:null,filesizeBase:1e3,params:{},clickable:!0,ignoreHiddenFiles:!0,acceptedFiles:null,acceptedMimeTypes:null,autoProcessQueue:!0,autoQueue:!0,addRemoveLinks:!1,previewsContainer:null,capture:null,dictDefaultMessage:"Drop files here to upload",dictFallbackMessage:"Your browser does not support drag'n'drop file uploads.",dictFallbackText:"Please use the fallback form below to upload your files like in the olden days.",dictFileTooBig:"File is too big ({{filesize}}MiB). Max filesize: {{maxFilesize}}MiB.",dictInvalidFileType:"You can't upload files of this type.",dictResponseError:"Server responded with {{statusCode}} code.",dictCancelUpload:"Cancel upload",dictCancelUploadConfirmation:"Are you sure you want to cancel this upload?",dictRemoveFile:"Remove file",dictRemoveFileConfirmation:null,dictMaxFilesExceeded:"You can not upload any more files.",accept:function(a,b){return b()},init:function(){return g},forceFallback:!1,fallback:function(){var a,b,d,e,f,g;for(this.element.className=""+this.element.className+" dz-browser-not-supported",g=this.element.getElementsByTagName("div"),e=0,f=g.length;f>e;e++)a=g[e],/(^| )dz-message($| )/.test(a.className)&&(b=a,a.className="dz-message");return b||(b=c.createElement('<div class="dz-message"><span></span></div>'),this.element.appendChild(b)),d=b.getElementsByTagName("span")[0],d&&(d.textContent=this.options.dictFallbackMessage),this.element.appendChild(this.getFallbackForm())},resize:function(a){var b,c,d;return b={srcX:0,srcY:0,srcWidth:a.width,srcHeight:a.height},c=a.width/a.height,b.optWidth=this.options.thumbnailWidth,b.optHeight=this.options.thumbnailHeight,null==b.optWidth&&null==b.optHeight?(b.optWidth=b.srcWidth,b.optHeight=b.srcHeight):null==b.optWidth?b.optWidth=c*b.optHeight:null==b.optHeight&&(b.optHeight=1/c*b.optWidth),d=b.optWidth/b.optHeight,a.height<b.optHeight||a.width<b.optWidth?(b.trgHeight=b.srcHeight,b.trgWidth=b.srcWidth):c>d?(b.srcHeight=a.height,b.srcWidth=b.srcHeight*d):(b.srcWidth=a.width,b.srcHeight=b.srcWidth/d),b.srcX=(a.width-b.srcWidth)/2,b.srcY=(a.height-b.srcHeight)/2,b},drop:function(){return this.element.classList.remove("dz-drag-hover")},dragstart:g,dragend:function(){return this.element.classList.remove("dz-drag-hover")},dragenter:function(){return this.element.classList.add("dz-drag-hover")},dragover:function(){return this.element.classList.add("dz-drag-hover")},dragleave:function(){return this.element.classList.remove("dz-drag-hover")},paste:g,reset:function(){return this.element.classList.remove("dz-started")},addedfile:function(a){var b,d,e,f,g,h,i,j,k,l,m,n,o;if(this.element===this.previewsContainer&&this.element.classList.add("dz-started"),this.previewsContainer){for(a.previewElement=c.createElement(this.options.previewTemplate.trim()),a.previewTemplate=a.previewElement,this.previewsContainer.appendChild(a.previewElement),l=a.previewElement.querySelectorAll("[data-dz-name]"),f=0,i=l.length;i>f;f++)b=l[f],b.textContent=a.name;for(m=a.previewElement.querySelectorAll("[data-dz-size]"),g=0,j=m.length;j>g;g++)b=m[g],b.innerHTML=this.filesize(a.size);for(this.options.addRemoveLinks&&(a._removeLink=c.createElement('<a class="dz-remove" href="javascript:undefined;" data-dz-remove>'+this.options.dictRemoveFile+"</a>"),a.previewElement.appendChild(a._removeLink)),d=function(b){return function(d){return d.preventDefault(),d.stopPropagation(),a.status===c.UPLOADING?c.confirm(b.options.dictCancelUploadConfirmation,function(){return b.removeFile(a)}):b.options.dictRemoveFileConfirmation?c.confirm(b.options.dictRemoveFileConfirmation,function(){return b.removeFile(a)}):b.removeFile(a)}}(this),n=a.previewElement.querySelectorAll("[data-dz-remove]"),o=[],h=0,k=n.length;k>h;h++)e=n[h],o.push(e.addEventListener("click",d));return o}},removedfile:function(a){var b;return a.previewElement&&null!=(b=a.previewElement)&&b.parentNode.removeChild(a.previewElement),this._updateMaxFilesReachedClass()},thumbnail:function(a,b){var c,d,e,f;if(a.previewElement){for(a.previewElement.classList.remove("dz-file-preview"),f=a.previewElement.querySelectorAll("[data-dz-thumbnail]"),d=0,e=f.length;e>d;d++)c=f[d],c.alt=a.name,c.src=b;return setTimeout(function(){return function(){return a.previewElement.classList.add("dz-image-preview")}}(this),1)}},error:function(a,b){var c,d,e,f,g;if(a.previewElement){for(a.previewElement.classList.add("dz-error"),"String"!=typeof b&&b.error&&(b=b.error),f=a.previewElement.querySelectorAll("[data-dz-errormessage]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(c.textContent=b);return g}},errormultiple:g,processing:function(a){return a.previewElement&&(a.previewElement.classList.add("dz-processing"),a._removeLink)?a._removeLink.textContent=this.options.dictCancelUpload:void 0},processingmultiple:g,uploadprogress:function(a,b){var c,d,e,f,g;if(a.previewElement){for(f=a.previewElement.querySelectorAll("[data-dz-uploadprogress]"),g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push("PROGRESS"===c.nodeName?c.value=b:c.style.width=""+b+"%");return g}},totaluploadprogress:g,sending:g,sendingmultiple:g,success:function(a){return a.previewElement?a.previewElement.classList.add("dz-success"):void 0},successmultiple:g,canceled:function(a){return this.emit("error",a,"Upload canceled.")},canceledmultiple:g,complete:function(a){return a._removeLink&&(a._removeLink.textContent=this.options.dictRemoveFile),a.previewElement?a.previewElement.classList.add("dz-complete"):void 0},completemultiple:g,maxfilesexceeded:g,maxfilesreached:g,queuecomplete:g,previewTemplate:'<div class="dz-preview dz-file-preview">\n  <div class="dz-image"><img data-dz-thumbnail /></div>\n  <div class="dz-details">\n    <div class="dz-size"><span data-dz-size></span></div>\n    <div class="dz-filename"><span data-dz-name></span></div>\n  </div>\n  <div class="dz-progress"><span class="dz-upload" data-dz-uploadprogress></span></div>\n  <div class="dz-error-message"><span data-dz-errormessage></span></div>\n  <div class="dz-success-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Check</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <path d="M23.5,31.8431458 L17.5852419,25.9283877 C16.0248253,24.3679711 13.4910294,24.366835 11.9289322,25.9289322 C10.3700136,27.4878508 10.3665912,30.0234455 11.9283877,31.5852419 L20.4147581,40.0716123 C20.5133999,40.1702541 20.6159315,40.2626649 20.7218615,40.3488435 C22.2835669,41.8725651 24.794234,41.8626202 26.3461564,40.3106978 L43.3106978,23.3461564 C44.8771021,21.7797521 44.8758057,19.2483887 43.3137085,17.6862915 C41.7547899,16.1273729 39.2176035,16.1255422 37.6538436,17.6893022 L23.5,31.8431458 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" stroke-opacity="0.198794158" stroke="#747474" fill-opacity="0.816519475" fill="#FFFFFF" sketch:type="MSShapeGroup"></path>\n      </g>\n    </svg>\n  </div>\n  <div class="dz-error-mark">\n    <svg width="54px" height="54px" viewBox="0 0 54 54" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">\n      <title>Error</title>\n      <defs></defs>\n      <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">\n        <g id="Check-+-Oval-2" sketch:type="MSLayerGroup" stroke="#747474" stroke-opacity="0.198794158" fill="#FFFFFF" fill-opacity="0.816519475">\n          <path d="M32.6568542,29 L38.3106978,23.3461564 C39.8771021,21.7797521 39.8758057,19.2483887 38.3137085,17.6862915 C36.7547899,16.1273729 34.2176035,16.1255422 32.6538436,17.6893022 L27,23.3431458 L21.3461564,17.6893022 C19.7823965,16.1255422 17.2452101,16.1273729 15.6862915,17.6862915 C14.1241943,19.2483887 14.1228979,21.7797521 15.6893022,23.3461564 L21.3431458,29 L15.6893022,34.6538436 C14.1228979,36.2202479 14.1241943,38.7516113 15.6862915,40.3137085 C17.2452101,41.8726271 19.7823965,41.8744578 21.3461564,40.3106978 L27,34.6568542 L32.6538436,40.3106978 C34.2176035,41.8744578 36.7547899,41.8726271 38.3137085,40.3137085 C39.8758057,38.7516113 39.8771021,36.2202479 38.3106978,34.6538436 L32.6568542,29 Z M27,53 C41.3594035,53 53,41.3594035 53,27 C53,12.6405965 41.3594035,1 27,1 C12.6405965,1 1,12.6405965 1,27 C1,41.3594035 12.6405965,53 27,53 Z" id="Oval-2" sketch:type="MSShapeGroup"></path>\n        </g>\n      </g>\n    </svg>\n  </div>\n</div>'},d=function(){var a,b,c,d,e,f,g;for(d=arguments[0],c=2<=arguments.length?i.call(arguments,1):[],f=0,g=c.length;g>f;f++){b=c[f];for(a in b)e=b[a],d[a]=e}return d},c.prototype.getAcceptedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted&&e.push(a);return e},c.prototype.getRejectedFiles=function(){var a,b,c,d,e;for(d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.accepted||e.push(a);return e},c.prototype.getFilesWithStatus=function(a){var b,c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.status===a&&f.push(b);return f},c.prototype.getQueuedFiles=function(){return this.getFilesWithStatus(c.QUEUED)},c.prototype.getUploadingFiles=function(){return this.getFilesWithStatus(c.UPLOADING)},c.prototype.getActiveFiles=function(){var a,b,d,e,f;for(e=this.files,f=[],b=0,d=e.length;d>b;b++)a=e[b],(a.status===c.UPLOADING||a.status===c.QUEUED)&&f.push(a);return f},c.prototype.init=function(){var a,b,d,e,f,g,h;for("form"===this.element.tagName&&this.element.setAttribute("enctype","multipart/form-data"),this.element.classList.contains("dropzone")&&!this.element.querySelector(".dz-message")&&this.element.appendChild(c.createElement('<div class="dz-default dz-message"><span>'+this.options.dictDefaultMessage+"</span></div>")),this.clickableElements.length&&(d=function(a){return function(){return a.hiddenFileInput&&document.body.removeChild(a.hiddenFileInput),a.hiddenFileInput=document.createElement("input"),a.hiddenFileInput.setAttribute("type","file"),(null==a.options.maxFiles||a.options.maxFiles>1)&&a.hiddenFileInput.setAttribute("multiple","multiple"),a.hiddenFileInput.className="dz-hidden-input",null!=a.options.acceptedFiles&&a.hiddenFileInput.setAttribute("accept",a.options.acceptedFiles),null!=a.options.capture&&a.hiddenFileInput.setAttribute("capture",a.options.capture),a.hiddenFileInput.style.visibility="hidden",a.hiddenFileInput.style.position="absolute",a.hiddenFileInput.style.top="0",a.hiddenFileInput.style.left="0",a.hiddenFileInput.style.height="0",a.hiddenFileInput.style.width="0",document.body.appendChild(a.hiddenFileInput),a.hiddenFileInput.addEventListener("change",function(){var b,c,e,f;if(c=a.hiddenFileInput.files,c.length)for(e=0,f=c.length;f>e;e++)b=c[e],a.addFile(b);return d()})}}(this))(),this.URL=null!=(g=window.URL)?g:window.webkitURL,h=this.events,e=0,f=h.length;f>e;e++)a=h[e],this.on(a,this.options[a]);return this.on("uploadprogress",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("removedfile",function(a){return function(){return a.updateTotalUploadProgress()}}(this)),this.on("canceled",function(a){return function(b){return a.emit("complete",b)}}(this)),this.on("complete",function(a){return function(){return 0===a.getUploadingFiles().length&&0===a.getQueuedFiles().length?setTimeout(function(){return a.emit("queuecomplete")},0):void 0}}(this)),b=function(a){return a.stopPropagation(),a.preventDefault?a.preventDefault():a.returnValue=!1},this.listeners=[{element:this.element,events:{dragstart:function(a){return function(b){return a.emit("dragstart",b)}}(this),dragenter:function(a){return function(c){return b(c),a.emit("dragenter",c)}}(this),dragover:function(a){return function(c){var d;try{d=c.dataTransfer.effectAllowed}catch(e){}return c.dataTransfer.dropEffect="move"===d||"linkMove"===d?"move":"copy",b(c),a.emit("dragover",c)}}(this),dragleave:function(a){return function(b){return a.emit("dragleave",b)}}(this),drop:function(a){return function(c){return b(c),a.drop(c)}}(this),dragend:function(a){return function(b){return a.emit("dragend",b)}}(this)}}],this.clickableElements.forEach(function(a){return function(b){return a.listeners.push({element:b,events:{click:function(d){return b!==a.element||d.target===a.element||c.elementInside(d.target,a.element.querySelector(".dz-message"))?a.hiddenFileInput.click():void 0}}})}}(this)),this.enable(),this.options.init.call(this)},c.prototype.destroy=function(){var a;return this.disable(),this.removeAllFiles(!0),(null!=(a=this.hiddenFileInput)?a.parentNode:void 0)&&(this.hiddenFileInput.parentNode.removeChild(this.hiddenFileInput),this.hiddenFileInput=null),delete this.element.dropzone,c.instances.splice(c.instances.indexOf(this),1)},c.prototype.updateTotalUploadProgress=function(){var a,b,c,d,e,f,g,h;if(d=0,c=0,a=this.getActiveFiles(),a.length){for(h=this.getActiveFiles(),f=0,g=h.length;g>f;f++)b=h[f],d+=b.upload.bytesSent,c+=b.upload.total;e=100*d/c}else e=100;return this.emit("totaluploadprogress",e,c,d)},c.prototype._getParamName=function(a){return"function"==typeof this.options.paramName?this.options.paramName(a):""+this.options.paramName+(this.options.uploadMultiple?"["+a+"]":"")},c.prototype.getFallbackForm=function(){var a,b,d,e;return(a=this.getExistingFallback())?a:(d='<div class="dz-fallback">',this.options.dictFallbackText&&(d+="<p>"+this.options.dictFallbackText+"</p>"),d+='<input type="file" name="'+this._getParamName(0)+'" '+(this.options.uploadMultiple?'multiple="multiple"':void 0)+' /><input type="submit" value="Upload!"></div>',b=c.createElement(d),"FORM"!==this.element.tagName?(e=c.createElement('<form action="'+this.options.url+'" enctype="multipart/form-data" method="'+this.options.method+'"></form>'),e.appendChild(b)):(this.element.setAttribute("enctype","multipart/form-data"),this.element.setAttribute("method",this.options.method)),null!=e?e:b)},c.prototype.getExistingFallback=function(){var a,b,c,d,e,f;for(b=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)if(b=a[c],/(^| )fallback($| )/.test(b.className))return b},f=["div","form"],d=0,e=f.length;e>d;d++)if(c=f[d],a=b(this.element.getElementsByTagName(c)))return a},c.prototype.setupEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.addEventListener(b,c,!1));return e}());return g},c.prototype.removeEventListeners=function(){var a,b,c,d,e,f,g;for(f=this.listeners,g=[],d=0,e=f.length;e>d;d++)a=f[d],g.push(function(){var d,e;d=a.events,e=[];for(b in d)c=d[b],e.push(a.element.removeEventListener(b,c,!1));return e}());return g},c.prototype.disable=function(){var a,b,c,d,e;for(this.clickableElements.forEach(function(a){return a.classList.remove("dz-clickable")}),this.removeEventListeners(),d=this.files,e=[],b=0,c=d.length;c>b;b++)a=d[b],e.push(this.cancelUpload(a));return e},c.prototype.enable=function(){return this.clickableElements.forEach(function(a){return a.classList.add("dz-clickable")}),this.setupEventListeners()},c.prototype.filesize=function(a){var b,c,d,e,f,g,h,i;for(g=["TB","GB","MB","KB","b"],d=e=null,c=h=0,i=g.length;i>h;c=++h)if(f=g[c],b=Math.pow(this.options.filesizeBase,4-c)/10,a>=b){d=a/Math.pow(this.options.filesizeBase,4-c),e=f;break}return d=Math.round(10*d)/10,"<strong>"+d+"</strong> "+e},c.prototype._updateMaxFilesReachedClass=function(){return null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(this.getAcceptedFiles().length===this.options.maxFiles&&this.emit("maxfilesreached",this.files),this.element.classList.add("dz-max-files-reached")):this.element.classList.remove("dz-max-files-reached")},c.prototype.drop=function(a){var b,c;a.dataTransfer&&(this.emit("drop",a),b=a.dataTransfer.files,b.length&&(c=a.dataTransfer.items,c&&c.length&&null!=c[0].webkitGetAsEntry?this._addFilesFromItems(c):this.handleFiles(b)))},c.prototype.paste=function(a){var b,c;if(null!=(null!=a&&null!=(c=a.clipboardData)?c.items:void 0))return this.emit("paste",a),b=a.clipboardData.items,b.length?this._addFilesFromItems(b):void 0},c.prototype.handleFiles=function(a){var b,c,d,e;for(e=[],c=0,d=a.length;d>c;c++)b=a[c],e.push(this.addFile(b));return e},c.prototype._addFilesFromItems=function(a){var b,c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],f.push(null!=c.webkitGetAsEntry&&(b=c.webkitGetAsEntry())?b.isFile?this.addFile(c.getAsFile()):b.isDirectory?this._addFilesFromDirectory(b,b.name):void 0:null!=c.getAsFile?null==c.kind||"file"===c.kind?this.addFile(c.getAsFile()):void 0:void 0);return f},c.prototype._addFilesFromDirectory=function(a,b){var c,d;return c=a.createReader(),d=function(a){return function(c){var d,e,f;for(e=0,f=c.length;f>e;e++)d=c[e],d.isFile?d.file(function(c){return a.options.ignoreHiddenFiles&&"."===c.name.substring(0,1)?void 0:(c.fullPath=""+b+"/"+c.name,a.addFile(c))}):d.isDirectory&&a._addFilesFromDirectory(d,""+b+"/"+d.name)}}(this),c.readEntries(d,function(a){return"undefined"!=typeof console&&null!==console&&"function"==typeof console.log?console.log(a):void 0})},c.prototype.accept=function(a,b){return a.size>1024*this.options.maxFilesize*1024?b(this.options.dictFileTooBig.replace("{{filesize}}",Math.round(a.size/1024/10.24)/100).replace("{{maxFilesize}}",this.options.maxFilesize)):c.isValidFile(a,this.options.acceptedFiles)?null!=this.options.maxFiles&&this.getAcceptedFiles().length>=this.options.maxFiles?(b(this.options.dictMaxFilesExceeded.replace("{{maxFiles}}",this.options.maxFiles)),this.emit("maxfilesexceeded",a)):this.options.accept.call(this,a,b):b(this.options.dictInvalidFileType)},c.prototype.addFile=function(a){return a.upload={progress:0,total:a.size,bytesSent:0},this.files.push(a),a.status=c.ADDED,this.emit("addedfile",a),this._enqueueThumbnail(a),this.accept(a,function(b){return function(c){return c?(a.accepted=!1,b._errorProcessing([a],c)):(a.accepted=!0,b.options.autoQueue&&b.enqueueFile(a)),b._updateMaxFilesReachedClass()}}(this))},c.prototype.enqueueFiles=function(a){var b,c,d;for(c=0,d=a.length;d>c;c++)b=a[c],this.enqueueFile(b);return null},c.prototype.enqueueFile=function(a){if(a.status!==c.ADDED||a.accepted!==!0)throw new Error("This file can't be queued because it has already been processed or was rejected.");return a.status=c.QUEUED,this.options.autoProcessQueue?setTimeout(function(a){return function(){return a.processQueue()}}(this),0):void 0},c.prototype._thumbnailQueue=[],c.prototype._processingThumbnail=!1,c.prototype._enqueueThumbnail=function(a){return this.options.createImageThumbnails&&a.type.match(/image.*/)&&a.size<=1024*this.options.maxThumbnailFilesize*1024?(this._thumbnailQueue.push(a),setTimeout(function(a){return function(){return a._processThumbnailQueue()}}(this),0)):void 0},c.prototype._processThumbnailQueue=function(){return this._processingThumbnail||0===this._thumbnailQueue.length?void 0:(this._processingThumbnail=!0,this.createThumbnail(this._thumbnailQueue.shift(),function(a){return function(){return a._processingThumbnail=!1,a._processThumbnailQueue()}}(this)))},c.prototype.removeFile=function(a){return a.status===c.UPLOADING&&this.cancelUpload(a),this.files=h(this.files,a),this.emit("removedfile",a),0===this.files.length?this.emit("reset"):void 0},c.prototype.removeAllFiles=function(a){var b,d,e,f;for(null==a&&(a=!1),f=this.files.slice(),d=0,e=f.length;e>d;d++)b=f[d],(b.status!==c.UPLOADING||a)&&this.removeFile(b);return null},c.prototype.createThumbnail=function(a,b){var c;return c=new FileReader,c.onload=function(d){return function(){return"image/svg+xml"===a.type?(d.emit("thumbnail",a,c.result),void(null!=b&&b())):d.createThumbnailFromUrl(a,c.result,b)}}(this),c.readAsDataURL(a)},c.prototype.createThumbnailFromUrl=function(a,b,c){var d;return d=document.createElement("img"),d.onload=function(b){return function(){var e,g,h,i,j,k,l,m;return a.width=d.width,a.height=d.height,h=b.options.resize.call(b,a),null==h.trgWidth&&(h.trgWidth=h.optWidth),null==h.trgHeight&&(h.trgHeight=h.optHeight),e=document.createElement("canvas"),g=e.getContext("2d"),e.width=h.trgWidth,e.height=h.trgHeight,f(g,d,null!=(j=h.srcX)?j:0,null!=(k=h.srcY)?k:0,h.srcWidth,h.srcHeight,null!=(l=h.trgX)?l:0,null!=(m=h.trgY)?m:0,h.trgWidth,h.trgHeight),i=e.toDataURL("image/png"),b.emit("thumbnail",a,i),null!=c?c():void 0}}(this),null!=c&&(d.onerror=c),d.src=b},c.prototype.processQueue=function(){var a,b,c,d;if(b=this.options.parallelUploads,c=this.getUploadingFiles().length,a=c,!(c>=b)&&(d=this.getQueuedFiles(),d.length>0)){if(this.options.uploadMultiple)return this.processFiles(d.slice(0,b-c));for(;b>a;){if(!d.length)return;this.processFile(d.shift()),a++}}},c.prototype.processFile=function(a){return this.processFiles([a])},c.prototype.processFiles=function(a){var b,d,e;for(d=0,e=a.length;e>d;d++)b=a[d],b.processing=!0,b.status=c.UPLOADING,this.emit("processing",b);return this.options.uploadMultiple&&this.emit("processingmultiple",a),this.uploadFiles(a)},c.prototype._getFilesWithXhr=function(a){var b,c;return c=function(){var c,d,e,f;for(e=this.files,f=[],c=0,d=e.length;d>c;c++)b=e[c],b.xhr===a&&f.push(b);return f}.call(this)},c.prototype.cancelUpload=function(a){var b,d,e,f,g,h,i;if(a.status===c.UPLOADING){for(d=this._getFilesWithXhr(a.xhr),e=0,g=d.length;g>e;e++)b=d[e],b.status=c.CANCELED;for(a.xhr.abort(),f=0,h=d.length;h>f;f++)b=d[f],this.emit("canceled",b);this.options.uploadMultiple&&this.emit("canceledmultiple",d)}else((i=a.status)===c.ADDED||i===c.QUEUED)&&(a.status=c.CANCELED,this.emit("canceled",a),this.options.uploadMultiple&&this.emit("canceledmultiple",[a]));return this.options.autoProcessQueue?this.processQueue():void 0},e=function(){var a,b;return b=arguments[0],a=2<=arguments.length?i.call(arguments,1):[],"function"==typeof b?b.apply(this,a):b},c.prototype.uploadFile=function(a){return this.uploadFiles([a])},c.prototype.uploadFiles=function(a){var b,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L;for(w=new XMLHttpRequest,x=0,B=a.length;B>x;x++)b=a[x],b.xhr=w;p=e(this.options.method,a),u=e(this.options.url,a),w.open(p,u,!0),w.withCredentials=!!this.options.withCredentials,s=null,g=function(c){return function(){var d,e,f;for(f=[],d=0,e=a.length;e>d;d++)b=a[d],f.push(c._errorProcessing(a,s||c.options.dictResponseError.replace("{{statusCode}}",w.status),w));return f}}(this),t=function(c){return function(d){var e,f,g,h,i,j,k,l,m;if(null!=d)for(f=100*d.loaded/d.total,g=0,j=a.length;j>g;g++)b=a[g],b.upload={progress:f,total:d.total,bytesSent:d.loaded};else{for(e=!0,f=100,h=0,k=a.length;k>h;h++)b=a[h],(100!==b.upload.progress||b.upload.bytesSent!==b.upload.total)&&(e=!1),b.upload.progress=f,b.upload.bytesSent=b.upload.total;if(e)return}for(m=[],i=0,l=a.length;l>i;i++)b=a[i],m.push(c.emit("uploadprogress",b,f,b.upload.bytesSent));return m}}(this),w.onload=function(b){return function(d){var e;if(a[0].status!==c.CANCELED&&4===w.readyState){if(s=w.responseText,w.getResponseHeader("content-type")&&~w.getResponseHeader("content-type").indexOf("application/json"))try{s=JSON.parse(s)}catch(f){d=f,s="Invalid JSON response from server."}return t(),200<=(e=w.status)&&300>e?b._finished(a,s,d):g()}}}(this),w.onerror=function(){return function(){return a[0].status!==c.CANCELED?g():void 0}}(this),r=null!=(G=w.upload)?G:w,r.onprogress=t,j={Accept:"application/json","Cache-Control":"no-cache","X-Requested-With":"XMLHttpRequest"},this.options.headers&&d(j,this.options.headers);for(h in j)i=j[h],w.setRequestHeader(h,i);if(f=new FormData,this.options.params){H=this.options.params;for(o in H)v=H[o],f.append(o,v)}for(y=0,C=a.length;C>y;y++)b=a[y],this.emit("sending",b,w,f);if(this.options.uploadMultiple&&this.emit("sendingmultiple",a,w,f),"FORM"===this.element.tagName)for(I=this.element.querySelectorAll("input, textarea, select, button"),z=0,D=I.length;D>z;z++)if(l=I[z],m=l.getAttribute("name"),n=l.getAttribute("type"),"SELECT"===l.tagName&&l.hasAttribute("multiple"))for(J=l.options,A=0,E=J.length;E>A;A++)q=J[A],q.selected&&f.append(m,q.value);else(!n||"checkbox"!==(K=n.toLowerCase())&&"radio"!==K||l.checked)&&f.append(m,l.value);for(k=F=0,L=a.length-1;L>=0?L>=F:F>=L;k=L>=0?++F:--F)f.append(this._getParamName(k),a[k],a[k].name);return w.send(f)},c.prototype._finished=function(a,b,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=c.SUCCESS,this.emit("success",e,b,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("successmultiple",a,b,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},c.prototype._errorProcessing=function(a,b,d){var e,f,g;for(f=0,g=a.length;g>f;f++)e=a[f],e.status=c.ERROR,this.emit("error",e,b,d),this.emit("complete",e);return this.options.uploadMultiple&&(this.emit("errormultiple",a,b,d),this.emit("completemultiple",a)),this.options.autoProcessQueue?this.processQueue():void 0},c}(b),a.version="4.0.1",a.options={},a.optionsForElement=function(b){return b.getAttribute("id")?a.options[c(b.getAttribute("id"))]:void 0},a.instances=[],a.forElement=function(a){if("string"==typeof a&&(a=document.querySelector(a)),null==(null!=a?a.dropzone:void 0))throw new Error("No Dropzone found for given element. This is probably because you're trying to access it before Dropzone had the time to initialize. Use the `init` option to setup any additional observers on your Dropzone.");return a.dropzone},a.autoDiscover=!0,a.discover=function(){var b,c,d,e,f,g;for(document.querySelectorAll?d=document.querySelectorAll(".dropzone"):(d=[],b=function(a){var b,c,e,f;for(f=[],c=0,e=a.length;e>c;c++)b=a[c],f.push(/(^| )dropzone($| )/.test(b.className)?d.push(b):void 0);return f},b(document.getElementsByTagName("div")),b(document.getElementsByTagName("form"))),g=[],e=0,f=d.length;f>e;e++)c=d[e],g.push(a.optionsForElement(c)!==!1?new a(c):void 0);return g},a.blacklistedBrowsers=[/opera.*Macintosh.*version\/12/i],a.isBrowserSupported=function(){var b,c,d,e,f;if(b=!0,window.File&&window.FileReader&&window.FileList&&window.Blob&&window.FormData&&document.querySelector)if("classList"in document.createElement("a"))for(f=a.blacklistedBrowsers,d=0,e=f.length;e>d;d++)c=f[d],c.test(navigator.userAgent)&&(b=!1);else b=!1;else b=!1;return b},h=function(a,b){var c,d,e,f;for(f=[],d=0,e=a.length;e>d;d++)c=a[d],c!==b&&f.push(c);return f},c=function(a){return a.replace(/[\-_](\w)/g,function(a){return a.charAt(1).toUpperCase()})},a.createElement=function(a){var b;return b=document.createElement("div"),b.innerHTML=a,b.childNodes[0]},a.elementInside=function(a,b){if(a===b)return!0;for(;a=a.parentNode;)if(a===b)return!0;return!1},a.getElement=function(a,b){var c;if("string"==typeof a?c=document.querySelector(a):null!=a.nodeType&&(c=a),null==c)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector or a plain HTML element.");return c},a.getElements=function(a,b){var c,d,e,f,g,h,i,j;if(a instanceof Array){e=[];try{for(f=0,h=a.length;h>f;f++)d=a[f],e.push(this.getElement(d,b))}catch(k){c=k,e=null}}else if("string"==typeof a)for(e=[],j=document.querySelectorAll(a),g=0,i=j.length;i>g;g++)d=j[g],e.push(d);else null!=a.nodeType&&(e=[a]);if(null==e||!e.length)throw new Error("Invalid `"+b+"` option provided. Please provide a CSS selector, a plain HTML element or a list of those.");return e},a.confirm=function(a,b,c){return window.confirm(a)?b():null!=c?c():void 0},a.isValidFile=function(a,b){var c,d,e,f,g;if(!b)return!0;for(b=b.split(","),d=a.type,c=d.replace(/\/.*$/,""),f=0,g=b.length;g>f;f++)if(e=b[f],e=e.trim(),"."===e.charAt(0)){if(-1!==a.name.toLowerCase().indexOf(e.toLowerCase(),a.name.length-e.length))return!0}else if(/\/\*$/.test(e)){if(c===e.replace(/\/.*$/,""))return!0}else if(d===e)return!0;return!1},"undefined"!=typeof jQuery&&null!==jQuery&&(jQuery.fn.dropzone=function(b){return this.each(function(){return new a(this,b)})}),"undefined"!=typeof module&&null!==module?module.exports=a:window.Dropzone=a,a.ADDED="added",a.QUEUED="queued",a.ACCEPTED=a.QUEUED,a.UPLOADING="uploading",a.PROCESSING=a.UPLOADING,a.CANCELED="canceled",a.ERROR="error",a.SUCCESS="success",e=function(a){var b,c,d,e,f,g,h,i,j,k;for(h=a.naturalWidth,g=a.naturalHeight,c=document.createElement("canvas"),c.width=1,c.height=g,d=c.getContext("2d"),d.drawImage(a,0,0),e=d.getImageData(0,0,1,g).data,k=0,f=g,i=g;i>k;)b=e[4*(i-1)+3],0===b?f=i:k=i,i=f+k>>1;return j=i/g,0===j?1:j},f=function(a,b,c,d,f,g,h,i,j,k){var l;
return l=e(b),a.drawImage(b,c,d,f,g,h,i,j,k/l)},d=function(a,b){var c,d,e,f,g,h,i,j,k;if(e=!1,k=!0,d=a.document,j=d.documentElement,c=d.addEventListener?"addEventListener":"attachEvent",i=d.addEventListener?"removeEventListener":"detachEvent",h=d.addEventListener?"":"on",f=function(c){return"readystatechange"!==c.type||"complete"===d.readyState?(("load"===c.type?a:d)[i](h+c.type,f,!1),!e&&(e=!0)?b.call(a,c.type||c):void 0):void 0},g=function(){var a;try{j.doScroll("left")}catch(b){return a=b,void setTimeout(g,50)}return f("poll")},"complete"!==d.readyState){if(d.createEventObject&&j.doScroll){try{k=!a.frameElement}catch(l){}k&&g()}return d[c](h+"DOMContentLoaded",f,!1),d[c](h+"readystatechange",f,!1),a[c](h+"load",f,!1)}},a._autoDiscoverFunction=function(){return a.autoDiscover?a.discover():void 0},d(window,a._autoDiscoverFunction)}).call(this),!function(a,b){"use strict";function c(b){var c=a(this);if(n){b=a.extend({},o,b);for(var e=0,f=c.length;f>e;e++)d(c.eq(e),b)}return c}function d(b,c){c=a.extend({},c,b.data("dropper-options"));var d="";d+='<div class="dropper-dropzone">',d+=c.label,d+="</div>",d+='<input class="dropper-input" type="file"',c.maxQueue>1&&(d+=" multiple"),d+=">",b.addClass("dropper").append(d);var k=a.extend({$dropper:b,$input:b.find(".dropper-input"),queue:[],total:0,uploading:!1},c);b.on("click.dropper",".dropper-dropzone",k,e).on("dragenter.dropper",k,g).on("dragover.dropper",k,h).on("dragleave.dropper",k,i).on("drop.dropper",".dropper-dropzone",k,j).data("dropper",k),k.$input.on("change.dropper",k,f)}function e(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$input.trigger("click")}function f(a){a.stopPropagation(),a.preventDefault();var b=a.data,c=b.$input[0].files;c.length&&k(b,c)}function g(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$dropper.addClass("dropping")}function h(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$dropper.addClass("dropping")}function i(a){a.stopPropagation(),a.preventDefault();var b=a.data;b.$dropper.removeClass("dropping")}function j(a){a.preventDefault();var b=a.data,c=a.originalEvent.dataTransfer.files;b.$dropper.removeClass("dropping"),k(b,c)}function k(c,d){for(var e=[],f=0;f<d.length;f++){var g={index:c.total++,file:d[f],name:d[f].name,size:d[f].size,started:!1,complete:!1,error:!1,transfer:null};e.push(g),c.queue.push(g)}c.uploading||(a(b).on("beforeunload.dropper",function(){return"You have uploads pending, are you sure you want to leave this page?"}),c.uploading=!0),c.$dropper.trigger("start.dropper",[e]),l(c)}function l(c){var d=0,e=[];for(var f in c.queue)!c.queue.hasOwnProperty(f)||c.queue[f].complete||c.queue[f].error||e.push(c.queue[f]);c.queue=e;for(var g in c.queue)if(c.queue.hasOwnProperty(g)){if(!c.queue[g].started){var h=new FormData;h.append(c.postKey,c.queue[g].file);for(var i in c.postData)c.postData.hasOwnProperty(i)&&h.append(i,c.postData[i]);m(c,c.queue[g],h)}if(d++,d>=c.maxQueue)return;f++}0===d&&(a(b).off("beforeunload.dropper"),c.uploading=!1,c.$dropper.trigger("complete.dropper"))}function m(b,c,d){c.size>=b.maxSize?(c.error=!0,b.$dropper.trigger("fileError.dropper",[c,"Too large"]),l(b)):(c.started=!0,c.transfer=a.ajax({url:b.action,data:d,type:"POST",contentType:!1,processData:!1,cache:!1,xhr:function(){var d=a.ajaxSettings.xhr();return d.upload&&d.upload.addEventListener("progress",function(a){var d=0,e=a.loaded||a.position,f=a.total;a.lengthComputable&&(d=Math.ceil(e/f*100)),b.$dropper.trigger("fileProgress.dropper",[c,d])},!1),d},beforeSend:function(){b.$dropper.trigger("fileStart.dropper",[c])},success:function(a){c.complete=!0,b.$dropper.trigger("fileComplete.dropper",[c,a]),l(b)},error:function(a,d,e){c.error=!0,b.$dropper.trigger("fileError.dropper",[c,e]),l(b)}}))}var n=b.File&&b.FileReader&&b.FileList,o={action:"",label:"Drag and drop files or click to select",maxQueue:2,maxSize:5242880,postData:{},postKey:"file"},p={defaults:function(b){return o=a.extend(o,b||{}),"object"==typeof this?a(this):!0}};a.fn.dropper=function(a){return p[a]?p[a].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof a&&a?this:c.apply(this,arguments)},a.dropper=function(a){"defaults"===a&&p.defaults.apply(this,Array.prototype.slice.call(arguments,1))}}(jQuery,window),function(a){a.fn.flyoutNav=function(b){var c=a("body"),d={bodyClass:"flyout-enabled",activeBodyClass:"flyout-active",back:function(b){var b=b||!1;return b?a(b).data("back")||"Back":"Back"}};return b&&a.extend(d,b),this.each(function(){var b=a(this),e=a(b.attr("href")),f=e.find("li > a:not(:only-child)");c.addClass(d.bodyClass),e.find("a + ul").each(function(){var b=a(this),c=a('<li><a href="#" class="flyout-back">'+d.back(this)+"</a></li>");b.prepend(c)}),b.on("click",function(a){a.preventDefault(),c.toggleClass(d.activeBodyClass)}),e.find("a.flyout-back").on("click",function(){a(this).closest("ul").parent().removeClass("active")}),f.on("click",function(b){b.preventDefault(),a(this.parentNode).addClass("active")}),e.find(".flyout-close").on("click",function(a){a.preventDefault(),c.removeClass(d.activeBodyClass)})})}}(window.jQuery),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(jQuery)}(function(a){function b(a,b){return a.parsleyAdaptedCallback||(a.parsleyAdaptedCallback=function(){var c=Array.prototype.slice.call(arguments,0);c.unshift(this),a.apply(b||q,c)}),a.parsleyAdaptedCallback}function c(a){return 0===a.lastIndexOf(s,0)?a.substr(s.length):a}"undefined"==typeof a&&"undefined"!=typeof window.jQuery&&(a=window.jQuery);var d=1,e={},f={attr:function(a,b,c){var d,e,f=new RegExp("^"+b,"i");if("undefined"==typeof c)c={};else for(var g in c)c.hasOwnProperty(g)&&delete c[g];if("undefined"==typeof a||"undefined"==typeof a[0])return c;e=a[0].attributes;for(var g=e.length;g--;)d=e[g],d&&d.specified&&f.test(d.name)&&(c[this.camelize(d.name.slice(b.length))]=this.deserializeValue(d.value));return c},checkAttr:function(a,b,c){return a.is("["+b+c+"]")},setAttr:function(a,b,c,d){a[0].setAttribute(this.dasherize(b+c),String(d))},generateID:function(){return""+d++},deserializeValue:function(b){var c;try{return b?"true"==b||("false"==b?!1:"null"==b?null:isNaN(c=Number(b))?/^[\[\{]/.test(b)?a.parseJSON(b):b:c):b}catch(d){return b}},camelize:function(a){return a.replace(/-+(.)?/g,function(a,b){return b?b.toUpperCase():""})},dasherize:function(a){return a.replace(/::/g,"/").replace(/([A-Z]+)([A-Z][a-z])/g,"$1_$2").replace(/([a-z\d])([A-Z])/g,"$1_$2").replace(/_/g,"-").toLowerCase()},warn:function(){window.console&&"function"==typeof window.console.warn&&window.console.warn.apply(window.console,arguments)},warnOnce:function(a){e[a]||(e[a]=!0,this.warn.apply(this,arguments))},_resetWarnings:function(){e={}},objectCreate:Object.create||function(){var a=function(){};return function(b){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof b)throw TypeError("Argument must be an object");a.prototype=b;var c=new a;return a.prototype=null,c}}()},g={namespace:"data-parsley-",inputs:"input, textarea, select",excluded:"input[type=button], input[type=submit], input[type=reset], input[type=hidden]",priorityEnabled:!0,multiple:null,group:null,uiEnabled:!0,validationThreshold:3,focus:"first",trigger:!1,errorClass:"parsley-error",successClass:"parsley-success",classHandler:function(){},errorsContainer:function(){},errorsWrapper:'<ul class="parsley-errors-list"></ul>',errorTemplate:"<li></li>"},h=function(){};h.prototype={asyncSupport:!1,actualizeOptions:function(){return f.attr(this.$element,this.options.namespace,this.domOptions),this.parent&&this.parent.actualizeOptions&&this.parent.actualizeOptions(),this},_resetOptions:function(a){this.domOptions=f.objectCreate(this.parent.options),this.options=f.objectCreate(this.domOptions);for(var b in a)a.hasOwnProperty(b)&&(this.options[b]=a[b]);this.actualizeOptions()},validateThroughValidator:function(a,b,c){return window.ParsleyValidator.validate(a,b,c)},_listeners:null,on:function(a,b){this._listeners=this._listeners||{};var c=this._listeners[a]=this._listeners[a]||[];return c.push(b),this},subscribe:function(b,c){a.listenTo(this,b.toLowerCase(),c)},off:function(a,b){var c=this._listeners&&this._listeners[a];if(c)if(b)for(var d=c.length;d--;)c[d]===b&&c.splice(d,1);else delete this._listeners[a];return this},unsubscribe:function(b){a.unsubscribeTo(this,b.toLowerCase())},trigger:function(a,b){b=b||this;var c,d=this._listeners&&this._listeners[a];if(d)for(var e=d.length;e--;)if(c=d[e].call(b,b),c===!1)return c;return this.parent?this.parent.trigger(a,b):!0},reset:function(){if("ParsleyForm"!==this.__class__)return this._trigger("reset");for(var a=0;a<this.fields.length;a++)this.fields[a]._trigger("reset");this._trigger("reset")},destroy:function(){if("ParsleyForm"!==this.__class__)return this.$element.removeData("Parsley"),this.$element.removeData("ParsleyFieldMultiple"),void this._trigger("destroy");for(var a=0;a<this.fields.length;a++)this.fields[a].destroy();this.$element.removeData("Parsley"),this._trigger("destroy")},_findRelatedMultiple:function(){return this.parent.$element.find("["+this.options.namespace+'multiple="'+this.options.multiple+'"]')}};var i=function(){var a={},b=function(a){this.__class__="Validator",this.__version__="1.0.1",this.options=a||{},this.bindingKey=this.options.bindingKey||"_validatorjsConstraint"};b.prototype={constructor:b,validate:function(a,b,c){if("string"!=typeof a&&"object"!=typeof a)throw new Error("You must validate an object or a string");return"string"==typeof a||g(a)?this._validateString(a,b,c):this.isBinded(a)?this._validateBindedObject(a,b):this._validateObject(a,b,c)},bind:function(a,b){if("object"!=typeof a)throw new Error("Must bind a Constraint to an object");return a[this.bindingKey]=new c(b),this},unbind:function(a){return"undefined"==typeof a._validatorjsConstraint?this:(delete a[this.bindingKey],this)},isBinded:function(a){return"undefined"!=typeof a[this.bindingKey]},getBinded:function(a){return this.isBinded(a)?a[this.bindingKey]:null},_validateString:function(a,b,c){var f,h=[];g(b)||(b=[b]);for(var i=0;i<b.length;i++){if(!(b[i]instanceof e))throw new Error("You must give an Assert or an Asserts array to validate a string");f=b[i].check(a,c),f instanceof d&&h.push(f)}return h.length?h:!0},_validateObject:function(a,b,d){if("object"!=typeof b)throw new Error("You must give a constraint to validate an object");return b instanceof c?b.check(a,d):new c(b).check(a,d)},_validateBindedObject:function(a,b){return a[this.bindingKey].check(a,b)}},b.errorCode={must_be_a_string:"must_be_a_string",must_be_an_array:"must_be_an_array",must_be_a_number:"must_be_a_number",must_be_a_string_or_array:"must_be_a_string_or_array"};var c=function(a,b){if(this.__class__="Constraint",this.options=b||{},this.nodes={},a)try{this._bootstrap(a)}catch(c){throw new Error("Should give a valid mapping object to Constraint",c,a)}};c.prototype={constructor:c,check:function(a,b){var c,d={};for(var h in this.nodes){for(var i=!1,j=this.get(h),k=g(j)?j:[j],l=k.length-1;l>=0;l--)"Required"!==k[l].__class__||(i=k[l].requiresValidation(b));if(this.has(h,a)||this.options.strict||i)try{this.has(h,this.options.strict||i?a:void 0)||(new e).HaveProperty(h).validate(a),c=this._check(h,a[h],b),(g(c)&&c.length>0||!g(c)&&!f(c))&&(d[h]=c)}catch(m){d[h]=m}}return f(d)?!0:d},add:function(a,b){if(b instanceof e||g(b)&&b[0]instanceof e)return this.nodes[a]=b,this;if("object"==typeof b&&!g(b))return this.nodes[a]=b instanceof c?b:new c(b),this;throw new Error("Should give an Assert, an Asserts array, a Constraint",b)},has:function(a,b){return b="undefined"!=typeof b?b:this.nodes,"undefined"!=typeof b[a]},get:function(a,b){return this.has(a)?this.nodes[a]:b||null},remove:function(a){var b=[];for(var c in this.nodes)c!==a&&(b[c]=this.nodes[c]);return this.nodes=b,this},_bootstrap:function(a){if(a instanceof c)return this.nodes=a.nodes;for(var b in a)this.add(b,a[b])},_check:function(a,b,d){if(this.nodes[a]instanceof e)return this._checkAsserts(b,[this.nodes[a]],d);if(g(this.nodes[a]))return this._checkAsserts(b,this.nodes[a],d);if(this.nodes[a]instanceof c)return this.nodes[a].check(b,d);throw new Error("Invalid node",this.nodes[a])},_checkAsserts:function(a,b,c){for(var d,e=[],f=0;f<b.length;f++)d=b[f].check(a,c),"undefined"!=typeof d&&!0!==d&&e.push(d);return e}};var d=function(a,b,c){if(this.__class__="Violation",!(a instanceof e))throw new Error("Should give an assertion implementing the Assert interface");this.assert=a,this.value=b,"undefined"!=typeof c&&(this.violation=c)};d.prototype={show:function(){var a={assert:this.assert.__class__,value:this.value};return this.violation&&(a.violation=this.violation),a},__toString:function(){return"undefined"!=typeof this.violation&&(this.violation='", '+this.getViolation().constraint+" expected was "+this.getViolation().expected),this.assert.__class__+' assert failed for "'+this.value+this.violation||""},getViolation:function(){var a,b;for(a in this.violation)b=this.violation[a];return{constraint:a,expected:b}}};var e=function(a){this.__class__="Assert",this.__parentClass__=this.__class__,this.groups=[],"undefined"!=typeof a&&this.addGroup(a)};e.prototype={construct:e,requiresValidation:function(a){return a&&!this.hasGroup(a)?!1:!a&&this.hasGroups()?!1:!0},check:function(a,b){if(this.requiresValidation(b))try{return this.validate(a,b)}catch(c){return c}},hasGroup:function(a){return g(a)?this.hasOneOf(a):"Any"===a?!0:this.hasGroups()?-1!==this.groups.indexOf(a):"Default"===a},hasOneOf:function(a){for(var b=0;b<a.length;b++)if(this.hasGroup(a[b]))return!0;return!1},hasGroups:function(){return this.groups.length>0},addGroup:function(a){return g(a)?this.addGroups(a):(this.hasGroup(a)||this.groups.push(a),this)},removeGroup:function(a){for(var b=[],c=0;c<this.groups.length;c++)a!==this.groups[c]&&b.push(this.groups[c]);return this.groups=b,this},addGroups:function(a){for(var b=0;b<a.length;b++)this.addGroup(a[b]);return this},HaveProperty:function(a){return this.__class__="HaveProperty",this.node=a,this.validate=function(a){if("undefined"==typeof a[this.node])throw new d(this,a,{value:this.node});return!0},this},Blank:function(){return this.__class__="Blank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""!==a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Callback:function(a){if(this.__class__="Callback",this.arguments=Array.prototype.slice.call(arguments),1===this.arguments.length?this.arguments=[]:this.arguments.splice(0,1),"function"!=typeof a)throw new Error("Callback must be instanciated with a function");return this.fn=a,this.validate=function(a){var b=this.fn.apply(this,[a].concat(this.arguments));if(!0!==b)throw new d(this,a,{result:b});return!0},this},Choice:function(a){if(this.__class__="Choice",!g(a)&&"function"!=typeof a)throw new Error("Choice must be instanciated with an array or a function");return this.list=a,this.validate=function(a){for(var b="function"==typeof this.list?this.list():this.list,c=0;c<b.length;c++)if(a===b[c])return!0;throw new d(this,a,{choices:b})},this},Collection:function(a){return this.__class__="Collection",this.constraint="undefined"!=typeof a?a instanceof e?a:new c(a):!1,this.validate=function(a,c){var e,h=new b,i=0,j={},k=this.groups.length?this.groups:c;if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});for(var l=0;l<a.length;l++)e=this.constraint?h.validate(a[l],this.constraint,k):h.validate(a[l],k),f(e)||(j[i]=e),i++;return f(j)?!0:j},this},Count:function(a){return this.__class__="Count",this.count=a,this.validate=function(a){if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});var c="function"==typeof this.count?this.count(a):this.count;if(isNaN(Number(c)))throw new Error("Count must be a valid interger",c);if(c!==a.length)throw new d(this,a,{count:c});return!0},this},Email:function(){return this.__class__="Email",this.validate=function(a){var c=/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i;if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!c.test(a))throw new d(this,a);return!0},this},EqualTo:function(a){if(this.__class__="EqualTo","undefined"==typeof a)throw new Error("EqualTo must be instanciated with a value or a function");return this.reference=a,this.validate=function(a){var b="function"==typeof this.reference?this.reference(a):this.reference;if(b!==a)throw new d(this,a,{value:b});return!0},this},GreaterThan:function(a){if(this.__class__="GreaterThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>=a)throw new d(this,a,{threshold:this.threshold});return!0},this},GreaterThanOrEqual:function(a){if(this.__class__="GreaterThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold>a)throw new d(this,a,{threshold:this.threshold});return!0},this},InstanceOf:function(a){if(this.__class__="InstanceOf","undefined"==typeof a)throw new Error("InstanceOf must be instanciated with a value");return this.classRef=a,this.validate=function(a){if(1!=a instanceof this.classRef)throw new d(this,a,{classRef:this.classRef});return!0},this},Length:function(a){if(this.__class__="Length",!a.min&&!a.max)throw new Error("Lenth assert must be instanciated with a { min: x, max: y } object");return this.min=a.min,this.max=a.max,this.validate=function(a){if("string"!=typeof a&&!g(a))throw new d(this,a,{value:b.errorCode.must_be_a_string_or_array});if("undefined"!=typeof this.min&&this.min===this.max&&a.length!==this.min)throw new d(this,a,{min:this.min,max:this.max});if("undefined"!=typeof this.max&&a.length>this.max)throw new d(this,a,{max:this.max});if("undefined"!=typeof this.min&&a.length<this.min)throw new d(this,a,{min:this.min});return!0},this},LessThan:function(a){if(this.__class__="LessThan","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<=a)throw new d(this,a,{threshold:this.threshold});return!0},this},LessThanOrEqual:function(a){if(this.__class__="LessThanOrEqual","undefined"==typeof a)throw new Error("Should give a threshold value");return this.threshold=a,this.validate=function(a){if(""===a||isNaN(Number(a)))throw new d(this,a,{value:b.errorCode.must_be_a_number});if(this.threshold<a)throw new d(this,a,{threshold:this.threshold});return!0},this},NotNull:function(){return this.__class__="NotNull",this.validate=function(a){if(null===a||"undefined"==typeof a)throw new d(this,a);return!0},this},NotBlank:function(){return this.__class__="NotBlank",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(""===a.replace(/^\s+/g,"").replace(/\s+$/g,""))throw new d(this,a);return!0},this},Null:function(){return this.__class__="Null",this.validate=function(a){if(null!==a)throw new d(this,a);return!0},this},Range:function(a,b){if(this.__class__="Range","undefined"==typeof a||"undefined"==typeof b)throw new Error("Range assert expects min and max values");return this.min=a,this.max=b,this.validate=function(a){try{return"string"==typeof a&&isNaN(Number(a))||g(a)?(new e).Length({min:this.min,max:this.max}).validate(a):(new e).GreaterThanOrEqual(this.min).validate(a)&&(new e).LessThanOrEqual(this.max).validate(a),!0}catch(b){throw new d(this,a,b.violation)}return!0},this},Regexp:function(a,c){if(this.__class__="Regexp","undefined"==typeof a)throw new Error("You must give a regexp");return this.regexp=a,this.flag=c||"",this.validate=function(a){if("string"!=typeof a)throw new d(this,a,{value:b.errorCode.must_be_a_string});if(!new RegExp(this.regexp,this.flag).test(a))throw new d(this,a,{regexp:this.regexp,flag:this.flag});return!0},this},Required:function(){return this.__class__="Required",this.validate=function(a){if("undefined"==typeof a)throw new d(this,a);try{"string"==typeof a?(new e).NotNull().validate(a)&&(new e).NotBlank().validate(a):!0===g(a)&&(new e).Length({min:1}).validate(a)}catch(b){throw new d(this,a)}return!0},this},Unique:function(a){return this.__class__="Unique","object"==typeof a&&(this.key=a.key),this.validate=function(a){var c,e=[];if(!g(a))throw new d(this,a,{value:b.errorCode.must_be_an_array});for(var f=0;f<a.length;f++)if(c="object"==typeof a[f]?a[f][this.key]:a[f],"undefined"!=typeof c){if(-1!==e.indexOf(c))throw new d(this,a,{value:c});e.push(c)}return!0},this}},a.Assert=e,a.Validator=b,a.Violation=d,a.Constraint=c,Array.prototype.indexOf||(Array.prototype.indexOf=function(a){"use strict";if(null===this)throw new TypeError;var b=Object(this),c=b.length>>>0;if(0===c)return-1;var d=0;if(arguments.length>1&&(d=Number(arguments[1]),d!=d?d=0:0!==d&&d!=1/0&&d!=-(1/0)&&(d=(d>0||-1)*Math.floor(Math.abs(d)))),d>=c)return-1;for(var e=d>=0?d:Math.max(c-Math.abs(d),0);c>e;e++)if(e in b&&b[e]===a)return e;return-1});var f=function(a){for(var b in a)return!1;return!0},g=function(a){return"[object Array]"===Object.prototype.toString.call(a)};return"function"==typeof define&&define.amd?define("vendors/validator.js/dist/validator",[],function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window["undefined"!=typeof validatorjs_ns?validatorjs_ns:"Validator"]=a,a}();i="undefined"!=typeof i?i:"undefined"!=typeof module?module.exports:null;var j=function(a,b){this.__class__="ParsleyValidator",this.Validator=i,this.locale="en",this.init(a||{},b||{})};j.prototype={init:function(b,c){this.catalog=c,this.validators=a.extend({},this.validators);for(var d in b)this.addValidator(d,b[d].fn,b[d].priority,b[d].requirementsTransformer);window.Parsley.trigger("parsley:validator:init")},setLocale:function(a){if("undefined"==typeof this.catalog[a])throw new Error(a+" is not available in the catalog");return this.locale=a,this},addCatalog:function(a,b,c){return"object"==typeof b&&(this.catalog[a]=b),!0===c?this.setLocale(a):this},addMessage:function(a,b,c){return"undefined"==typeof this.catalog[a]&&(this.catalog[a]={}),this.catalog[a][b.toLowerCase()]=c,this},validate:function(){return(new this.Validator.Validator).validate.apply(new i.Validator,arguments)},addValidator:function(a,b,c,d){if(this.validators[a])f.warn('Validator "'+a+'" is already defined.');else if(g.hasOwnProperty(a))return void f.warn('"'+a+'" is a restricted keyword and is not a valid validator name.');return this._setValidator(a,b,c,d)},updateValidator:function(a,b,c,d){return this.validators[a]?this._setValidator(a,b,c,d):(f.warn('Validator "'+a+'" is not already defined.'),this.addValidator(a,b,c,d))},removeValidator:function(a){return this.validators[a]||f.warn('Validator "'+a+'" is not defined.'),delete this.validators[a],this},_setValidator:function(b,c,d,e){return this.validators[b]=function(b){return a.extend((new i.Assert).Callback(c,b),{priority:d,requirementsTransformer:e})},this},getErrorMessage:function(a){var b;if("type"===a.name){var c=this.catalog[this.locale][a.name]||{};b=c[a.requirements]}else b=this.formatMessage(this.catalog[this.locale][a.name],a.requirements);return b||this.catalog[this.locale].defaultMessage||this.catalog.en.defaultMessage},formatMessage:function(a,b){if("object"==typeof b){for(var c in b)a=this.formatMessage(a,b[c]);return a}return"string"==typeof a?a.replace(new RegExp("%s","i"),b):""},validators:{notblank:function(){return a.extend((new i.Assert).NotBlank(),{priority:2})},required:function(){return a.extend((new i.Assert).Required(),{priority:512})},type:function(b){var c;switch(b){case"email":c=(new i.Assert).Email();break;case"range":case"number":c=(new i.Assert).Regexp("^-?(?:\\d+|\\d{1,3}(?:,\\d{3})+)?(?:\\.\\d+)?$");break;case"integer":c=(new i.Assert).Regexp("^-?\\d+$");break;case"digits":c=(new i.Assert).Regexp("^\\d+$");break;case"alphanum":c=(new i.Assert).Regexp("^\\w+$","i");break;case"url":c=(new i.Assert).Regexp("^(?:(?:https?|ftp)://)?(?:\\S+(?::\\S*)?@)?(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[1-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))(?::\\d{2,5})?(?:/\\S*)?$","i");break;default:throw new Error("validator type `"+b+"` is not supported")}return a.extend(c,{priority:256})},pattern:function(b){var c="";return/^\/.*\/(?:[gimy]*)$/.test(b)&&(c=b.replace(/.*\/([gimy]*)$/,"$1"),b=b.replace(new RegExp("^/(.*?)/"+c+"$"),"$1")),a.extend((new i.Assert).Regexp(b,c),{priority:64})},minlength:function(b){return a.extend((new i.Assert).Length({min:b}),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},maxlength:function(b){return a.extend((new i.Assert).Length({max:b}),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},length:function(b){return a.extend((new i.Assert).Length({min:b[0],max:b[1]}),{priority:32})},mincheck:function(a){return this.minlength(a)},maxcheck:function(a){return this.maxlength(a)},check:function(a){return this.length(a)},min:function(b){return a.extend((new i.Assert).GreaterThanOrEqual(b),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},max:function(b){return a.extend((new i.Assert).LessThanOrEqual(b),{priority:30,requirementsTransformer:function(){return"string"!=typeof b||isNaN(b)?b:parseInt(b,10)}})},range:function(b){return a.extend((new i.Assert).Range(b[0],b[1]),{priority:32,requirementsTransformer:function(){for(var a=0;a<b.length;a++)b[a]="string"!=typeof b[a]||isNaN(b[a])?b[a]:parseInt(b[a],10);return b}})},equalto:function(b){return a.extend((new i.Assert).EqualTo(b),{priority:256,requirementsTransformer:function(){return a(b).length?a(b).val():b}})}}};var k=function(){this.__class__="ParsleyUI"};k.prototype={listen:function(){var a=this;return window.Parsley.on("form:init",function(){a.setupForm(this)}).on("field:init",function(){a.setupField(this)}).on("field:validated",function(){a.reflow(this)}).on("form:validated",function(){a.focus(this)}).on("field:reset",function(){a.reset(this)}).on("form:destroy",function(){a.destroy(this)}).on("field:destroy",function(){a.destroy(this)}),this},reflow:function(a){if("undefined"!=typeof a._ui&&!1!==a._ui.active){var b=this._diff(a.validationResult,a._ui.lastValidationResult);a._ui.lastValidationResult=a.validationResult,a._ui.validatedOnce=!0,this.manageStatusClass(a),this.manageErrorsMessages(a,b),this.actualizeTriggers(a),(b.kept.length||b.added.length)&&!0!==a._ui.failedOnce&&this.manageFailingFieldTrigger(a)}},getErrorsMessages:function(a){if(!0===a.validationResult)return[];for(var b=[],c=0;c<a.validationResult.length;c++)b.push(this._getErrorMessage(a,a.validationResult[c].assert));return b},manageStatusClass:function(a){a.hasConstraints()&&a.needsValidation()&&!0===a.validationResult?this._successClass(a):a.validationResult.length>0?this._errorClass(a):this._resetClass(a)},manageErrorsMessages:function(b,c){if("undefined"==typeof b.options.errorsMessagesDisabled){if("undefined"!=typeof b.options.errorMessage)return c.added.length||c.kept.length?(this._insertErrorWrapper(b),0===b._ui.$errorsWrapper.find(".parsley-custom-error-message").length&&b._ui.$errorsWrapper.append(a(b.options.errorTemplate).addClass("parsley-custom-error-message")),b._ui.$errorsWrapper.addClass("filled").find(".parsley-custom-error-message").html(b.options.errorMessage)):b._ui.$errorsWrapper.removeClass("filled").find(".parsley-custom-error-message").remove();for(var d=0;d<c.removed.length;d++)this.removeError(b,c.removed[d].assert.name,!0);for(d=0;d<c.added.length;d++)this.addError(b,c.added[d].assert.name,void 0,c.added[d].assert,!0);for(d=0;d<c.kept.length;d++)this.updateError(b,c.kept[d].assert.name,void 0,c.kept[d].assert,!0)}},addError:function(b,c,d,e,f){this._insertErrorWrapper(b),b._ui.$errorsWrapper.addClass("filled").append(a(b.options.errorTemplate).addClass("parsley-"+c).html(d||this._getErrorMessage(b,e))),!0!==f&&this._errorClass(b)},updateError:function(a,b,c,d,e){a._ui.$errorsWrapper.addClass("filled").find(".parsley-"+b).html(c||this._getErrorMessage(a,d)),!0!==e&&this._errorClass(a)},removeError:function(a,b,c){a._ui.$errorsWrapper.removeClass("filled").find(".parsley-"+b).remove(),!0!==c&&this.manageStatusClass(a)},focus:function(a){if(a._focusedField=null,!0===a.validationResult||"none"===a.options.focus)return null;for(var b=0;b<a.fields.length;b++){var c=a.fields[b];if(!0!==c.validationResult&&c.validationResult.length>0&&"undefined"==typeof c.options.noFocus&&(a._focusedField=c.$element,"first"===a.options.focus))break}return null===a._focusedField?null:a._focusedField.focus()},_getErrorMessage:function(a,b){var c=b.name+"Message";return"undefined"!=typeof a.options[c]?window.ParsleyValidator.formatMessage(a.options[c],b.requirements):window.ParsleyValidator.getErrorMessage(b)},_diff:function(a,b,c){for(var d=[],e=[],f=0;f<a.length;f++){for(var g=!1,h=0;h<b.length;h++)if(a[f].assert.name===b[h].assert.name){g=!0;break}g?e.push(a[f]):d.push(a[f])}return{kept:e,added:d,removed:c?[]:this._diff(b,a,!0).added}},setupForm:function(b){b.$element.on("submit.Parsley",!1,a.proxy(b.onSubmitValidate,b)),!1!==b.options.uiEnabled&&b.$element.attr("novalidate","")},setupField:function(b){var c={active:!1};!1!==b.options.uiEnabled&&(c.active=!0,b.$element.attr(b.options.namespace+"id",b.__id__),c.$errorClassHandler=this._manageClassHandler(b),c.errorsWrapperId="parsley-id-"+(b.options.multiple?"multiple-"+b.options.multiple:b.__id__),c.$errorsWrapper=a(b.options.errorsWrapper).attr("id",c.errorsWrapperId),c.lastValidationResult=[],c.validatedOnce=!1,c.validationInformationVisible=!1,b._ui=c,this.actualizeTriggers(b))},_manageClassHandler:function(b){if("string"==typeof b.options.classHandler&&a(b.options.classHandler).length)return a(b.options.classHandler);var c=b.options.classHandler(b);return"undefined"!=typeof c&&c.length?c:!b.options.multiple||b.$element.is("select")?b.$element:b.$element.parent()},_insertErrorWrapper:function(b){var c;if(0!==b._ui.$errorsWrapper.parent().length)return b._ui.$errorsWrapper.parent();if("string"==typeof b.options.errorsContainer){if(a(b.options.errorsContainer).length)return a(b.options.errorsContainer).append(b._ui.$errorsWrapper);f.warn("The errors container `"+b.options.errorsContainer+"` does not exist in DOM")}else"function"==typeof b.options.errorsContainer&&(c=b.options.errorsContainer(b));if("undefined"!=typeof c&&c.length)return c.append(b._ui.$errorsWrapper);var d=b.$element;return b.options.multiple&&(d=d.parent()),d.after(b._ui.$errorsWrapper)},actualizeTriggers:function(b){var c=b.$element;
if(b.options.multiple&&(c=a("["+b.options.namespace+'multiple="'+b.options.multiple+'"]')),c.off(".Parsley"),!1!==b.options.trigger){var d=b.options.trigger.replace(/^\s+/g,"").replace(/\s+$/g,"");""!==d&&c.on(d.split(" ").join(".Parsley ")+".Parsley",a.proxy("function"==typeof b.eventValidate?b.eventValidate:this.eventValidate,b))}},eventValidate:function(a){new RegExp("key").test(a.type)&&!this._ui.validationInformationVisible&&this.getValue().length<=this.options.validationThreshold||(this._ui.validatedOnce=!0,this.validate())},manageFailingFieldTrigger:function(b){return b._ui.failedOnce=!0,b.options.multiple&&a("["+b.options.namespace+'multiple="'+b.options.multiple+'"]').each(function(){return new RegExp("change","i").test(a(this).parsley().options.trigger||"")?void 0:a(this).on("change.ParsleyFailedOnce",!1,a.proxy(b.validate,b))}),b.$element.is("select")&&!new RegExp("change","i").test(b.options.trigger||"")?b.$element.on("change.ParsleyFailedOnce",!1,a.proxy(b.validate,b)):new RegExp("keyup","i").test(b.options.trigger||"")?void 0:b.$element.on("keyup.ParsleyFailedOnce",!1,a.proxy(b.validate,b))},reset:function(a){this.actualizeTriggers(a),a.$element.off(".ParsleyFailedOnce"),"undefined"!=typeof a._ui&&"ParsleyForm"!==a.__class__&&(a._ui.$errorsWrapper.removeClass("filled").children().remove(),this._resetClass(a),a._ui.validatedOnce=!1,a._ui.lastValidationResult=[],a._ui.validationInformationVisible=!1,a._ui.failedOnce=!1)},destroy:function(a){this.reset(a),"ParsleyForm"!==a.__class__&&("undefined"!=typeof a._ui&&a._ui.$errorsWrapper.remove(),delete a._ui)},_successClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.errorClass).addClass(a.options.successClass)},_errorClass:function(a){a._ui.validationInformationVisible=!0,a._ui.$errorClassHandler.removeClass(a.options.successClass).addClass(a.options.errorClass)},_resetClass:function(a){a._ui.$errorClassHandler.removeClass(a.options.successClass).removeClass(a.options.errorClass)}};var l=function(b,c,d){this.__class__="ParsleyForm",this.__id__=f.generateID(),this.$element=a(b),this.domOptions=c,this.options=d,this.parent=window.Parsley,this.fields=[],this.validationResult=null};l.prototype={onSubmitValidate:function(b){return this.validate(void 0,void 0,b),(!1===this.validationResult||!this._trigger("submit"))&&b instanceof a.Event&&(b.stopImmediatePropagation(),b.preventDefault()),this},validate:function(a,b,c){this.submitEvent=c,this.validationResult=!0;var d=[];return this._trigger("validate"),this._refreshFields(),this._withoutReactualizingFormOptions(function(){for(var c=0;c<this.fields.length;c++)(!a||this._isFieldInGroup(this.fields[c],a))&&(d=this.fields[c].validate(b),!0!==d&&d.length>0&&this.validationResult&&(this.validationResult=!1))}),this._trigger(this.validationResult?"success":"error"),this._trigger("validated"),this.validationResult},isValid:function(a,b){return this._refreshFields(),this._withoutReactualizingFormOptions(function(){for(var c=0;c<this.fields.length;c++)if((!a||this._isFieldInGroup(this.fields[c],a))&&!1===this.fields[c].isValid(b))return!1;return!0})},_isFieldInGroup:function(b,c){return a.isArray(b.options.group)?-1!==a.inArray(c,b.options.group):b.options.group===c},_refreshFields:function(){return this.actualizeOptions()._bindFields()},_bindFields:function(){var b=this,c=this.fields;return this.fields=[],this.fieldsMappedById={},this._withoutReactualizingFormOptions(function(){this.$element.find(this.options.inputs).not(this.options.excluded).each(function(){var a=new t.Factory(this,{},b);"ParsleyField"!==a.__class__&&"ParsleyFieldMultiple"!==a.__class__||!0===a.options.excluded||"undefined"==typeof b.fieldsMappedById[a.__class__+"-"+a.__id__]&&(b.fieldsMappedById[a.__class__+"-"+a.__id__]=a,b.fields.push(a))}),a(c).not(b.fields).each(function(){this._trigger("reset")})}),this},_withoutReactualizingFormOptions:function(a){var b=this.actualizeOptions;this.actualizeOptions=function(){return this};var c=a.call(this);return this.actualizeOptions=b,c},_trigger:function(a){return a="form:"+a,this.trigger.apply(this,arguments)}};var m=function(b,c,d,e,g){var h={};if(!new RegExp("ParsleyField").test(b.__class__))throw new Error("ParsleyField or ParsleyFieldMultiple instance expected");if("function"==typeof window.ParsleyValidator.validators[c]&&(h=window.ParsleyValidator.validators[c](d)),"Assert"!==h.__parentClass__)throw new Error("Valid validator expected");var i=function(){return"undefined"!=typeof b.options[c+"Priority"]?b.options[c+"Priority"]:h.priority||2};return e=e||i(),"function"==typeof h.requirementsTransformer&&(d=h.requirementsTransformer(),h=window.ParsleyValidator.validators[c](d)),a.extend(h,{name:c,requirements:d,priority:e,groups:[e],isDomConstraint:g||f.checkAttr(b.$element,b.options.namespace,c)})},n=function(b,c,d,e){this.__class__="ParsleyField",this.__id__=f.generateID(),this.$element=a(b),"undefined"!=typeof e&&(this.parent=e),this.options=d,this.domOptions=c,this.constraints=[],this.constraintsByName={},this.validationResult=[],this._bindConstraints()};n.prototype={validate:function(a){return this.value=this.getValue(),this._trigger("validate"),this._trigger(this.isValid(a,this.value)?"success":"error"),this._trigger("validated"),this.validationResult},hasConstraints:function(){return 0!==this.constraints.length},needsValidation:function(a){return"undefined"==typeof a&&(a=this.getValue()),a.length||this._isRequired()||"undefined"!=typeof this.options.validateIfEmpty?!0:!1},isValid:function(a,b){if(this.refreshConstraints(),this.validationResult=!0,!this.hasConstraints())return!0;if(("undefined"==typeof b||null===b)&&(b=this.getValue()),!this.needsValidation(b)&&!0!==a)return!0;var c=["Any"];!1!==this.options.priorityEnabled&&(c=this._getConstraintsSortedPriorities());for(var d=0;d<c.length;d++)if(!0!==(this.validationResult=this.validateThroughValidator(b,this.constraints,c[d])))return!1;return!0},getValue:function(){var a;return a="function"==typeof this.options.value?this.options.value(this):"undefined"!=typeof this.options.value?this.options.value:this.$element.val(),"undefined"==typeof a||null===a?"":this._handleWhitespace(a)},refreshConstraints:function(){return this.actualizeOptions()._bindConstraints()},addConstraint:function(a,b,c,d){if("function"==typeof window.ParsleyValidator.validators[a]){var e=new m(this,a,b,c,d);"undefined"!==this.constraintsByName[e.name]&&this.removeConstraint(e.name),this.constraints.push(e),this.constraintsByName[e.name]=e}return this},removeConstraint:function(a){for(var b=0;b<this.constraints.length;b++)if(a===this.constraints[b].name){this.constraints.splice(b,1);break}return delete this.constraintsByName[a],this},updateConstraint:function(a,b,c){return this.removeConstraint(a).addConstraint(a,b,c)},_bindConstraints:function(){for(var a=[],b={},c=0;c<this.constraints.length;c++)!1===this.constraints[c].isDomConstraint&&(a.push(this.constraints[c]),b[this.constraints[c].name]=this.constraints[c]);this.constraints=a,this.constraintsByName=b;for(var d in this.options)this.addConstraint(d,this.options[d]);return this._bindHtml5Constraints()},_bindHtml5Constraints:function(){(this.$element.hasClass("required")||this.$element.attr("required"))&&this.addConstraint("required",!0,void 0,!0),"string"==typeof this.$element.attr("pattern")&&this.addConstraint("pattern",this.$element.attr("pattern"),void 0,!0),"undefined"!=typeof this.$element.attr("min")&&"undefined"!=typeof this.$element.attr("max")?this.addConstraint("range",[this.$element.attr("min"),this.$element.attr("max")],void 0,!0):"undefined"!=typeof this.$element.attr("min")?this.addConstraint("min",this.$element.attr("min"),void 0,!0):"undefined"!=typeof this.$element.attr("max")&&this.addConstraint("max",this.$element.attr("max"),void 0,!0),"undefined"!=typeof this.$element.attr("minlength")&&"undefined"!=typeof this.$element.attr("maxlength")?this.addConstraint("length",[this.$element.attr("minlength"),this.$element.attr("maxlength")],void 0,!0):"undefined"!=typeof this.$element.attr("minlength")?this.addConstraint("minlength",this.$element.attr("minlength"),void 0,!0):"undefined"!=typeof this.$element.attr("maxlength")&&this.addConstraint("maxlength",this.$element.attr("maxlength"),void 0,!0);var a=this.$element.attr("type");return"undefined"==typeof a?this:"number"===a?"undefined"==typeof this.$element.attr("step")||0===parseFloat(this.$element.attr("step"))%1?this.addConstraint("type","integer",void 0,!0):this.addConstraint("type","number",void 0,!0):/^(email|url|range)$/i.test(a)?this.addConstraint("type",a,void 0,!0):this},_isRequired:function(){return"undefined"==typeof this.constraintsByName.required?!1:!1!==this.constraintsByName.required.requirements},_trigger:function(a){return a="field:"+a,this.trigger.apply(this,arguments)},_handleWhitespace:function(a){return!0===this.options.trimValue&&f.warnOnce('data-parsley-trim-value="true" is deprecated, please use data-parsley-whitespace="trim"'),"squish"===this.options.whitespace&&(a=a.replace(/\s{2,}/g," ")),("trim"===this.options.whitespace||"squish"===this.options.whitespace||!0===this.options.trimValue)&&(a=a.replace(/^\s+|\s+$/g,"")),a},_getConstraintsSortedPriorities:function(){for(var a=[],b=0;b<this.constraints.length;b++)-1===a.indexOf(this.constraints[b].priority)&&a.push(this.constraints[b].priority);return a.sort(function(a,b){return b-a}),a}};var o=function(){this.__class__="ParsleyFieldMultiple"};o.prototype={addElement:function(a){return this.$elements.push(a),this},refreshConstraints:function(){var b;if(this.constraints=[],this.$element.is("select"))return this.actualizeOptions()._bindConstraints(),this;for(var c=0;c<this.$elements.length;c++)if(a("html").has(this.$elements[c]).length){b=this.$elements[c].data("ParsleyFieldMultiple").refreshConstraints().constraints;for(var d=0;d<b.length;d++)this.addConstraint(b[d].name,b[d].requirements,b[d].priority,b[d].isDomConstraint)}else this.$elements.splice(c,1);return this},getValue:function(){if("undefined"!=typeof this.options.value)return this.options.value;if(this.$element.is("input[type=radio]"))return this._findRelatedMultiple().filter(":checked").val()||"";if(this.$element.is("input[type=checkbox]")){var b=[];return this._findRelatedMultiple().filter(":checked").each(function(){b.push(a(this).val())}),b}return this.$element.is("select")&&null===this.$element.val()?[]:this.$element.val()},_init:function(){return this.$elements=[this.$element],this}};var p=function(b,c,d){this.$element=a(b);var e=this.$element.data("Parsley");if(e)return"undefined"!=typeof d&&e.parent===window.Parsley&&(e.parent=d,e._resetOptions(e.options)),e;if(!this.$element.length)throw new Error("You must bind Parsley on an existing element.");if("undefined"!=typeof d&&"ParsleyForm"!==d.__class__)throw new Error("Parent instance must be a ParsleyForm instance");return this.parent=d||window.Parsley,this.init(c)};p.prototype={init:function(a){return this.__class__="Parsley",this.__version__="2.1.3",this.__id__=f.generateID(),this._resetOptions(a),this.$element.is("form")||f.checkAttr(this.$element,this.options.namespace,"validate")&&!this.$element.is(this.options.inputs)?this.bind("parsleyForm"):this.isMultiple()?this.handleMultiple():this.bind("parsleyField")},isMultiple:function(){return this.$element.is("input[type=radio], input[type=checkbox]")||this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple")},handleMultiple:function(){var b,c,d=this;if(this.options.multiple||("undefined"!=typeof this.$element.attr("name")&&this.$element.attr("name").length?this.options.multiple=b=this.$element.attr("name"):"undefined"!=typeof this.$element.attr("id")&&this.$element.attr("id").length&&(this.options.multiple=this.$element.attr("id"))),this.$element.is("select")&&"undefined"!=typeof this.$element.attr("multiple"))return this.options.multiple=this.options.multiple||this.__id__,this.bind("parsleyFieldMultiple");if(!this.options.multiple)return f.warn("To be bound by Parsley, a radio, a checkbox and a multiple select input must have either a name or a multiple option.",this.$element),this;this.options.multiple=this.options.multiple.replace(/(:|\.|\[|\]|\{|\}|\$)/g,""),"undefined"!=typeof b&&a('input[name="'+b+'"]').each(function(){a(this).is("input[type=radio], input[type=checkbox]")&&a(this).attr(d.options.namespace+"multiple",d.options.multiple)});for(var e=this._findRelatedMultiple(),g=0;g<e.length;g++)if(c=a(e.get(g)).data("Parsley"),"undefined"!=typeof c){this.$element.data("ParsleyFieldMultiple")||c.addElement(this.$element);break}return this.bind("parsleyField",!0),c||this.bind("parsleyFieldMultiple")},bind:function(b,c){var d;switch(b){case"parsleyForm":d=a.extend(new l(this.$element,this.domOptions,this.options),window.ParsleyExtend)._bindFields();break;case"parsleyField":d=a.extend(new n(this.$element,this.domOptions,this.options,this.parent),window.ParsleyExtend);break;case"parsleyFieldMultiple":d=a.extend(new n(this.$element,this.domOptions,this.options,this.parent),new o,window.ParsleyExtend)._init();break;default:throw new Error(b+"is not a supported Parsley type")}return this.options.multiple&&f.setAttr(this.$element,this.options.namespace,"multiple",this.options.multiple),"undefined"!=typeof c?(this.$element.data("ParsleyFieldMultiple",d),d):(this.$element.data("Parsley",d),d._trigger("init"),d)}};var q=a({}),r=function(){f.warnOnce("Parsley's pubsub module is deprecated; use the 'on' and 'off' methods on parsley instances or window.Parsley")},s="parsley:";a.listen=function(a,d){var e;if(r(),"object"==typeof arguments[1]&&"function"==typeof arguments[2]&&(e=arguments[1],d=arguments[2]),"function"!=typeof arguments[1])throw new Error("Wrong parameters");window.Parsley.on(c(a),b(d,e))},a.listenTo=function(a,d,e){if(r(),!(a instanceof n||a instanceof l))throw new Error("Must give Parsley instance");if("string"!=typeof d||"function"!=typeof e)throw new Error("Wrong parameters");a.on(c(d),b(e))},a.unsubscribe=function(a,b){if(r(),"string"!=typeof a||"function"!=typeof b)throw new Error("Wrong arguments");window.Parsley.off(c(a),b.parsleyAdaptedCallback)},a.unsubscribeTo=function(a,b){if(r(),!(a instanceof n||a instanceof l))throw new Error("Must give Parsley instance");a.off(c(b))},a.unsubscribeAll=function(b){r(),window.Parsley.off(c(b)),a("form,input,textarea,select").each(function(){var d=a(this).data("Parsley");d&&d.off(c(b))})},a.emit=function(a,b){r();var d=b instanceof n||b instanceof l,e=Array.prototype.slice.call(arguments,d?2:1);e.unshift(c(a)),d||(b=window.Parsley),b.trigger.apply(b,e)},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.en=jQuery.extend(window.ParsleyConfig.i18n.en||{},{defaultMessage:"This value seems to be invalid.",type:{email:"This value should be a valid email.",url:"This value should be a valid url.",number:"This value should be a valid number.",integer:"This value should be a valid integer.",digits:"This value should be digits.",alphanum:"This value should be alphanumeric."},notblank:"This value should not be blank.",required:"This value is required.",pattern:"This value seems to be invalid.",min:"This value should be greater than or equal to %s.",max:"This value should be lower than or equal to %s.",range:"This value should be between %s and %s.",minlength:"This value is too short. It should have %s characters or more.",maxlength:"This value is too long. It should have %s characters or fewer.",length:"This value length is invalid. It should be between %s and %s characters long.",mincheck:"You must select at least %s choices.",maxcheck:"You must select %s choices or fewer.",check:"You must select between %s and %s choices.",equalto:"This value should be the same."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("en",window.ParsleyConfig.i18n.en,!0);var t=a.extend(new h,{$element:a(document),actualizeOptions:null,_resetOptions:null,Factory:p,version:"2.1.3"});return a.extend(n.prototype,h.prototype),a.extend(l.prototype,h.prototype),a.extend(p.prototype,h.prototype),a.fn.parsley=a.fn.psly=function(b){if(this.length>1){var c=[];return this.each(function(){c.push(a(this).parsley(b))}),c}return a(this).length?new p(this,b):void f.warn("You must bind Parsley on an existing element.")},"undefined"==typeof window.ParsleyExtend&&(window.ParsleyExtend={}),t.options=a.extend(f.objectCreate(g),window.ParsleyConfig),window.ParsleyConfig=t.options,window.Parsley=window.psly=t,window.ParsleyUtils=f,window.ParsleyValidator=new j(window.ParsleyConfig.validators,window.ParsleyConfig.i18n),window.ParsleyUI="function"==typeof window.ParsleyConfig.ParsleyUI?(new window.ParsleyConfig.ParsleyUI).listen():(new k).listen(),!1!==window.ParsleyConfig.autoBind&&a(function(){a("[data-parsley-validate]").length&&a("[data-parsley-validate]").parsley()}),window.Parsley}),function(){"use strict";var a={};a.parse=function(a){return"string"!=typeof a?{}:(a=a.trim().replace(/^(\?|#)/,""),a?a.trim().split("&").reduce(function(a,b){var c=b.replace(/\+/g," ").split("="),d=c[0],e=c[1];return d=decodeURIComponent(d),e=void 0===e?null:decodeURIComponent(e),a.hasOwnProperty(d)?Array.isArray(a[d])?a[d].push(e):a[d]=[a[d],e]:a[d]=e,a},{}):{})},a.stringify=function(a){return a?Object.keys(a).map(function(b){var c=a[b];return Array.isArray(c)?c.map(function(a){return encodeURIComponent(b)+"="+encodeURIComponent(a)}).join("&"):encodeURIComponent(b)+"="+encodeURIComponent(c)}).join("&"):""},"function"==typeof define&&define.amd?define(function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:window.queryString=a}(),!function(a,b){"function"==typeof define&&define.amd?define("sifter",b):"object"==typeof exports?module.exports=b():a.Sifter=b()}(this,function(){var a=function(a,b){this.items=a,this.settings=b||{diacritics:!0}};a.prototype.tokenize=function(a){if(a=d(String(a||"").toLowerCase()),!a||!a.length)return[];var b,c,f,h,i=[],j=a.split(/ +/);for(b=0,c=j.length;c>b;b++){if(f=e(j[b]),this.settings.diacritics)for(h in g)g.hasOwnProperty(h)&&(f=f.replace(new RegExp(h,"g"),g[h]));i.push({string:j[b],regex:new RegExp(f,"i")})}return i},a.prototype.iterator=function(a,b){var c;c=f(a)?Array.prototype.forEach||function(a){for(var b=0,c=this.length;c>b;b++)a(this[b],b,this)}:function(a){for(var b in this)this.hasOwnProperty(b)&&a(this[b],b,this)},c.apply(a,[b])},a.prototype.getScoreFunction=function(a,b){var c,d,e,f;c=this,a=c.prepareSearch(a,b),e=a.tokens,d=a.options.fields,f=e.length;var g=function(a,b){var c,d;return a?(a=String(a||""),d=a.search(b.regex),-1===d?0:(c=b.string.length/a.length,0===d&&(c+=.5),c)):0},h=function(){var a=d.length;return a?1===a?function(a,b){return g(b[d[0]],a)}:function(b,c){for(var e=0,f=0;a>e;e++)f+=g(c[d[e]],b);return f/a}:function(){return 0}}();return f?1===f?function(a){return h(e[0],a)}:"and"===a.options.conjunction?function(a){for(var b,c=0,d=0;f>c;c++){if(b=h(e[c],a),0>=b)return 0;d+=b}return d/f}:function(a){for(var b=0,c=0;f>b;b++)c+=h(e[b],a);return c/f}:function(){return 0}},a.prototype.getSortFunction=function(a,c){var d,e,f,g,h,i,j,k,l,m,n;if(f=this,a=f.prepareSearch(a,c),n=!a.query&&c.sort_empty||c.sort,l=function(a,b){return"$score"===a?b.score:f.items[b.id][a]},h=[],n)for(d=0,e=n.length;e>d;d++)(a.query||"$score"!==n[d].field)&&h.push(n[d]);if(a.query){for(m=!0,d=0,e=h.length;e>d;d++)if("$score"===h[d].field){m=!1;break}m&&h.unshift({field:"$score",direction:"desc"})}else for(d=0,e=h.length;e>d;d++)if("$score"===h[d].field){h.splice(d,1);break}for(k=[],d=0,e=h.length;e>d;d++)k.push("desc"===h[d].direction?-1:1);return i=h.length,i?1===i?(g=h[0].field,j=k[0],function(a,c){return j*b(l(g,a),l(g,c))}):function(a,c){var d,e,f;for(d=0;i>d;d++)if(f=h[d].field,e=k[d]*b(l(f,a),l(f,c)))return e;return 0}:null},a.prototype.prepareSearch=function(a,b){if("object"==typeof a)return a;b=c({},b);var d=b.fields,e=b.sort,g=b.sort_empty;return d&&!f(d)&&(b.fields=[d]),e&&!f(e)&&(b.sort=[e]),g&&!f(g)&&(b.sort_empty=[g]),{options:b,query:String(a||"").toLowerCase(),tokens:this.tokenize(a),total:0,items:[]}},a.prototype.search=function(a,b){var c,d,e,f,g=this;return d=this.prepareSearch(a,b),b=d.options,a=d.query,f=b.score||g.getScoreFunction(d),a.length?g.iterator(g.items,function(a,e){c=f(a),(b.filter===!1||c>0)&&d.items.push({score:c,id:e})}):g.iterator(g.items,function(a,b){d.items.push({score:1,id:b})}),e=g.getSortFunction(d,b),e&&d.items.sort(e),d.total=d.items.length,"number"==typeof b.limit&&(d.items=d.items.slice(0,b.limit)),d};var b=function(a,b){return"number"==typeof a&&"number"==typeof b?a>b?1:b>a?-1:0:(a=String(a||"").toLowerCase(),b=String(b||"").toLowerCase(),a>b?1:b>a?-1:0)},c=function(a){var b,c,d,e;for(b=1,c=arguments.length;c>b;b++)if(e=arguments[b])for(d in e)e.hasOwnProperty(d)&&(a[d]=e[d]);return a},d=function(a){return(a+"").replace(/^\s+|\s+$|/g,"")},e=function(a){return(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")},f=Array.isArray||$&&$.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},g={a:"[aÀÁÂÃÄÅàáâãäåĀā]",c:"[cÇçćĆčČ]",d:"[dđĐďĎ]",e:"[eÈÉÊËèéêëěĚĒē]",i:"[iÌÍÎÏìíîïĪī]",n:"[nÑñňŇ]",o:"[oÒÓÔÕÕÖØòóôõöøŌō]",r:"[rřŘ]",s:"[sŠš]",t:"[tťŤ]",u:"[uÙÚÛÜùúûüůŮŪū]",y:"[yŸÿýÝ]",z:"[zŽž]"};return a}),function(a,b){"function"==typeof define&&define.amd?define("microplugin",b):"object"==typeof exports?module.exports=b():a.MicroPlugin=b()}(this,function(){var a={};a.mixin=function(a){a.plugins={},a.prototype.initializePlugins=function(a){var c,d,e,f=this,g=[];if(f.plugins={names:[],settings:{},requested:{},loaded:{}},b.isArray(a))for(c=0,d=a.length;d>c;c++)"string"==typeof a[c]?g.push(a[c]):(f.plugins.settings[a[c].name]=a[c].options,g.push(a[c].name));else if(a)for(e in a)a.hasOwnProperty(e)&&(f.plugins.settings[e]=a[e],g.push(e));for(;g.length;)f.require(g.shift())},a.prototype.loadPlugin=function(b){var c=this,d=c.plugins,e=a.plugins[b];if(!a.plugins.hasOwnProperty(b))throw new Error('Unable to find "'+b+'" plugin');d.requested[b]=!0,d.loaded[b]=e.fn.apply(c,[c.plugins.settings[b]||{}]),d.names.push(b)},a.prototype.require=function(a){var b=this,c=b.plugins;if(!b.plugins.loaded.hasOwnProperty(a)){if(c.requested[a])throw new Error('Plugin has circular dependency ("'+a+'")');b.loadPlugin(a)}return c.loaded[a]},a.define=function(b,c){a.plugins[b]={name:b,fn:c}}};var b={isArray:Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)}};return a}),function(a,b){"function"==typeof define&&define.amd?define("selectize",["jquery","sifter","microplugin"],b):"object"==typeof exports?module.exports=b(require("jquery"),require("sifter"),require("microplugin")):a.Selectize=b(a.jQuery,a.Sifter,a.MicroPlugin)}(this,function(a,b,c){"use strict";var d=function(a,b){if("string"!=typeof b||b.length){var c="string"==typeof b?new RegExp(b,"i"):b,d=function(a){var b=0;if(3===a.nodeType){var e=a.data.search(c);if(e>=0&&a.data.length>0){var f=a.data.match(c),g=document.createElement("span");g.className="highlight";var h=a.splitText(e),i=(h.splitText(f[0].length),h.cloneNode(!0));g.appendChild(i),h.parentNode.replaceChild(g,h),b=1}}else if(1===a.nodeType&&a.childNodes&&!/(script|style)/i.test(a.tagName))for(var j=0;j<a.childNodes.length;++j)j+=d(a.childNodes[j]);return b};return a.each(function(){d(this)})}},e=function(){};e.prototype={on:function(a,b){this._events=this._events||{},this._events[a]=this._events[a]||[],this._events[a].push(b)},off:function(a,b){var c=arguments.length;return 0===c?delete this._events:1===c?delete this._events[a]:(this._events=this._events||{},void(a in this._events!=0&&this._events[a].splice(this._events[a].indexOf(b),1)))},trigger:function(a){if(this._events=this._events||{},a in this._events!=0)for(var b=0;b<this._events[a].length;b++)this._events[a][b].apply(this,Array.prototype.slice.call(arguments,1))}},e.mixin=function(a){for(var b=["on","off","trigger"],c=0;c<b.length;c++)a.prototype[b[c]]=e.prototype[b[c]]};var f=/Mac/.test(navigator.userAgent),g=65,h=13,i=27,j=37,k=38,l=80,m=39,n=40,o=78,p=8,q=46,r=16,s=f?91:17,t=f?18:17,u=9,v=1,w=2,x=function(a){return"undefined"!=typeof a},y=function(a){return"undefined"==typeof a||null===a?null:"boolean"==typeof a?a?"1":"0":a+""},z=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},A=function(a){return(a+"").replace(/\$/g,"$$$$")},B={};B.before=function(a,b,c){var d=a[b];a[b]=function(){return c.apply(a,arguments),d.apply(a,arguments)}},B.after=function(a,b,c){var d=a[b];a[b]=function(){var b=d.apply(a,arguments);return c.apply(a,arguments),b}};var C=function(b,c){if(!a.isArray(c))return c;var d,e,f={};for(d=0,e=c.length;e>d;d++)c[d].hasOwnProperty(b)&&(f[c[d][b]]=c[d]);return f},D=function(a){var b=!1;return function(){b||(b=!0,a.apply(this,arguments))}},E=function(a,b){var c;return function(){var d=this,e=arguments;window.clearTimeout(c),c=window.setTimeout(function(){a.apply(d,e)},b)}},F=function(a,b,c){var d,e=a.trigger,f={};a.trigger=function(){var c=arguments[0];return-1===b.indexOf(c)?e.apply(a,arguments):void(f[c]=arguments)},c.apply(a,[]),a.trigger=e;for(d in f)f.hasOwnProperty(d)&&e.apply(a,f[d])},G=function(a,b,c,d){a.on(b,c,function(b){for(var c=b.target;c&&c.parentNode!==a[0];)c=c.parentNode;return b.currentTarget=c,d.apply(this,[b])})},H=function(a){var b={};if("selectionStart"in a)b.start=a.selectionStart,b.length=a.selectionEnd-b.start;else if(document.selection){a.focus();var c=document.selection.createRange(),d=document.selection.createRange().text.length;c.moveStart("character",-a.value.length),b.start=c.text.length-d,b.length=d}return b},I=function(a,b,c){var d,e,f={};if(c)for(d=0,e=c.length;e>d;d++)f[c[d]]=a.css(c[d]);else f=a.css();b.css(f)},J=function(b,c){if(!b)return 0;var d=a("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(b).appendTo("body");I(c,d,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var e=d.width();return d.remove(),e},K=function(a){var b=null,c=function(c,d){var e,f,g,h,i,j,k,l;c=c||window.event||{},d=d||{},c.metaKey||c.altKey||(d.force||a.data("grow")!==!1)&&(e=a.val(),c.type&&"keydown"===c.type.toLowerCase()&&(f=c.keyCode,g=f>=97&&122>=f||f>=65&&90>=f||f>=48&&57>=f||32===f,f===q||f===p?(l=H(a[0]),l.length?e=e.substring(0,l.start)+e.substring(l.start+l.length):f===p&&l.start?e=e.substring(0,l.start-1)+e.substring(l.start+1):f===q&&"undefined"!=typeof l.start&&(e=e.substring(0,l.start)+e.substring(l.start+1))):g&&(j=c.shiftKey,k=String.fromCharCode(c.keyCode),k=j?k.toUpperCase():k.toLowerCase(),e+=k)),h=a.attr("placeholder"),!e&&h&&(e=h),i=J(e,a)+4,i!==b&&(b=i,a.width(i),a.triggerHandler("resize")))};a.on("keydown keyup update blur",c),c()},L=function(c,d){var e,f,g=this;f=c[0],f.selectize=g;var h=window.getComputedStyle&&window.getComputedStyle(f,null);e=h?h.getPropertyValue("direction"):f.currentStyle&&f.currentStyle.direction,e=e||c.parents("[dir]:first").attr("dir")||"",a.extend(g,{settings:d,$input:c,tagType:"select"===f.tagName.toLowerCase()?v:w,rtl:/rtl/i.test(e),eventNS:".selectize"+ ++L.count,highlightedValue:null,isOpen:!1,isDisabled:!1,isRequired:c.is("[required]"),isInvalid:!1,isLocked:!1,isFocused:!1,isInputHidden:!1,isSetup:!1,isShiftDown:!1,isCmdDown:!1,isCtrlDown:!1,ignoreFocus:!1,ignoreBlur:!1,ignoreHover:!1,hasOptions:!1,currentResults:null,lastValue:"",caretPos:0,loading:0,loadedSearches:{},$activeOption:null,$activeItems:[],optgroups:{},options:{},userOptions:{},items:[],renderCache:{},onSearchChange:null===d.loadThrottle?g.onSearchChange:E(g.onSearchChange,d.loadThrottle)}),g.sifter=new b(this.options,{diacritics:d.diacritics}),a.extend(g.options,C(d.valueField,d.options)),delete g.settings.options,a.extend(g.optgroups,C(d.optgroupValueField,d.optgroups)),delete g.settings.optgroups,g.settings.mode=g.settings.mode||(1===g.settings.maxItems?"single":"multi"),"boolean"!=typeof g.settings.hideSelected&&(g.settings.hideSelected="multi"===g.settings.mode),g.initializePlugins(g.settings.plugins),g.setupCallbacks(),g.setupTemplates(),g.setup()};return e.mixin(L),c.mixin(L),a.extend(L.prototype,{setup:function(){var b,c,d,e,g,h,i,j,k,l,m=this,n=m.settings,o=m.eventNS,p=a(window),q=a(document),u=m.$input;i=m.settings.mode,j=u.attr("tabindex")||"",k=u.attr("class")||"",b=a("<div>").addClass(n.wrapperClass).addClass(k).addClass(i),c=a("<div>").addClass(n.inputClass).addClass("items").appendTo(b),d=a('<input type="text" autocomplete="off" />').appendTo(c).attr("tabindex",j),h=a(n.dropdownParent||b),e=a("<div>").addClass(n.dropdownClass).addClass(i).hide().appendTo(h),g=a("<div>").addClass(n.dropdownContentClass).appendTo(e),m.settings.copyClassesToDropdown&&e.addClass(k),b.css({width:u[0].style.width}),m.plugins.names.length&&(l="plugin-"+m.plugins.names.join(" plugin-"),b.addClass(l),e.addClass(l)),(null===n.maxItems||n.maxItems>1)&&m.tagType===v&&u.attr("multiple","multiple"),m.settings.placeholder&&d.attr("placeholder",n.placeholder),u.attr("autocorrect")&&d.attr("autocorrect",u.attr("autocorrect")),u.attr("autocapitalize")&&d.attr("autocapitalize",u.attr("autocapitalize")),m.$wrapper=b,m.$control=c,m.$control_input=d,m.$dropdown=e,m.$dropdown_content=g,e.on("mouseenter","[data-selectable]",function(){return m.onOptionHover.apply(m,arguments)}),e.on("mousedown","[data-selectable]",function(){return m.onOptionSelect.apply(m,arguments)}),G(c,"mousedown","*:not(input)",function(){return m.onItemSelect.apply(m,arguments)}),K(d),c.on({mousedown:function(){return m.onMouseDown.apply(m,arguments)},click:function(){return m.onClick.apply(m,arguments)}}),d.on({mousedown:function(a){a.stopPropagation()},keydown:function(){return m.onKeyDown.apply(m,arguments)},keyup:function(){return m.onKeyUp.apply(m,arguments)},keypress:function(){return m.onKeyPress.apply(m,arguments)},resize:function(){m.positionDropdown.apply(m,[])},blur:function(){return m.onBlur.apply(m,arguments)},focus:function(){return m.ignoreBlur=!1,m.onFocus.apply(m,arguments)},paste:function(){return m.onPaste.apply(m,arguments)}}),q.on("keydown"+o,function(a){m.isCmdDown=a[f?"metaKey":"ctrlKey"],m.isCtrlDown=a[f?"altKey":"ctrlKey"],m.isShiftDown=a.shiftKey}),q.on("keyup"+o,function(a){a.keyCode===t&&(m.isCtrlDown=!1),a.keyCode===r&&(m.isShiftDown=!1),a.keyCode===s&&(m.isCmdDown=!1)}),q.on("mousedown"+o,function(a){if(m.isFocused){if(a.target===m.$dropdown[0]||a.target.parentNode===m.$dropdown[0])return!1;m.$control.has(a.target).length||a.target===m.$control[0]||m.blur()}}),p.on(["scroll"+o,"resize"+o].join(" "),function(){m.isOpen&&m.positionDropdown.apply(m,arguments)}),p.on("mousemove"+o,function(){m.ignoreHover=!1}),this.revertSettings={$children:u.children().detach(),tabindex:u.attr("tabindex")},u.attr("tabindex",-1).hide().after(m.$wrapper),a.isArray(n.items)&&(m.setValue(n.items),delete n.items),u[0].validity&&u.on("invalid"+o,function(a){a.preventDefault(),m.isInvalid=!0,m.refreshState()}),m.updateOriginalInput(),m.refreshItems(),m.refreshState(),m.updatePlaceholder(),m.isSetup=!0,u.is(":disabled")&&m.disable(),m.on("change",this.onChange),u.data("selectize",m),u.addClass("selectized"),m.trigger("initialize"),n.preload===!0&&m.onSearchChange("")},setupTemplates:function(){var b=this,c=b.settings.labelField,d=b.settings.optgroupLabelField,e={optgroup:function(a){return'<div class="optgroup">'+a.html+"</div>"},optgroup_header:function(a,b){return'<div class="optgroup-header">'+b(a[d])+"</div>"},option:function(a,b){return'<div class="option">'+b(a[c])+"</div>"},item:function(a,b){return'<div class="item">'+b(a[c])+"</div>"},option_create:function(a,b){return'<div class="create">Add <strong>'+b(a.input)+"</strong>&hellip;</div>"}};b.settings.render=a.extend({},e,b.settings.render)},setupCallbacks:function(){var a,b,c={initialize:"onInitialize",change:"onChange",item_add:"onItemAdd",item_remove:"onItemRemove",clear:"onClear",option_add:"onOptionAdd",option_remove:"onOptionRemove",option_clear:"onOptionClear",dropdown_open:"onDropdownOpen",dropdown_close:"onDropdownClose",type:"onType",load:"onLoad"};
for(a in c)c.hasOwnProperty(a)&&(b=this.settings[c[a]],b&&this.on(a,b))},onClick:function(a){var b=this;b.isFocused||(b.focus(),a.preventDefault())},onMouseDown:function(b){var c=this,d=b.isDefaultPrevented();if(a(b.target),c.isFocused){if(b.target!==c.$control_input[0])return"single"===c.settings.mode?c.isOpen?c.close():c.open():d||c.setActiveItem(null),!1}else d||window.setTimeout(function(){c.focus()},0)},onChange:function(){this.$input.trigger("change")},onPaste:function(a){var b=this;(b.isFull()||b.isInputHidden||b.isLocked)&&a.preventDefault()},onKeyPress:function(a){if(this.isLocked)return a&&a.preventDefault();var b=String.fromCharCode(a.keyCode||a.which);return this.settings.create&&b===this.settings.delimiter?(this.createItem(),a.preventDefault(),!1):void 0},onKeyDown:function(a){var b=(a.target===this.$control_input[0],this);if(b.isLocked)return void(a.keyCode!==u&&a.preventDefault());switch(a.keyCode){case g:if(b.isCmdDown)return void b.selectAll();break;case i:return void b.close();case o:if(!a.ctrlKey||a.altKey)break;case n:if(!b.isOpen&&b.hasOptions)b.open();else if(b.$activeOption){b.ignoreHover=!0;var c=b.getAdjacentOption(b.$activeOption,1);c.length&&b.setActiveOption(c,!0,!0)}return void a.preventDefault();case l:if(!a.ctrlKey||a.altKey)break;case k:if(b.$activeOption){b.ignoreHover=!0;var d=b.getAdjacentOption(b.$activeOption,-1);d.length&&b.setActiveOption(d,!0,!0)}return void a.preventDefault();case h:return b.isOpen&&b.$activeOption&&b.onOptionSelect({currentTarget:b.$activeOption}),void a.preventDefault();case j:return void b.advanceSelection(-1,a);case m:return void b.advanceSelection(1,a);case u:return b.settings.selectOnTab&&b.isOpen&&b.$activeOption&&(b.onOptionSelect({currentTarget:b.$activeOption}),a.preventDefault()),void(b.settings.create&&b.createItem()&&a.preventDefault());case p:case q:return void b.deleteSelection(a)}return!b.isFull()&&!b.isInputHidden||(f?a.metaKey:a.ctrlKey)?void 0:void a.preventDefault()},onKeyUp:function(a){var b=this;if(b.isLocked)return a&&a.preventDefault();var c=b.$control_input.val()||"";b.lastValue!==c&&(b.lastValue=c,b.onSearchChange(c),b.refreshOptions(),b.trigger("type",c))},onSearchChange:function(a){var b=this,c=b.settings.load;c&&(b.loadedSearches.hasOwnProperty(a)||(b.loadedSearches[a]=!0,b.load(function(d){c.apply(b,[a,d])})))},onFocus:function(a){var b=this;return b.isFocused=!0,b.isDisabled?(b.blur(),a&&a.preventDefault(),!1):void(b.ignoreFocus||("focus"===b.settings.preload&&b.onSearchChange(""),b.$activeItems.length||(b.showInput(),b.setActiveItem(null),b.refreshOptions(!!b.settings.openOnFocus)),b.refreshState()))},onBlur:function(a){var b=this;if(b.isFocused=!1,!b.ignoreFocus){if(!b.ignoreBlur&&document.activeElement===b.$dropdown_content[0])return b.ignoreBlur=!0,void b.onFocus(a);b.settings.create&&b.settings.createOnBlur&&b.createItem(!1),b.close(),b.setTextboxValue(""),b.setActiveItem(null),b.setActiveOption(null),b.setCaret(b.items.length),b.refreshState()}},onOptionHover:function(a){this.ignoreHover||this.setActiveOption(a.currentTarget,!1)},onOptionSelect:function(b){var c,d,e=this;b.preventDefault&&(b.preventDefault(),b.stopPropagation()),d=a(b.currentTarget),d.hasClass("create")?e.createItem():(c=d.attr("data-value"),"undefined"!=typeof c&&(e.lastQuery=null,e.setTextboxValue(""),e.addItem(c),!e.settings.hideSelected&&b.type&&/mouse/.test(b.type)&&e.setActiveOption(e.getOption(c))))},onItemSelect:function(a){var b=this;b.isLocked||"multi"===b.settings.mode&&(a.preventDefault(),b.setActiveItem(a.currentTarget,a))},load:function(a){var b=this,c=b.$wrapper.addClass("loading");b.loading++,a.apply(b,[function(a){b.loading=Math.max(b.loading-1,0),a&&a.length&&(b.addOption(a),b.refreshOptions(b.isFocused&&!b.isInputHidden)),b.loading||c.removeClass("loading"),b.trigger("load",a)}])},setTextboxValue:function(a){var b=this.$control_input,c=b.val()!==a;c&&(b.val(a).triggerHandler("update"),this.lastValue=a)},getValue:function(){return this.tagType===v&&this.$input.attr("multiple")?this.items:this.items.join(this.settings.delimiter)},setValue:function(a){F(this,["change"],function(){this.clear(),this.addItems(a)})},setActiveItem:function(b,c){var d,e,f,g,h,i,j,k,l=this;if("single"!==l.settings.mode){if(b=a(b),!b.length)return a(l.$activeItems).removeClass("active"),l.$activeItems=[],void(l.isFocused&&l.showInput());if(d=c&&c.type.toLowerCase(),"mousedown"===d&&l.isShiftDown&&l.$activeItems.length){for(k=l.$control.children(".active:last"),g=Array.prototype.indexOf.apply(l.$control[0].childNodes,[k[0]]),h=Array.prototype.indexOf.apply(l.$control[0].childNodes,[b[0]]),g>h&&(j=g,g=h,h=j),e=g;h>=e;e++)i=l.$control[0].childNodes[e],-1===l.$activeItems.indexOf(i)&&(a(i).addClass("active"),l.$activeItems.push(i));c.preventDefault()}else"mousedown"===d&&l.isCtrlDown||"keydown"===d&&this.isShiftDown?b.hasClass("active")?(f=l.$activeItems.indexOf(b[0]),l.$activeItems.splice(f,1),b.removeClass("active")):l.$activeItems.push(b.addClass("active")[0]):(a(l.$activeItems).removeClass("active"),l.$activeItems=[b.addClass("active")[0]]);l.hideInput(),this.isFocused||l.focus()}},setActiveOption:function(b,c,d){var e,f,g,h,i,j=this;j.$activeOption&&j.$activeOption.removeClass("active"),j.$activeOption=null,b=a(b),b.length&&(j.$activeOption=b.addClass("active"),(c||!x(c))&&(e=j.$dropdown_content.height(),f=j.$activeOption.outerHeight(!0),c=j.$dropdown_content.scrollTop()||0,g=j.$activeOption.offset().top-j.$dropdown_content.offset().top+c,h=g,i=g-e+f,g+f>e+c?j.$dropdown_content.stop().animate({scrollTop:i},d?j.settings.scrollDuration:0):c>g&&j.$dropdown_content.stop().animate({scrollTop:h},d?j.settings.scrollDuration:0)))},selectAll:function(){var a=this;"single"!==a.settings.mode&&(a.$activeItems=Array.prototype.slice.apply(a.$control.children(":not(input)").addClass("active")),a.$activeItems.length&&(a.hideInput(),a.close()),a.focus())},hideInput:function(){var a=this;a.setTextboxValue(""),a.$control_input.css({opacity:0,position:"absolute",left:a.rtl?1e4:-1e4}),a.isInputHidden=!0},showInput:function(){this.$control_input.css({opacity:1,position:"relative",left:0}),this.isInputHidden=!1},focus:function(){var a=this;a.isDisabled||(a.ignoreFocus=!0,a.$control_input[0].focus(),window.setTimeout(function(){a.ignoreFocus=!1,a.onFocus()},0))},blur:function(){this.$control_input.trigger("blur")},getScoreFunction:function(a){return this.sifter.getScoreFunction(a,this.getSearchOptions())},getSearchOptions:function(){var a=this.settings,b=a.sortField;return"string"==typeof b&&(b={field:b}),{fields:a.searchField,conjunction:a.searchConjunction,sort:b}},search:function(b){var c,d,e,f=this,g=f.settings,h=this.getSearchOptions();if(g.score&&(e=f.settings.score.apply(this,[b]),"function"!=typeof e))throw new Error('Selectize "score" setting must be a function that returns a function');if(b!==f.lastQuery?(f.lastQuery=b,d=f.sifter.search(b,a.extend(h,{score:e})),f.currentResults=d):d=a.extend(!0,{},f.currentResults),g.hideSelected)for(c=d.items.length-1;c>=0;c--)-1!==f.items.indexOf(y(d.items[c].id))&&d.items.splice(c,1);return d},refreshOptions:function(b){var c,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s;"undefined"==typeof b&&(b=!0);var t=this,u=a.trim(t.$control_input.val()),v=t.search(u),w=t.$dropdown_content,x=t.$activeOption&&y(t.$activeOption.attr("data-value"));if(g=v.items.length,"number"==typeof t.settings.maxOptions&&(g=Math.min(g,t.settings.maxOptions)),h={},t.settings.optgroupOrder)for(i=t.settings.optgroupOrder,c=0;c<i.length;c++)h[i[c]]=[];else i=[];for(c=0;g>c;c++)for(j=t.options[v.items[c].id],k=t.render("option",j),l=j[t.settings.optgroupField]||"",m=a.isArray(l)?l:[l],e=0,f=m&&m.length;f>e;e++)l=m[e],t.optgroups.hasOwnProperty(l)||(l=""),h.hasOwnProperty(l)||(h[l]=[],i.push(l)),h[l].push(k);for(n=[],c=0,g=i.length;g>c;c++)l=i[c],t.optgroups.hasOwnProperty(l)&&h[l].length?(o=t.render("optgroup_header",t.optgroups[l])||"",o+=h[l].join(""),n.push(t.render("optgroup",a.extend({},t.optgroups[l],{html:o})))):n.push(h[l].join(""));if(w.html(n.join("")),t.settings.highlight&&v.query.length&&v.tokens.length)for(c=0,g=v.tokens.length;g>c;c++)d(w,v.tokens[c].regex);if(!t.settings.hideSelected)for(c=0,g=t.items.length;g>c;c++)t.getOption(t.items[c]).addClass("selected");p=t.canCreate(u),p&&(w.prepend(t.render("option_create",{input:u})),s=a(w[0].childNodes[0])),t.hasOptions=v.items.length>0||p,t.hasOptions?(v.items.length>0?(r=x&&t.getOption(x),r&&r.length?q=r:"single"===t.settings.mode&&t.items.length&&(q=t.getOption(t.items[0])),q&&q.length||(q=s&&!t.settings.addPrecedence?t.getAdjacentOption(s,1):w.find("[data-selectable]:first"))):q=s,t.setActiveOption(q),b&&!t.isOpen&&t.open()):(t.setActiveOption(null),b&&t.isOpen&&t.close())},addOption:function(b){var c,d,e,f=this;if(a.isArray(b))for(c=0,d=b.length;d>c;c++)f.addOption(b[c]);else e=y(b[f.settings.valueField]),"string"!=typeof e||f.options.hasOwnProperty(e)||(f.userOptions[e]=!0,f.options[e]=b,f.lastQuery=null,f.trigger("option_add",e,b))},addOptionGroup:function(a,b){this.optgroups[a]=b,this.trigger("optgroup_add",a,b)},updateOption:function(b,c){var d,e,f,g,h,i,j=this;if(b=y(b),f=y(c[j.settings.valueField]),null!==b&&j.options.hasOwnProperty(b)){if("string"!=typeof f)throw new Error("Value must be set in option data");f!==b&&(delete j.options[b],g=j.items.indexOf(b),-1!==g&&j.items.splice(g,1,f)),j.options[f]=c,h=j.renderCache.item,i=j.renderCache.option,h&&(delete h[b],delete h[f]),i&&(delete i[b],delete i[f]),-1!==j.items.indexOf(f)&&(d=j.getItem(b),e=a(j.render("item",c)),d.hasClass("active")&&e.addClass("active"),d.replaceWith(e)),j.lastQuery=null,j.isOpen&&j.refreshOptions(!1)}},removeOption:function(a){var b=this;a=y(a);var c=b.renderCache.item,d=b.renderCache.option;c&&delete c[a],d&&delete d[a],delete b.userOptions[a],delete b.options[a],b.lastQuery=null,b.trigger("option_remove",a),b.removeItem(a)},clearOptions:function(){var a=this;a.loadedSearches={},a.userOptions={},a.renderCache={},a.options=a.sifter.items={},a.lastQuery=null,a.trigger("option_clear"),a.clear()},getOption:function(a){return this.getElementWithValue(a,this.$dropdown_content.find("[data-selectable]"))},getAdjacentOption:function(b,c){var d=this.$dropdown.find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},getElementWithValue:function(b,c){if(b=y(b),"undefined"!=typeof b&&null!==b)for(var d=0,e=c.length;e>d;d++)if(c[d].getAttribute("data-value")===b)return a(c[d]);return a()},getItem:function(a){return this.getElementWithValue(a,this.$control.children())},addItems:function(b){for(var c=a.isArray(b)?b:[b],d=0,e=c.length;e>d;d++)this.isPending=e-1>d,this.addItem(c[d])},addItem:function(b){F(this,["change"],function(){var c,d,e,f,g,h=this,i=h.settings.mode;return b=y(b),-1!==h.items.indexOf(b)?void("single"===i&&h.close()):void(h.options.hasOwnProperty(b)&&("single"===i&&h.clear(),"multi"===i&&h.isFull()||(c=a(h.render("item",h.options[b])),g=h.isFull(),h.items.splice(h.caretPos,0,b),h.insertAtCaret(c),(!h.isPending||!g&&h.isFull())&&h.refreshState(),h.isSetup&&(e=h.$dropdown_content.find("[data-selectable]"),h.isPending||(d=h.getOption(b),f=h.getAdjacentOption(d,1).attr("data-value"),h.refreshOptions(h.isFocused&&"single"!==i),f&&h.setActiveOption(h.getOption(f))),!e.length||h.isFull()?h.close():h.positionDropdown(),h.updatePlaceholder(),h.trigger("item_add",b,c),h.updateOriginalInput()))))})},removeItem:function(a){var b,c,d,e=this;b="object"==typeof a?a:e.getItem(a),a=y(b.attr("data-value")),c=e.items.indexOf(a),-1!==c&&(b.remove(),b.hasClass("active")&&(d=e.$activeItems.indexOf(b[0]),e.$activeItems.splice(d,1)),e.items.splice(c,1),e.lastQuery=null,!e.settings.persist&&e.userOptions.hasOwnProperty(a)&&e.removeOption(a),c<e.caretPos&&e.setCaret(e.caretPos-1),e.refreshState(),e.updatePlaceholder(),e.updateOriginalInput(),e.positionDropdown(),e.trigger("item_remove",a))},createItem:function(b){var c=this,d=a.trim(c.$control_input.val()||""),e=c.caretPos;if(!c.canCreate(d))return!1;c.lock(),"undefined"==typeof b&&(b=!0);var f="function"==typeof c.settings.create?this.settings.create:function(a){var b={};return b[c.settings.labelField]=a,b[c.settings.valueField]=a,b},g=D(function(a){if(c.unlock(),a&&"object"==typeof a){var d=y(a[c.settings.valueField]);"string"==typeof d&&(c.setTextboxValue(""),c.addOption(a),c.setCaret(e),c.addItem(d),c.refreshOptions(b&&"single"!==c.settings.mode))}}),h=f.apply(this,[d,g]);return"undefined"!=typeof h&&g(h),!0},refreshItems:function(){if(this.lastQuery=null,this.isSetup)for(var a=0;a<this.items.length;a++)this.addItem(this.items);this.refreshState(),this.updateOriginalInput()},refreshState:function(){var a,b=this;b.isRequired&&(b.items.length&&(b.isInvalid=!1),b.$control_input.prop("required",a)),b.refreshClasses()},refreshClasses:function(){var b=this,c=b.isFull(),d=b.isLocked;b.$wrapper.toggleClass("rtl",b.rtl),b.$control.toggleClass("focus",b.isFocused).toggleClass("disabled",b.isDisabled).toggleClass("required",b.isRequired).toggleClass("invalid",b.isInvalid).toggleClass("locked",d).toggleClass("full",c).toggleClass("not-full",!c).toggleClass("input-active",b.isFocused&&!b.isInputHidden).toggleClass("dropdown-active",b.isOpen).toggleClass("has-options",!a.isEmptyObject(b.options)).toggleClass("has-items",b.items.length>0),b.$control_input.data("grow",!c&&!d)},isFull:function(){return null!==this.settings.maxItems&&this.items.length>=this.settings.maxItems},updateOriginalInput:function(){var a,b,c,d=this;if(d.tagType===v){for(c=[],a=0,b=d.items.length;b>a;a++)c.push('<option value="'+z(d.items[a])+'" selected="selected"></option>');c.length||this.$input.attr("multiple")||c.push('<option value="" selected="selected"></option>'),d.$input.html(c.join(""))}else d.$input.val(d.getValue()),d.$input.attr("value",d.$input.val());d.isSetup&&d.trigger("change",d.$input.val())},updatePlaceholder:function(){if(this.settings.placeholder){var a=this.$control_input;this.items.length?a.removeAttr("placeholder"):a.attr("placeholder",this.settings.placeholder),a.triggerHandler("update",{force:!0})}},open:function(){var a=this;a.isLocked||a.isOpen||"multi"===a.settings.mode&&a.isFull()||(a.focus(),a.isOpen=!0,a.refreshState(),a.$dropdown.css({visibility:"hidden",display:"block"}),a.positionDropdown(),a.$dropdown.css({visibility:"visible"}),a.trigger("dropdown_open",a.$dropdown))},close:function(){var a=this,b=a.isOpen;"single"===a.settings.mode&&a.items.length&&a.hideInput(),a.isOpen=!1,a.$dropdown.hide(),a.setActiveOption(null),a.refreshState(),b&&a.trigger("dropdown_close",a.$dropdown)},positionDropdown:function(){var a=this.$control,b="body"===this.settings.dropdownParent?a.offset():a.position();b.top+=a.outerHeight(!0),this.$dropdown.css({width:a.outerWidth(),top:b.top,left:b.left})},clear:function(){var a=this;a.items.length&&(a.$control.children(":not(input)").remove(),a.items=[],a.lastQuery=null,a.setCaret(0),a.setActiveItem(null),a.updatePlaceholder(),a.updateOriginalInput(),a.refreshState(),a.showInput(),a.trigger("clear"))},insertAtCaret:function(b){var c=Math.min(this.caretPos,this.items.length);0===c?this.$control.prepend(b):a(this.$control[0].childNodes[c]).before(b),this.setCaret(c+1)},deleteSelection:function(b){var c,d,e,f,g,h,i,j,k,l=this;if(e=b&&b.keyCode===p?-1:1,f=H(l.$control_input[0]),l.$activeOption&&!l.settings.hideSelected&&(i=l.getAdjacentOption(l.$activeOption,-1).attr("data-value")),g=[],l.$activeItems.length){for(k=l.$control.children(".active:"+(e>0?"last":"first")),h=l.$control.children(":not(input)").index(k),e>0&&h++,c=0,d=l.$activeItems.length;d>c;c++)g.push(a(l.$activeItems[c]).attr("data-value"));b&&(b.preventDefault(),b.stopPropagation())}else(l.isFocused||"single"===l.settings.mode)&&l.items.length&&(0>e&&0===f.start&&0===f.length?g.push(l.items[l.caretPos-1]):e>0&&f.start===l.$control_input.val().length&&g.push(l.items[l.caretPos]));if(!g.length||"function"==typeof l.settings.onDelete&&l.settings.onDelete.apply(l,[g])===!1)return!1;for("undefined"!=typeof h&&l.setCaret(h);g.length;)l.removeItem(g.pop());return l.showInput(),l.positionDropdown(),l.refreshOptions(!0),i&&(j=l.getOption(i),j.length&&l.setActiveOption(j)),!0},advanceSelection:function(a,b){var c,d,e,f,g,h,i=this;0!==a&&(i.rtl&&(a*=-1),c=a>0?"last":"first",d=H(i.$control_input[0]),i.isFocused&&!i.isInputHidden?(f=i.$control_input.val().length,g=0>a?0===d.start&&0===d.length:d.start===f,g&&!f&&i.advanceCaret(a,b)):(h=i.$control.children(".active:"+c),h.length&&(e=i.$control.children(":not(input)").index(h),i.setActiveItem(null),i.setCaret(a>0?e+1:e))))},advanceCaret:function(a,b){var c,d,e=this;0!==a&&(c=a>0?"next":"prev",e.isShiftDown?(d=e.$control_input[c](),d.length&&(e.hideInput(),e.setActiveItem(d),b&&b.preventDefault())):e.setCaret(e.caretPos+a))},setCaret:function(b){var c=this;if(b="single"===c.settings.mode?c.items.length:Math.max(0,Math.min(c.items.length,b)),!c.isPending){var d,e,f,g;for(f=c.$control.children(":not(input)"),d=0,e=f.length;e>d;d++)g=a(f[d]).detach(),b>d?c.$control_input.before(g):c.$control.append(g)}c.caretPos=b},lock:function(){this.close(),this.isLocked=!0,this.refreshState()},unlock:function(){this.isLocked=!1,this.refreshState()},disable:function(){var a=this;a.$input.prop("disabled",!0),a.isDisabled=!0,a.lock()},enable:function(){var a=this;a.$input.prop("disabled",!1),a.isDisabled=!1,a.unlock()},destroy:function(){var b=this,c=b.eventNS,d=b.revertSettings;b.trigger("destroy"),b.off(),b.$wrapper.remove(),b.$dropdown.remove(),b.$input.html("").append(d.$children).removeAttr("tabindex").removeClass("selectized").attr({tabindex:d.tabindex}).show(),b.$control_input.removeData("grow"),b.$input.removeData("selectize"),a(window).off(c),a(document).off(c),a(document.body).off(c),delete b.$input[0].selectize},render:function(a,b){var c,d,e="",f=!1,g=this,h=/^[\t ]*<([a-z][a-z0-9\-_]*(?:\:[a-z][a-z0-9\-_]*)?)/i;return("option"===a||"item"===a)&&(c=y(b[g.settings.valueField]),f=!!c),f&&(x(g.renderCache[a])||(g.renderCache[a]={}),g.renderCache[a].hasOwnProperty(c))?g.renderCache[a][c]:(e=g.settings.render[a].apply(this,[b,z]),("option"===a||"option_create"===a)&&(e=e.replace(h,"<$1 data-selectable")),"optgroup"===a&&(d=b[g.settings.optgroupValueField]||"",e=e.replace(h,'<$1 data-group="'+A(z(d))+'"')),("option"===a||"item"===a)&&(e=e.replace(h,'<$1 data-value="'+A(z(c||""))+'"')),f&&(g.renderCache[a][c]=e),e)},clearCache:function(a){var b=this;"undefined"==typeof a?b.renderCache={}:delete b.renderCache[a]},canCreate:function(a){var b=this;if(!b.settings.create)return!1;var c=b.settings.createFilter;return!(!a.length||"function"==typeof c&&!c.apply(b,[a])||"string"==typeof c&&!new RegExp(c).test(a)||c instanceof RegExp&&!c.test(a))}}),L.count=0,L.defaults={plugins:[],delimiter:",",persist:!0,diacritics:!0,create:!1,createOnBlur:!1,createFilter:null,highlight:!0,openOnFocus:!0,maxOptions:1e3,maxItems:null,hideSelected:null,addPrecedence:!1,selectOnTab:!1,preload:!1,allowEmptyOption:!1,scrollDuration:60,loadThrottle:300,dataAttr:"data-data",optgroupField:"optgroup",valueField:"value",labelField:"text",optgroupLabelField:"label",optgroupValueField:"value",optgroupOrder:null,sortField:"$order",searchField:["text"],searchConjunction:"and",mode:null,wrapperClass:"selectize-control",inputClass:"selectize-input",dropdownClass:"selectize-dropdown",dropdownContentClass:"selectize-dropdown-content",dropdownParent:null,copyClassesToDropdown:!0,render:{}},a.fn.selectize=function(b){var c=a.fn.selectize.defaults,d=a.extend({},c,b),e=d.dataAttr,f=d.labelField,g=d.valueField,h=d.optgroupField,i=d.optgroupLabelField,j=d.optgroupValueField,k=function(b,c){var e,h,i,j,k=a.trim(b.val()||"");if(d.allowEmptyOption||k.length){for(i=k.split(d.delimiter),e=0,h=i.length;h>e;e++)j={},j[f]=i[e],j[g]=i[e],c.options[i[e]]=j;c.items=i}},l=function(b,c){var k,l,m,n,o=0,p=c.options,q=function(a){var b=e&&a.attr(e);return"string"==typeof b&&b.length?JSON.parse(b):null},r=function(b,e){var i,j;if(b=a(b),i=b.attr("value")||"",i.length||d.allowEmptyOption){if(p.hasOwnProperty(i))return void(e&&(p[i].optgroup?a.isArray(p[i].optgroup)?p[i].optgroup.push(e):p[i].optgroup=[p[i].optgroup,e]:p[i].optgroup=e));j=q(b)||{},j[f]=j[f]||b.text(),j[g]=j[g]||i,j[h]=j[h]||e,j.$order=++o,p[i]=j,b.is(":selected")&&c.items.push(i)}},s=function(b){var d,e,f,g,h;for(b=a(b),f=b.attr("label"),f&&(g=q(b)||{},g[i]=f,g[j]=f,c.optgroups[f]=g),h=a("option",b),d=0,e=h.length;e>d;d++)r(h[d],f)};for(c.maxItems=b.attr("multiple")?null:1,n=b.children(),k=0,l=n.length;l>k;k++)m=n[k].tagName.toLowerCase(),"optgroup"===m?s(n[k]):"option"===m&&r(n[k])};return this.each(function(){if(!this.selectize){var e,f=a(this),g=this.tagName.toLowerCase(),h=f.attr("placeholder")||f.attr("data-placeholder");h||d.allowEmptyOption||(h=f.children('option[value=""]').text());var i={placeholder:h,options:{},optgroups:{},items:[]};"select"===g?l(f,i):k(f,i),e=new L(f,a.extend(!0,{},c,i,b))}})},a.fn.selectize.defaults=L.defaults,L.define("drag_drop",function(){if(!a.fn.sortable)throw new Error('The "drag_drop" plugin requires jQuery UI "sortable".');if("multi"===this.settings.mode){var b=this;b.lock=function(){var a=b.lock;return function(){var c=b.$control.data("sortable");return c&&c.disable(),a.apply(b,arguments)}}(),b.unlock=function(){var a=b.unlock;return function(){var c=b.$control.data("sortable");return c&&c.enable(),a.apply(b,arguments)}}(),b.setup=function(){var c=b.setup;return function(){c.apply(this,arguments);var d=b.$control.sortable({items:"[data-value]",forcePlaceholderSize:!0,disabled:b.isLocked,start:function(a,b){b.placeholder.css("width",b.helper.css("width")),d.css({overflow:"visible"})},stop:function(){d.css({overflow:"hidden"});var c=b.$activeItems?b.$activeItems.slice():null,e=[];d.children("[data-value]").each(function(){e.push(a(this).attr("data-value"))}),b.setValue(e),b.setActiveItem(c)}})}}()}}),L.define("dropdown_header",function(b){var c=this;b=a.extend({title:"Untitled",headerClass:"selectize-dropdown-header",titleRowClass:"selectize-dropdown-header-title",labelClass:"selectize-dropdown-header-label",closeClass:"selectize-dropdown-header-close",html:function(a){return'<div class="'+a.headerClass+'"><div class="'+a.titleRowClass+'"><span class="'+a.labelClass+'">'+a.title+'</span><a href="javascript:void(0)" class="'+a.closeClass+'">&times;</a></div></div>'}},b),c.setup=function(){var d=c.setup;return function(){d.apply(c,arguments),c.$dropdown_header=a(b.html(b)),c.$dropdown.prepend(c.$dropdown_header)}}()}),L.define("optgroup_columns",function(b){var c=this;b=a.extend({equalizeWidth:!0,equalizeHeight:!0},b),this.getAdjacentOption=function(b,c){var d=b.closest("[data-group]").find("[data-selectable]"),e=d.index(b)+c;return e>=0&&e<d.length?d.eq(e):a()},this.onKeyDown=function(){var a=c.onKeyDown;return function(b){var d,e,f,g;return!this.isOpen||b.keyCode!==j&&b.keyCode!==m?a.apply(this,arguments):(c.ignoreHover=!0,g=this.$activeOption.closest("[data-group]"),d=g.find("[data-selectable]").index(this.$activeOption),g=b.keyCode===j?g.prev("[data-group]"):g.next("[data-group]"),f=g.find("[data-selectable]"),e=f.eq(Math.min(f.length-1,d)),void(e.length&&this.setActiveOption(e)))}}();var d=function(){var a,b=d.width,c=document;return"undefined"==typeof b&&(a=c.createElement("div"),a.innerHTML='<div style="width:50px;height:50px;position:absolute;left:-50px;top:-50px;overflow:auto;"><div style="width:1px;height:100px;"></div></div>',a=a.firstChild,c.body.appendChild(a),b=d.width=a.offsetWidth-a.clientWidth,c.body.removeChild(a)),b},e=function(){var e,f,g,h,i,j,k;if(k=a("[data-group]",c.$dropdown_content),f=k.length,f&&c.$dropdown_content.width()){if(b.equalizeHeight){for(g=0,e=0;f>e;e++)g=Math.max(g,k.eq(e).height());k.css({height:g})}b.equalizeWidth&&(j=c.$dropdown_content.innerWidth()-d(),h=Math.round(j/f),k.css({width:h}),f>1&&(i=j-h*(f-1),k.eq(f-1).css({width:i})))}};(b.equalizeHeight||b.equalizeWidth)&&(B.after(this,"positionDropdown",e),B.after(this,"refreshOptions",e))}),L.define("remove_button",function(b){if("single"!==this.settings.mode){b=a.extend({label:"&times;",title:"Remove",className:"remove",append:!0},b);var c=this,d='<a href="javascript:void(0)" class="'+b.className+'" tabindex="-1" title="'+z(b.title)+'">'+b.label+"</a>",e=function(a,b){var c=a.search(/(<\/[^>]+>\s*)$/);return a.substring(0,c)+b+a.substring(c)};this.setup=function(){var f=c.setup;return function(){if(b.append){var g=c.settings.render.item;c.settings.render.item=function(){return e(g.apply(this,arguments),d)}}f.apply(this,arguments),this.$control.on("click","."+b.className,function(b){if(b.preventDefault(),!c.isLocked){var d=a(b.currentTarget).parent();c.setActiveItem(d),c.deleteSelection()&&c.setCaret(c.items.length)}})}}()}}),L.define("restore_on_backspace",function(a){var b=this;a.text=a.text||function(a){return a[this.settings.labelField]},this.onKeyDown=function(){var c=b.onKeyDown;return function(b){var d,e;return b.keyCode===p&&""===this.$control_input.val()&&!this.$activeItems.length&&(d=this.caretPos-1,d>=0&&d<this.items.length)?(e=this.options[this.items[d]],this.deleteSelection(b)&&(this.setTextboxValue(a.text.apply(this,[e])),this.refreshOptions(!0)),void b.preventDefault()):c.apply(this,arguments)}}()}),L}),function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?exports.SirTrevor=b(require("jquery")):a.SirTrevor=b(a.jQuery)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){"use strict";var d=c(2);c(50).shim(),c(53),c(54),c(55);var e=c(57),f={config:c(58),log:e.log,Locales:c(59),Events:c(60),EventBus:c(62),EditorStore:c(63),Submittable:c(64),FileUploader:c(65),BlockMixins:c(66),BlockPositioner:c(186),BlockReorder:c(189),BlockDeletion:c(190),BlockValidations:c(191),BlockStore:c(192),BlockManager:c(193),SimpleBlock:c(197),Block:c(196),Blocks:c(194),BlockControl:c(208),BlockControls:c(209),FloatingBlockControls:c(210),FormatBar:c(211),Editor:c(212),toMarkdown:c(215),toHTML:c(200),setDefaults:function(a){Object.assign(f.config.defaults,a||{})},getInstance:e.getInstance,setBlockOptions:function(a,b){var c=f.Blocks[a];d.isUndefined(c)||Object.assign(c.prototype,b||{})},runOnAllInstances:function(a){if(f.Editor.prototype.hasOwnProperty(a)){var b=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(f.config.instances,function(c){c[a].apply(null,b)})}else f.log("method doesn't exist")}};Object.assign(f,c(213)),a.exports=f},function(a,b,c){"use strict";b.isEmpty=c(3),b.isFunction=c(22),b.isObject=c(11),b.isString=c(30),b.isUndefined=c(31),b.result=c(32),b.template=c(33),b.uniqueId=c(49)},function(a,b,c){function d(a){var b=!0;if(!a)return b;var c=l.call(a),d=a.length;return c==h||c==j||c==g||c==i&&"number"==typeof d&&f(a.splice)?!d:(e(a,function(){return b=!1}),b)}var e=c(4),f=c(22),g="[object Arguments]",h="[object Array]",i="[object Object]",j="[object String]",k=Object.prototype,l=k.toString;a.exports=d},function(a,b,c){var d=c(5),e=c(26),f=c(29),g=function(a,b,c){var g,h=a,i=h;if(!h)return i;if(!f[typeof h])return i;b=b&&"undefined"==typeof c?b:d(b,c,3);for(var j=-1,k=f[typeof h]&&e(h),l=k?k.length:0;++j<l;)if(g=k[j],b(h[g],g,a)===!1)return i;return i};a.exports=g},function(a,b,c){function d(a,b,c){if("function"!=typeof a)return f;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(h.funcNames&&(d=!a.name),d=d||!h.funcDecomp,!d)){var l=k.call(a);h.funcNames||(d=!i.test(l)),d||(d=j.test(l),g(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return e(a,b)}var e=c(6),f=c(23),g=c(14),h=c(24),i=/^\s*function[ \n\r\t]+\w/,j=/\bthis\b/,k=Function.prototype.toString;a.exports=d},function(a,b,c){function d(a,b){return arguments.length>2?e(a,17,f(arguments,2),null,b):e(a,1,null,null,b)}var e=c(7),f=c(17);a.exports=d},function(a,b,c){function d(a,b,c,i,l,m){var n=1&b,o=2&b,p=4&b,q=16&b,r=32&b;if(!o&&!g(a))throw new TypeError;q&&!c.length&&(b&=-17,q=c=!1),r&&!i.length&&(b&=-33,r=i=!1);var s=a&&a.__bindData__;if(s&&s!==!0)return s=h(s),s[2]&&(s[2]=h(s[2])),s[3]&&(s[3]=h(s[3])),!n||1&s[1]||(s[4]=l),!n&&1&s[1]&&(b|=8),!p||4&s[1]||(s[5]=m),q&&j.apply(s[2]||(s[2]=[]),c),r&&k.apply(s[3]||(s[3]=[]),i),s[1]|=b,d.apply(null,s);var t=1==b||17===b?e:f;return t([a,b,c,i,l,m])}var e=c(8),f=c(18),g=c(22),h=c(17),i=[],j=i.push,k=i.unshift;a.exports=d},function(a,b,c){function d(a){function b(){if(d){var a=h(d);j.apply(a,arguments)}if(this instanceof b){var g=e(c.prototype),k=c.apply(g,a||arguments);return f(k)?k:g}return c.apply(i,a||arguments)}var c=a[0],d=a[2],i=a[4];return g(b,a),b}var e=c(9),f=c(11),g=c(14),h=c(17),i=[],j=i.push;a.exports=d},function(a,b,c){(function(b){function d(a){return f(a)?g(a):{}}var e=c(10),f=c(11),g=(c(13),e(g=Object.create)&&g);g||(d=function(){function a(){}return function(c){if(f(c)){a.prototype=c;var d=new a;a.prototype=null}return d||b.Object()}}()),a.exports=d}).call(b,function(){return this}())},function(a){function b(a){return"function"==typeof a&&e.test(a)}var c=Object.prototype,d=c.toString,e=RegExp("^"+String(d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=b},function(a,b,c){function d(a){return!(!a||!e[typeof a])}var e=c(12);a.exports=d},function(a){var b={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=b},function(a){function b(){}a.exports=b},function(a,b,c){var d=c(15),e=c(16),f={configurable:!1,enumerable:!1,value:null,writable:!1},g=function(){try{var a={},b=d(b=Object.defineProperty)&&b,c=b(a,a,a)&&b}catch(e){}return c}(),h=g?function(a,b){f.value=b,g(a,"__bindData__",f)}:e;a.exports=h},function(a){function b(a){return"function"==typeof a&&e.test(a)}var c=Object.prototype,d=c.toString,e=RegExp("^"+String(d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=b},function(a){function b(){}a.exports=b},function(a){function b(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}a.exports=b},function(a,b,c){function d(a){function b(){var a=o?m:this;if(k){var g=h(k);j.apply(g,arguments)}if((l||q)&&(g||(g=h(arguments)),l&&j.apply(g,l),q&&g.length<n))return i|=16,d([c,r?i:-4&i,g,null,m,n]);if(g||(g=arguments),p&&(c=a[s]),this instanceof b){a=e(c.prototype);var t=c.apply(a,g);return f(t)?t:a}return c.apply(a,g)}var c=a[0],i=a[1],k=a[2],l=a[3],m=a[4],n=a[5],o=1&i,p=2&i,q=4&i,r=8&i,s=c;return g(b,a),b}var e=c(19),f=c(11),g=c(14),h=c(17),i=[],j=i.push;a.exports=d},function(a,b,c){(function(b){function d(a){return f(a)?g(a):{}}var e=c(20),f=c(11),g=(c(21),e(g=Object.create)&&g);g||(d=function(){function a(){}return function(c){if(f(c)){a.prototype=c;var d=new a;a.prototype=null}return d||b.Object()}}()),a.exports=d}).call(b,function(){return this}())},function(a){function b(a){return"function"==typeof a&&e.test(a)}var c=Object.prototype,d=c.toString,e=RegExp("^"+String(d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=b},function(a){function b(){}a.exports=b},function(a){function b(a){return"function"==typeof a}a.exports=b},function(a){function b(a){return a}a.exports=b},function(a,b,c){(function(b){var d=c(25),e=/\bthis\b/,f={};f.funcDecomp=!d(b.WinRTError)&&e.test(function(){return this}),f.funcNames="string"==typeof Function.name,a.exports=f}).call(b,function(){return this}())},function(a){function b(a){return"function"==typeof a&&e.test(a)}var c=Object.prototype,d=c.toString,e=RegExp("^"+String(d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");
a.exports=b},function(a,b,c){var d=c(27),e=c(11),f=c(28),g=d(g=Object.keys)&&g,h=g?function(a){return e(a)?g(a):[]}:f;a.exports=h},function(a){function b(a){return"function"==typeof a&&e.test(a)}var c=Object.prototype,d=c.toString,e=RegExp("^"+String(d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=b},function(a,b,c){var d=c(29),e=Object.prototype,f=e.hasOwnProperty,g=function(a){var b,c=a,e=[];if(!c)return e;if(!d[typeof a])return e;for(b in c)f.call(c,b)&&e.push(b);return e};a.exports=g},function(a){var b={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=b},function(a){function b(a){return"string"==typeof a||a&&"object"==typeof a&&e.call(a)==c||!1}var c="[object String]",d=Object.prototype,e=d.toString;a.exports=b},function(a){function b(a){return"undefined"==typeof a}a.exports=b},function(a,b,c){function d(a,b){if(a){var c=a[b];return e(c)?a[b]():c}}var e=c(22);a.exports=d},function(a,b,c){function d(a,b,c){var d=i.imports._.templateSettings||i;a=String(a||""),c=e({},c,d);var q,r=e({},c.imports,d.imports),s=g(r),t=j(r),u=0,v=c.interpolate||o,w="__p += '",x=RegExp((c.escape||o).source+"|"+v.source+"|"+(v===h?n:o).source+"|"+(c.evaluate||o).source+"|$","g");a.replace(x,function(b,c,d,e,g,h){return d||(d=e),w+=a.slice(u,h).replace(p,f),c&&(w+="' +\n__e("+c+") +\n'"),g&&(q=!0,w+="';\n"+g+";\n__p += '"),d&&(w+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),u=h+b.length,b}),w+="';\n";var y=c.variable,z=y;z||(y="obj",w="with ("+y+") {\n"+w+"\n}\n"),w=(q?w.replace(k,""):w).replace(l,"$1").replace(m,"$1;"),w="function("+y+") {\n"+(z?"":y+" || ("+y+" = {});\n")+"var __t, __p = '', __e = _.escape"+(q?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+w+"return __p\n}";try{var A=Function(s,"return "+w).apply(void 0,t)}catch(B){throw B.source=w,B}return b?A(b):(A.source=w,A)}var e=c(34),f=(c(40),c(45)),g=c(35),h=c(46),i=c(47),j=c(48),k=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,m=/(__e\(.*?\)|\b__t\)) \+\n'';/g,n=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,o=/($^)/,p=/['\n\r\t\u2028\u2029\\]/g;a.exports=d},function(a,b,c){var d=c(35),e=c(39),f=function(a,b,c){var f,g=a,h=g;if(!g)return h;for(var i=arguments,j=0,k="number"==typeof c?2:i.length;++j<k;)if(g=i[j],g&&e[typeof g])for(var l=-1,m=e[typeof g]&&d(g),n=m?m.length:0;++l<n;)f=m[l],"undefined"==typeof h[f]&&(h[f]=g[f]);return h};a.exports=f},function(a,b,c){var d=c(36),e=c(11),f=c(37),g=d(g=Object.keys)&&g,h=g?function(a){return e(a)?g(a):[]}:f;a.exports=h},function(a){function b(a){return"function"==typeof a&&e.test(a)}var c=Object.prototype,d=c.toString,e=RegExp("^"+String(d).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=b},function(a,b,c){var d=c(38),e=Object.prototype,f=e.hasOwnProperty,g=function(a){var b,c=a,e=[];if(!c)return e;if(!d[typeof a])return e;for(b in c)f.call(c,b)&&e.push(b);return e};a.exports=g},function(a){var b={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=b},function(a){var b={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=b},function(a,b,c){function d(a){return null==a?"":String(a).replace(f,e)}var e=c(41),f=(c(35),c(43));a.exports=d},function(a,b,c){function d(a){return e[a]}var e=c(42);a.exports=d},function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.exports=b},function(a,b,c){var d=c(44),e=c(35),f=RegExp("["+e(d).join("")+"]","g");a.exports=f},function(a){var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.exports=b},function(a){function b(a){return"\\"+c[a]}var c={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"};a.exports=b},function(a){var b=/<%=([\s\S]+?)%>/g;a.exports=b},function(a,b,c){var d=c(40),e=c(46),f={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:e,variable:"",imports:{_:{escape:d}}};a.exports=f},function(a,b,c){function d(a){for(var b=-1,c=e(a),d=c.length,f=Array(d);++b<d;)f[b]=a[c[b]];return f}var e=c(35);a.exports=d},function(a){function b(a){var b=++c;return String(null==a?"":a)+b}var c=0;a.exports=b},function(a,b,c){"use strict";var d=c(51),e=function(a){return"undefined"!=typeof a&&null!==a},f=function(a){if(!e(a))throw new TypeError("target must be an object");var b,c,f,g,h=Object(a);for(b=1;b<arguments.length;++b)for(c=Object(arguments[b]),g=d(c),f=0;f<g.length;++f)h[g[f]]=c[g[f]];return h};f.shim=function(){return Object.assign||(Object.assign=f),Object.assign||f},a.exports=f},function(a,b,c){"use strict";var d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=Array.prototype.slice,g=c(52),h=!{toString:null}.propertyIsEnumerable("toString"),i=function(){}.propertyIsEnumerable("prototype"),j=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],k=function(a){var b=a.constructor;return b&&b.prototype===a},l={$window:!0,$console:!0,$parent:!0,$self:!0,$frames:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0},m=function(){if("undefined"==typeof window)return!1;for(var a in window)if(!l["$"+a]&&d.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{k(window[a])}catch(b){return!0}return!1}(),n=function(a){if("undefined"==typeof window&&!m)return k(a);try{return k(a)}catch(b){return!1}},o=function(a){var b=null!==a&&"object"==typeof a,c="[object Function]"===e.call(a),f=g(a),k=b&&"[object String]"===e.call(a),l=[];if(!b&&!c&&!f)throw new TypeError("Object.keys called on a non-object");var m=i&&c;if(k&&a.length>0&&!d.call(a,0))for(var o=0;o<a.length;++o)l.push(String(o));if(f&&a.length>0)for(var p=0;p<a.length;++p)l.push(String(p));else for(var q in a)m&&"prototype"===q||!d.call(a,q)||l.push(String(q));if(h)for(var r=n(a),s=0;s<j.length;++s)r&&"constructor"===j[s]||!d.call(a,j[s])||l.push(j[s]);return l};o.shim=function(){if(Object.keys){var a=function(){return 2===(Object.keys(arguments)||"").length}(1,2);if(!a){var b=Object.keys;Object.keys=function(a){return b(g(a)?f.call(a):a)}}}else Object.keys=o;return Object.keys||o},a.exports=o},function(a){"use strict";var b=Object.prototype.toString;a.exports=function(a){var c=b.call(a),d="[object Arguments]"===c;return d||(d="[object Array]"!==c&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Function]"===b.call(a.callee)),d}},function(){!function(){if(!Array.prototype.find){var a=function(a){var b=Object(this),c=b.length<0?0:b.length>>>0;if(0===c)return void 0;if("function"!=typeof a||"[object Function]"!==Object.prototype.toString.call(a))throw new TypeError("Array#find: predicate must be a function");for(var d,e=arguments[1],f=0;c>f;f++)if(d=b[f],a.call(e,d,f,b))return d;return void 0};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:a,configurable:!0,enumerable:!1,writable:!0})}catch(b){}Array.prototype.find||(Array.prototype.find=a)}}(this)},function(){"use strict";[].includes||(Array.prototype.includes=function(a){if(void 0===this||null===this)throw new TypeError("Cannot convert this value to object");var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d,e=parseInt(arguments[1])||0;for(e>=0?d=e:(d=c+e,0>d&&(d=0));c>d;){var f=b[d];if(a===f||a!==a&&f!==f)return!0;d++}return!1})},function(a,b,c){"use strict";function d(a){a.preventDefault()}function e(a){a.originalEvent.dataTransfer.dropEffect="copy",g(a.currentTarget).addClass("st-drag-over"),a.preventDefault()}function f(a){g(a.currentTarget).removeClass("st-drag-over"),a.preventDefault()}var g=c(56);g.fn.dropArea=function(){return this.bind("dragenter",d).bind("dragover",e).bind("dragleave",f),this},g.fn.noDropArea=function(){return this.unbind("dragenter").unbind("dragover").unbind("dragleave"),this},g.fn.caretToEnd=function(){var a,b;return a=document.createRange(),a.selectNodeContents(this[0]),a.collapse(!1),b=window.getSelection(),b.removeAllRanges(),b.addRange(a),this}},function(b){b.exports=a},function(a,b,c){"use strict";var d=c(56),e=c(2),f=c(58),g=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,h={getInstance:function(a){return e.isUndefined(a)?f.instances[0]:e.isString(a)?f.instances.find(function(b){return b.ID===a}):f.instances[a]},getInstanceBySelection:function(){return h.getInstance(d(window.getSelection().anchorNode).parents(".st-block").data("instance"))},getBlockBySelection:function(){return h.getInstanceBySelection().findBlockById(d(window.getSelection().anchorNode).parents(".st-block").get(0).id)},log:function(){!e.isUndefined(console)&&f.debug&&console.log.apply(console,arguments)},isURI:function(a){return g.test(a)},titleize:function(a){return null===a?"":(a=String(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()}))},classify:function(a){return h.titleize(String(a).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},flatten:function(a){var b={};return(Array.isArray(a)?a:Object.keys(a)).forEach(function(a){b[a]=!0}),b},underscored:function(a){return a.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(a){return a.split("").reverse().join("")},toSlug:function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}};a.exports=h},function(a){"use strict";var b={html:['<div class="st-block__dropzone">','<span class="st-icon"><%= _.result(block, "icon_name") %></span>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},c={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},d={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};a.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:b,paste_options:c,upload_options:d},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",baseImageUrl:"/sir-trevor-uploads/",errorsContainer:void 0,convertFromMarkdown:!0,formatBar:{commands:[{name:"Bold",title:"bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"link",cmd:"unlink",text:"link"}]}}}},function(a,b,c){"use strict";var d=c(2),e=c(58),f=c(57),g={en:{general:{"delete":"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(f.log("Using i18n stub"),window.i18n={t:function(a,b){var c,f,h,i,j=a.split(":");for(f=g[e.language],i=0;i<j.length;i++)h=j[i],d.isUndefined(f[h])||(f=f[h]);return c=f,d.isString(c)?(c.indexOf("__")>=0&&Object.keys(b).forEach(function(a){c=c.replace("__"+a+"__",b[a])}),c):""}}):(f.log("Using i18next"),i18n.init({resStore:g,fallbackLng:e.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),a.exports=g},function(a,b,c){"use strict";a.exports=c(61)},function(a,b,c){var d;!function(e,f){d=function(){return e.Eventable=f()}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))}(this,function(){function a(a){var b,c=2;return function(){return--c>0?b=a.apply(this,arguments):a=null,b}}function b(a,b){e[a]=function(a,c,d){var e=this._listeners||(this._listeners={}),f=a._listenerId||(a._listenerId=(new Date).getTime());return e[f]=a,"object"==typeof c&&(d=this),a[b](c,d,this),this}}var c=[],d=c.slice,e={on:function(a,b,c){if(!g(this,"on",a,[b,c])||!b)return this;this._events||(this._events={});var d=this._events[a]||(this._events[a]=[]);return d.push({callback:b,context:c,ctx:c||this}),this},once:function(b,c,d){if(!g(this,"once",b,[c,d])||!c)return this;var e=this,f=a(function(){e.off(b,f),c.apply(this,arguments)});return f._callback=c,this.on(b,f,d)},off:function(a,b,c){var d,e,f,h,i,j,k,l;if(!this._events||!g(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:Object.keys(this._events),i=0,j=h.length;j>i;i++)if(a=h[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=f.length;l>k;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=d.call(arguments,1);if(!g(this,"trigger",a,b))return this;var c=this._events[a],e=this._events.all;return c&&h(c,b),e&&h(e,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},f=/\s+/,g=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(f.test(c)){for(var g=c.split(f),h=0,i=g.length;i>h;h++)a[b].apply(a,[g[h]].concat(d));return!1}return!0},h=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}};return b("listenTo","on"),b("listenToOnce","once"),e.bind=e.on,e.unbind=e.off,e})},function(a,b,c){"use strict";a.exports=Object.assign({},c(60))},function(a,b,c){"use strict";var d=c(2),e=c(57),f=function(a,b){this.mediator=b,this.initialize(a?a.trim():"")};Object.assign(f.prototype,{initialize:function(a){this.store=this._parseData(a)||{data:[]}},retrieve:function(){return this.store},toString:function(a){return JSON.stringify(this.store,void 0,a)},reset:function(){e.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(a){return this.store.data.push(a),this.store},_parseData:function(a){var b;if(0===a.length)return b;try{var c=JSON.parse(a);d.isUndefined(c.data)||(b=c)}catch(e){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(e)}return b}}),a.exports=f},function(a,b,c){"use strict";var d=c(56),e=c(57),f=c(62),g=function(a){this.$form=a,this.initialize()};Object.assign(g.prototype,{initialize:function(){this.submitBtn=this.$form.find("input[type='submit']");var a=[];this.submitBtn.each(function(b,c){a.push(d(c).attr("value"))}),this.submitBtnTitles=a,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(a,b){this.submitBtn.attr("value",b)},resetSubmitButton:function(){var a=this.submitBtnTitles;this.submitBtn.each(function(b,c){d(c).attr("value",a[b])})},onUploadStart:function(){this.globalUploadCount++,e.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,e.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(){e.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(a){this.setSubmitButton(null,a||i18n.t("general:wait")),this.submitBtn.attr("disabled","disabled").addClass("disabled")},_enableSubmitButton:function(){this.resetSubmitButton(),this.submitBtn.removeAttr("disabled").removeClass("disabled")},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){Object.keys(this._events).forEach(function(a){f.on(a,this[this._events[a]],this)},this)}}),a.exports=g},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(62);a.exports=function(a,b,c,i){h.trigger("onUploadStart");var j=[a.blockID,(new Date).getTime(),"raw"].join("-"),k=new FormData;k.append("attachment[name]",b.name),k.append("attachment[file]",b),k.append("attachment[uid]",j),a.resetMessages();var l=function(b){g.log("Upload callback called"),h.trigger("onUploadStop",b),!d.isUndefined(c)&&d.isFunction(c)&&c.apply(a,arguments,b)},m=function(b,c,e){g.log("Upload callback error called"),h.trigger("onUploadStop",void 0,e,c,b),!d.isUndefined(i)&&d.isFunction(i)&&i.call(a,c)},n=a.uploadUrl||f.defaults.uploadUrl,o=e.ajax({url:n,data:k,cache:!1,contentType:!1,processData:!1,dataType:"json",type:"POST"});return a.addQueuedItem(j,o),o.done(l).fail(m).always(a.removeQueuedItem.bind(a,j)),o}},function(a,b,c){"use strict";a.exports={Ajaxable:c(67),Controllable:c(68),Droppable:c(69),Fetchable:c(70),Pastable:c(71),Uploadable:c(72),MultiEditable:c(73)}},function(a,b,c){"use strict";var d=c(57);a.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(a,b){d.log("Adding queued item for "+this.blockID+" called "+a),this._queued.push({name:a,deferred:b})},removeQueuedItem:function(a){d.log("Removing queued item for "+this.blockID+" called "+a),this._queued=this._queued.filter(function(b){return b.name!==a})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(a){d.log("Aborting queued request: "+a.name),a.deferred.abort()},this)}}},function(a,b,c){"use strict";var d=c(56),e=c(57);a.exports={mixinName:"Controllable",initializeControllable:function(){e.log("Adding controllable to block "+this.blockID),this.$control_ui=d("<div>",{"class":"st-block__control-ui"}),Object.keys(this.controls).forEach(function(a){this.addUiControl(a,this.controls[a].bind(this))},this),this.$inner.append(this.$control_ui)},getControlTemplate:function(a){return d("<a>",{"data-icon":a,"class":"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+a})},addUiControl:function(a,b){this.$control_ui.append(this.getControlTemplate(a)),this.$control_ui.on("click",".st-block-control-ui-btn--"+a,b)}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(62);a.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){g.log("Adding droppable to block "+this.blockID),this.drop_options=Object.assign({},f.defaults.Block.drop_options,this.drop_options);var a=e(d.template(this.drop_options.html,{block:this,_:d}));this.$editor.hide(),this.$inputs.append(a),this.$dropzone=a,this.$dropzone.dropArea().bind("drop",this._handleDrop.bind(this)),this.$inner.addClass("st-block__inner--droppable")},_handleDrop:function(a){a.preventDefault(),a=a.originalEvent;var b=e(a.target),c=a.dataTransfer.types;b.removeClass("st-dropzone--dragover"),c&&c.some(function(a){return this.valid_drop_file_types.includes(a)},this)&&this.onDrop(a.dataTransfer),h.trigger("block:content:dropped",this.blockID)}}},function(a,b,c){"use strict";var d=c(2),e=c(56);a.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(c(67))},fetch:function(a,b,c){var f=d.uniqueId(this.blockID+"_fetch"),g=e.ajax(a);return this.resetMessages(),this.addQueuedItem(f,g),d.isUndefined(b)||g.done(b.bind(this)),d.isUndefined(c)||g.fail(c.bind(this)),g.always(this.removeQueuedItem.bind(this,f)),g}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57);a.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){g.log("Adding pastable to block "+this.blockID),this.paste_options=Object.assign({},f.defaults.Block.paste_options,this.paste_options),this.$inputs.append(d.template(this.paste_options.html,this)),this.$(".st-paste-block").bind("click",function(){e(this).select()}).bind("paste",this._handleContentPaste).bind("submit",this._handleContentPaste)}}},function(a,b,c){"use strict";var d=c(2),e=c(58),f=c(57),g=c(65);a.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){f.log("Adding uploadable to block "+this.blockID),this.withMixin(c(67)),this.upload_options=Object.assign({},e.defaults.Block.upload_options,this.upload_options),this.$inputs.append(d.template(this.upload_options.html,this))},uploader:function(a,b,c){return g(this,a,b,c)}}},function(a,b,c){"use strict";var d=c(2),e=c(74);a.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(a,b){var c=document.createElement("div");c.innerHTML=a;var f=c.querySelector(".st-block__editor"),g=d.uniqueId("editor-");f.dataset.editorId=g,f.addEventListener("keyup",this.getSelectionForFormatter),f.addEventListener("mouseup",this.getSelectionForFormatter);var h=d.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,i=e.initScribeInstance(f,this.scribeOptions,h);i.setContent(b);var j={node:c.removeChild(c.firstChild),el:f,scribe:i,id:g};return this.editors[g]=j,j},getCurrentTextEditor:function(){var a=document.activeElement.dataset.editorId,b=this.getTextEditor(a);return b&&(this.currentEditor=b),this.currentEditor},appendToTextEditor:function(a,b){var c=this.getTextEditor(a).scribe,d=new c.api.Selection,e=d.range.cloneRange(),f=c.el.lastChild;e.setStartAfter(f),e.collapse(!0),d.selection.removeAllRanges(),d.selection.addRange(e),b&&c.insertHTML(b)},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(a){return this.editors[a]},removeTextEditor:function(a){delete this.editors[a]},execTextBlockCommand:function(a){return e.execTextBlockCommand(this.getCurrentScribeInstance(),a)},queryTextBlockCommandState:function(a){return e.queryTextBlockCommandState(this.getCurrentScribeInstance(),a)}}},function(a,b,c){"use strict";var d=c(75),e=c(77),f=c(58),g=c(143),h=c(144),i=c(145),j={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0};a.exports={initScribeInstance:function(a,b,c){b=b||{};var k={debug:f.scribeDebug},l=j;d.isObject(b)&&(k=Object.assign(k,b));var m=new e(a,k);return b.hasOwnProperty("tags")&&(l=Object.assign(j,b.tags)),m.use(g()),m.use(h()),m.use(i({tags:l})),d.isFunction(c)&&c.call(this,m),m},execTextBlockCommand:function(a,b){if(d.isUndefined(a))throw"No Scribe instance found to query command";var c=a.getCommand(b);return a.el.focus(),c.execute()},queryTextBlockCommandState:function(a,b){if(d.isUndefined(a))throw"No Scribe instance found to query command";var c=a.getCommand(b),e=new a.api.Selection;return e.range&&c.queryState()}}},function(a,b,c){var d;(function(a,e){(function(){function f(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function g(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var d="number"==c?b:z+b;return a=(a=a[c])&&a[d],"object"==c?a&&f(a,b)>-1?0:-1:a?0:-1}function h(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:z+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function i(a){return a.charCodeAt(0)}function j(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||"undefined"==typeof g)return 1;if(h>g||"undefined"==typeof h)return-1}}return a.index-b.index}function l(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],f=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&f&&"object"==typeof f)return!1;var g=o();g["false"]=g["null"]=g["true"]=g.undefined=!1;var i=o();for(i.array=a,i.cache=g,i.push=h;++b<c;)i.push(a[b]);return i}function m(a){return"\\"+eb[a]}function n(){return v.pop()||[]}function o(){return w.pop()||{array:null,cache:null,criteria:null,"false":!1,index:0,"null":!1,number:null,object:null,push:null,string:null,"true":!1,undefined:!1,value:null}}function p(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function q(a){a.length=0,v.length<B&&v.push(a)}function r(a){var b=a.cache;b&&r(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,w.length<B&&w.push(a)}function s(a,b,c){b||(b=0),"undefined"==typeof c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(0>e?0:e);++d<e;)f[d]=a[b+d];return f}function t(a){function b(a){return a&&"object"==typeof a&&!ke(a)&&Rd.call(a,"__wrapped__")?a:new c(a)}function c(a,b){this.__chain__=!!b,this.__wrapped__=a}function d(a){function b(){if(d){var a=s(d);Sd.apply(a,arguments)}if(this instanceof b){var f=h(c.prototype),g=c.apply(f,a||arguments);return Lb(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return je(b,a),b}function e(a,b,c,d,f){if(c){var g=c(a);if("undefined"!=typeof g)return g}var h=Lb(a);if(!h)return a;var i=Kd.call(a);if(!_[i]||!he.nodeClass&&p(a))return a;var j=fe[i];switch(i){case T:case U:return new j(+a);case X:case $:return new j(a);case Z:return g=j(a.source,H.exec(a)),g.lastIndex=a.lastIndex,g}var k=ke(a);if(b){var l=!d;d||(d=n()),f||(f=n());for(var m=d.length;m--;)if(d[m]==a)return f[m];g=k?j(a.length):{}}else g=k?s(a):ve({},a);return k&&(Rd.call(a,"index")&&(g.index=a.index),Rd.call(a,"input")&&(g.input=a.input)),b?(d.push(a),f.push(g),(k?ue:ye)(a,function(a,h){g[h]=e(a,b,c,d,f)}),l&&(q(d),q(f)),g):g}function h(a){return Lb(a)?Yd(a):{}}function v(a,b,c){if("function"!=typeof a)return ed;if("undefined"==typeof b||!("prototype"in a))return a;var d=a.__bindData__;if("undefined"==typeof d&&(he.funcNames&&(d=!a.name),d=d||!he.funcDecomp,!d)){var e=Pd.call(a);he.funcNames||(d=!I.test(e)),d||(d=M.test(e),je(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Pc(a,b)}function w(a){function b(){var a=j?g:this;if(e){var o=s(e);Sd.apply(o,arguments)}if((f||l)&&(o||(o=s(arguments)),f&&Sd.apply(o,f),l&&o.length<i))return d|=16,w([c,m?d:-4&d,o,null,g,i]);if(o||(o=arguments),k&&(c=a[n]),this instanceof b){a=h(c.prototype);var p=c.apply(a,o);return Lb(p)?p:a}return c.apply(a,o)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],i=a[5],j=1&d,k=2&d,l=4&d,m=8&d,n=c;return je(b,a),b}function B(a,b){var c=-1,d=pb(),e=a?a.length:0,h=e>=A&&d===f,i=[];if(h){var j=l(b);j?(d=g,b=j):h=!1}for(;++c<e;){var k=a[c];d(b,k)<0&&i.push(k)}return h&&r(b),i}function eb(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(ke(h)||tb(h))){b||(h=eb(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function gb(a,b,c,d,e,f){if(c){var g=c(a,b);if("undefined"!=typeof g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&db[h]||b&&db[i]))return!1;if(null==a||null==b)return a===b;var j=Kd.call(a),k=Kd.call(b);if(j==R&&(j=Y),k==R&&(k=Y),j!=k)return!1;switch(j){case T:case U:return+a==+b;case X:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Z:case $:return a==Dd(b)}var l=j==S;if(!l){var m=Rd.call(a,"__wrapped__"),o=Rd.call(b,"__wrapped__");if(m||o)return gb(m?a.__wrapped__:a,o?b.__wrapped__:b,c,d,e,f);if(j!=Y||!he.nodeClass&&(p(a)||p(b)))return!1;var r=!he.argsObject&&tb(a)?Bd:a.constructor,s=!he.argsObject&&tb(b)?Bd:b.constructor;if(r!=s&&!(Kb(r)&&r instanceof r&&Kb(s)&&s instanceof s)&&"constructor"in a&&"constructor"in b)return!1}var t=!e;e||(e=n()),f||(f=n());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(g=!0,e.push(a),f.push(b),l){if(u=a.length,v=b.length,g=v==u,g||d)for(;v--;){var w=u,x=b[v];if(d)for(;w--&&!(g=gb(a[w],x,c,d,e,f)););else if(!(g=gb(a[v],x,c,d,e,f)))break}}else xe(b,function(b,h,i){return Rd.call(i,h)?(v++,g=Rd.call(a,h)&&gb(a[h],b,c,d,e,f)):void 0}),g&&!d&&xe(a,function(a,b,c){return Rd.call(c,b)?g=--v>-1:void 0});return e.pop(),f.pop(),t&&(q(e),q(f)),g}function hb(a,b,c,d,e){(ke(b)?dc:ye)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=ke(b))||ze(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l="undefined"!=typeof i)&&(j=i)),l||(j=h?ke(j)?j:[]:ze(j)?j:{}),d.push(b),e.push(j),l||hb(j,b,c,d,e)}}else c&&(i=c(j,b),"undefined"==typeof i&&(i=b)),"undefined"!=typeof i&&(j=i);a[f]=j})}function ib(a,b){return a+Od(ee()*(b-a+1))}function kb(a,b,c){var d=-1,e=pb(),h=a?a.length:0,i=[],j=!b&&h>=A&&e===f,k=c||j?n():i;if(j){var m=l(k);e=g,k=m}for(;++d<h;){var o=a[d],p=c?c(o,d,a):o;(b?!d||k[k.length-1]!==p:e(k,p)<0)&&((c||j)&&k.push(p),i.push(o))}return j?(q(k.array),r(k)):c&&q(k),i}function lb(a){return function(c,d,e){var f={};if(d=b.createCallback(d,e,3),ke(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else ue(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function mb(a,b,c,e,f,g){var h=1&b,i=2&b,j=4&b,k=16&b,l=32&b;if(!i&&!Kb(a))throw new Ed;k&&!c.length&&(b&=-17,k=c=!1),l&&!e.length&&(b&=-33,l=e=!1);var m=a&&a.__bindData__;if(m&&m!==!0)return m=s(m),m[2]&&(m[2]=s(m[2])),m[3]&&(m[3]=s(m[3])),!h||1&m[1]||(m[4]=f),!h&&1&m[1]&&(b|=8),!j||4&m[1]||(m[5]=g),k&&Sd.apply(m[2]||(m[2]=[]),c),l&&Wd.apply(m[3]||(m[3]=[]),e),m[1]|=b,mb.apply(null,m);var n=1==b||17===b?d:w;return n([a,b,c,e,f,g])}function nb(){cb.shadowedProps=P,cb.array=cb.bottom=cb.loop=cb.top="",cb.init="iterable",cb.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)cb[c]=a[c];var d=cb.args;cb.firstArg=/^[^,]+/.exec(d)[0];var e=yd("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+ie(cb)+"\n}");return e(v,V,Gd,Rd,y,tb,ke,Qb,cb.keys,Hd,db,ge,$,Id,Kd)}function ob(a){return qe[a]}function pb(){var a=(a=b.indexOf)===yc?f:a;return a}function qb(a){return"function"==typeof a&&Ld.test(a)}function rb(a){var b,c;return!a||Kd.call(a)!=Y||(b=a.constructor,Kb(b)&&!(b instanceof b))||!he.argsClass&&tb(a)||!he.nodeClass&&p(a)?!1:he.ownLast?(xe(a,function(a,b,d){return c=Rd.call(d,b),!1}),c!==!1):(xe(a,function(a,b){c=b}),"undefined"==typeof c||Rd.call(a,c))}function sb(a){return re[a]}function tb(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kd.call(a)==R||!1}function ub(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),e(a,b,"function"==typeof c&&v(c,d,1))}function vb(a,b,c){return e(a,!0,"function"==typeof b&&v(b,c,1))}function wb(a,b){var c=h(a);return b?ve(c,b):c}function xb(a,c,d){var e;return c=b.createCallback(c,d,3),ye(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function yb(a,c,d){var e;return c=b.createCallback(c,d,3),Ab(a,function(a,b,d){return c(a,b,d)?(e=b,!1):void 0}),e}function zb(a,b,c){var d=[];xe(a,function(a,b){d.push(b,a)});var e=d.length;for(b=v(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function Ab(a,b,c){var d=me(a),e=d.length;for(b=v(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function Bb(a){var b=[];return xe(a,function(a,c){Kb(a)&&b.push(c)
}),b.sort()}function Cb(a,b){return a?Rd.call(a,b):!1}function Db(a){for(var b=-1,c=me(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function Eb(a){return a===!0||a===!1||a&&"object"==typeof a&&Kd.call(a)==T||!1}function Fb(a){return a&&"object"==typeof a&&Kd.call(a)==U||!1}function Gb(a){return a&&1===a.nodeType||!1}function Hb(a){var b=!0;if(!a)return b;var c=Kd.call(a),d=a.length;return c==S||c==$||(he.argsClass?c==R:tb(a))||c==Y&&"number"==typeof d&&Kb(a.splice)?!d:(ye(a,function(){return b=!1}),b)}function Ib(a,b,c,d){return gb(a,b,"function"==typeof c&&v(c,d,2))}function Jb(a){return $d(a)&&!_d(parseFloat(a))}function Kb(a){return"function"==typeof a}function Lb(a){return!(!a||!db[typeof a])}function Mb(a){return Ob(a)&&a!=+a}function Nb(a){return null===a}function Ob(a){return"number"==typeof a||a&&"object"==typeof a&&Kd.call(a)==X||!1}function Pb(a){return a&&db[typeof a]&&Kd.call(a)==Z||!1}function Qb(a){return"string"==typeof a||a&&"object"==typeof a&&Kd.call(a)==$||!1}function Rb(a){return"undefined"==typeof a}function Sb(a,c,d){var e={};return c=b.createCallback(c,d,3),ye(a,function(a,b,d){e[b]=c(a,b,d)}),e}function Tb(a){var b=arguments,c=2;if(!Lb(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=v(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=s(arguments,1,c),f=-1,g=n(),h=n();++f<c;)hb(a,e[f],d,g,h);return q(g),q(h),a}function Ub(a,c,d){var e={};if("function"!=typeof c){var f=[];xe(a,function(a,b){f.push(b)}),f=B(f,eb(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else c=b.createCallback(c,d,3),xe(a,function(a,b,d){c(a,b,d)||(e[b]=a)});return e}function Vb(a){for(var b=-1,c=me(a),d=c.length,e=ud(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Wb(a,c,d){var e={};if("function"!=typeof c)for(var f=-1,g=eb(arguments,!0,!1,1),h=Lb(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else c=b.createCallback(c,d,3),xe(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e}function Xb(a,c,d,e){var f=ke(a);if(null==d)if(f)d=[];else{var g=a&&a.constructor,i=g&&g.prototype;d=h(i)}return c&&(c=b.createCallback(c,e,4),(f?ue:ye)(a,function(a,b,e){return c(d,a,b,e)})),d}function Yb(a){for(var b=-1,c=me(a),d=c.length,e=ud(d);++b<d;)e[b]=a[c[b]];return e}function Zb(a){var b=arguments,c=-1,d=eb(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=ud(e);for(he.unindexedChars&&Qb(a)&&(a=a.split(""));++c<e;)f[c]=a[d[c]];return f}function $b(a,b,c){var d=-1,e=pb(),f=a?a.length:0,g=!1;return c=(0>c?be(0,f+c):c)||0,ke(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Qb(a)?a.indexOf(b,c):e(a,b,c))>-1:ue(a,function(a){return++d>=c?!(g=a===b):void 0}),g}function _b(a,c,d){var e=!0;if(c=b.createCallback(c,d,3),ke(a))for(var f=-1,g=a.length;++f<g&&(e=!!c(a[f],f,a)););else ue(a,function(a,b,d){return e=!!c(a,b,d)});return e}function ac(a,c,d){var e=[];if(c=b.createCallback(c,d,3),ke(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];c(h,f,a)&&e.push(h)}else ue(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e}function bc(a,c,d){if(c=b.createCallback(c,d,3),!ke(a)){var e;return ue(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}for(var f=-1,g=a.length;++f<g;){var h=a[f];if(c(h,f,a))return h}}function cc(a,c,d){var e;return c=b.createCallback(c,d,3),ec(a,function(a,b,d){return c(a,b,d)?(e=a,!1):void 0}),e}function dc(a,b,c){if(b&&"undefined"==typeof c&&ke(a))for(var d=-1,e=a.length;++d<e&&b(a[d],d,a)!==!1;);else ue(a,b,c);return a}function ec(a,b,c){var d=a,e=a?a.length:0;if(b=b&&"undefined"==typeof c?b:v(b,c,3),ke(a))for(;e--&&b(a[e],e,a)!==!1;);else{if("number"!=typeof e){var f=me(a);e=f.length}else he.unindexedChars&&Qb(a)&&(d=a.split(""));ue(a,function(a,c,g){return c=f?f[--e]:--e,b(d[c],c,g)})}return a}function fc(a,b){var c=s(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=ud("number"==typeof f?f:0);return dc(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function gc(a,c,d){var e=-1,f=a?a.length:0,g=ud("number"==typeof f?f:0);if(c=b.createCallback(c,d,3),ke(a))for(;++e<f;)g[e]=c(a[e],e,a);else ue(a,function(a,b,d){g[++e]=c(a,b,d)});return g}function hc(a,c,d){var e=-1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&ke(a))for(var g=-1,h=a.length;++g<h;){var j=a[g];j>f&&(f=j)}else c=null==c&&Qb(a)?i:b.createCallback(c,d,3),ue(a,function(a,b,d){var g=c(a,b,d);g>e&&(e=g,f=a)});return f}function ic(a,c,d){var e=1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&ke(a))for(var g=-1,h=a.length;++g<h;){var j=a[g];f>j&&(f=j)}else c=null==c&&Qb(a)?i:b.createCallback(c,d,3),ue(a,function(a,b,d){var g=c(a,b,d);e>g&&(e=g,f=a)});return f}function jc(a,c,d,e){var f=arguments.length<3;if(c=b.createCallback(c,e,4),ke(a)){var g=-1,h=a.length;for(f&&(d=a[++g]);++g<h;)d=c(d,a[g],g,a)}else ue(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)});return d}function kc(a,c,d,e){var f=arguments.length<3;return c=b.createCallback(c,e,4),ec(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)}),d}function lc(a,c,d){return c=b.createCallback(c,d,3),ac(a,function(a,b,d){return!c(a,b,d)})}function mc(a,b,c){if(a&&"number"!=typeof a.length?a=Yb(a):he.unindexedChars&&Qb(a)&&(a=a.split("")),null==b||c)return a?a[ib(0,a.length-1)]:u;var d=nc(a);return d.length=ce(be(0,b),d.length),d}function nc(a){var b=-1,c=a?a.length:0,d=ud("number"==typeof c?c:0);return dc(a,function(a){var c=ib(0,++b);d[b]=d[c],d[c]=a}),d}function oc(a){var b=a?a.length:0;return"number"==typeof b?b:me(a).length}function pc(a,c,d){var e;if(c=b.createCallback(c,d,3),ke(a))for(var f=-1,g=a.length;++f<g&&!(e=c(a[f],f,a)););else ue(a,function(a,b,d){return!(e=c(a,b,d))});return!!e}function qc(a,c,d){var e=-1,f=ke(c),g=a?a.length:0,h=ud("number"==typeof g?g:0);for(f||(c=b.createCallback(c,d,3)),dc(a,function(a,b,d){var g=h[++e]=o();f?g.criteria=gc(c,function(b){return a[b]}):(g.criteria=n())[0]=c(a,b,d),g.index=e,g.value=a}),g=h.length,h.sort(j);g--;){var i=h[g];h[g]=i.value,f||q(i.criteria),r(i)}return h}function rc(a){return a&&"number"==typeof a.length?he.unindexedChars&&Qb(a)?a.split(""):s(a):Yb(a)}function sc(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function tc(a){return B(a,eb(arguments,!0,!0,1))}function uc(a,c,d){var e=-1,f=a?a.length:0;for(c=b.createCallback(c,d,3);++e<f;)if(c(a[e],e,a))return e;return-1}function vc(a,c,d){var e=a?a.length:0;for(c=b.createCallback(c,d,3);e--;)if(c(a[e],e,a))return e;return-1}function wc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=b.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[0]:u;return s(a,0,ce(be(0,e),f))}function xc(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=gc(a,c,d)),eb(a,b)}function yc(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=0>c?be(0,d+c):c||0}else if(c){var e=Hc(a,b);return a[e]===b?e:-1}return f(a,b,c)}function zc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else e=null==c||d?1:c||e;return s(a,0,ce(be(0,f-e),f))}function Ac(){for(var a=[],b=-1,c=arguments.length,d=n(),e=pb(),h=e===f,i=n();++b<c;){var j=arguments[b];(ke(j)||tb(j))&&(a.push(j),d.push(h&&j.length>=A&&l(b?a[b]:i)))}var k=a[0],m=-1,o=k?k.length:0,p=[];a:for(;++m<o;){var s=d[0];if(j=k[m],(s?g(s,j):e(i,j))<0){for(b=c,(s||i).push(j);--b;)if(s=d[b],(s?g(s,j):e(a[b],j))<0)continue a;p.push(j)}}for(;c--;)s=d[c],s&&r(s);return q(d),q(i),p}function Bc(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(e=c,null==e||d)return a?a[f-1]:u;return s(a,be(0,f-e))}function Cc(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(0>c?be(0,d+c):ce(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function Dc(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Vd.call(a,f--,1),e--);return a}function Ec(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=be(0,Md((b-a)/(c||1))),f=ud(e);++d<e;)f[d]=a,a+=c;return f}function Fc(a,c,d){var e=-1,f=a?a.length:0,g=[];for(c=b.createCallback(c,d,3);++e<f;){var h=a[e];c(h,e,a)&&(g.push(h),Vd.call(a,e--,1),f--)}return g}function Gc(a,c,d){if("number"!=typeof c&&null!=c){var e=0,f=-1,g=a?a.length:0;for(c=b.createCallback(c,d,3);++f<g&&c(a[f],f,a);)e++}else e=null==c||d?1:be(0,c);return s(a,e)}function Hc(a,c,d,e){var f=0,g=a?a.length:f;for(d=d?b.createCallback(d,e,1):ed,c=d(c);g>f;){var h=f+g>>>1;d(a[h])<c?f=h+1:g=h}return f}function Ic(){return kb(eb(arguments,!0,!0))}function Jc(a,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d="function"!=typeof c&&e&&e[c]===a?null:c,c=!1),null!=d&&(d=b.createCallback(d,e,3)),kb(a,c,d)}function Kc(a){return B(a,s(arguments,1))}function Lc(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(ke(c)||tb(c))var d=d?kb(B(d,c).concat(B(c,d))):c}return d||[]}function Mc(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?hc(De(a,"length")):0,d=ud(0>c?0:c);++b<c;)d[b]=De(a,b);return d}function Nc(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||ke(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Oc(a,b){if(!Kb(b))throw new Ed;return function(){return--a<1?b.apply(this,arguments):void 0}}function Pc(a,b){return arguments.length>2?mb(a,17,s(arguments,2),null,b):mb(a,1,null,null,b)}function Qc(a){for(var b=arguments.length>1?eb(arguments,!0,!1,1):Bb(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=mb(a[e],1,null,null,a)}return a}function Rc(a,b){return arguments.length>2?mb(b,19,s(arguments,2),null,a):mb(b,3,null,null,a)}function Sc(){for(var a=arguments,b=a.length;b--;)if(!Kb(a[b]))throw new Ed;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Tc(a,b){return b="number"==typeof b?b:+b||a.length,mb(a,4,null,null,null,b)}function Uc(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Kb(a))throw new Ed;if(b=be(0,b)||0,c===!0){var n=!0;m=!1}else Lb(c)&&(n=c.leading,l="maxWait"in c&&(be(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Fe()-g);if(0>=c){e&&Nd(e);var l=j;e=i=j=u,l&&(k=Fe(),f=a.apply(h,d),i||e||(d=h=null))}else i=Ud(o,c)},p=function(){i&&Nd(i),e=i=j=u,(m||l!==b)&&(k=Fe(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=Fe(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=0>=q;r?(e&&(e=Nd(e)),k=g,f=a.apply(h,d)):e||(e=Ud(p,q))}return r&&i?i=Nd(i):i||b===l||(i=Ud(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Vc(a){if(!Kb(a))throw new Ed;var b=s(arguments,1);return Ud(function(){a.apply(u,b)},1)}function Wc(a,b){if(!Kb(a))throw new Ed;var c=s(arguments,2);return Ud(function(){a.apply(u,c)},b)}function Xc(a,b){if(!Kb(a))throw new Ed;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):z+arguments[0];return Rd.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Yc(a){var b,c;if(!Kb(a))throw new Ed;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Zc(a){return mb(a,16,s(arguments,1))}function $c(a){return mb(a,32,null,s(arguments,1))}function _c(a,b,c){var d=!0,e=!0;if(!Kb(a))throw new Ed;return c===!1?d=!1:Lb(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),ab.leading=d,ab.maxWait=b,ab.trailing=e,Uc(a,b,ab)}function ad(a,b){return mb(b,16,[a])}function bd(a){return function(){return a}}function cd(a,b,c){var d=typeof a;if(null==a||"function"==d)return v(a,b,c);if("object"!=d)return id(a);var e=me(a),f=e[0],g=a[f];return 1!=e.length||g!==g||Lb(g)?function(b){for(var c=e.length,d=!1;c--&&(d=gb(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function dd(a){return null==a?"":Dd(a).replace(te,ob)}function ed(a){return a}function fd(a,d,e){var f=!0,g=d&&Bb(d);d&&(e||g.length)||(null==e&&(e=d),h=c,d=a,a=b,g=Bb(d)),e===!1?f=!1:Lb(e)&&"chain"in e&&(f=e.chain);var h=a,i=Kb(h);dc(g,function(b){var c=a[b]=d[b];i&&(h.prototype[b]=function(){var b=this.__chain__,d=this.__wrapped__,e=[d];Sd.apply(e,arguments);var g=c.apply(a,e);if(f||b){if(d===g&&Lb(g))return this;g=new h(g),g.__chain__=b}return g})})}function gd(){return a._=Jd,this}function hd(){}function id(a){return function(b){return b[a]}}function jd(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=ee();return ce(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return ib(a,b)}function kd(a,b){if(a){var c=a[b];return Kb(c)?a[b]():c}}function ld(a,c,d){var e=b.templateSettings;a=Dd(a||""),d=we({},d,e);var f,g=we({},d.imports,e.imports),h=me(g),i=Yb(g),j=0,k=d.interpolate||L,l="__p += '",n=Cd((d.escape||L).source+"|"+k.source+"|"+(k===J?G:L).source+"|"+(d.evaluate||L).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),l+=a.slice(j,h).replace(N,m),c&&(l+="' +\n__e("+c+") +\n'"),g&&(f=!0,l+="';\n"+g+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=h+b.length,b}),l+="';\n";var o=d.variable,p=o;p||(o="obj",l="with ("+o+") {\n"+l+"\n}\n"),l=(f?l.replace(D,""):l).replace(E,"$1").replace(F,"$1;"),l="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var q="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+Q++ +"]")+"\n*/";try{var r=yd(h,"return "+l+q).apply(u,i)}catch(s){throw s.source=l,s}return c?r(c):(r.source=l,r)}function md(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=ud(a);for(b=v(b,c,1);++d<a;)e[d]=b(d);return e}function nd(a){return null==a?"":Dd(a).replace(se,sb)}function od(a){var b=++x;return Dd(null==a?"":a)+b}function pd(a){return a=new c(a),a.__chain__=!0,a}function qd(a,b){return b(a),a}function rd(){return this.__chain__=!0,this}function sd(){return Dd(this.__wrapped__)}function td(){return this.__wrapped__}a=a?jb.defaults(fb.Object(),a,jb.pick(fb,O)):fb;var ud=a.Array,vd=a.Boolean,wd=a.Date,xd=a.Error,yd=a.Function,zd=a.Math,Ad=a.Number,Bd=a.Object,Cd=a.RegExp,Dd=a.String,Ed=a.TypeError,Fd=[],Gd=xd.prototype,Hd=Bd.prototype,Id=Dd.prototype,Jd=a._,Kd=Hd.toString,Ld=Cd("^"+Dd(Kd).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Md=zd.ceil,Nd=a.clearTimeout,Od=zd.floor,Pd=yd.prototype.toString,Qd=qb(Qd=Bd.getPrototypeOf)&&Qd,Rd=Hd.hasOwnProperty,Sd=Fd.push,Td=Hd.propertyIsEnumerable,Ud=a.setTimeout,Vd=Fd.splice,Wd=Fd.unshift,Xd=function(){try{var a={},b=qb(b=Bd.defineProperty)&&b,c=b(a,a,a)&&b}catch(d){}return c}(),Yd=qb(Yd=Bd.create)&&Yd,Zd=qb(Zd=ud.isArray)&&Zd,$d=a.isFinite,_d=a.isNaN,ae=qb(ae=Bd.keys)&&ae,be=zd.max,ce=zd.min,de=a.parseInt,ee=zd.random,fe={};fe[S]=ud,fe[T]=vd,fe[U]=wd,fe[W]=yd,fe[Y]=Bd,fe[X]=Ad,fe[Z]=Cd,fe[$]=Dd;var ge={};ge[S]=ge[U]=ge[X]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},ge[T]=ge[$]={constructor:!0,toString:!0,valueOf:!0},ge[V]=ge[W]=ge[Z]={constructor:!0,toString:!0},ge[Y]={constructor:!0},function(){for(var a=P.length;a--;){var b=P[a];for(var c in ge)Rd.call(ge,c)&&!Rd.call(ge[c],b)&&(ge[c][b]=!1)}}(),c.prototype=b.prototype;var he=b.support={};!function(){var b=function(){this.x=1},c={0:1,length:1},d=[];b.prototype={valueOf:1,y:1};for(var e in new b)d.push(e);for(e in arguments);he.argsClass=Kd.call(arguments)==R,he.argsObject=arguments.constructor==Bd&&!(arguments instanceof ud),he.enumErrorProps=Td.call(Gd,"message")||Td.call(Gd,"name"),he.enumPrototypes=Td.call(b,"prototype"),he.funcDecomp=!qb(a.WinRTError)&&M.test(t),he.funcNames="string"==typeof yd.name,he.nonEnumArgs=0!=e,he.nonEnumShadows=!/valueOf/.test(d),he.ownLast="x"!=d[0],he.spliceObjects=(Fd.splice.call(c,0,1),!c[0]),he.unindexedChars="x"[0]+Bd("x")[0]!="xx";try{he.nodeClass=!(Kd.call(document)==Y&&!({toString:0}+""))}catch(f){he.nodeClass=!0}}(1),b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:J,variable:"",imports:{_:b}};var ie=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",he.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):he.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),he.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),he.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(he.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),he.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",he.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||he.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};Yd||(h=function(){function b(){}return function(c){if(Lb(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var je=Xd?function(a,b){bb.value=b,Xd(a,"__bindData__",bb),bb.value=null}:hd;he.argsClass||(tb=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Rd.call(a,"callee")&&!Td.call(a,"callee")||!1});var ke=Zd||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kd.call(a)==S||!1},le=nb({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),me=ae?function(a){return Lb(a)?he.enumPrototypes&&"function"==typeof a||he.nonEnumArgs&&a.length&&tb(a)?le(a):ae(a):[]}:le,ne={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:me,loop:"if (callback(iterable[index], index, collection) === false) return result"},oe={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:me,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pe={top:"if (!objectTypes[typeof iterable]) return result;\n"+ne.top,array:!1},qe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},re=Db(qe),se=Cd("("+me(re).join("|")+")","g"),te=Cd("["+me(qe).join("")+"]","g"),ue=nb(ne),ve=nb(oe,{top:oe.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),we=nb(oe),xe=nb(ne,pe,{useHas:!1}),ye=nb(ne,pe);Kb(/x/)&&(Kb=function(a){return"function"==typeof a&&Kd.call(a)==W});var ze=Qd?function(a){if(!a||Kd.call(a)!=Y||!he.argsClass&&tb(a))return!1;var b=a.valueOf,c=qb(b)&&(c=Qd(b))&&Qd(c);return c?a==c||Qd(a)==c:rb(a)}:rb,Ae=lb(function(a,b,c){Rd.call(a,c)?a[c]++:a[c]=1}),Be=lb(function(a,b,c){(Rd.call(a,c)?a[c]:a[c]=[]).push(b)}),Ce=lb(function(a,b,c){a[c]=b}),De=gc,Ee=ac,Fe=qb(Fe=wd.now)&&Fe||function(){return(new wd).getTime()},Ge=8==de(C+"08")?de:function(a,b){return de(Qb(a)?a.replace(K,""):a,b||0)};return b.after=Oc,b.assign=ve,b.at=Zb,b.bind=Pc,b.bindAll=Qc,b.bindKey=Rc,b.chain=pd,b.compact=sc,b.compose=Sc,b.constant=bd,b.countBy=Ae,b.create=wb,b.createCallback=cd,b.curry=Tc,b.debounce=Uc,b.defaults=we,b.defer=Vc,b.delay=Wc,b.difference=tc,b.filter=ac,b.flatten=xc,b.forEach=dc,b.forEachRight=ec,b.forIn=xe,b.forInRight=zb,b.forOwn=ye,b.forOwnRight=Ab,b.functions=Bb,b.groupBy=Be,b.indexBy=Ce,b.initial=zc,b.intersection=Ac,b.invert=Db,b.invoke=fc,b.keys=me,b.map=gc,b.mapValues=Sb,b.max=hc,b.memoize=Xc,b.merge=Tb,b.min=ic,b.omit=Ub,b.once=Yc,b.pairs=Vb,b.partial=Zc,b.partialRight=$c,b.pick=Wb,b.pluck=De,b.property=id,b.pull=Dc,b.range=Ec,b.reject=lc,b.remove=Fc,b.rest=Gc,b.shuffle=nc,b.sortBy=qc,b.tap=qd,b.throttle=_c,b.times=md,b.toArray=rc,b.transform=Xb,b.union=Ic,b.uniq=Jc,b.values=Yb,b.where=Ee,b.without=Kc,b.wrap=ad,b.xor=Lc,b.zip=Mc,b.zipObject=Nc,b.collect=gc,b.drop=Gc,b.each=dc,b.eachRight=ec,b.extend=ve,b.methods=Bb,b.object=Nc,b.select=ac,b.tail=Gc,b.unique=Jc,b.unzip=Mc,fd(b),b.clone=ub,b.cloneDeep=vb,b.contains=$b,b.escape=dd,b.every=_b,b.find=bc,b.findIndex=uc,b.findKey=xb,b.findLast=cc,b.findLastIndex=vc,b.findLastKey=yb,b.has=Cb,b.identity=ed,b.indexOf=yc,b.isArguments=tb,b.isArray=ke,b.isBoolean=Eb,b.isDate=Fb,b.isElement=Gb,b.isEmpty=Hb,b.isEqual=Ib,b.isFinite=Jb,b.isFunction=Kb,b.isNaN=Mb,b.isNull=Nb,b.isNumber=Ob,b.isObject=Lb,b.isPlainObject=ze,b.isRegExp=Pb,b.isString=Qb,b.isUndefined=Rb,b.lastIndexOf=Cc,b.mixin=fd,b.noConflict=gd,b.noop=hd,b.now=Fe,b.parseInt=Ge,b.random=jd,b.reduce=jc,b.reduceRight=kc,b.result=kd,b.runInContext=t,b.size=oc,b.some=pc,b.sortedIndex=Hc,b.template=ld,b.unescape=nd,b.uniqueId=od,b.all=_b,b.any=pc,b.detect=bc,b.findWhere=bc,b.foldl=jc,b.foldr=kc,b.include=$b,b.inject=jc,fd(function(){var a={};return ye(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.first=wc,b.last=Bc,b.sample=mc,b.take=wc,b.head=wc,ye(b,function(a,d){var e="sample"!==d;b.prototype[d]||(b.prototype[d]=function(b,d){var f=this.__chain__,g=a(this.__wrapped__,b,d);return f||null!=b&&(!d||e&&"function"==typeof b)?new c(g,f):g})}),b.VERSION="2.4.2",b.prototype.chain=rd,b.prototype.toString=sd,b.prototype.value=td,b.prototype.valueOf=td,ue(["join","pop","shift"],function(a){var d=Fd[a];b.prototype[a]=function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new c(b,a):b}}),ue(["push","reverse","sort","unshift"],function(a){var c=Fd[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,arguments),this}}),ue(["concat","slice","splice"],function(a){var d=Fd[a];b.prototype[a]=function(){return new c(d.apply(this.__wrapped__,arguments),this.__chain__)}}),he.spliceObjects||ue(["pop","shift","splice"],function(a){var d=Fd[a],e="splice"==a;b.prototype[a]=function(){var a=this.__chain__,b=this.__wrapped__,f=d.apply(b,arguments);return 0===b.length&&delete b[0],a||e?new c(f,a):f}}),b}var u,v=[],w=[],x=0,y={},z=+new Date+"",A=75,B=40,C=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",D=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,F=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,H=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,J=/<%=([\s\S]+?)%>/g,K=RegExp("^["+C+"]*0+(?=.$)"),L=/($^)/,M=/\bthis\b/,N=/['\n\r\t\u2028\u2029\\]/g,O=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],P=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Q=0,R="[object Arguments]",S="[object Array]",T="[object Boolean]",U="[object Date]",V="[object Error]",W="[object Function]",X="[object Number]",Y="[object Object]",Z="[object RegExp]",$="[object String]",_={};_[W]=!1,_[R]=_[S]=_[T]=_[U]=_[X]=_[Y]=_[Z]=_[$]=!0;var ab={leading:!1,maxWait:0,trailing:!1},bb={configurable:!1,enumerable:!1,value:null,writable:!1},cb={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},db={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},eb={"\\":"\\","'":"'","\n":"n","\r":"r","	":"t","\u2028":"u2028","\u2029":"u2029"},fb=db[typeof window]&&window||this,gb=db[typeof b]&&b&&!b.nodeType&&b,hb=db[typeof a]&&a&&!a.nodeType&&a,ib=(hb&&hb.exports===gb&&gb,db[typeof e]&&e);!ib||ib.global!==ib&&ib.window!==ib||(fb=ib);var jb=t();fb._=jb,d=function(){return jb}.call(b,c,b,a),!(d!==u&&(a.exports=d))}).call(this)}).call(b,c(76)(a),function(){return this}())},function(a){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},function(a,b,c){var d,e;d=[c(100),c(129),c(109),c(114),c(116),c(124),c(78),c(137),c(138),c(105),c(103),c(139)],e=function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(j,m){i.call(this),this.el=j,this.commands={},this.options=l.checkOptions(m),this.commandPatches={},this._plainTextFormatterFactory=new n,this._htmlFormatterFactory=new o,this.api=new f(this),this.Immutable=k;var p=g(this);this.transactionManager=new p,this.undoManager=!1,this.options.undo.enabled&&(this.undoManager=this.options.undo.manager?this.options.undo.manager:new h(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1);var q=k.OrderedSet(this.options.defaultPlugins).sort(l.sortByPlugin("setRootPElement")).filter(l.filterByBlockLevelMode(this.allowsBlockElements())).map(function(b){return a[b]}),r=k.List(this.options.defaultFormatters).filter(function(a){return!!c[a]}).map(function(a){return c[a]}),s=k.List.of(e.events),t=k.List(this.options.defaultCommandPatches).map(function(a){return e.commands[a]}),u=k.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(a){return b[a]}),v=k.List().concat(q,r,s,t,u);v.forEach(function(a){this.use(a())}.bind(this)),this.use(d())}function n(){this.formatters=k.List()}function o(){this.formatters={sanitize:k.List(),normalize:k.List(),"export":k.List()}}return m.prototype=Object.create(i.prototype),m.prototype.node=j,m.prototype.element=m.prototype.node,m.prototype.use=function(a){return a(this),this},m.prototype.setHTML=function(a,b){this._lastItem.content=a,b&&(this._skipFormatters=!0),this.el.innerHTML!==a&&(this.el.innerHTML=a)},m.prototype.getHTML=function(){return this.el.innerHTML},m.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},m.prototype.getTextContent=function(){return this.el.textContent},m.prototype.pushHistory=function(){var a=this;if(a.options.undo.enabled){var b=a._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(a.getHTML()!==b){var c=new a.api.Selection;c.placeMarkers();var d=a.getHTML();c.removeMarkers();var e=a.undoManager.item(a.undoManager.position);return(a._merge||a._forceMerge)&&e&&a._lastItem==e[0]?a._lastItem.content=d:(a._lastItem={previousItem:a._lastItem,content:d,scribe:a,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},a.undoManager.transact(a._lastItem,!1)),clearTimeout(a._mergeTimer),a._merge=!0,a._mergeTimer=setTimeout(function(){a._merge=!1},a.options.undo.interval),!0}}return!1},m.prototype.getCommand=function(a){return this.commands[a]||this.commandPatches[a]||new this.api.Command(a)},m.prototype.restoreFromHistory=function(a){this._lastItem=a,this.setHTML(a.content,!0);var b=new this.api.Selection;b.selectMarkers(),this.trigger("content-changed")},m.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},m.prototype.setContent=function(a){this.allowsBlockElements()||(a+="<br>"),this.setHTML(a),this.trigger("content-changed")},m.prototype.insertPlainText=function(a){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(a)+"</p>")},m.prototype.insertHTML=function(a){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(a))},m.prototype.isDebugModeEnabled=function(){return this.options.debug},m.prototype.registerHTMLFormatter=function(a,b){this._htmlFormatterFactory.formatters[a]=this._htmlFormatterFactory.formatters[a].push(b)},m.prototype.registerPlainTextFormatter=function(a){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(a)},n.prototype.format=function(a){var b=this.formatters.reduce(function(a,b){return b(a)},a);return b},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.format=function(a){var b=this.formatters.sanitize.concat(this.formatters.normalize),c=b.reduce(function(a,b){return b(a)},a);return c},o.prototype.formatForExport=function(a){return this.formatters["export"].reduce(function(a,b){return b(a)},a)},m}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(79)],e=function(a){"use strict";return function(b){function c(){this.history=[]}return a(c.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(b.pushHistory(),b.trigger("content-changed"))},run:function(a,c){this.start();try{a&&a()}finally{b._forceMerge=c===!0,this.end(),b._forceMerge=!1}}}),c}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(80),c(96)],e=function(a,b){var c=b(a);return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(81),c(82)],e=function(a,b){function c(c,d,e){var f=b(d);if(!e)return a(d,c,f);for(var g=-1,h=f.length;++g<h;){var i=f[g],j=c[i],k=e(j,d[i],i,c,d);(k===k?k===j:j!==j)&&("undefined"!=typeof j||i in c)||(c[i]=k)}return c}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(83),c(84),c(88),c(89)],e=function(a,b,c,d){var e=b(e=Object.keys)&&e,f=e?function(b){if(b)var f=b.constructor,g=b.length;return"function"==typeof f&&f.prototype===b||"function"!=typeof b&&g&&a(g)?d(b):c(b)?e(b):[]}:d;return f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){return"number"==typeof a&&a>-1&&a%1==0&&b>=a}var b=Math.pow(2,53)-1;return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(85),c(87)],e=function(a,b){function c(a){return null==a?!1:h.call(a)==d?i.test(g.call(a)):b(a)&&e.test(a)||!1}var d="[object Function]",e=/^\[object .+?Constructor\]$/,f=Object.prototype,g=Function.prototype.toString,h=f.toString,i=RegExp("^"+a(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(86)],e=function(a){function b(b){return b=a(b),b&&d.test(b)?b.replace(c,"\\$&"):b}var c=/[.*+?^${}()|[\]\/\\]/g,d=RegExp(c.source);return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){return"string"==typeof a?a:null==a?"":a+""}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){function a(a){return a&&"object"==typeof a||!1
}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){function a(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(90),c(91),c(92),c(83),c(93),c(94)],e=function(a,b,c,d,e,f){function g(g){for(var h=e(g),j=h.length,k=j&&g.length,l=k&&d(k)&&(b(g)||f.nonEnumArgs&&a(g)),m=-1,n=[];++m<j;){var o=h[m];(l&&c(o,k)||i.call(g,o))&&n.push(o)}return n}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(83),c(87)],e=function(a,b){function c(c){var f=b(c)?c.length:d;return a(f)&&g.call(c)==e||!1}var d,e="[object Arguments]",f=Object.prototype,g=f.toString;return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(83),c(84),c(87)],e=function(a,b,c){var d="[object Array]",e=Object.prototype,f=e.toString,g=b(g=Array.isArray)&&g,h=g||function(b){return c(b)&&a(b.length)&&f.call(b)==d||!1};return h}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a,c){return a=+a,c=null==c?b:c,a>-1&&a%1==0&&c>a}var b=Math.pow(2,53)-1;return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(90),c(91),c(92),c(83),c(88),c(94)],e=function(a,b,c,d,e,f){function g(g){if(null==g)return[];e(g)||(g=Object(g));var h=g.length;h=h&&d(h)&&(b(g)||f.nonEnumArgs&&a(g))&&h||0;for(var j=g.constructor,k=-1,l="function"==typeof j&&j.prototype===g,m=Array(h),n=h>0;++k<h;)m[k]=k+"";for(var o in g)n&&c(o,h)||"constructor"==o&&(l||!i.call(g,o))||m.push(o);return m}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(84),c(95)],e=function(a,b){var c=/\bthis\b/,d=Object.prototype,e=(e=b.window)&&e.document,f=d.propertyIsEnumerable,g={};return function(){g.funcDecomp=!a(b.WinRTError)&&c.test(function(){return this}),g.funcNames="string"==typeof Function.name;try{g.dom=11===e.createDocumentFragment().nodeType}catch(d){g.dom=!1}try{g.nonEnumArgs=!f.call(arguments,1)}catch(d){g.nonEnumArgs=!0}}(0,0),g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;(function(a,c){d=[],e=function(){var d={"function":!0,object:!0},e=d[typeof b]&&b&&!b.nodeType&&b,f=d[typeof a]&&a&&!a.nodeType&&a,g=e&&f&&"object"==typeof c&&c,h=d[typeof window]&&window,i=g||h!==(this&&this.window)&&h||this;return i}.apply(b,d),!(void 0!==e&&(a.exports=e))}).call(b,c(76)(a),function(){return this}())},function(a,b,c){var d,e;d=[c(97),c(99)],e=function(a,b){function c(c){return function(){var d=arguments,e=d.length,f=d[0];if(2>e||null==f)return f;var g=d[e-2],h=d[e-1],i=d[3];e>3&&"function"==typeof g?(g=a(g,h,5),e-=2):(g=e>2&&"function"==typeof h?h:null,e-=g?1:0),i&&b(d[1],d[2],i)&&(g=3==e?null:g,e=2);for(var j=0;++j<e;){var k=d[j];k&&c(f,k,g)}return f}}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(98)],e=function(a){function b(b,c,d){if("function"!=typeof b)return a;if("undefined"==typeof c)return b;switch(d){case 1:return function(a){return b.call(c,a)};case 3:return function(a,d,e){return b.call(c,a,d,e)};case 4:return function(a,d,e,f){return b.call(c,a,d,e,f)};case 5:return function(a,d,e,f,g){return b.call(c,a,d,e,f,g)}}return function(){return b.apply(c,arguments)}}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){return a}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(92),c(83),c(88)],e=function(a,b,c){function d(d,e,f){if(!c(f))return!1;var g=typeof e;if("number"==g)var h=f.length,i=b(h)&&a(e,h);else i="string"==g&&e in f;if(i){var j=f[e];return d===d?d===j:j!==j}return!1}return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(101),c(102),c(104),c(108)],e=function(a,b,c,d){"use strict";return{setRootPElement:a,enforcePElements:b,ensureSelectableContainers:c,inlineElementsMode:d}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){""===a.getHTML().trim()&&a.setContent("<p><br></p>")}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(103)],e=function(a){"use strict";return function(){return function(b){function c(b){var c=0;a.List(b.childNodes).filter(function(a){return a.nodeType===Node.TEXT_NODE||!e.isBlockElement(a)}).groupBy(function(a,b,d){return 0===b||a.previousSibling===d.get(b-1)?c:c+=1}).forEach(function(a){e.wrap(a.toArray(),document.createElement("p"))})}function d(a){for(var b,d=0;b=a.children[d++];)"BLOCKQUOTE"===b.tagName&&c(b)}var e=b.node;b.registerHTMLFormatter("normalize",function(a){var b=document.createElement("div");return b.innerHTML=a,c(b),d(b),b.innerHTML})}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a){!function(b,c){a.exports=c()}(this,function(){"use strict";function a(a,b){b&&(a.prototype=Object.create(b.prototype)),a.prototype.constructor=a}function b(a){return a.value=!1,a}function c(a){a&&(a.value=!0)}function d(){}function e(a,b){b=b||0;for(var c=Math.max(0,a.length-b),d=new Array(c),e=0;c>e;e++)d[e]=a[e+b];return d}function f(a){return void 0===a.size&&(a.size=a.__iterate(h)),a.size}function g(a,b){return b>=0?+b:f(a)+ +b}function h(){return!0}function i(a,b,c){return(0===a||void 0!==c&&-c>=a)&&(void 0===b||void 0!==c&&b>=c)}function j(a,b){return l(a,b,0)}function k(a,b){return l(a,b,b)}function l(a,b,c){return void 0===a?c:0>a?Math.max(0,b+a):void 0===b?a:Math.min(b,a)}function m(a){return q(a)?a:D(a)}function n(a){return r(a)?a:E(a)}function o(a){return s(a)?a:F(a)}function p(a){return q(a)&&!t(a)?a:G(a)}function q(a){return!(!a||!a[od])}function r(a){return!(!a||!a[pd])}function s(a){return!(!a||!a[qd])}function t(a){return r(a)||s(a)}function u(a){return!(!a||!a[rd])}function v(a){this.next=a}function w(a,b,c,d){var e=0===a?b:1===a?c:[b,c];return d?d.value=e:d={value:e,done:!1},d}function x(){return{value:void 0,done:!0}}function y(a){return!!B(a)}function z(a){return a&&"function"==typeof a.next}function A(a){var b=B(a);return b&&b.call(a)}function B(a){var b=a&&(vd&&a[vd]||a[wd]);return"function"==typeof b?b:void 0}function C(a){return a&&"number"==typeof a.length}function D(a){return null===a||void 0===a?M():q(a)?a.toSeq():P(a)}function E(a){return null===a||void 0===a?M().toKeyedSeq():q(a)?r(a)?a.toSeq():a.fromEntrySeq():N(a)}function F(a){return null===a||void 0===a?M():q(a)?r(a)?a.entrySeq():a.toIndexedSeq():O(a)}function G(a){return(null===a||void 0===a?M():q(a)?r(a)?a.entrySeq():a:O(a)).toSetSeq()}function H(a){this._array=a,this.size=a.length}function I(a){var b=Object.keys(a);this._object=a,this._keys=b,this.size=b.length}function J(a){this._iterable=a,this.size=a.length||a.size}function K(a){this._iterator=a,this._iteratorCache=[]}function L(a){return!(!a||!a[yd])}function M(){return zd||(zd=new H([]))}function N(a){var b=Array.isArray(a)?new H(a).fromEntrySeq():z(a)?new K(a).fromEntrySeq():y(a)?new J(a).fromEntrySeq():"object"==typeof a?new I(a):void 0;if(!b)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+a);return b}function O(a){var b=Q(a);if(!b)throw new TypeError("Expected Array or iterable object of values: "+a);return b}function P(a){var b=Q(a)||"object"==typeof a&&new I(a);if(!b)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+a);return b}function Q(a){return C(a)?new H(a):z(a)?new K(a):y(a)?new J(a):void 0}function R(a,b,c,d){var e=a._cache;if(e){for(var f=e.length-1,g=0;f>=g;g++){var h=e[c?f-g:g];if(b(h[1],d?h[0]:g,a)===!1)return g+1}return g}return a.__iterateUncached(b,c)}function S(a,b,c,d){var e=a._cache;if(e){var f=e.length-1,g=0;return new v(function(){var a=e[c?f-g:g];return g++>f?x():w(b,d?a[0]:g-1,a[1])})}return a.__iteratorUncached(b,c)}function T(){throw TypeError("Abstract")}function U(){}function V(){}function W(){}function X(a,b){if(a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1;if("function"==typeof a.valueOf&&"function"==typeof b.valueOf){if(a=a.valueOf(),b=b.valueOf(),a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1}return"function"==typeof a.equals&&"function"==typeof b.equals&&a.equals(b)?!0:!1}function Y(a,b){return b?Z(b,a,"",{"":a}):$(a)}function Z(a,b,c,d){return Array.isArray(b)?a.call(d,c,F(b).map(function(c,d){return Z(a,c,d,b)})):_(b)?a.call(d,c,E(b).map(function(c,d){return Z(a,c,d,b)})):b}function $(a){return Array.isArray(a)?F(a).map($).toList():_(a)?E(a).map($).toMap():a}function _(a){return a&&(a.constructor===Object||void 0===a.constructor)}function ab(a){return a>>>1&1073741824|3221225471&a}function bb(a){if(a===!1||null===a||void 0===a)return 0;if("function"==typeof a.valueOf&&(a=a.valueOf(),a===!1||null===a||void 0===a))return 0;if(a===!0)return 1;var b=typeof a;if("number"===b){var c=0|a;for(c!==a&&(c^=4294967295*a);a>4294967295;)a/=4294967295,c^=a;return ab(c)}return"string"===b?a.length>Hd?cb(a):db(a):"function"==typeof a.hashCode?a.hashCode():eb(a)}function cb(a){var b=Kd[a];return void 0===b&&(b=db(a),Jd===Id&&(Jd=0,Kd={}),Jd++,Kd[a]=b),b}function db(a){for(var b=0,c=0;c<a.length;c++)b=31*b+a.charCodeAt(c)|0;return ab(b)}function eb(a){var b;if(Ed&&(b=Ad.get(a),void 0!==b))return b;if(b=a[Gd],void 0!==b)return b;if(!Dd){if(b=a.propertyIsEnumerable&&a.propertyIsEnumerable[Gd],void 0!==b)return b;if(b=fb(a),void 0!==b)return b}if(b=++Fd,1073741824&Fd&&(Fd=0),Ed)Ad.set(a,b);else{if(void 0!==Cd&&Cd(a)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Dd)Object.defineProperty(a,Gd,{enumerable:!1,configurable:!1,writable:!1,value:b});else if(void 0!==a.propertyIsEnumerable&&a.propertyIsEnumerable===a.constructor.prototype.propertyIsEnumerable)a.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},a.propertyIsEnumerable[Gd]=b;else{if(void 0===a.nodeType)throw new Error("Unable to set a non-enumerable property on object.");a[Gd]=b}}return b}function fb(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}function gb(a,b){if(!a)throw new Error(b)}function hb(a){gb(1/0!==a,"Cannot perform this action with an infinite size.")}function ib(a,b){this._iter=a,this._useKeys=b,this.size=a.size}function jb(a){this._iter=a,this.size=a.size}function kb(a){this._iter=a,this.size=a.size}function lb(a){this._iter=a,this.size=a.size}function mb(a){var b=Hb(a);return b._iter=a,b.size=a.size,b.flip=function(){return a},b.reverse=function(){var b=a.reverse.apply(this);return b.flip=function(){return a.reverse()},b},b.has=function(b){return a.includes(b)},b.includes=function(b){return a.has(b)},b.cacheResult=Ib,b.__iterateUncached=function(b,c){var d=this;return a.__iterate(function(a,c){return b(c,a,d)!==!1},c)},b.__iteratorUncached=function(b,c){if(b===ud){var d=a.__iterator(b,c);return new v(function(){var a=d.next();if(!a.done){var b=a.value[0];a.value[0]=a.value[1],a.value[1]=b}return a})}return a.__iterator(b===td?sd:td,c)},b}function nb(a,b,c){var d=Hb(a);return d.size=a.size,d.has=function(b){return a.has(b)},d.get=function(d,e){var f=a.get(d,ld);return f===ld?e:b.call(c,f,d,a)},d.__iterateUncached=function(d,e){var f=this;return a.__iterate(function(a,e,g){return d(b.call(c,a,e,g),e,f)!==!1},e)},d.__iteratorUncached=function(d,e){var f=a.__iterator(ud,e);return new v(function(){var e=f.next();if(e.done)return e;var g=e.value,h=g[0];return w(d,h,b.call(c,g[1],h,a),e)})},d}function ob(a,b){var c=Hb(a);return c._iter=a,c.size=a.size,c.reverse=function(){return a},a.flip&&(c.flip=function(){var b=mb(a);return b.reverse=function(){return a.flip()},b}),c.get=function(c,d){return a.get(b?c:-1-c,d)},c.has=function(c){return a.has(b?c:-1-c)},c.includes=function(b){return a.includes(b)},c.cacheResult=Ib,c.__iterate=function(b,c){var d=this;return a.__iterate(function(a,c){return b(a,c,d)},!c)},c.__iterator=function(b,c){return a.__iterator(b,!c)},c}function pb(a,b,c,d){var e=Hb(a);return d&&(e.has=function(d){var e=a.get(d,ld);return e!==ld&&!!b.call(c,e,d,a)},e.get=function(d,e){var f=a.get(d,ld);return f!==ld&&b.call(c,f,d,a)?f:e}),e.__iterateUncached=function(e,f){var g=this,h=0;return a.__iterate(function(a,f,i){return b.call(c,a,f,i)?(h++,e(a,d?f:h-1,g)):void 0},f),h},e.__iteratorUncached=function(e,f){var g=a.__iterator(ud,f),h=0;return new v(function(){for(;;){var f=g.next();if(f.done)return f;var i=f.value,j=i[0],k=i[1];if(b.call(c,k,j,a))return w(e,d?j:h++,k,f)}})},e}function qb(a,b,c){var d=Lb().asMutable();return a.__iterate(function(e,f){d.update(b.call(c,e,f,a),0,function(a){return a+1})}),d.asImmutable()}function rb(a,b,c){var d=r(a),e=(u(a)?xc():Lb()).asMutable();a.__iterate(function(f,g){e.update(b.call(c,f,g,a),function(a){return a=a||[],a.push(d?[g,f]:f),a})});var f=Gb(a);return e.map(function(b){return Db(a,f(b))})}function sb(a,b,c,d){var e=a.size;if(i(b,c,e))return a;var f=j(b,e),h=k(c,e);if(f!==f||h!==h)return sb(a.toSeq().cacheResult(),b,c,d);var l,m=h-f;m===m&&(l=0>m?0:m);var n=Hb(a);return n.size=l,!d&&L(a)&&l>=0&&(n.get=function(b,c){return b=g(this,b),b>=0&&l>b?a.get(b+f,c):c}),n.__iterateUncached=function(b,c){var e=this;if(0===l)return 0;if(c)return this.cacheResult().__iterate(b,c);var g=0,h=!0,i=0;return a.__iterate(function(a,c){return h&&(h=g++<f)?void 0:(i++,b(a,d?c:i-1,e)!==!1&&i!==l)}),i},n.__iteratorUncached=function(b,c){if(0!==l&&c)return this.cacheResult().__iterator(b,c);var e=0!==l&&a.__iterator(b,c),g=0,h=0;return new v(function(){for(;g++<f;)e.next();if(++h>l)return x();var a=e.next();return d||b===td?a:b===sd?w(b,h-1,void 0,a):w(b,h-1,a.value[1],a)})},n}function tb(a,b,c){var d=Hb(a);return d.__iterateUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterate(d,e);var g=0;return a.__iterate(function(a,e,h){return b.call(c,a,e,h)&&++g&&d(a,e,f)}),g},d.__iteratorUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterator(d,e);var g=a.__iterator(ud,e),h=!0;return new v(function(){if(!h)return x();var a=g.next();if(a.done)return a;var e=a.value,i=e[0],j=e[1];return b.call(c,j,i,f)?d===ud?a:w(d,i,j,a):(h=!1,x())})},d}function ub(a,b,c,d){var e=Hb(a);return e.__iterateUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterate(e,f);var h=!0,i=0;return a.__iterate(function(a,f,j){return h&&(h=b.call(c,a,f,j))?void 0:(i++,e(a,d?f:i-1,g))}),i},e.__iteratorUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterator(e,f);var h=a.__iterator(ud,f),i=!0,j=0;return new v(function(){var a,f,k;do{if(a=h.next(),a.done)return d||e===td?a:e===sd?w(e,j++,void 0,a):w(e,j++,a.value[1],a);var l=a.value;f=l[0],k=l[1],i&&(i=b.call(c,k,f,g))}while(i);return e===ud?a:w(e,f,k,a)})},e}function vb(a,b){var c=r(a),d=[a].concat(b).map(function(a){return q(a)?c&&(a=n(a)):a=c?N(a):O(Array.isArray(a)?a:[a]),a}).filter(function(a){return 0!==a.size});if(0===d.length)return a;if(1===d.length){var e=d[0];if(e===a||c&&r(e)||s(a)&&s(e))return e}var f=new H(d);return c?f=f.toKeyedSeq():s(a)||(f=f.toSetSeq()),f=f.flatten(!0),f.size=d.reduce(function(a,b){if(void 0!==a){var c=b.size;if(void 0!==c)return a+c}},0),f}function wb(a,b,c){var d=Hb(a);return d.__iterateUncached=function(d,e){function f(a,i){var j=this;a.__iterate(function(a,e){return(!b||b>i)&&q(a)?f(a,i+1):d(a,c?e:g++,j)===!1&&(h=!0),!h},e)}var g=0,h=!1;return f(a,0),g},d.__iteratorUncached=function(d,e){var f=a.__iterator(d,e),g=[],h=0;return new v(function(){for(;f;){var a=f.next();if(a.done===!1){var i=a.value;if(d===ud&&(i=i[1]),b&&!(g.length<b)||!q(i))return c?a:w(d,h++,i,a);g.push(f),f=i.__iterator(d,e)}else f=g.pop()}return x()})},d}function xb(a,b,c){var d=Gb(a);return a.toSeq().map(function(e,f){return d(b.call(c,e,f,a))}).flatten(!0)}function yb(a,b){var c=Hb(a);return c.size=a.size&&2*a.size-1,c.__iterateUncached=function(c,d){var e=this,f=0;return a.__iterate(function(a){return(!f||c(b,f++,e)!==!1)&&c(a,f++,e)!==!1},d),f},c.__iteratorUncached=function(c,d){var e,f=a.__iterator(td,d),g=0;return new v(function(){return(!e||g%2)&&(e=f.next(),e.done)?e:g%2?w(c,g++,b):w(c,g++,e.value,e)})},c}function zb(a,b,c){b||(b=Jb);var d=r(a),e=0,f=a.toSeq().map(function(b,d){return[d,b,e++,c?c(b,d,a):b]}).toArray();return f.sort(function(a,c){return b(a[3],c[3])||a[2]-c[2]}).forEach(d?function(a,b){f[b].length=2}:function(a,b){f[b]=a[1]}),d?E(f):s(a)?F(f):G(f)}function Ab(a,b,c){if(b||(b=Jb),c){var d=a.toSeq().map(function(b,d){return[b,c(b,d,a)]}).reduce(function(a,c){return Bb(b,a[1],c[1])?c:a});return d&&d[0]}return a.reduce(function(a,c){return Bb(b,a,c)?c:a})}function Bb(a,b,c){var d=a(c,b);return 0===d&&c!==b&&(void 0===c||null===c||c!==c)||d>0}function Cb(a,b,c){var d=Hb(a);return d.size=new H(c).map(function(a){return a.size}).min(),d.__iterate=function(a,b){for(var c,d=this.__iterator(td,b),e=0;!(c=d.next()).done&&a(c.value,e++,this)!==!1;);return e},d.__iteratorUncached=function(a,d){var e=c.map(function(a){return a=m(a),A(d?a.reverse():a)}),f=0,g=!1;return new v(function(){var c;return g||(c=e.map(function(a){return a.next()}),g=c.some(function(a){return a.done})),g?x():w(a,f++,b.apply(null,c.map(function(a){return a.value})))})},d}function Db(a,b){return L(a)?b:a.constructor(b)}function Eb(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function Fb(a){return hb(a.size),f(a)}function Gb(a){return r(a)?n:s(a)?o:p}function Hb(a){return Object.create((r(a)?E:s(a)?F:G).prototype)}function Ib(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):D.prototype.cacheResult.call(this)}function Jb(a,b){return a>b?1:b>a?-1:0}function Kb(a){var b=A(a);if(!b){if(!C(a))throw new TypeError("Expected iterable or array-like: "+a);b=A(m(a))}return b}function Lb(a){return null===a||void 0===a?Wb():Mb(a)?a:Wb().withMutations(function(b){var c=n(a);hb(c.size),c.forEach(function(a,c){return b.set(c,a)})})}function Mb(a){return!(!a||!a[Ld])}function Nb(a,b){this.ownerID=a,this.entries=b}function Ob(a,b,c){this.ownerID=a,this.bitmap=b,this.nodes=c}function Pb(a,b,c){this.ownerID=a,this.count=b,this.nodes=c}function Qb(a,b,c){this.ownerID=a,this.keyHash=b,this.entries=c}function Rb(a,b,c){this.ownerID=a,this.keyHash=b,this.entry=c}function Sb(a,b,c){this._type=b,this._reverse=c,this._stack=a._root&&Ub(a._root)}function Tb(a,b){return w(a,b[0],b[1])}function Ub(a,b){return{node:a,index:0,__prev:b}}function Vb(a,b,c,d){var e=Object.create(Md);return e.size=a,e._root=b,e.__ownerID=c,e.__hash=d,e.__altered=!1,e}function Wb(){return Nd||(Nd=Vb(0))}function Xb(a,c,d){var e,f;if(a._root){var g=b(md),h=b(nd);if(e=Yb(a._root,a.__ownerID,0,void 0,c,d,g,h),!h.value)return a;f=a.size+(g.value?d===ld?-1:1:0)}else{if(d===ld)return a;f=1,e=new Nb(a.__ownerID,[[c,d]])}return a.__ownerID?(a.size=f,a._root=e,a.__hash=void 0,a.__altered=!0,a):e?Vb(f,e):Wb()}function Yb(a,b,d,e,f,g,h,i){return a?a.update(b,d,e,f,g,h,i):g===ld?a:(c(i),c(h),new Rb(b,e,[f,g]))}function Zb(a){return a.constructor===Rb||a.constructor===Qb}function $b(a,b,c,d,e){if(a.keyHash===d)return new Qb(b,d,[a.entry,e]);var f,g=(0===c?a.keyHash:a.keyHash>>>c)&kd,h=(0===c?d:d>>>c)&kd,i=g===h?[$b(a,b,c+id,d,e)]:(f=new Rb(b,d,e),h>g?[a,f]:[f,a]);return new Ob(b,1<<g|1<<h,i)}function _b(a,b,c,e){a||(a=new d);for(var f=new Rb(a,bb(c),[c,e]),g=0;g<b.length;g++){var h=b[g];f=f.update(a,0,void 0,h[0],h[1])}return f}function ac(a,b,c,d){for(var e=0,f=0,g=new Array(c),h=0,i=1,j=b.length;j>h;h++,i<<=1){var k=b[h];void 0!==k&&h!==d&&(e|=i,g[f++]=k)}return new Ob(a,e,g)}function bc(a,b,c,d,e){for(var f=0,g=new Array(jd),h=0;0!==c;h++,c>>>=1)g[h]=1&c?b[f++]:void 0;return g[d]=e,new Pb(a,f+1,g)}function cc(a,b,c){for(var d=[],e=0;e<c.length;e++){var f=c[e],g=n(f);q(f)||(g=g.map(function(a){return Y(a)})),d.push(g)}return ec(a,b,d)}function dc(a){return function(b,c,d){return b&&b.mergeDeepWith&&q(c)?b.mergeDeepWith(a,c):a?a(b,c,d):c}}function ec(a,b,c){return c=c.filter(function(a){return 0!==a.size}),0===c.length?a:0!==a.size||a.__ownerID||1!==c.length?a.withMutations(function(a){for(var d=b?function(c,d){a.update(d,ld,function(a){return a===ld?c:b(a,c,d)})}:function(b,c){a.set(c,b)},e=0;e<c.length;e++)c[e].forEach(d)}):a.constructor(c[0])}function fc(a,b,c,d){var e=a===ld,f=b.next();if(f.done){var g=e?c:a,h=d(g);return h===g?a:h}gb(e||a&&a.set,"invalid keyPath");var i=f.value,j=e?ld:a.get(i,ld),k=fc(j,b,c,d);return k===j?a:k===ld?a.remove(i):(e?Wb():a).set(i,k)}function gc(a){return a-=a>>1&1431655765,a=(858993459&a)+(a>>2&858993459),a=a+(a>>4)&252645135,a+=a>>8,a+=a>>16,127&a}function hc(a,b,c,d){var f=d?a:e(a);return f[b]=c,f}function ic(a,b,c,d){var e=a.length+1;if(d&&b+1===e)return a[b]=c,a;for(var f=new Array(e),g=0,h=0;e>h;h++)h===b?(f[h]=c,g=-1):f[h]=a[h+g];return f}function jc(a,b,c){var d=a.length-1;if(c&&b===d)return a.pop(),a;for(var e=new Array(d),f=0,g=0;d>g;g++)g===b&&(f=1),e[g]=a[g+f];return e}function kc(a){var b=pc();if(null===a||void 0===a)return b;if(lc(a))return a;var c=o(a),d=c.size;return 0===d?b:(hb(d),d>0&&jd>d?oc(0,d,id,null,new mc(c.toArray())):b.withMutations(function(a){a.setSize(d),c.forEach(function(b,c){return a.set(c,b)})}))}function lc(a){return!(!a||!a[Rd])}function mc(a,b){this.array=a,this.ownerID=b}function nc(a,b){function c(a,b,c){return 0===b?d(a,c):e(a,b,c)}function d(a,c){var d=c===h?i&&i.array:a&&a.array,e=c>f?0:f-c,j=g-c;return j>jd&&(j=jd),function(){if(e===j)return Ud;var a=b?--j:e++;return d&&d[a]}}function e(a,d,e){var h,i=a&&a.array,j=e>f?0:f-e>>d,k=(g-e>>d)+1;return k>jd&&(k=jd),function(){for(;;){if(h){var a=h();if(a!==Ud)return a;h=null}if(j===k)return Ud;var f=b?--k:j++;h=c(i&&i[f],d-id,e+(f<<d))}}}var f=a._origin,g=a._capacity,h=wc(g),i=a._tail;return c(a._root,a._level,0)}function oc(a,b,c,d,e,f,g){var h=Object.create(Sd);return h.size=b-a,h._origin=a,h._capacity=b,h._level=c,h._root=d,h._tail=e,h.__ownerID=f,h.__hash=g,h.__altered=!1,h}function pc(){return Td||(Td=oc(0,0,id))}function qc(a,c,d){if(c=g(a,c),c>=a.size||0>c)return a.withMutations(function(a){0>c?uc(a,c).set(0,d):uc(a,0,c+1).set(c,d)});c+=a._origin;var e=a._tail,f=a._root,h=b(nd);return c>=wc(a._capacity)?e=rc(e,a.__ownerID,0,c,d,h):f=rc(f,a.__ownerID,a._level,c,d,h),h.value?a.__ownerID?(a._root=f,a._tail=e,a.__hash=void 0,a.__altered=!0,a):oc(a._origin,a._capacity,a._level,f,e):a}function rc(a,b,d,e,f,g){var h=e>>>d&kd,i=a&&h<a.array.length;if(!i&&void 0===f)return a;var j;if(d>0){var k=a&&a.array[h],l=rc(k,b,d-id,e,f,g);return l===k?a:(j=sc(a,b),j.array[h]=l,j)}return i&&a.array[h]===f?a:(c(g),j=sc(a,b),void 0===f&&h===j.array.length-1?j.array.pop():j.array[h]=f,j)}function sc(a,b){return b&&a&&b===a.ownerID?a:new mc(a?a.array.slice():[],b)}function tc(a,b){if(b>=wc(a._capacity))return a._tail;if(b<1<<a._level+id){for(var c=a._root,d=a._level;c&&d>0;)c=c.array[b>>>d&kd],d-=id;return c}}function uc(a,b,c){var e=a.__ownerID||new d,f=a._origin,g=a._capacity,h=f+b,i=void 0===c?g:0>c?g+c:f+c;if(h===f&&i===g)return a;if(h>=i)return a.clear();for(var j=a._level,k=a._root,l=0;0>h+l;)k=new mc(k&&k.array.length?[void 0,k]:[],e),j+=id,l+=1<<j;l&&(h+=l,f+=l,i+=l,g+=l);for(var m=wc(g),n=wc(i);n>=1<<j+id;)k=new mc(k&&k.array.length?[k]:[],e),j+=id;var o=a._tail,p=m>n?tc(a,i-1):n>m?new mc([],e):o;if(o&&n>m&&g>h&&o.array.length){k=sc(k,e);for(var q=k,r=j;r>id;r-=id){var s=m>>>r&kd;q=q.array[s]=sc(q.array[s],e)}q.array[m>>>id&kd]=o}if(g>i&&(p=p&&p.removeAfter(e,0,i)),h>=n)h-=n,i-=n,j=id,k=null,p=p&&p.removeBefore(e,0,h);else if(h>f||m>n){for(l=0;k;){var t=h>>>j&kd;if(t!==n>>>j&kd)break;t&&(l+=(1<<j)*t),j-=id,k=k.array[t]}k&&h>f&&(k=k.removeBefore(e,j,h-l)),k&&m>n&&(k=k.removeAfter(e,j,n-l)),l&&(h-=l,i-=l)}return a.__ownerID?(a.size=i-h,a._origin=h,a._capacity=i,a._level=j,a._root=k,a._tail=p,a.__hash=void 0,a.__altered=!0,a):oc(h,i,j,k,p)}function vc(a,b,c){for(var d=[],e=0,f=0;f<c.length;f++){var g=c[f],h=o(g);h.size>e&&(e=h.size),q(g)||(h=h.map(function(a){return Y(a)})),d.push(h)}return e>a.size&&(a=a.setSize(e)),ec(a,b,d)}function wc(a){return jd>a?0:a-1>>>id<<id}function xc(a){return null===a||void 0===a?Ac():yc(a)?a:Ac().withMutations(function(b){var c=n(a);hb(c.size),c.forEach(function(a,c){return b.set(c,a)})})}function yc(a){return Mb(a)&&u(a)}function zc(a,b,c,d){var e=Object.create(xc.prototype);return e.size=a?a.size:0,e._map=a,e._list=b,e.__ownerID=c,e.__hash=d,e}function Ac(){return Vd||(Vd=zc(Wb(),pc()))}function Bc(a,b,c){var d,e,f=a._map,g=a._list,h=f.get(b),i=void 0!==h;if(c===ld){if(!i)return a;g.size>=jd&&g.size>=2*f.size?(e=g.filter(function(a,b){return void 0!==a&&h!==b}),d=e.toKeyedSeq().map(function(a){return a[0]}).flip().toMap(),a.__ownerID&&(d.__ownerID=e.__ownerID=a.__ownerID)):(d=f.remove(b),e=h===g.size-1?g.pop():g.set(h,void 0))}else if(i){if(c===g.get(h)[1])return a;d=f,e=g.set(h,[b,c])}else d=f.set(b,g.size),e=g.set(g.size,[b,c]);return a.__ownerID?(a.size=d.size,a._map=d,a._list=e,a.__hash=void 0,a):zc(d,e)}function Cc(a){return null===a||void 0===a?Fc():Dc(a)?a:Fc().unshiftAll(a)}function Dc(a){return!(!a||!a[Wd])}function Ec(a,b,c,d){var e=Object.create(Xd);return e.size=a,e._head=b,e.__ownerID=c,e.__hash=d,e.__altered=!1,e}function Fc(){return Yd||(Yd=Ec(0))}function Gc(a){return null===a||void 0===a?Kc():Hc(a)?a:Kc().withMutations(function(b){var c=p(a);hb(c.size),c.forEach(function(a){return b.add(a)})})}function Hc(a){return!(!a||!a[Zd])}function Ic(a,b){return a.__ownerID?(a.size=b.size,a._map=b,a):b===a._map?a:0===b.size?a.__empty():a.__make(b)}function Jc(a,b){var c=Object.create($d);return c.size=a?a.size:0,c._map=a,c.__ownerID=b,c}function Kc(){return _d||(_d=Jc(Wb()))}function Lc(a){return null===a||void 0===a?Oc():Mc(a)?a:Oc().withMutations(function(b){var c=p(a);hb(c.size),c.forEach(function(a){return b.add(a)})})}function Mc(a){return Hc(a)&&u(a)}function Nc(a,b){var c=Object.create(ae);return c.size=a?a.size:0,c._map=a,c.__ownerID=b,c}function Oc(){return be||(be=Nc(Ac()))}function Pc(a,b){var c,d=function(f){if(f instanceof d)return f;if(!(this instanceof d))return new d(f);if(!c){c=!0;var g=Object.keys(a);Sc(e,g),e.size=g.length,e._name=b,e._keys=g,e._defaultValues=a}this._map=Lb(f)},e=d.prototype=Object.create(ce);return e.constructor=d,d}function Qc(a,b,c){var d=Object.create(Object.getPrototypeOf(a));return d._map=b,d.__ownerID=c,d}function Rc(a){return a._name||a.constructor.name||"Record"}function Sc(a,b){try{b.forEach(Tc.bind(void 0,a))}catch(c){}}function Tc(a,b){Object.defineProperty(a,b,{get:function(){return this.get(b)},set:function(a){gb(this.__ownerID,"Cannot set on an immutable record."),this.set(b,a)}})}function Uc(a,b){if(a===b)return!0;if(!q(b)||void 0!==a.size&&void 0!==b.size&&a.size!==b.size||void 0!==a.__hash&&void 0!==b.__hash&&a.__hash!==b.__hash||r(a)!==r(b)||s(a)!==s(b)||u(a)!==u(b))return!1;if(0===a.size&&0===b.size)return!0;var c=!t(a);if(u(a)){var d=a.entries();return b.every(function(a,b){var e=d.next().value;return e&&X(e[1],a)&&(c||X(e[0],b))})&&d.next().done}var e=!1;if(void 0===a.size)if(void 0===b.size)"function"==typeof a.cacheResult&&a.cacheResult();else{e=!0;var f=a;a=b,b=f}var g=!0,h=b.__iterate(function(b,d){return(c?a.has(b):e?X(b,a.get(d,ld)):X(a.get(d,ld),b))?void 0:(g=!1,!1)});return g&&a.size===h}function Vc(a,b,c){if(!(this instanceof Vc))return new Vc(a,b,c);if(gb(0!==c,"Cannot step a Range by 0"),a=a||0,void 0===b&&(b=1/0),c=void 0===c?1:Math.abs(c),a>b&&(c=-c),this._start=a,this._end=b,this._step=c,this.size=Math.max(0,Math.ceil((b-a)/c-1)+1),0===this.size){if(de)return de;de=this}}function Wc(a,b){if(!(this instanceof Wc))return new Wc(a,b);if(this._value=a,this.size=void 0===b?1/0:Math.max(0,b),0===this.size){if(ee)return ee;ee=this}}function Xc(a,b){var c=function(c){a.prototype[c]=b[c]};return Object.keys(b).forEach(c),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(b).forEach(c),a}function Yc(a,b){return b}function Zc(a,b){return[b,a]}function $c(a){return function(){return!a.apply(this,arguments)}}function _c(a){return function(){return-a.apply(this,arguments)}}function ad(a){return"string"==typeof a?JSON.stringify(a):a}function bd(){return e(arguments)}function cd(a,b){return b>a?1:a>b?-1:0}function dd(a){if(1/0===a.size)return 0;var b=u(a),c=r(a),d=b?1:0,e=a.__iterate(c?b?function(a,b){d=31*d+fd(bb(a),bb(b))|0}:function(a,b){d=d+fd(bb(a),bb(b))|0}:b?function(a){d=31*d+bb(a)|0}:function(a){d=d+bb(a)|0});return ed(e,d)}function ed(a,b){return b=Bd(b,3432918353),b=Bd(b<<15|b>>>-15,461845907),b=Bd(b<<13|b>>>-13,5),b=(b+3864292196|0)^a,b=Bd(b^b>>>16,2246822507),b=Bd(b^b>>>13,3266489909),b=ab(b^b>>>16)}function fd(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}var gd=Array.prototype.slice,hd="delete",id=5,jd=1<<id,kd=jd-1,ld={},md={value:!1},nd={value:!1};a(n,m),a(o,m),a(p,m),m.isIterable=q,m.isKeyed=r,m.isIndexed=s,m.isAssociative=t,m.isOrdered=u,m.Keyed=n,m.Indexed=o,m.Set=p;var od="@@__IMMUTABLE_ITERABLE__@@",pd="@@__IMMUTABLE_KEYED__@@",qd="@@__IMMUTABLE_INDEXED__@@",rd="@@__IMMUTABLE_ORDERED__@@",sd=0,td=1,ud=2,vd="function"==typeof Symbol&&Symbol.iterator,wd="@@iterator",xd=vd||wd;v.prototype.toString=function(){return"[Iterator]"},v.KEYS=sd,v.VALUES=td,v.ENTRIES=ud,v.prototype.inspect=v.prototype.toSource=function(){return this.toString()},v.prototype[xd]=function(){return this},a(D,m),D.of=function(){return D(arguments)},D.prototype.toSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq {","}")},D.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},D.prototype.__iterate=function(a,b){return R(this,a,b,!0)},D.prototype.__iterator=function(a,b){return S(this,a,b,!0)},a(E,D),E.prototype.toKeyedSeq=function(){return this},a(F,D),F.of=function(){return F(arguments)},F.prototype.toIndexedSeq=function(){return this},F.prototype.toString=function(){return this.__toString("Seq [","]")},F.prototype.__iterate=function(a,b){return R(this,a,b,!1)},F.prototype.__iterator=function(a,b){return S(this,a,b,!1)},a(G,D),G.of=function(){return G(arguments)},G.prototype.toSetSeq=function(){return this},D.isSeq=L,D.Keyed=E,D.Set=G,D.Indexed=F;var yd="@@__IMMUTABLE_SEQ__@@";D.prototype[yd]=!0,a(H,F),H.prototype.get=function(a,b){return this.has(a)?this._array[g(this,a)]:b},H.prototype.__iterate=function(a,b){for(var c=this._array,d=c.length-1,e=0;d>=e;e++)if(a(c[b?d-e:e],e,this)===!1)return e+1;return e},H.prototype.__iterator=function(a,b){var c=this._array,d=c.length-1,e=0;return new v(function(){return e>d?x():w(a,e,c[b?d-e++:e++])})},a(I,E),I.prototype.get=function(a,b){return void 0===b||this.has(a)?this._object[a]:b},I.prototype.has=function(a){return this._object.hasOwnProperty(a)},I.prototype.__iterate=function(a,b){for(var c=this._object,d=this._keys,e=d.length-1,f=0;e>=f;f++){var g=d[b?e-f:f];if(a(c[g],g,this)===!1)return f+1}return f},I.prototype.__iterator=function(a,b){var c=this._object,d=this._keys,e=d.length-1,f=0;return new v(function(){var g=d[b?e-f:f];return f++>e?x():w(a,g,c[g])})},I.prototype[rd]=!0,a(J,F),J.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);var c=this._iterable,d=A(c),e=0;if(z(d))for(var f;!(f=d.next()).done&&a(f.value,e++,this)!==!1;);return e},J.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);var c=this._iterable,d=A(c);if(!z(d))return new v(x);var e=0;return new v(function(){var b=d.next();return b.done?b:w(a,e++,b.value)})},a(K,F),K.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);for(var c=this._iterator,d=this._iteratorCache,e=0;e<d.length;)if(a(d[e],e++,this)===!1)return e;for(var f;!(f=c.next()).done;){var g=f.value;if(d[e]=g,a(g,e++,this)===!1)break}return e},K.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);var c=this._iterator,d=this._iteratorCache,e=0;return new v(function(){if(e>=d.length){var b=c.next();if(b.done)return b;d[e]=b.value
}return w(a,e,d[e++])})};var zd;a(T,m),a(U,T),a(V,T),a(W,T),T.Keyed=U,T.Indexed=V,T.Set=W;var Ad,Bd="function"==typeof Math.imul&&-2===Math.imul(4294967295,2)?Math.imul:function(a,b){a=0|a,b=0|b;var c=65535&a,d=65535&b;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0},Cd=Object.isExtensible,Dd=function(){try{return Object.defineProperty({},"@",{}),!0}catch(a){return!1}}(),Ed="function"==typeof WeakMap;Ed&&(Ad=new WeakMap);var Fd=0,Gd="__immutablehash__";"function"==typeof Symbol&&(Gd=Symbol(Gd));var Hd=16,Id=255,Jd=0,Kd={};a(ib,E),ib.prototype.get=function(a,b){return this._iter.get(a,b)},ib.prototype.has=function(a){return this._iter.has(a)},ib.prototype.valueSeq=function(){return this._iter.valueSeq()},ib.prototype.reverse=function(){var a=this,b=ob(this,!0);return this._useKeys||(b.valueSeq=function(){return a._iter.toSeq().reverse()}),b},ib.prototype.map=function(a,b){var c=this,d=nb(this,a,b);return this._useKeys||(d.valueSeq=function(){return c._iter.toSeq().map(a,b)}),d},ib.prototype.__iterate=function(a,b){var c,d=this;return this._iter.__iterate(this._useKeys?function(b,c){return a(b,c,d)}:(c=b?Fb(this):0,function(e){return a(e,b?--c:c++,d)}),b)},ib.prototype.__iterator=function(a,b){if(this._useKeys)return this._iter.__iterator(a,b);var c=this._iter.__iterator(td,b),d=b?Fb(this):0;return new v(function(){var e=c.next();return e.done?e:w(a,b?--d:d++,e.value,e)})},ib.prototype[rd]=!0,a(jb,F),jb.prototype.includes=function(a){return this._iter.includes(a)},jb.prototype.__iterate=function(a,b){var c=this,d=0;return this._iter.__iterate(function(b){return a(b,d++,c)},b)},jb.prototype.__iterator=function(a,b){var c=this._iter.__iterator(td,b),d=0;return new v(function(){var b=c.next();return b.done?b:w(a,d++,b.value,b)})},a(kb,G),kb.prototype.has=function(a){return this._iter.includes(a)},kb.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){return a(b,b,c)},b)},kb.prototype.__iterator=function(a,b){var c=this._iter.__iterator(td,b);return new v(function(){var b=c.next();return b.done?b:w(a,b.value,b.value,b)})},a(lb,E),lb.prototype.entrySeq=function(){return this._iter.toSeq()},lb.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){if(b){Eb(b);var d=q(b);return a(d?b.get(1):b[1],d?b.get(0):b[0],c)}},b)},lb.prototype.__iterator=function(a,b){var c=this._iter.__iterator(td,b);return new v(function(){for(;;){var b=c.next();if(b.done)return b;var d=b.value;if(d){Eb(d);var e=q(d);return w(a,e?d.get(0):d[0],e?d.get(1):d[1],b)}}})},jb.prototype.cacheResult=ib.prototype.cacheResult=kb.prototype.cacheResult=lb.prototype.cacheResult=Ib,a(Lb,U),Lb.prototype.toString=function(){return this.__toString("Map {","}")},Lb.prototype.get=function(a,b){return this._root?this._root.get(0,void 0,a,b):b},Lb.prototype.set=function(a,b){return Xb(this,a,b)},Lb.prototype.setIn=function(a,b){return this.updateIn(a,ld,function(){return b})},Lb.prototype.remove=function(a){return Xb(this,a,ld)},Lb.prototype.deleteIn=function(a){return this.updateIn(a,function(){return ld})},Lb.prototype.update=function(a,b,c){return 1===arguments.length?a(this):this.updateIn([a],b,c)},Lb.prototype.updateIn=function(a,b,c){c||(c=b,b=void 0);var d=fc(this,Kb(a),b,c);return d===ld?void 0:d},Lb.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Wb()},Lb.prototype.merge=function(){return cc(this,void 0,arguments)},Lb.prototype.mergeWith=function(a){var b=gd.call(arguments,1);return cc(this,a,b)},Lb.prototype.mergeIn=function(a){var b=gd.call(arguments,1);return this.updateIn(a,Wb(),function(a){return"function"==typeof a.merge?a.merge.apply(a,b):b[b.length-1]})},Lb.prototype.mergeDeep=function(){return cc(this,dc(void 0),arguments)},Lb.prototype.mergeDeepWith=function(a){var b=gd.call(arguments,1);return cc(this,dc(a),b)},Lb.prototype.mergeDeepIn=function(a){var b=gd.call(arguments,1);return this.updateIn(a,Wb(),function(a){return"function"==typeof a.mergeDeep?a.mergeDeep.apply(a,b):b[b.length-1]})},Lb.prototype.sort=function(a){return xc(zb(this,a))},Lb.prototype.sortBy=function(a,b){return xc(zb(this,b,a))},Lb.prototype.withMutations=function(a){var b=this.asMutable();return a(b),b.wasAltered()?b.__ensureOwner(this.__ownerID):this},Lb.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},Lb.prototype.asImmutable=function(){return this.__ensureOwner()},Lb.prototype.wasAltered=function(){return this.__altered},Lb.prototype.__iterator=function(a,b){return new Sb(this,a,b)},Lb.prototype.__iterate=function(a,b){var c=this,d=0;return this._root&&this._root.iterate(function(b){return d++,a(b[1],b[0],c)},b),d},Lb.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Vb(this.size,this._root,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)},Lb.isMap=Mb;var Ld="@@__IMMUTABLE_MAP__@@",Md=Lb.prototype;Md[Ld]=!0,Md[hd]=Md.remove,Md.removeIn=Md.deleteIn,Nb.prototype.get=function(a,b,c,d){for(var e=this.entries,f=0,g=e.length;g>f;f++)if(X(c,e[f][0]))return e[f][1];return d},Nb.prototype.update=function(a,b,d,f,g,h,i){for(var j=g===ld,k=this.entries,l=0,m=k.length;m>l&&!X(f,k[l][0]);l++);var n=m>l;if(n?k[l][1]===g:j)return this;if(c(i),(j||!n)&&c(h),!j||1!==k.length){if(!n&&!j&&k.length>=Od)return _b(a,k,f,g);var o=a&&a===this.ownerID,p=o?k:e(k);return n?j?l===m-1?p.pop():p[l]=p.pop():p[l]=[f,g]:p.push([f,g]),o?(this.entries=p,this):new Nb(a,p)}},Ob.prototype.get=function(a,b,c,d){void 0===b&&(b=bb(c));var e=1<<((0===a?b:b>>>a)&kd),f=this.bitmap;return 0===(f&e)?d:this.nodes[gc(f&e-1)].get(a+id,b,c,d)},Ob.prototype.update=function(a,b,c,d,e,f,g){void 0===c&&(c=bb(d));var h=(0===b?c:c>>>b)&kd,i=1<<h,j=this.bitmap,k=0!==(j&i);if(!k&&e===ld)return this;var l=gc(j&i-1),m=this.nodes,n=k?m[l]:void 0,o=Yb(n,a,b+id,c,d,e,f,g);if(o===n)return this;if(!k&&o&&m.length>=Pd)return bc(a,m,j,h,o);if(k&&!o&&2===m.length&&Zb(m[1^l]))return m[1^l];if(k&&o&&1===m.length&&Zb(o))return o;var p=a&&a===this.ownerID,q=k?o?j:j^i:j|i,r=k?o?hc(m,l,o,p):jc(m,l,p):ic(m,l,o,p);return p?(this.bitmap=q,this.nodes=r,this):new Ob(a,q,r)},Pb.prototype.get=function(a,b,c,d){void 0===b&&(b=bb(c));var e=(0===a?b:b>>>a)&kd,f=this.nodes[e];return f?f.get(a+id,b,c,d):d},Pb.prototype.update=function(a,b,c,d,e,f,g){void 0===c&&(c=bb(d));var h=(0===b?c:c>>>b)&kd,i=e===ld,j=this.nodes,k=j[h];if(i&&!k)return this;var l=Yb(k,a,b+id,c,d,e,f,g);if(l===k)return this;var m=this.count;if(k){if(!l&&(m--,Qd>m))return ac(a,j,m,h)}else m++;var n=a&&a===this.ownerID,o=hc(j,h,l,n);return n?(this.count=m,this.nodes=o,this):new Pb(a,m,o)},Qb.prototype.get=function(a,b,c,d){for(var e=this.entries,f=0,g=e.length;g>f;f++)if(X(c,e[f][0]))return e[f][1];return d},Qb.prototype.update=function(a,b,d,f,g,h,i){void 0===d&&(d=bb(f));var j=g===ld;if(d!==this.keyHash)return j?this:(c(i),c(h),$b(this,a,b,d,[f,g]));for(var k=this.entries,l=0,m=k.length;m>l&&!X(f,k[l][0]);l++);var n=m>l;if(n?k[l][1]===g:j)return this;if(c(i),(j||!n)&&c(h),j&&2===m)return new Rb(a,this.keyHash,k[1^l]);var o=a&&a===this.ownerID,p=o?k:e(k);return n?j?l===m-1?p.pop():p[l]=p.pop():p[l]=[f,g]:p.push([f,g]),o?(this.entries=p,this):new Qb(a,this.keyHash,p)},Rb.prototype.get=function(a,b,c,d){return X(c,this.entry[0])?this.entry[1]:d},Rb.prototype.update=function(a,b,d,e,f,g,h){var i=f===ld,j=X(e,this.entry[0]);return(j?f===this.entry[1]:i)?this:(c(h),i?void c(g):j?a&&a===this.ownerID?(this.entry[1]=f,this):new Rb(a,this.keyHash,[e,f]):(c(g),$b(this,a,b,bb(e),[e,f])))},Nb.prototype.iterate=Qb.prototype.iterate=function(a,b){for(var c=this.entries,d=0,e=c.length-1;e>=d;d++)if(a(c[b?e-d:d])===!1)return!1},Ob.prototype.iterate=Pb.prototype.iterate=function(a,b){for(var c=this.nodes,d=0,e=c.length-1;e>=d;d++){var f=c[b?e-d:d];if(f&&f.iterate(a,b)===!1)return!1}},Rb.prototype.iterate=function(a){return a(this.entry)},a(Sb,v),Sb.prototype.next=function(){for(var a=this._type,b=this._stack;b;){var c,d=b.node,e=b.index++;if(d.entry){if(0===e)return Tb(a,d.entry)}else if(d.entries){if(c=d.entries.length-1,c>=e)return Tb(a,d.entries[this._reverse?c-e:e])}else if(c=d.nodes.length-1,c>=e){var f=d.nodes[this._reverse?c-e:e];if(f){if(f.entry)return Tb(a,f.entry);b=this._stack=Ub(f,b)}continue}b=this._stack=this._stack.__prev}return x()};var Nd,Od=jd/4,Pd=jd/2,Qd=jd/4;a(kc,V),kc.of=function(){return this(arguments)},kc.prototype.toString=function(){return this.__toString("List [","]")},kc.prototype.get=function(a,b){if(a=g(this,a),0>a||a>=this.size)return b;a+=this._origin;var c=tc(this,a);return c&&c.array[a&kd]},kc.prototype.set=function(a,b){return qc(this,a,b)},kc.prototype.remove=function(a){return this.has(a)?0===a?this.shift():a===this.size-1?this.pop():this.splice(a,1):this},kc.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=id,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):pc()},kc.prototype.push=function(){var a=arguments,b=this.size;return this.withMutations(function(c){uc(c,0,b+a.length);for(var d=0;d<a.length;d++)c.set(b+d,a[d])})},kc.prototype.pop=function(){return uc(this,0,-1)},kc.prototype.unshift=function(){var a=arguments;return this.withMutations(function(b){uc(b,-a.length);for(var c=0;c<a.length;c++)b.set(c,a[c])})},kc.prototype.shift=function(){return uc(this,1)},kc.prototype.merge=function(){return vc(this,void 0,arguments)},kc.prototype.mergeWith=function(a){var b=gd.call(arguments,1);return vc(this,a,b)},kc.prototype.mergeDeep=function(){return vc(this,dc(void 0),arguments)},kc.prototype.mergeDeepWith=function(a){var b=gd.call(arguments,1);return vc(this,dc(a),b)},kc.prototype.setSize=function(a){return uc(this,0,a)},kc.prototype.slice=function(a,b){var c=this.size;return i(a,b,c)?this:uc(this,j(a,c),k(b,c))},kc.prototype.__iterator=function(a,b){var c=0,d=nc(this,b);return new v(function(){var b=d();return b===Ud?x():w(a,c++,b)})},kc.prototype.__iterate=function(a,b){for(var c,d=0,e=nc(this,b);(c=e())!==Ud&&a(c,d++,this)!==!1;);return d},kc.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?oc(this._origin,this._capacity,this._level,this._root,this._tail,a,this.__hash):(this.__ownerID=a,this)},kc.isList=lc;var Rd="@@__IMMUTABLE_LIST__@@",Sd=kc.prototype;Sd[Rd]=!0,Sd[hd]=Sd.remove,Sd.setIn=Md.setIn,Sd.deleteIn=Sd.removeIn=Md.removeIn,Sd.update=Md.update,Sd.updateIn=Md.updateIn,Sd.mergeIn=Md.mergeIn,Sd.mergeDeepIn=Md.mergeDeepIn,Sd.withMutations=Md.withMutations,Sd.asMutable=Md.asMutable,Sd.asImmutable=Md.asImmutable,Sd.wasAltered=Md.wasAltered,mc.prototype.removeBefore=function(a,b,c){if(c===b?1<<b:0||0===this.array.length)return this;var d=c>>>b&kd;if(d>=this.array.length)return new mc([],a);var e,f=0===d;if(b>0){var g=this.array[d];if(e=g&&g.removeBefore(a,b-id,c),e===g&&f)return this}if(f&&!e)return this;var h=sc(this,a);if(!f)for(var i=0;d>i;i++)h.array[i]=void 0;return e&&(h.array[d]=e),h},mc.prototype.removeAfter=function(a,b,c){if(c===b?1<<b:0||0===this.array.length)return this;var d=c-1>>>b&kd;if(d>=this.array.length)return this;var e,f=d===this.array.length-1;if(b>0){var g=this.array[d];if(e=g&&g.removeAfter(a,b-id,c),e===g&&f)return this}if(f&&!e)return this;var h=sc(this,a);return f||h.array.pop(),e&&(h.array[d]=e),h};var Td,Ud={};a(xc,Lb),xc.of=function(){return this(arguments)},xc.prototype.toString=function(){return this.__toString("OrderedMap {","}")},xc.prototype.get=function(a,b){var c=this._map.get(a);return void 0!==c?this._list.get(c)[1]:b},xc.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ac()},xc.prototype.set=function(a,b){return Bc(this,a,b)},xc.prototype.remove=function(a){return Bc(this,a,ld)},xc.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},xc.prototype.__iterate=function(a,b){var c=this;return this._list.__iterate(function(b){return b&&a(b[1],b[0],c)},b)},xc.prototype.__iterator=function(a,b){return this._list.fromEntrySeq().__iterator(a,b)},xc.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a),c=this._list.__ensureOwner(a);return a?zc(b,c,a,this.__hash):(this.__ownerID=a,this._map=b,this._list=c,this)},xc.isOrderedMap=yc,xc.prototype[rd]=!0,xc.prototype[hd]=xc.prototype.remove;var Vd;a(Cc,V),Cc.of=function(){return this(arguments)},Cc.prototype.toString=function(){return this.__toString("Stack [","]")},Cc.prototype.get=function(a,b){var c=this._head;for(a=g(this,a);c&&a--;)c=c.next;return c?c.value:b},Cc.prototype.peek=function(){return this._head&&this._head.value},Cc.prototype.push=function(){if(0===arguments.length)return this;for(var a=this.size+arguments.length,b=this._head,c=arguments.length-1;c>=0;c--)b={value:arguments[c],next:b};return this.__ownerID?(this.size=a,this._head=b,this.__hash=void 0,this.__altered=!0,this):Ec(a,b)},Cc.prototype.pushAll=function(a){if(a=o(a),0===a.size)return this;hb(a.size);var b=this.size,c=this._head;return a.reverse().forEach(function(a){b++,c={value:a,next:c}}),this.__ownerID?(this.size=b,this._head=c,this.__hash=void 0,this.__altered=!0,this):Ec(b,c)},Cc.prototype.pop=function(){return this.slice(1)},Cc.prototype.unshift=function(){return this.push.apply(this,arguments)},Cc.prototype.unshiftAll=function(a){return this.pushAll(a)},Cc.prototype.shift=function(){return this.pop.apply(this,arguments)},Cc.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Fc()},Cc.prototype.slice=function(a,b){if(i(a,b,this.size))return this;var c=j(a,this.size),d=k(b,this.size);if(d!==this.size)return V.prototype.slice.call(this,a,b);for(var e=this.size-c,f=this._head;c--;)f=f.next;return this.__ownerID?(this.size=e,this._head=f,this.__hash=void 0,this.__altered=!0,this):Ec(e,f)},Cc.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Ec(this.size,this._head,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)},Cc.prototype.__iterate=function(a,b){if(b)return this.reverse().__iterate(a);for(var c=0,d=this._head;d&&a(d.value,c++,this)!==!1;)d=d.next;return c},Cc.prototype.__iterator=function(a,b){if(b)return this.reverse().__iterator(a);var c=0,d=this._head;return new v(function(){if(d){var b=d.value;return d=d.next,w(a,c++,b)}return x()})},Cc.isStack=Dc;var Wd="@@__IMMUTABLE_STACK__@@",Xd=Cc.prototype;Xd[Wd]=!0,Xd.withMutations=Md.withMutations,Xd.asMutable=Md.asMutable,Xd.asImmutable=Md.asImmutable,Xd.wasAltered=Md.wasAltered;var Yd;a(Gc,W),Gc.of=function(){return this(arguments)},Gc.fromKeys=function(a){return this(n(a).keySeq())},Gc.prototype.toString=function(){return this.__toString("Set {","}")},Gc.prototype.has=function(a){return this._map.has(a)},Gc.prototype.add=function(a){return Ic(this,this._map.set(a,!0))},Gc.prototype.remove=function(a){return Ic(this,this._map.remove(a))},Gc.prototype.clear=function(){return Ic(this,this._map.clear())},Gc.prototype.union=function(){var a=gd.call(arguments,0);return a=a.filter(function(a){return 0!==a.size}),0===a.length?this:0!==this.size||this.__ownerID||1!==a.length?this.withMutations(function(b){for(var c=0;c<a.length;c++)p(a[c]).forEach(function(a){return b.add(a)})}):this.constructor(a[0])},Gc.prototype.intersect=function(){var a=gd.call(arguments,0);if(0===a.length)return this;a=a.map(function(a){return p(a)});var b=this;return this.withMutations(function(c){b.forEach(function(b){a.every(function(a){return a.includes(b)})||c.remove(b)})})},Gc.prototype.subtract=function(){var a=gd.call(arguments,0);if(0===a.length)return this;a=a.map(function(a){return p(a)});var b=this;return this.withMutations(function(c){b.forEach(function(b){a.some(function(a){return a.includes(b)})&&c.remove(b)})})},Gc.prototype.merge=function(){return this.union.apply(this,arguments)},Gc.prototype.mergeWith=function(){var a=gd.call(arguments,1);return this.union.apply(this,a)},Gc.prototype.sort=function(a){return Lc(zb(this,a))},Gc.prototype.sortBy=function(a,b){return Lc(zb(this,b,a))},Gc.prototype.wasAltered=function(){return this._map.wasAltered()},Gc.prototype.__iterate=function(a,b){var c=this;return this._map.__iterate(function(b,d){return a(d,d,c)},b)},Gc.prototype.__iterator=function(a,b){return this._map.map(function(a,b){return b}).__iterator(a,b)},Gc.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a);return a?this.__make(b,a):(this.__ownerID=a,this._map=b,this)},Gc.isSet=Hc;var Zd="@@__IMMUTABLE_SET__@@",$d=Gc.prototype;$d[Zd]=!0,$d[hd]=$d.remove,$d.mergeDeep=$d.merge,$d.mergeDeepWith=$d.mergeWith,$d.withMutations=Md.withMutations,$d.asMutable=Md.asMutable,$d.asImmutable=Md.asImmutable,$d.__empty=Kc,$d.__make=Jc;var _d;a(Lc,Gc),Lc.of=function(){return this(arguments)},Lc.fromKeys=function(a){return this(n(a).keySeq())},Lc.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Lc.isOrderedSet=Mc;var ae=Lc.prototype;ae[rd]=!0,ae.__empty=Oc,ae.__make=Nc;var be;a(Pc,U),Pc.prototype.toString=function(){return this.__toString(Rc(this)+" {","}")},Pc.prototype.has=function(a){return this._defaultValues.hasOwnProperty(a)},Pc.prototype.get=function(a,b){if(!this.has(a))return b;var c=this._defaultValues[a];return this._map?this._map.get(a,c):c},Pc.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var a=this.constructor;return a._empty||(a._empty=Qc(this,Wb()))},Pc.prototype.set=function(a,b){if(!this.has(a))throw new Error('Cannot set unknown key "'+a+'" on '+Rc(this));var c=this._map&&this._map.set(a,b);return this.__ownerID||c===this._map?this:Qc(this,c)},Pc.prototype.remove=function(a){if(!this.has(a))return this;var b=this._map&&this._map.remove(a);return this.__ownerID||b===this._map?this:Qc(this,b)},Pc.prototype.wasAltered=function(){return this._map.wasAltered()},Pc.prototype.__iterator=function(a,b){var c=this;return n(this._defaultValues).map(function(a,b){return c.get(b)}).__iterator(a,b)},Pc.prototype.__iterate=function(a,b){var c=this;return n(this._defaultValues).map(function(a,b){return c.get(b)}).__iterate(a,b)},Pc.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map&&this._map.__ensureOwner(a);return a?Qc(this,b,a):(this.__ownerID=a,this._map=b,this)};var ce=Pc.prototype;ce[hd]=ce.remove,ce.deleteIn=ce.removeIn=Md.removeIn,ce.merge=Md.merge,ce.mergeWith=Md.mergeWith,ce.mergeIn=Md.mergeIn,ce.mergeDeep=Md.mergeDeep,ce.mergeDeepWith=Md.mergeDeepWith,ce.mergeDeepIn=Md.mergeDeepIn,ce.setIn=Md.setIn,ce.update=Md.update,ce.updateIn=Md.updateIn,ce.withMutations=Md.withMutations,ce.asMutable=Md.asMutable,ce.asImmutable=Md.asImmutable,a(Vc,F),Vc.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Vc.prototype.get=function(a,b){return this.has(a)?this._start+g(this,a)*this._step:b},Vc.prototype.includes=function(a){var b=(a-this._start)/this._step;return b>=0&&b<this.size&&b===Math.floor(b)},Vc.prototype.slice=function(a,b){return i(a,b,this.size)?this:(a=j(a,this.size),b=k(b,this.size),a>=b?new Vc(0,0):new Vc(this.get(a,this._end),this.get(b,this._end),this._step))},Vc.prototype.indexOf=function(a){var b=a-this._start;if(b%this._step===0){var c=b/this._step;if(c>=0&&c<this.size)return c}return-1},Vc.prototype.lastIndexOf=function(a){return this.indexOf(a)},Vc.prototype.__iterate=function(a,b){for(var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start,f=0;c>=f;f++){if(a(e,f,this)===!1)return f+1;e+=b?-d:d}return f},Vc.prototype.__iterator=function(a,b){var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start,f=0;return new v(function(){var g=e;return e+=b?-d:d,f>c?x():w(a,f++,g)})},Vc.prototype.equals=function(a){return a instanceof Vc?this._start===a._start&&this._end===a._end&&this._step===a._step:Uc(this,a)};var de;a(Wc,F),Wc.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Wc.prototype.get=function(a,b){return this.has(a)?this._value:b},Wc.prototype.includes=function(a){return X(this._value,a)},Wc.prototype.slice=function(a,b){var c=this.size;return i(a,b,c)?this:new Wc(this._value,k(b,c)-j(a,c))},Wc.prototype.reverse=function(){return this},Wc.prototype.indexOf=function(a){return X(this._value,a)?0:-1},Wc.prototype.lastIndexOf=function(a){return X(this._value,a)?this.size:-1},Wc.prototype.__iterate=function(a){for(var b=0;b<this.size;b++)if(a(this._value,b,this)===!1)return b+1;return b},Wc.prototype.__iterator=function(a){var b=this,c=0;return new v(function(){return c<b.size?w(a,c++,b._value):x()})},Wc.prototype.equals=function(a){return a instanceof Wc?X(this._value,a._value):Uc(a)};var ee;m.Iterator=v,Xc(m,{toArray:function(){hb(this.size);var a=new Array(this.size||0);return this.valueSeq().__iterate(function(b,c){a[c]=b}),a},toIndexedSeq:function(){return new jb(this)},toJS:function(){return this.toSeq().map(function(a){return a&&"function"==typeof a.toJS?a.toJS():a}).__toJS()},toJSON:function(){return this.toSeq().map(function(a){return a&&"function"==typeof a.toJSON?a.toJSON():a}).__toJS()},toKeyedSeq:function(){return new ib(this,!0)},toMap:function(){return Lb(this.toKeyedSeq())},toObject:function(){hb(this.size);var a={};return this.__iterate(function(b,c){a[c]=b}),a},toOrderedMap:function(){return xc(this.toKeyedSeq())},toOrderedSet:function(){return Lc(r(this)?this.valueSeq():this)},toSet:function(){return Gc(r(this)?this.valueSeq():this)},toSetSeq:function(){return new kb(this)},toSeq:function(){return s(this)?this.toIndexedSeq():r(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Cc(r(this)?this.valueSeq():this)},toList:function(){return kc(r(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(a,b){return 0===this.size?a+b:a+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+b},concat:function(){var a=gd.call(arguments,0);return Db(this,vb(this,a))},contains:function(a){return this.includes(a)},includes:function(a){return this.some(function(b){return X(b,a)})},entries:function(){return this.__iterator(ud)},every:function(a,b){hb(this.size);var c=!0;return this.__iterate(function(d,e,f){return a.call(b,d,e,f)?void 0:(c=!1,!1)}),c},filter:function(a,b){return Db(this,pb(this,a,b,!0))},find:function(a,b,c){var d=this.findEntry(a,b);return d?d[1]:c},findEntry:function(a,b){var c;return this.__iterate(function(d,e,f){return a.call(b,d,e,f)?(c=[e,d],!1):void 0}),c},findLastEntry:function(a,b){return this.toSeq().reverse().findEntry(a,b)},forEach:function(a,b){return hb(this.size),this.__iterate(b?a.bind(b):a)},join:function(a){hb(this.size),a=void 0!==a?""+a:",";var b="",c=!0;return this.__iterate(function(d){c?c=!1:b+=a,b+=null!==d&&void 0!==d?d.toString():""}),b},keys:function(){return this.__iterator(sd)},map:function(a,b){return Db(this,nb(this,a,b))},reduce:function(a,b,c){hb(this.size);var d,e;return arguments.length<2?e=!0:d=b,this.__iterate(function(b,f,g){e?(e=!1,d=b):d=a.call(c,d,b,f,g)}),d},reduceRight:function(){var a=this.toKeyedSeq().reverse();return a.reduce.apply(a,arguments)},reverse:function(){return Db(this,ob(this,!0))},slice:function(a,b){return Db(this,sb(this,a,b,!0))},some:function(a,b){return!this.every($c(a),b)},sort:function(a){return Db(this,zb(this,a))},values:function(){return this.__iterator(td)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(a,b){return f(a?this.toSeq().filter(a,b):this)},countBy:function(a,b){return qb(this,a,b)},equals:function(a){return Uc(this,a)},entrySeq:function(){var a=this;if(a._cache)return new H(a._cache);var b=a.toSeq().map(Zc).toIndexedSeq();return b.fromEntrySeq=function(){return a.toSeq()},b},filterNot:function(a,b){return this.filter($c(a),b)},findLast:function(a,b,c){return this.toKeyedSeq().reverse().find(a,b,c)},first:function(){return this.find(h)},flatMap:function(a,b){return Db(this,xb(this,a,b))},flatten:function(a){return Db(this,wb(this,a,!0))},fromEntrySeq:function(){return new lb(this)},get:function(a,b){return this.find(function(b,c){return X(c,a)},void 0,b)},getIn:function(a,b){for(var c,d=this,e=Kb(a);!(c=e.next()).done;){var f=c.value;if(d=d&&d.get?d.get(f,ld):ld,d===ld)return b}return d},groupBy:function(a,b){return rb(this,a,b)},has:function(a){return this.get(a,ld)!==ld},hasIn:function(a){return this.getIn(a,ld)!==ld},isSubset:function(a){return a="function"==typeof a.includes?a:m(a),this.every(function(b){return a.includes(b)})},isSuperset:function(a){return a="function"==typeof a.isSubset?a:m(a),a.isSubset(this)},keySeq:function(){return this.toSeq().map(Yc).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(a){return Ab(this,a)},maxBy:function(a,b){return Ab(this,b,a)},min:function(a){return Ab(this,a?_c(a):cd)},minBy:function(a,b){return Ab(this,b?_c(b):cd,a)},rest:function(){return this.slice(1)},skip:function(a){return this.slice(Math.max(0,a))},skipLast:function(a){return Db(this,this.toSeq().reverse().skip(a).reverse())},skipWhile:function(a,b){return Db(this,ub(this,a,b,!0))},skipUntil:function(a,b){return this.skipWhile($c(a),b)},sortBy:function(a,b){return Db(this,zb(this,b,a))},take:function(a){return this.slice(0,Math.max(0,a))},takeLast:function(a){return Db(this,this.toSeq().reverse().take(a).reverse())},takeWhile:function(a,b){return Db(this,tb(this,a,b))},takeUntil:function(a,b){return this.takeWhile($c(a),b)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=dd(this))}});var fe=m.prototype;fe[od]=!0,fe[xd]=fe.values,fe.__toJS=fe.toArray,fe.__toStringMapper=ad,fe.inspect=fe.toSource=function(){return this.toString()},fe.chain=fe.flatMap,function(){try{Object.defineProperty(fe,"length",{get:function(){if(!m.noLengthWarning){var a;try{throw new Error}catch(b){a=b.stack}if(-1===a.indexOf("_wrapObject"))return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+a),this.size}}})}catch(a){}}(),Xc(n,{flip:function(){return Db(this,mb(this))},findKey:function(a,b){var c=this.findEntry(a,b);return c&&c[0]},findLastKey:function(a,b){return this.toSeq().reverse().findKey(a,b)},keyOf:function(a){return this.findKey(function(b){return X(b,a)})},lastKeyOf:function(a){return this.findLastKey(function(b){return X(b,a)})},mapEntries:function(a,b){var c=this,d=0;return Db(this,this.toSeq().map(function(e,f){return a.call(b,[f,e],d++,c)}).fromEntrySeq())},mapKeys:function(a,b){var c=this;return Db(this,this.toSeq().flip().map(function(d,e){return a.call(b,d,e,c)}).flip())}});var ge=n.prototype;ge[pd]=!0,ge[xd]=fe.entries,ge.__toJS=fe.toObject,ge.__toStringMapper=function(a,b){return JSON.stringify(b)+": "+ad(a)},Xc(o,{toKeyedSeq:function(){return new ib(this,!1)},filter:function(a,b){return Db(this,pb(this,a,b,!1))},findIndex:function(a,b){var c=this.findEntry(a,b);return c?c[0]:-1},indexOf:function(a){var b=this.toKeyedSeq().keyOf(a);return void 0===b?-1:b},lastIndexOf:function(a){return this.toSeq().reverse().indexOf(a)},reverse:function(){return Db(this,ob(this,!1))},slice:function(a,b){return Db(this,sb(this,a,b,!1))},splice:function(a,b){var c=arguments.length;if(b=Math.max(0|b,0),0===c||2===c&&!b)return this;a=j(a,this.size);var d=this.slice(0,a);return Db(this,1===c?d:d.concat(e(arguments,2),this.slice(a+b)))},findLastIndex:function(a,b){var c=this.toKeyedSeq().findLastKey(a,b);return void 0===c?-1:c},first:function(){return this.get(0)},flatten:function(a){return Db(this,wb(this,a,!1))},get:function(a,b){return a=g(this,a),0>a||1/0===this.size||void 0!==this.size&&a>this.size?b:this.find(function(b,c){return c===a},void 0,b)},has:function(a){return a=g(this,a),a>=0&&(void 0!==this.size?1/0===this.size||a<this.size:-1!==this.indexOf(a))},interpose:function(a){return Db(this,yb(this,a))},interleave:function(){var a=[this].concat(e(arguments)),b=Cb(this.toSeq(),F.of,a),c=b.flatten(!0);return b.size&&(c.size=b.size*a.length),Db(this,c)},last:function(){return this.get(-1)},skipWhile:function(a,b){return Db(this,ub(this,a,b,!1))},zip:function(){var a=[this].concat(e(arguments));return Db(this,Cb(this,bd,a))},zipWith:function(a){var b=e(arguments);return b[0]=this,Db(this,Cb(this,a,b))}}),o.prototype[qd]=!0,o.prototype[rd]=!0,Xc(p,{get:function(a,b){return this.has(a)?a:b},includes:function(a){return this.has(a)},keySeq:function(){return this.valueSeq()}}),p.prototype.has=fe.includes,Xc(E,n.prototype),Xc(F,o.prototype),Xc(G,p.prototype),Xc(U,n.prototype),Xc(V,o.prototype),Xc(W,p.prototype);var he={Iterable:m,Seq:D,Collection:T,Map:Lb,OrderedMap:xc,List:kc,Stack:Cc,Set:Gc,OrderedSet:Lc,Record:Pc,Range:Vc,Repeat:Wc,is:X,fromJS:Y};return he})},function(a,b,c){var d,e;d=[c(105),c(103)],e=function(a,b){"use strict";function c(b){return a.isCaretPositionNode(b)?!0:""===b.parentNode.textContent.trim()}function d(b){function f(b){return 0===b.children.length&&a.isBlockElement(b)||1===b.children.length&&a.isSelectionMarkerNode(b.children[0])?!0:a.isBlockElement(b)||0!==b.children.length?!1:c(b)}for(var g=b.firstElementChild;g;)a.isSelectionMarkerNode(g)||(f(g)&&""===g.textContent.trim()&&!e.includes(g.nodeName)?g.appendChild(document.createElement("br")):g.children.length>0&&d(g)),g=g.nextElementSibling}var e=b.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");return function(){return function(a){a.registerHTMLFormatter("normalize",function(a){var b=document.createElement("div");return b.innerHTML=a,d(b),b.innerHTML})}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(106),c(107),c(103)],e=function(a,b,c){"use strict";function d(a){return b.includes(a.nodeName)}function e(b){return a.includes(b.nodeName)}function f(a){return a.children.length>1?!1:1===a.children.length&&""!==a.textContent.trim()?!1:0===a.children.length?""===a.textContent.trim():f(a.children[0])}function g(a){return a.nodeType===Node.TEXT_NODE}function h(a){return g(a)&&""===a.data}function i(a){return a.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function j(a,b){return a.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING}function k(a){return a.nodeType===Node.ELEMENT_NODE&&"scribe-marker"===a.className}function l(a){return a.nodeType===Node.ELEMENT_NODE&&"caret-position"===a.className}function m(a){var b=a.firstChild;return b&&"BR"!==b.nodeName?m(b):a}function n(a,b){return b.parentNode.insertBefore(a,b.nextSibling)}function o(a){return a.parentNode.removeChild(a)}function p(a,b,c){function d(a){return b===a}if(!d(a))for(var e=a.parentNode;e&&!d(e);){if(c(e))return e;e=e.parentNode}}function q(a){for(var b=c.List();a=a.nextSibling;)b=b.push(a);return b}function r(a,b){return a[0].parentNode.insertBefore(b,a[0]),a.forEach(function(a){b.appendChild(a)}),b}function s(a,b){for(;b.childNodes.length>0;)a.insertBefore(b.childNodes[0],b);a.removeChild(b)}function t(b){function d(a,b){return window.getComputedStyle(b).lineHeight===a.lineHeight}var e=c.List(b.querySelectorAll(a.map(function(a){return a+'[style*="line-height"]'}).join(",")));e=e.filter(d.bind(null,window.getComputedStyle(b)));var f=c.List();e.forEach(function(a){a.style.lineHeight=null,a.getAttribute("style")||a.removeAttribute("style"),"SPAN"===a.nodeName&&0===a.attributes.length&&(f=f.push(a))}),f.forEach(function(a){s(a.parentNode,a)})}return{isInlineElement:e,isBlockElement:d,isEmptyInlineElement:f,isText:g,isEmptyTextNode:h,isFragment:i,isBefore:j,isSelectionMarkerNode:k,isCaretPositionNode:l,firstDeepestChild:m,insertAfter:n,removeNode:o,getAncestor:p,nextSiblings:q,wrap:r,unwrap:s,removeChromeArtifacts:t}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;
d=[c(103)],e=function(a){var b=a.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA");return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(103)],e=function(a){var b=a.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO");return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";function a(a){for(var b=document.createTreeWalker(a,NodeFilter.SHOW_ALL,null,!1);b.nextNode();)if(b.currentNode&&(~["br"].indexOf(b.currentNode.nodeName.toLowerCase())||b.currentNode.length>0))return!0;return!1}return function(){return function(b){b.el.addEventListener("keydown",function(c){if(13===c.keyCode){var d=new b.api.Selection,e=d.range,f=d.getContaining(function(a){return"LI"===a.nodeName||/^(H[1-6])$/.test(a.nodeName)});f||(c.preventDefault(),b.transactionManager.run(function(){"BR"===b.el.lastChild.nodeName&&b.el.removeChild(b.el.lastChild);var c=document.createElement("br");e.insertNode(c),e.collapse(!1);var f=e.cloneRange();f.setEndAfter(b.el.lastChild,0);var g=f.cloneContents();if(!a(g)){var h=document.createElement("br");e.insertNode(h)}var i=e.cloneRange();i.setStartAfter(c,0),i.setEndAfter(c,0),d.selection.removeAllRanges(),d.selection.addRange(i)}))}}.bind(this)),""===b.getHTML().trim()&&b.setContent("")}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(110),c(111)],e=function(a,b){"use strict";return{replaceNbspCharsFormatter:a,escapeHtmlCharactersFormatter:b}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=/(\s|&nbsp;)+/g;a.registerHTMLFormatter("export",function(a){return a.replace(b," ")})}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(112)],e=function(a){"use strict";return function(){return function(b){b.registerPlainTextFormatter(a)}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(86),c(113)],e=function(a,b){function c(c){return c=a(c),c&&e.test(c)?c.replace(d,b):c}var d=/[&<>"'`]/g,e=RegExp(d.source);return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){return b[a]}var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(115),c(103)],e=function(a,b){"use strict";return function(){return function(c){var d=c.node;c.el.addEventListener("focus",function(){var a=new c.api.Selection;if(a.range){var b=c.allowsBlockElements()&&a.range.startContainer===c.el;if(b){var e=d.firstDeepestChild(c.el),f=a.range;f.setStart(e,0),f.setEnd(e,0),a.selection.removeAllRanges(),a.selection.addRange(f)}}}.bind(c));var e=function(){if(!c._skipFormatters){var a=new c.api.Selection,b=a.range,d=function(){b&&a.placeMarkers(),c.setHTML(c._htmlFormatterFactory.format(c.getHTML())),a.selectMarkers()}.bind(c);c.transactionManager.run(d)}delete c._skipFormatters}.bind(c);a(c.el,e),c.allowsBlockElements()&&c.el.addEventListener("keydown",function(a){if(13===a.keyCode){var b=new c.api.Selection,d=b.range,e=b.getContaining(function(a){return/^(H[1-6])$/.test(a.nodeName)});if(e&&d.collapsed){var f=d.cloneRange();f.setEndAfter(e,0);var g=f.cloneContents();""===g.firstChild.textContent&&(a.preventDefault(),c.transactionManager.run(function(){var a=document.createElement("p"),c=document.createElement("br");a.appendChild(c),e.parentNode.insertBefore(a,e.nextElementSibling),d.setStart(a,0),d.setEnd(a,0),b.selection.removeAllRanges(),b.selection.addRange(d)}))}}}),c.allowsBlockElements()&&c.el.addEventListener("keydown",function(a){if(13===a.keyCode||8===a.keyCode){var b=new c.api.Selection,d=b.range;if(d.collapsed){var e=b.getContaining(function(a){return"LI"===a.nodeName});if(e&&""===e.textContent.trim()){a.preventDefault();var f=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName}),g=c.getCommand("OL"===f.nodeName?"insertOrderedList":"insertUnorderedList");g.execute()}}}}),c.el.addEventListener("paste",function(a){if(a.clipboardData)a.preventDefault(),b.List(a.clipboardData.types).includes("text/html")?c.insertHTML(a.clipboardData.getData("text/html")):c.insertPlainText(a.clipboardData.getData("text/plain"));else{var d=new c.api.Selection;d.placeMarkers();var e=document.createElement("div");document.body.appendChild(e),e.setAttribute("contenteditable",!0),e.focus(),setTimeout(function(){var a=e.innerHTML;e.parentNode.removeChild(e),d.selectMarkers(),c.el.focus(),c.insertHTML(a)},1)}})}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(105)],e=function(a){function b(b){return!a.isEmptyTextNode(b)&&!a.isSelectionMarkerNode(b)}function c(a){return a.some(function(a){return Array.prototype.some.call(a.addedNodes,b)||Array.prototype.some.call(a.removedNodes,b)})}function d(a,b){var d=!1,f=new e(function(a){if(!d&&c(a)){d=!0;try{b()}catch(e){throw e}finally{setTimeout(function(){d=!1},0)}}});return f.observe(a,{childList:!0,subtree:!0}),f}var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(117),c(118),c(119),c(120),c(121),c(122),c(123)],e=function(a,b,c,d,e,f,g){"use strict";return{commands:{bold:a,indent:b,insertHTML:c,insertList:d,outdent:e,createLink:f},events:g}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("bold");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return/^(H[1-6])$/.test(a.nodeName)});return a.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!c},a.commandPatches.bold=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";var a="﻿";return function(){return function(b){var c=new b.api.CommandPatch("indent");c.execute=function(c){b.transactionManager.run(function(){var d=new b.api.Selection,e=d.range,f="P"===e.commonAncestorContainer.nodeName&&"<br>"===e.commonAncestorContainer.innerHTML;if(f){var g=document.createTextNode(a);e.insertNode(g),e.setStart(g,0),e.setEnd(g,0),d.selection.removeAllRanges(),d.selection.addRange(e)}b.api.CommandPatch.prototype.execute.call(this,c),d=new b.api.Selection;var h=d.getContaining(function(a){return"BLOCKQUOTE"===a.nodeName});h&&h.removeAttribute("style")}.bind(this))},b.commandPatches.indent=c}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("insertHTML"),c=a.node;b.execute=function(b){a.transactionManager.run(function(){a.api.CommandPatch.prototype.execute.call(this,b),c.removeChromeArtifacts(a.el)}.bind(this))},a.commandPatches.insertHTML=b}}}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){"use strict";return function(){return function(a){var b=a.node,c=function(b){a.api.CommandPatch.call(this,b)};c.prototype=Object.create(a.api.CommandPatch.prototype),c.prototype.constructor=c,c.prototype.execute=function(c){a.transactionManager.run(function(){if(a.api.CommandPatch.prototype.execute.call(this,c),this.queryState()){var d=new a.api.Selection,e=d.getContaining(function(a){return"OL"===a.nodeName||"UL"===a.nodeName});if(e.nextElementSibling&&0===e.nextElementSibling.childNodes.length&&b.removeNode(e.nextElementSibling),e){var f=e.parentNode;f&&/^(H[1-6]|P)$/.test(f.nodeName)&&(d.placeMarkers(),b.insertAfter(e,f),d.selectMarkers(),2===f.childNodes.length&&b.isEmptyTextNode(f.firstChild)&&b.removeNode(f),0===f.childNodes.length&&b.removeNode(f))}b.removeChromeArtifacts(e)}}.bind(this))},c.prototype.queryState=function(){try{return a.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(b){if("NS_ERROR_UNEXPECTED"==b.name)return!1;throw b}},a.commandPatches.insertOrderedList=new c("insertOrderedList"),a.commandPatches.insertUnorderedList=new c("insertUnorderedList")}}}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=a.node,c=new a.api.CommandPatch("outdent");c.execute=function(){a.transactionManager.run(function(){var c=new a.api.Selection,d=c.range,e=c.getContaining(function(a){return"BLOCKQUOTE"===a.nodeName});if("BLOCKQUOTE"===d.commonAncestorContainer.nodeName){c.placeMarkers(),c.selectMarkers(!0);var f=d.cloneContents();e.parentNode.insertBefore(f,e),d.deleteContents(),c.selectMarkers(),""===e.textContent&&e.parentNode.removeChild(e)}else{var g=c.getContaining(function(a){return"P"===a.nodeName});if(g){var h=b.nextSiblings(g);if(h.size){for(var i=document.createElement(e.nodeName);h.size;)i.appendChild(h.first()),h=h.shift();e.parentNode.insertBefore(i,e.nextElementSibling)}c.placeMarkers(),e.parentNode.insertBefore(g,e.nextElementSibling),c.selectMarkers(),""===e.innerHTML&&e.parentNode.removeChild(e)}else a.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},a.commandPatches.outdent=c}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("createLink");a.commandPatches.createLink=b,b.execute=function(b){var c=new a.api.Selection;if(c.range.collapsed){var d=document.createElement("a");d.setAttribute("href",b),d.textContent=b,c.range.insertNode(d);var e=document.createRange();e.setStartBefore(d),e.setEndAfter(d),c.selection.removeAllRanges(),c.selection.addRange(e)}else a.api.CommandPatch.prototype.execute.call(this,b)}}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){"use strict";return function(){return function(a){var b=a.node;a.allowsBlockElements()&&a.el.addEventListener("keyup",function(c){if(8===c.keyCode||46===c.keyCode){var d=new a.api.Selection,e=d.getContaining(function(a){return"P"===a.nodeName});e&&a.transactionManager.run(function(){d.placeMarkers(),b.removeChromeArtifacts(e),d.selectMarkers()},!0)}})}}}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(125),c(126),c(127),c(128)],e=function(a,b,c,d){"use strict";return function(e){this.CommandPatch=a(e),this.Command=b(e),this.Selection=c(e),this.SimpleCommand=d(this,e)}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(a){function b(a){this.commandName=a}return b.prototype.execute=function(b){a.transactionManager.run(function(){document.execCommand(this.commandName,!1,b||null)}.bind(this))},b.prototype.queryState=function(){return document.queryCommandState(this.commandName)},b.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},b}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(a){function b(b){this.commandName=b,this.patch=a.commandPatches[this.commandName]}return b.prototype.execute=function(b){this.patch?this.patch.execute(b):a.transactionManager.run(function(){document.execCommand(this.commandName,!1,b||null)}.bind(this))},b.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},b.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},b}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(a){function b(){var a=document.createElement("em");return a.style.display="none",a.classList.add("scribe-marker"),a}function c(a,b){a.insertNode(b),b.nextSibling&&f.isEmptyTextNode(b.nextSibling)&&f.removeNode(b.nextSibling),b.previousSibling&&f.isEmptyTextNode(b.previousSibling)&&f.removeNode(b.previousSibling)}function d(){if(this.selection=e.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var a=this.selection.anchorNode,b=this.selection.anchorOffset,c=this.selection.focusNode,d=this.selection.focusOffset;if(a===c&&b>d){var g=b;b=d,d=g}else if(f.isBefore(c,a)){var h=a,i=b;a=c,b=d,c=h,d=i}this.range=document.createRange(),this.range.setStart(a,b),this.range.setEnd(c,d)}}var e=a.el.ownerDocument,f=a.node;if(e.compareDocumentPosition(a.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var g=a.el.parentNode;g&&f.isFragment(g);)g=g.parentNode;g&&g.getSelection&&(e=g)}return d.prototype.getContaining=function(b){var c=this.range;if(c){var d=this.range.commonAncestorContainer;return d&&a.el===d||!b(d)?f.getAncestor(d,a.el,b):d}},d.prototype.placeMarkers=function(){var d=this.range;if(d&&document.contains(a.el)&&a.el.contains(d.startContainer)&&a.el.contains(d.endContainer)){if(c(d.cloneRange(),b()),!d.collapsed){var e=d.cloneRange();e.collapse(!1),c(e,b())}this.selection.removeAllRanges(),this.selection.addRange(d)}},d.prototype.getMarkers=function(){return a.el.querySelectorAll("em.scribe-marker")},d.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(a){f.removeNode(a)})},d.prototype.selectMarkers=function(a){var b=this.getMarkers();if(b.length){var c=document.createRange();c.setStartBefore(b[0]),c.setEndAfter(b.length>=2?b[1]:b[0]),a||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(c)}},d.prototype.isCaretOnNewLine=function(){var a=this.getContaining(function(a){return"P"===a.nodeName});return!!a&&f.isEmptyInlineElement(a)},d}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(a,b){function c(a,c){b.api.Command.call(this,a),this._nodeName=c}return c.prototype=Object.create(a.Command.prototype),c.prototype.constructor=c,c.prototype.queryState=function(){var a=new b.api.Selection;return b.api.Command.prototype.queryState.call(this)&&!!a.getContaining(function(a){return a.nodeName===this._nodeName}.bind(this))},c}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(130),c(131),c(132),c(133),c(134),c(135),c(136)],e=function(a,b,c,d,e,f,g){"use strict";return{indent:a,insertList:b,outdent:c,redo:d,subscript:e,superscript:f,undo:g}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("indent");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName});return a.api.Command.prototype.queryEnabled.call(this)&&a.allowsBlockElements()&&!c},a.commands.indent=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(103)],e=function(a){"use strict";return function(){return function(b){var c=b.node,d=function(a){b.api.Command.call(this,a)};d.prototype=Object.create(b.api.Command.prototype),d.prototype.constructor=d,d.prototype.execute=function(d){function e(a){if(a.size){for(var b=document.createElement(h.nodeName);a.size;)b.appendChild(a.first()),a=a.shift();h.parentNode.insertBefore(b,h.nextElementSibling)}}if(this.queryState()){var f=new b.api.Selection,g=f.range,h=f.getContaining(function(a){return"OL"===a.nodeName||"UL"===a.nodeName}),i=f.getContaining(function(a){return"LI"===a.nodeName});b.transactionManager.run(function(){if(i){var b=c.nextSiblings(i);e(b),f.placeMarkers();var d=document.createElement("p");d.innerHTML=i.innerHTML,h.parentNode.insertBefore(d,h.nextElementSibling),i.parentNode.removeChild(i)}else{var j=a.List(h.querySelectorAll("li")).filter(function(a){return g.intersectsNode(a)}),k=j.last(),l=c.nextSiblings(k);e(l),f.placeMarkers();var m=document.createDocumentFragment();j.forEach(function(a){var b=document.createElement("p");b.innerHTML=a.innerHTML,m.appendChild(b)}),h.parentNode.insertBefore(m,h.nextElementSibling),j.forEach(function(a){a.parentNode.removeChild(a)})}0===h.childNodes.length&&h.parentNode.removeChild(h),f.selectMarkers()}.bind(this))}else b.api.Command.prototype.execute.call(this,d)},d.prototype.queryEnabled=function(){return b.api.Command.prototype.queryEnabled.call(this)&&b.allowsBlockElements()},b.commands.insertOrderedList=new d("insertOrderedList"),b.commands.insertUnorderedList=new d("insertUnorderedList")}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("outdent");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName});return a.api.Command.prototype.queryEnabled.call(this)&&a.allowsBlockElements()&&!c},a.commands.outdent=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("redo");b.execute=function(){a.undoManager.redo()},b.queryEnabled=function(){return a.undoManager.position>0},a.commands.redo=b,a.options.undo.enabled&&a.el.addEventListener("keydown",function(a){a.shiftKey&&(a.metaKey||a.ctrlKey)&&90===a.keyCode&&(a.preventDefault(),b.execute())})}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("subscript");a.commands.subscript=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("superscript");a.commands.superscript=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("undo");b.execute=function(){a.undoManager.undo()},b.queryEnabled=function(){return a.undoManager.position<a.undoManager.length},a.commands.undo=b,a.options.undo.enabled&&a.el.addEventListener("keydown",function(a){a.shiftKey||!a.metaKey&&!a.ctrlKey||90!==a.keyCode||(a.preventDefault(),b.execute())})}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(103)],e=function(a){"use strict";function b(b,c){this._stack=a.List(),this._limit=b,this._fireEvent="undefined"!=typeof CustomEvent&&c&&c.dispatchEvent,this._ush=c,this.position=0,this.length=0}return b.prototype.transact=function(b,c){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");b.execute(),this.position>0&&this.clearRedo();var d;c&&this.length?(d=this._stack.first().push(b),this._stack=this._stack.shift().unshift(d)):(d=a.List.of(b),this._stack=this._stack.unshift(d),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",d)},b.prototype.undo=function(){if(!(this.position>=this.length)){for(var a=this._stack.get(this.position),b=a.size;b--;)a.get(b).undo();this.position++,this._dispatch("undo",a)}},b.prototype.redo=function(){if(0!==this.position){this.position--;for(var a=this._stack.get(this.position),b=0;b<a.size;b++)a.get(b).redo();this._dispatch("redo",a)}},b.prototype.item=function(a){return a>=0&&a<this.length?this._stack.get(a).toArray():null},b.prototype.clearUndo=function(a){this._stack=this._stack.take(void 0!==a?a:this.position),this.length=this._stack.size},b.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},b.prototype._dispatch=function(a,b){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(a,{detail:{transactions:b.toArray()},bubbles:!0,cancelable:!1}))},b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(103)],e=function(a){"use strict";function b(){this._listeners={}}return b.prototype.on=function(b,c){var d=this._listeners[b]||a.Set();this._listeners[b]=d.add(c)},b.prototype.off=function(b,c){var d=this._listeners[b]||a.Set();this._listeners[b]=c?d["delete"](c):d.clear()},b.prototype.trigger=function(b,c){for(var d=b.split(":");d.length;){var e=d.join(":"),f=this._listeners[e]||a.Set();f.forEach(function(a){a.apply(null,c)}),d.splice(d.length-1,1)}},b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(140)],e=function(a){function b(b){var c=b||{};return c.defaultPlugins&&(c.defaultPlugins=c.defaultPlugins.filter(e(h.defaultPlugins))),c.defaultFormatters&&(c.defaultFormatters=c.defaultFormatters.filter(e(h.defaultFormatters))),Object.freeze(a(c,h))}function c(a){return function(b,c){return b===a?-1:c===a?1:0}}function d(a){return function(b){return-1!==(a?f:g).indexOf(b)}}function e(a){return function(b){return-1!==a.indexOf(b)}}var f=["setRootPElement","enforcePElements","ensureSelectableContainers"],g=["inlineElementsMode"],h={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:f.concat(g),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};return{defaultOptions:h,checkOptions:b,sortByPlugin:c,filterByBlockLevelMode:d,filterByPluginExists:e}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(141),c(79),c(142)],e=function(a,b,c){function d(d){if(null==d)return d;var f=a(arguments);return f.push(c),b.apply(e,f)}var e;return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){function a(a,b){return"undefined"==typeof a?b:a}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){a.registerPlainTextFormatter(function(a){return a.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d;d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("createLink");b.nodeName="A",b.execute=function(){var b=new a.api.Selection,c=b.range,d=b.getContaining(function(a){return a.nodeName===this.nodeName}.bind(this)),e=d?d.href:"",f=window.prompt("Enter a link.",e);if(d&&(c.selectNode(d),b.selection.removeAllRanges(),b.selection.addRange(c)),f){var g=/^https?\:\/\//,h=/^mailto\:/;if(!g.test(f)&&!h.test(f))if(/@/.test(f)){var i=window.confirm("The URL you entered appears to be an email address. Do you want to add the required “mailto:” prefix?");i&&(f="mailto:"+f)}else{var j=window.confirm("The URL you entered appears to be a link. Do you want to add the required “http://” prefix?");j&&(f="http://"+f)}a.api.SimpleCommand.prototype.execute.call(this,f)}},b.queryState=function(){var b=new a.api.Selection;return!!b.getContaining(function(a){return a.nodeName===this.nodeName}.bind(this))},a.commands.linkPrompt=b}}}.call(b,c,b,a),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(146),c(147),c(179)],e=function(a,b,c){"use strict";return function(d){var e=b(c(d),{tags:{em:{"class":"scribe-marker"},br:{}}});return function(b){var c=new a(e);b.registerHTMLFormatter("sanitize",c.clean.bind(c))}}}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;!function(f,g){d=g,e="function"==typeof d?d.call(b,c,b,a):d,!(void 0!==e&&(a.exports=e))}(this,function(){function a(a){this.config=a}function b(a){return-1!==e.indexOf(a.nodeName)}function c(a){return-1!==f.indexOf(a.nodeName)}function d(a){return document.createTreeWalker(a,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],f=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return a.prototype.clean=function(a){var b=document.createElement("div");return b.innerHTML=a,this._sanitize(b),b.innerHTML},a.prototype._sanitize=function(a){var e=d(a),f=e.firstChild();if(f)do{var g=f.nodeName.toLowerCase(),h=this.config.tags[g];if(!f._sanitized)if(f.nodeType!==Node.TEXT_NODE){if(f.nodeType===Node.COMMENT_NODE){a.removeChild(f),this._sanitize(a);break}var i,j=c(f);j&&(i=Array.prototype.some.call(f.childNodes,b));var k=j&&i,l=!!a.parentNode,m=b(a)&&b(f)&&l;if(!this.config.tags[g]||k||!this.config.keepNestedBlockElements&&m){if("SCRIPT"!==f.nodeName&&"STYLE"!==f.nodeName)for(;f.childNodes.length>0;)a.insertBefore(f.childNodes[0],f);a.removeChild(f),this._sanitize(a);break}for(var n=0;n<f.attributes.length;n+=1){var o=f.attributes[n],p=o.name.toLowerCase(),q=h[p]||h===!0,r=!q,s=q!==!0&&o.value!==q;(r||s)&&(f.removeAttribute(o.name),n-=1)}this._sanitize(f),f._sanitized=!0}else if(""===f.data.trim()&&(f.previousElementSibling&&b(f.previousElementSibling)||f.nextElementSibling&&b(f.nextElementSibling))){a.removeChild(f),this._sanitize(a);break}}while(f=e.nextSibling())},a})},function(a,b,c){var d,e;d=[c(148),c(175)],e=function(a,b){var c=b(a);return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(149),c(150),c(167),c(162),c(155),c(153),c(159),c(172)],e=function(a,b,c,d,e,f,g,h){function i(k,l,m,n,o){if(!f(k))return k;var p=e(l.length)&&(d(l)||h(l));return(p?a:b)(l,function(a,b,d){if(g(a))return n||(n=[]),o||(o=[]),c(k,d,b,i,m,n,o);var e=k[b],f=m?m(e,a,b,k,d):j,h="undefined"==typeof f;h&&(f=a),!p&&"undefined"==typeof f||!h&&(f===f?f===e:e!==e)||(k[b]=f)}),k}var j;return i}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(151),c(154)],e=function(a,b){function c(c,d){return a(c,d,b)}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(152)],e=function(a){function b(b,c,d){for(var e=-1,f=a(b),g=d(b),h=g.length;++e<h;){var i=g[e];if(c(f[i],i,f)===!1)break}return b}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(153)],e=function(a){function b(b){return a(b)?b:Object(b)}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(155),c(156),c(153),c(160)],e=function(a,b,c,d){var e=b(e=Object.keys)&&e,f=e?function(b){if(b)var f=b.constructor,g=b.length;return"function"==typeof f&&f.prototype===b||"function"!=typeof b&&g&&a(g)?d(b):c(b)?e(b):[]}:d;return f}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){return"number"==typeof a&&a>-1&&a%1==0&&b>=a}var b=Math.pow(2,53)-1;return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(157),c(159)],e=function(a,b){function c(a){return null==a?!1:h.call(a)==d?i.test(g.call(a)):b(a)&&e.test(a)||!1}var d="[object Function]",e=/^\[object .+?Constructor\]$/,f=Object.prototype,g=Function.prototype.toString,h=f.toString,i=RegExp("^"+a(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(158)],e=function(a){function b(b){return b=a(b),b&&d.test(b)?b.replace(c,"\\$&"):b}var c=/[.*+?^${}()|[\]\/\\]/g,d=RegExp(c.source);return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){return"string"==typeof a?a:null==a?"":a+""}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){function a(a){return a&&"object"==typeof a||!1}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(161),c(162),c(163),c(155),c(164),c(165)],e=function(a,b,c,d,e,f){function g(g){for(var h=e(g),j=h.length,k=j&&g.length,l=k&&d(k)&&(b(g)||f.nonEnumArgs&&a(g)),m=-1,n=[];++m<j;){var o=h[m];(l&&c(o,k)||i.call(g,o))&&n.push(o)}return n}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(155),c(159)],e=function(a,b){function c(c){var f=b(c)?c.length:d;return a(f)&&g.call(c)==e||!1}var d,e="[object Arguments]",f=Object.prototype,g=f.toString;return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(155),c(156),c(159)],e=function(a,b,c){var d="[object Array]",e=Object.prototype,f=e.toString,g=b(g=Array.isArray)&&g,h=g||function(b){return c(b)&&a(b.length)&&f.call(b)==d||!1};return h}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a,c){return a=+a,c=null==c?b:c,a>-1&&a%1==0&&c>a}var b=Math.pow(2,53)-1;return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(161),c(162),c(163),c(155),c(153),c(165)],e=function(a,b,c,d,e,f){function g(g){if(null==g)return[];e(g)||(g=Object(g));var h=g.length;h=h&&d(h)&&(b(g)||f.nonEnumArgs&&a(g))&&h||0;for(var j=g.constructor,k=-1,l="function"==typeof j&&j.prototype===g,m=Array(h),n=h>0;++k<h;)m[k]=k+"";for(var o in g)n&&c(o,h)||"constructor"==o&&(l||!i.call(g,o))||m.push(o);return m}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(156),c(166)],e=function(a,b){var c=/\bthis\b/,d=Object.prototype,e=(e=b.window)&&e.document,f=d.propertyIsEnumerable,g={};return function(){g.funcDecomp=!a(b.WinRTError)&&c.test(function(){return this}),g.funcNames="string"==typeof Function.name;try{g.dom=11===e.createDocumentFragment().nodeType}catch(d){g.dom=!1}try{g.nonEnumArgs=!f.call(arguments,1)}catch(d){g.nonEnumArgs=!0}}(0,0),g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;(function(a,c){d=[],e=function(){var d={"function":!0,object:!0},e=d[typeof b]&&b&&!b.nodeType&&b,f=d[typeof a]&&a&&!a.nodeType&&a,g=e&&f&&"object"==typeof c&&c,h=d[typeof window]&&window,i=g||h!==(this&&this.window)&&h||this;return i}.apply(b,d),!(void 0!==e&&(a.exports=e))}).call(b,c(76)(a),function(){return this}())},function(a,b,c){var d,e;d=[c(168),c(161),c(162),c(155),c(169),c(172),c(173)],e=function(a,b,c,d,e,f,g){function h(h,j,k,l,m,n,o){for(var p=n.length,q=j[k];p--;)if(n[p]==q)return void(h[k]=o[p]);var r=h[k],s=m?m(r,q,k,h,j):i,t="undefined"==typeof s;t&&(s=q,d(q.length)&&(c(q)||f(q))?s=c(r)?r:r?a(r):[]:e(q)||b(q)?s=b(r)?g(r):e(r)?r:{}:t=!1),n.push(q),o.push(s),t?h[k]=l(s,q,m,n,o):(s===s?s!==r:r===r)&&(h[k]=s)}var i;return h}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(156),c(170)],e=function(a,b){var c="[object Object]",d=Object.prototype,e=d.toString,f=a(f=Object.getPrototypeOf)&&f,g=f?function(d){if(!d||e.call(d)!=c)return!1;var g=d.valueOf,h=a(g)&&(h=f(g))&&f(h);return h?d==h||f(d)==h:b(d)}:b;return g}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(171),c(159)],e=function(a,b){function c(c){var e;if(!b(c)||g.call(c)!=d||!f.call(c,"constructor")&&(e=c.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var h;return a(c,function(a,b){h=b}),"undefined"==typeof h||f.call(c,h)}var d="[object Object]",e=Object.prototype,f=e.hasOwnProperty,g=e.toString;return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(151),c(164)],e=function(a,b){function c(c,d){return a(c,d,b)}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(155),c(159)],e=function(a,b){function c(c){return b(c)&&a(c.length)&&A[C.call(c)]||!1}var d="[object Arguments]",e="[object Array]",f="[object Boolean]",g="[object Date]",h="[object Error]",i="[object Function]",j="[object Map]",k="[object Number]",l="[object Object]",m="[object RegExp]",n="[object Set]",o="[object String]",p="[object WeakMap]",q="[object ArrayBuffer]",r="[object Float32Array]",s="[object Float64Array]",t="[object Int8Array]",u="[object Int16Array]",v="[object Int32Array]",w="[object Uint8Array]",x="[object Uint8ClampedArray]",y="[object Uint16Array]",z="[object Uint32Array]",A={};
A[r]=A[s]=A[t]=A[u]=A[v]=A[w]=A[x]=A[y]=A[z]=!0,A[d]=A[e]=A[q]=A[f]=A[g]=A[h]=A[i]=A[j]=A[k]=A[l]=A[m]=A[n]=A[o]=A[p]=!1;var B=Object.prototype,C=B.toString;return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(174),c(164)],e=function(a,b){function c(c){return a(c,b(c))}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(176),c(178)],e=function(a,b){function c(c){return function(){var d=arguments,e=d.length,f=d[0];if(2>e||null==f)return f;var g=d[e-2],h=d[e-1],i=d[3];e>3&&"function"==typeof g?(g=a(g,h,5),e-=2):(g=e>2&&"function"==typeof h?h:null,e-=g?1:0),i&&b(d[1],d[2],i)&&(g=3==e?null:g,e=2);for(var j=0;++j<e;){var k=d[j];k&&c(f,k,g)}return f}}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(177)],e=function(a){function b(b,c,d){if("function"!=typeof b)return a;if("undefined"==typeof c)return b;switch(d){case 1:return function(a){return b.call(c,a)};case 3:return function(a,d,e){return b.call(c,a,d,e)};case 4:return function(a,d,e,f){return b.call(c,a,d,e,f)};case 5:return function(a,d,e,f,g){return b.call(c,a,d,e,f,g)}}return function(){return b.apply(c,arguments)}}return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){return a}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){var d,e;d=[c(163),c(155),c(153)],e=function(a,b,c){function d(d,e,f){if(!c(f))return!1;var g=typeof e;if("number"==g)var h=f.length,i=b(h)&&a(e,h);else i="string"==g&&e in f;if(i){var j=f[e];return d===d?d===j:j!==j}return!1}return d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(180),c(176)],e=function(a,b){function c(c,d,e){return d="function"==typeof d&&b(d,e,1),a(c,!0,d)}return c}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(168),c(149),c(174),c(150),c(184),c(181),c(185),c(162),c(153),c(154)],e=function(a,b,c,d,e,f,g,h,i,j){function k(m,n,o,p,r,s,u){var v;if(o&&(v=r?o(m,p,r):o(m)),"undefined"!=typeof v)return v;if(!i(m))return m;var w=h(m);if(w){if(v=e(m),!n)return a(m,v)}else{var x=K.call(m),y=x==q;if(x!=t&&x!=l&&(!y||r))return I[x]?f(m,x,n):r?m:{};if(v=g(y?{}:m),!n)return c(m,v,j(m))}s||(s=[]),u||(u=[]);for(var z=s.length;z--;)if(s[z]==m)return u[z];return s.push(m),u.push(v),(w?b:d)(m,function(a,b){v[b]=k(a,n,o,b,m,s,u)}),v}var l="[object Arguments]",m="[object Array]",n="[object Boolean]",o="[object Date]",p="[object Error]",q="[object Function]",r="[object Map]",s="[object Number]",t="[object Object]",u="[object RegExp]",v="[object Set]",w="[object String]",x="[object WeakMap]",y="[object ArrayBuffer]",z="[object Float32Array]",A="[object Float64Array]",B="[object Int8Array]",C="[object Int16Array]",D="[object Int32Array]",E="[object Uint8Array]",F="[object Uint8ClampedArray]",G="[object Uint16Array]",H="[object Uint32Array]",I={};I[l]=I[m]=I[y]=I[n]=I[o]=I[z]=I[A]=I[B]=I[C]=I[D]=I[s]=I[t]=I[u]=I[w]=I[E]=I[F]=I[G]=I[H]=!0,I[p]=I[q]=I[r]=I[v]=I[x]=!1;var J=Object.prototype,K=J.toString;return k}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(182)],e=function(a){function b(b,s,t){var u=b.constructor;switch(s){case h:return a(b);case c:case d:return new u(+b);case i:case j:case k:case l:case m:case n:case o:case p:case q:var v=b.buffer;return new u(t?a(v):v,b.byteOffset,b.length);case e:case g:return new u(b);case f:var w=new u(b.source,r.exec(b));w.lastIndex=b.lastIndex}return w}var c="[object Boolean]",d="[object Date]",e="[object Number]",f="[object RegExp]",g="[object String]",h="[object ArrayBuffer]",i="[object Float32Array]",j="[object Float64Array]",k="[object Int8Array]",l="[object Int16Array]",m="[object Int32Array]",n="[object Uint8Array]",o="[object Uint8ClampedArray]",p="[object Uint16Array]",q="[object Uint32Array]",r=/\w*$/;return b}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b,c){var d,e;d=[c(183),c(156),c(166)],e=function(a,b,c){function d(a){return f.call(a,0)}var e=b(e=c.ArrayBuffer)&&e,f=b(f=e&&new e(0).slice)&&f,g=Math.floor,h=b(h=c.Uint8Array)&&h,i=function(){try{var a=b(a=c.Float64Array)&&a,d=new a(new e(10),0,1)&&a}catch(f){}return d}(),j=i?i.BYTES_PER_ELEMENT:0;return f||(d=e&&h?function(a){var b=a.byteLength,c=i?g(b/j):0,d=c*j,f=new e(b);if(c){var k=new i(f,0,c);k.set(new i(a,0,c))}return b!=d&&(k=new h(f,d),k.set(new h(a,d))),f}:a(null)),d}.apply(b,d),!(void 0!==e&&(a.exports=e))},function(a,b){var c,d;c=[],d=function(){function a(a){return function(){return a}}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){function a(a){var b=a.length,d=new a.constructor(b);return b&&"string"==typeof a[0]&&c.call(a,"index")&&(d.index=a.index,d.input=a.input),d}var b=Object.prototype,c=b.hasOwnProperty;return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b){var c,d;c=[],d=function(){function a(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Object),new b}return a}.apply(b,c),!(void 0!==d&&(a.exports=d))},function(a,b,c){"use strict";var d=["<div class='st-block-positioner__inner'>","<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>","</div>"].join("\n"),e=function(a,b){this.mediator=b,this.$block=a,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(e.prototype,c(187),c(188),{total_blocks:0,bound:["onBlockCountChange","onSelectChange","toggle","show","hide"],className:"st-block-positioner",visibleClass:"st-block-positioner--is-visible",initialize:function(){this.$el.append(d),this.$select=this.$(".st-block-positioner__select"),this.$select.on("change",this.onSelectChange),this.mediator.on("block:countUpdate",this.onBlockCountChange)},onBlockCountChange:function(a){a!==this.total_blocks&&(this.total_blocks=a,this.renderPositionList())},onSelectChange:function(){var a=this.$select.val();0!==a&&(this.mediator.trigger("block:changePosition",this.$block,a,1===a?"before":"after"),this.toggle())},renderPositionList:function(){for(var a="<option value='0'>"+i18n.t("general:position")+"</option>",b=1;b<=this.total_blocks;b++)a+="<option value="+b+">"+b+"</option>";this.$select.html(a)},toggle:function(){this.$select.val(0),this.$el.toggleClass(this.visibleClass)},show:function(){this.$el.addClass(this.visibleClass)},hide:function(){this.$el.removeClass(this.visibleClass)}}),a.exports=e},function(a){"use strict";a.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(a){this[a]=this[a].bind(this)},this)}}},function(a,b,c){"use strict";var d=c(2),e=c(56);a.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(a){return this.$el.find(a)},render:function(){return this},destroy:function(){d.isUndefined(this.stopListening)||this.stopListening(),this.$el.remove()},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var a,b=Object.assign({},d.result(this,"attributes"));this.id&&(b.id=this.id),this.className&&(b["class"]=this.className),b.html&&(a=b.html,delete b.html);var c=e("<"+this.tagName+">").attr(b);a&&c.html(a),this._setElement(c)}},_setElement:function(a){return this.$el=e(a),this.el=this.$el[0],this}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(62),g=function(a,b){this.$block=a,this.blockID=this.$block.attr("id"),this.mediator=b,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(g.prototype,c(187),c(188),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn st-block-ui-btn--reorder st-icon",tagName:"a",attributes:function(){return{html:"reorder",draggable:"true","data-icon":"move"}},initialize:function(){this.$el.bind("mousedown touchstart",this.onMouseDown).bind("dragstart",this.onDragStart).bind("dragend touchend",this.onDragEnd),this.$block.dropArea().bind("drop",this.onDrop)},blockId:function(){return this.$block.attr("id")},onMouseDown:function(){this.mediator.trigger("block-controls:hide"),f.trigger("block:reorder:down")},onDrop:function(a){a.preventDefault();var b=this.$block,c=a.originalEvent.dataTransfer.getData("text/plain"),g=e("#"+c);d.isUndefined(c)||d.isEmpty(g)||b.attr("id")===c||b.attr("data-instance")!==g.attr("data-instance")||b.after(g),this.mediator.trigger("block:rerender",c),f.trigger("block:reorder:dropped",c)},onDragStart:function(a){var b=e(a.currentTarget).parent();a.originalEvent.dataTransfer.setDragImage(this.$block[0],b.position().left,b.position().top),a.originalEvent.dataTransfer.setData("Text",this.blockId()),f.trigger("block:reorder:dragstart"),this.$block.addClass("st-block--dragging")},onDragEnd:function(){f.trigger("block:reorder:dragend"),this.$block.removeClass("st-block--dragging")},render:function(){return this}}),a.exports=g},function(a,b,c){"use strict";var d=function(){this._ensureElement(),this._bindFunctions()};Object.assign(d.prototype,c(187),c(188),{tagName:"a",className:"st-block-ui-btn st-block-ui-btn--delete st-icon",attributes:{html:"delete","data-icon":"bin"}}),a.exports=d},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(57),g=function(a){var b=a.attr("data-st-name")||a.attr("name");return b||(b="Field"),f.capitalize(b)};a.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors();var a=this.$(".st-required");a.each(function(a,b){this.validateField(b)}.bind(this)),this.validations.forEach(this.runValidator,this),this.$el.toggleClass("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(a){a=e(a);var b=a.attr("contenteditable")?a.text():a.val();0===b.length&&this.setError(a,i18n.t("errors:block_empty",{name:g(a)}))},runValidator:function(a){d.isUndefined(this[a])||this[a].call(this)},setError:function(a,b){var c=this.addMessage(b,"st-msg--error");a.addClass("st-error"),this.errors.push({field:a,reason:b,msg:c})},resetErrors:function(){this.errors.forEach(function(a){a.field.removeClass("st-error"),a.msg.remove()}),this.$messages.removeClass("st-block__messages--is-visible"),this.errors=[]}}},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(62);a.exports={blockStorage:{},createStore:function(a){this.blockStorage={type:e.underscored(this.type),data:a||{}}},save:function(){var a=this._serializeData();d.isEmpty(a)||this.setData(a)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(a){e.log("Setting data for block "+this.blockID),Object.assign(this.blockStorage.data,a||{})},setAndLoadData:function(a){this.setData(a),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){e.log("loadData for "+this.blockID),f.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){e.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){d.isEmpty(this._getData())||this.beforeLoadingData()}}},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(58),g=c(62),h=c(194),i=["convertToMarkdown","convertFromMarkdown","formatBar"],j=function(a,b,c){this.options=a,this.blockOptions=i.reduce(function(b,c){return b[c]=a[c],b},{}),this.instance_scope=b,this.mediator=c,this.blocks=[],this.blockCounts={},this.blockTypes={},this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};Object.assign(j.prototype,c(187),c(207),c(60),{eventNamespace:"block",mediatedEvents:{create:"createBlock",remove:"removeBlock",rerender:"rerenderBlock"},initialize:function(){},createBlock:function(a,b){if(a=e.classify(a),this.canCreateBlock(a)){var c=new h[a](b,this.instance_scope,this.mediator,this.blockOptions);this.blocks.push(c),this._incrementBlockTypeCount(a),this.mediator.trigger("block:render",c),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),g.trigger(b?"block:create:existing":"block:create:new",c),e.log("Block created of type "+a)}},removeBlock:function(a){var b=this.findBlockById(a),c=e.classify(b.type);this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter(function(a){return a.blockID!==b.blockID}),this._decrementBlockTypeCount(c),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),g.trigger("block:remove")},rerenderBlock:function(a){var b=this.findBlockById(a);d.isUndefined(b)||b.isEmpty()||!b.drop_options.re_render_on_reorder||b.beforeLoadingData()},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(a){return this.blockLimitReached()?(e.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(a)?this.canAddBlockType(a)?!0:(e.log("Block Limit reached for type "+a),!1):(e.log("Block type not available "+a),!1)},validateBlockTypesExist:function(a){return f.skipValidation||!a?!1:void(this.required||[]).forEach(function(a){if(this.isBlockTypeAvailable(a))if(0===this._getBlockTypeCount(a))e.log("Failed validation on required block type "+a),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:a})});else{var b=this.getBlocksByType(a).filter(function(a){return!a.isEmpty()});if(b.length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:a})}),e.log("A required block type "+a+" is empty")}},this)},findBlockById:function(a){return this.blocks.find(function(b){return b.blockID===a})},getBlocksByType:function(a){return this.blocks.filter(function(b){return e.classify(b.type)===a})},getBlocksByIDs:function(a){return this.blocks.filter(function(b){return a.includes(b.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(a){return!d.isUndefined(this.blockTypes[a])},canAddBlockType:function(a){var b=this._getBlockTypeLimit(a);return!(0!==b&&this._getBlockTypeCount(a)>=b)},_setBlocksTypes:function(){this.blockTypes=e.flatten(d.isUndefined(this.options.blockTypes)?h:this.options.blockTypes)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!d.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(a){this.blockCounts[a]=d.isUndefined(this.blockCounts[a])?1:this.blockCounts[a]+1},_decrementBlockTypeCount:function(a){this.blockCounts[a]=d.isUndefined(this.blockCounts[a])?1:this.blockCounts[a]-1},_getBlockTypeCount:function(a){return d.isUndefined(this.blockCounts[a])?0:this.blockCounts[a]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(a){return this.isBlockTypeAvailable(a)?parseInt(d.isUndefined(this.options.blockTypeLimits[a])?0:this.options.blockTypeLimits[a],10):0}}),a.exports=j},function(a,b,c){"use strict";a.exports={Text:c(195),Quote:c(201),Image:c(202),Heading:c(203),List:c(204),Tweet:c(205),Video:c(206)}},function(a,b,c){"use strict";var d=c(196),e=c(200);a.exports=d.extend({type:"text",title:function(){return i18n.t("blocks:text:title")},editorHTML:'<div class="st-required st-text-block" contenteditable="true"></div>',icon_name:"text",loadData:function(a){this.setTextBlockHTML(this.options.convertFromMarkdown&&"html"!==a.format?e(a.text,this.type):a.text)}})},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(74),g=c(58),h=c(57),i=c(66),j=c(197),k=c(189),l=c(190),m=c(186),n=c(62),o=c(199),p=function(){j.apply(this,arguments)};p.prototype=Object.create(j.prototype),p.prototype.constructor=p;var q=["<div class='st-block__ui-delete-controls'>","<label class='st-block__delete-label'>","<%= i18n.t('general:delete') %>","</label>","<a class='st-block-ui-btn st-block-ui-btn--confirm-delete st-icon' data-icon='tick'></a>","<a class='st-block-ui-btn st-block-ui-btn--deny-delete st-icon' data-icon='close'></a>","</div>"].join("\n");Object.assign(p.prototype,j.fn,c(191),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender"],className:"st-block st-icon--add",attributes:function(){return Object.assign(j.fn.attributes.call(this),{"data-icon-after":"add"})},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,multi_editable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,_previousSelection:"",initialize:function(){},toMarkdown:function(a){return a},toHTML:function(a){return a},withMixin:function(a){if(d.isObject(a)){var b="initialize"+a.mixinName;d.isUndefined(this[b])&&(Object.assign(this,a),this[b]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.$editor=this.$inner.children().first(),this.mixinsRequireInputs=!1,this.availableMixins.forEach(function(a){if(this[a]){var b=i[h.classify(a)];!d.isUndefined(b.requireInputs)&&b.requireInputs&&(this.mixinsRequireInputs=!0)}},this),this.mixinsRequireInputs){var a=e("<div>",{"class":"st-block__inputs"});this.$inner.append(a),this.$inputs=a}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(a){this[a]&&this.withMixin(i[h.classify(a)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),this.$el.remove()},loading:function(){d.isUndefined(this.spinner)||this.ready(),this.spinner=new o(g.defaults.spinner),this.spinner.spin(this.$el[0]),this.$el.addClass("st--is-loading")},ready:function(){this.$el.removeClass("st--is-loading"),d.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){h.log("toData for "+this.blockID);var a={};return this.hasTextBlock()&&(a.text=this.getTextBlockHTML(),a.format="html"),this.$(":input").not(".st-paste-block").length>0&&this.$(":input").each(function(b,c){c.getAttribute("name")&&(a[c.getAttribute("name")]=c.value)}),a},focus:function(){this.getTextBlock().focus()},blur:function(){this.getTextBlock().blur()},onFocus:function(){this.getTextBlock().bind("focus",this._onFocus)},onBlur:function(){this.getTextBlock().bind("blur",this._onBlur)},_onFocus:function(){this.trigger("blockFocus",this.$el)},_onBlur:function(){},onBlockRender:function(){this.focus()},onDrop:function(){},onDeleteClick:function(a){a.preventDefault();var b=function(a){a.preventDefault(),this.mediator.trigger("block:remove",this.blockID),this.remove()},c=function(a){a.preventDefault(),this.$el.removeClass("st-block--delete-active"),e.remove()};if(this.isEmpty())return void b.call(this,new Event("click"));this.$inner.append(d.template(q)),this.$el.addClass("st-block--delete-active");var e=this.$inner.find(".st-block__ui-delete-controls");this.$inner.on("click",".st-block-ui-btn--confirm-delete",b.bind(this)).on("click",".st-block-ui-btn--deny-delete",c.bind(this))},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(this.$editor.show(),this.$inputs.hide()),j.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(a){if(d.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return f.execTextBlockCommand(this._scribe,a)},queryTextBlockCommandState:function(a){if(d.isUndefined(this._scribe))throw"No Scribe instance found to query command";return f.queryTextBlockCommandState(this._scribe,a)},_handleContentPaste:function(a){setTimeout(this.onContentPasted.bind(this,a,e(a.currentTarget)),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){var a=new m(this.$el,this.mediator);this._withUIComponent(a,".st-block-ui-btn--reorder",a.toggle),this._withUIComponent(new k(this.$el,this.mediator)),this._withUIComponent(new l,".st-block-ui-btn--delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var a=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(b){if(!d.isUndefined(b.keyCode)){var c=!1;a.$el.on("keyup",".st-text-block",function(a){(17===a.which||224===a.which||91===a.which)&&(c=!1)}).on("keydown",".st-text-block",{formatter:b},function(b){(17===b.which||224===b.which||91===b.which)&&(c=!0),b.which===b.data.formatter.keyCode&&c&&(b.preventDefault(),a.execTextBlockCommand(b.data.formatter.cmd))})}})},_initTextBlocks:function(){this.getTextBlock().bind("keyup",this.getSelectionForFormatter).bind("mouseup",this.getSelectionForFormatter).bind("DOMNodeInserted",this.clearInsertedStyles);var a=this.getTextBlock().get(0);if(!d.isUndefined(a)&&d.isUndefined(this._scribe)){var b=d.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=f.initScribeInstance(a,this.scribeOptions,b)}},getSelectionForFormatter:function(){var a=this;setTimeout(function(){var b=window.getSelection(),c=b.toString().trim(),d="formatter:"+(""===c?"hide":"position");a.mediator.trigger(d,a),n.trigger(d,a)},1)},clearInsertedStyles:function(a){var b=a.target;b.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return d.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(a){return this._scribe.setContent(a)},isEmpty:function(){return d.isEmpty(this.getBlockData())}}),p.extend=c(198),a.exports=p},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(56),g=c(189),h=function(a,b,c,e){this.createStore(a),this.blockID=d.uniqueId("st-block-"),this.instanceID=b,this.mediator=c,this.options=e||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};Object.assign(h.prototype,c(187),c(60),c(188),c(192),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:d.template("<div class='st-block__inner'><%= editor_html %></div>"),attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return e.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=e.toSlug(this.type),this.blockCSSClass},type:"","class":function(){return e.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var a=d.result(this,"editorHTML");this.$el.append(this.block_template({editor_html:a})),this.$inner=this.$el.find(".st-block__inner"),this.$inner.bind("click mouseover",function(a){a.stopPropagation()})},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.$el.addClass("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(a,b,c){this.$ui.append(a.render().$el),b&&c&&this.$ui.on("click",b,c)},_initUI:function(){var a=f("<div>",{"class":"st-block__ui"});this.$inner.append(a),this.$ui=a,this._initUIComponents()},_initMessages:function(){var a=f("<div>",{"class":"st-block__messages"});this.$inner.prepend(a),this.$messages=a},addMessage:function(a,b){var c=f("<span>",{html:a,"class":"st-msg "+b});return this.$messages.append(c).addClass("st-block__messages--is-visible"),c},resetMessages:function(){this.$messages.html("").removeClass("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new g(this.$el))}}),h.fn=h.prototype,h.extend=c(198),a.exports=h},function(a){"use strict";a.exports=function(a,b){var c,d=this;c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return d.apply(this,arguments)},Object.assign(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&Object.assign(c.prototype,a),c.__super__=d.prototype,c}},function(a,b,c){var d,e;!function(f,g){"object"==typeof a&&a.exports?a.exports=g():(d=g,e="function"==typeof d?d.call(b,c,b,a):d,!(void 0!==e&&(a.exports=e)))}(this,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;c>b;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(k.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",k.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;if(b=b.charAt(0).toUpperCase()+b.slice(1),void 0!==e[b])return b;for(d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}k.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.scale*(d.length+d.width),k=2*d.scale*j,l=-(d.width+d.length)*d.scale*2+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,e=e&&e.firstChild,e&&(e.opacity=c))}}var j,k,l=["webkit","Moz","ms","O"],m={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=a(null,{className:d.className});if(e(f,{position:d.position,width:0,zIndex:d.zIndex,left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function o(){h++;for(var a=0;a<d.lines;a++)g=Math.max(1-(h+(d.lines-a)*n)%l*m,d.opacity),c.opacity(f,a*d.direction+i,g,d);c.timeout=c.el&&setTimeout(o,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),"undefined"!=typeof document){k=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}();var o=e(a("group"),{behavior:"url(#default#VML)"});!d(o,"transform")&&o.adj?i():j=d(o,"animation")}return h})},function(a,b,c){"use strict";var d=c(2),e=c(57);a.exports=function(a,b){var f=c(194);b=e.classify(b);var g=a,h="Text"===b;d.isUndefined(h)&&(h=!1),h&&(g="<p>"+g),g=g.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(a,b,c){return"<a href='"+c+"'>"+b.replace(/\n/g,"")+"</a>"}),g=e.reverse(e.reverse(g).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(a,b){return">i/<"+b.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(a,b){return">b/<"+b.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"})),g=g.replace(/^\> (.+)$/gm,"$1");var i;return f.hasOwnProperty(b)&&(i=f[b],!d.isUndefined(i.prototype.toHTML)&&d.isFunction(i.prototype.toHTML)&&(g=i.prototype.toHTML(g))),h&&(g=g.replace(/\n\s*\n/gm,"</p><p>"),g=g.replace(/\n/gm,"<br>")),g=g.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,""),g=g.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),h&&(g+="</p>"),g}},function(a,b,c){"use strict";var d=c(2),e=c(196),f=c(200),g=d.template(['<blockquote class="st-required st-text-block" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string st-required js-cite-input" type="text" />'].join("\n"));a.exports=e.extend({type:"quote",title:function(){return i18n.t("blocks:quote:title")},icon_name:"quote",editorHTML:function(){return g(this)},loadData:function(a){this.setTextBlockHTML(this.options.convertFromMarkdown&&"html"!==a.format?f(a.text,this.type):a.text),this.$(".js-cite-input").val(a.cite)}})},function(a,b,c){"use strict";var d=c(56),e=c(196);a.exports=e.extend({type:"image",title:function(){return i18n.t("blocks:image:title")},droppable:!0,uploadable:!0,icon_name:"image",loadData:function(a){this.$editor.html(d("<img>",{src:a.file.url}))},onBlockRender:function(){this.$inputs.find("button").bind("click",function(a){a.preventDefault()}),this.$inputs.find("input").on("change",function(a){this.onDrop(a.currentTarget)}.bind(this))},onDrop:function(a){var b=a.files[0],c="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(b.type)&&(this.loading(),this.$inputs.hide(),this.$editor.html(d("<img>",{src:c.createObjectURL(b)})).show(),this.uploader(b,function(a){this.setData(a),this.ready()},function(){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))}})},function(a,b,c){"use strict";var d=c(196),e=c(200);a.exports=d.extend({type:"Heading",title:function(){return i18n.t("blocks:heading:title")},editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(a){this.setTextBlockHTML(this.options.convertFromMarkdown&&"html"!==a.format?e(a.text,this.type):a.text)}})},function(a,b,c){"use strict";var d=c(196),e=c(200),f=function(a){return function(b){b.el.addEventListener("keydown",function(c){var d,e=function(a){var b=document.createElement("div");return b.appendChild(a.extractContents()),b.innerHTML},f=function(){var a=new b.api.Selection,c=a.range.cloneRange();return c.setEndAfter(b.el.lastChild,0),c},g=function(){var a=new b.api.Selection;
return a.range.startOffset};13!==c.keyCode||c.shiftKey?a.isLastListItem()||(8===c.keyCode&&0===g()?(c.preventDefault(),d=b.getContent(),a.removeCurrentListItem(),a.appendToCurrentItem(d)):46===c.keyCode):(c.preventDefault(),d=e(f()),a.addListItemAfterCurrent(d))})}};a.exports=d.extend({type:"list",title:function(){return i18n.t("blocks:list:title")},icon_name:"list",multi_editable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(a){a.use(new f(this))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.$ul=this.$inner.find("ul"),this.ul=this.$ul.get(0)},loadData:function(a){var b=this;this.options.convertFromMarkdown&&"html"!==a.format&&(a=this.parseFromMarkdown(a.text)),a.listItems.length?a.listItems.forEach(function(a){b.addListItem(a.content)}):b.addListItem()},parseFromMarkdown:function(a){var b=a.replace(/^ - (.+)$/gm,"$1").split("\n");return b=b.filter(function(a){return a.length}).map(function(a){return{content:e(a,this.type)}}.bind(this)),{listItems:b,format:"html"}},_serializeData:function(){var a={format:"html",listItems:[]};return this.editorIds.forEach(function(b){var c={content:this.getTextEditor(b).scribe.getContent()};a.listItems.push(c)}.bind(this)),a},addListItemAfterCurrent:function(a){this.addListItem(a,this.getCurrentTextEditor())},addListItem:function(a,b){a=a||"","<br>"===a.trim()&&(a="");var c=this.newTextEditor(this.listItemEditorHTML,a);if(b&&this.ul.lastchild!==b.node){var d=b.node.nextSibling;this.ul.insertBefore(c.node,d);var e=this.editorIds.indexOf(b.id)+1;this.editorIds.splice(e,0,c.id)}else this.$ul.append(c.node),this.editorIds.push(c.id);this.focusOn(c)},focusOnNeighbor:function(){var a=this.previousListItem()||this.nextListItem();a&&this.focusOn(a)},focusOn:function(a){var b,c=a.scribe,d=new c.api.Selection,e=c.el.lastChild;d.range&&(b=d.range.cloneRange()),a.el.focus(),b&&(b.setStartAfter(e,1),b.collapse(!1))},removeCurrentListItem:function(){if(1!==this.editorIds.length){var a=this.getCurrentTextEditor(),b=this.editorIds.indexOf(a.id);this.focusOnNeighbor(a),this.editorIds.splice(b,1),this.ul.removeChild(a.node),this.removeTextEditor(a.id)}},appendToCurrentItem:function(a){this.appendToTextEditor(this.getCurrentTextEditor().id,a)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var a=this.editorIds.indexOf(this.getCurrentTextEditor().id),b=this.editorIds[a+1];return void 0!==b?this.getTextEditor(b):null},previousListItem:function(){var a=this.editorIds.indexOf(this.getCurrentTextEditor().id),b=this.editorIds[a-1];return void 0!==b?this.getTextEditor(b):null}})},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(57),g=c(196),h=d.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>",'<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>'].join("\n"));a.exports=g.extend({type:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},title:function(){return i18n.t("blocks:tweet:title")},fetchUrl:function(a){return"/tweets/?tweet_id="+a},icon_name:"twitter",loadData:function(a){d.isUndefined(a.status_url)&&(a.status_url=""),this.$inner.find("iframe").remove(),this.$inner.prepend(h(a))},onContentPasted:function(a){var b=e(a.target),c=b.val();this.handleTwitterDropPaste(c)},handleTwitterDropPaste:function(a){if(!this.validTweetUrl(a))return void f.log("Invalid Tweet URL");var b=a.match(/[^\/]+$/);if(!d.isEmpty(b)){this.loading(),b=b[0];var c={url:this.fetchUrl(b),dataType:"json"};this.fetch(c,this.onTweetSuccess,this.onTweetFail)}},validTweetUrl:function(a){return f.isURI(a)&&-1!==a.indexOf("twitter")&&-1!==a.indexOf("status")},onTweetSuccess:function(a){var b={user:{profile_image_url:a.user.profile_image_url,profile_image_url_https:a.user.profile_image_url_https,screen_name:a.user.screen_name,name:a.user.name},id:a.id_str,text:a.text,created_at:a.created_at,entities:a.entities,status_url:"https://twitter.com/"+a.user.screen_name+"/status/"+a.id_str};this.setAndLoadData(b),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(a){var b=a.getData("text/plain");this.handleTwitterDropPaste(b)}})},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(196);a.exports=f.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}},type:"video",title:function(){return i18n.t("blocks:video:title")},droppable:!0,pastable:!0,icon_name:"video",loadData:function(a){if(this.providers.hasOwnProperty(a.source)){var b=this.providers[a.source],c="file:"===window.location.protocol?"http:":window.location.protocol,e=b.square?"with-square-media":"with-sixteen-by-nine-media";this.$editor.addClass("st-block__editor--"+e).html(d.template(b.html,{protocol:c,remote_id:a.remote_id,width:this.$editor.width()}))}},onContentPasted:function(a){this.handleDropPaste(a.target.value)},matchVideoProvider:function(a,b,c){var e=a.regex.exec(c);return null==e||d.isUndefined(e[1])?{}:{source:b,remote_id:e[1]}},handleDropPaste:function(a){if(e.isURI(a))for(var b in this.providers)this.providers.hasOwnProperty(b)&&this.setAndLoadData(this.matchVideoProvider(this.providers[b],b,a))},onDrop:function(a){var b=a.getData("text/plain");this.handleDropPaste(b)}})},function(a){"use strict";a.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){Object.keys(this.mediatedEvents).forEach(function(a){var b=this.mediatedEvents[a];a=this.eventNamespace?this.eventNamespace+":"+a:a,this.mediator.on(a,this[b].bind(this))},this)}}},function(a,b,c){"use strict";var d=c(2),e=c(194),f=function(a){this.type=a,this.block_type=e[this.type].prototype,this.can_be_rendered=this.block_type.toolbarEnabled,this._ensureElement()};Object.assign(f.prototype,c(187),c(188),c(60),{tagName:"a",className:"st-block-control",attributes:function(){return{"data-type":this.block_type.type}},render:function(){return this.$el.html('<span class="st-icon">'+d.result(this.block_type,"icon_name")+"</span>"+d.result(this.block_type,"title")),this}}),a.exports=f},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(194),g=c(208),h=c(62),i=function(a,b){this.available_types=a||[],this.mediator=b,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(i.prototype,c(187),c(207),c(188),c(60),{bound:["handleControlButtonClick"],block_controls:null,className:"st-block-controls",eventNamespace:"block-controls",mediatedEvents:{render:"renderInContainer",show:"show",hide:"hide"},initialize:function(){for(var a in this.available_types)if(f.hasOwnProperty(a)){var b=new g(a);b.can_be_rendered&&this.$el.append(b.render().$el)}this.$el.delegate(".st-block-control","click",this.handleControlButtonClick),this.mediator.on("block-controls:show",this.renderInContainer)},show:function(){this.$el.addClass("st-block-controls--active"),h.trigger("block:controls:shown")},hide:function(){this.removeCurrentContainer(),this.$el.removeClass("st-block-controls--active"),h.trigger("block:controls:hidden")},handleControlButtonClick:function(a){a.stopPropagation(),this.mediator.trigger("block:create",e(a.currentTarget).attr("data-type"))},renderInContainer:function(a){this.removeCurrentContainer(),a.append(this.$el.detach()),a.addClass("with-st-controls"),this.currentContainer=a,this.show()},removeCurrentContainer:function(){d.isUndefined(this.currentContainer)||(this.currentContainer.removeClass("with-st-controls"),this.currentContainer=void 0)}}),a.exports=i},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(62),g=function(a,b,c){this.$wrapper=a,this.instance_id=b,this.mediator=c,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(g.prototype,c(187),c(188),c(60),{className:"st-block-controls__top",attributes:function(){return{"data-icon":"add"}},bound:["handleBlockMouseOut","handleBlockMouseOver","handleBlockClick","onDrop"],initialize:function(){this.$el.on("click",this.handleBlockClick).dropArea().bind("drop",this.onDrop),this.$wrapper.on("mouseover",".st-block",this.handleBlockMouseOver).on("mouseout",".st-block",this.handleBlockMouseOut).on("click",".st-block--with-plus",this.handleBlockClick)},onDrop:function(a){a.preventDefault();var b=this.$el,c=a.originalEvent.dataTransfer.getData("text/plain"),g=e("#"+c);d.isUndefined(c)||d.isEmpty(g)||b.attr("id")===c||this.instance_id!==g.attr("data-instance")||b.after(g),f.trigger("block:reorder:dropped",c)},handleBlockMouseOver:function(a){var b=e(a.currentTarget);b.hasClass("st-block--with-plus")||b.addClass("st-block--with-plus")},handleBlockMouseOut:function(a){var b=e(a.currentTarget);b.hasClass("st-block--with-plus")&&b.removeClass("st-block--with-plus")},handleBlockClick:function(a){a.stopPropagation(),this.mediator.trigger("block-controls:render",e(a.currentTarget))}}),a.exports=g},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=function(a,b,c){this.editor=c,this.options=Object.assign({},f.defaults.formatBar,a||{}),this.commands=this.options.commands,this.mediator=b,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};Object.assign(h.prototype,c(187),c(207),c(60),c(188),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){this.$btns=[],this.commands.forEach(function(a){var b=e("<button>",{"class":"st-format-btn st-format-btn--"+a.name+" "+(a.iconName?"st-icon":""),text:a.text,"data-cmd":a.cmd});this.$btns.push(b),b.appendTo(this.$el)},this),this.$b=e(document)},hide:function(){this.$el.removeClass("st-format-bar--is-ready"),this.$el.remove()},show:function(){this.hide(),this.editor.$outer.append(this.$el),this.$el.addClass("st-format-bar--is-ready"),this.$el.bind("click",".st-format-btn",this.onFormatButtonClick)},remove:function(){this.$el.remove()},renderBySelection:function(){this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var a=window.getSelection(),b=a.getRangeAt(0),c=b.getBoundingClientRect(),d={},e=this.editor.$outer.get(0),f=e.getBoundingClientRect();d.top=c.top-f.top+"px",d.left=(c.left+c.right)/2-this.el.offsetWidth/2-f.left+"px",this.$el.css(d)},highlightSelectedButtons:function(){var a=g.getBlockBySelection();this.$btns.forEach(function(b){var c=e(b).data("cmd");b.toggleClass("st-format-btn--is-active",a.queryTextBlockCommandState(c))},this)},onFormatButtonClick:function(a){a.stopPropagation();var b=g.getBlockBySelection();if(d.isUndefined(b))throw"Associated block not found";var c=e(a.target),f=c.data("cmd");return d.isUndefined(f)?!1:(b.execTextBlockCommand(f),this.highlightSelectedButtons(),!1)}}),a.exports=h},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(60),i=c(62),j=c(213),k=c(209),l=c(193),m=c(210),n=c(211),o=c(63),p=c(214),q=function(a){this.initialize(a)};Object.assign(q.prototype,c(187),c(60),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","renderBlock","resetBlockControls","blockLimitReached"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(a){return g.log("Init SirTrevor.Editor"),this.options=Object.assign({},f.defaults,a||{}),this.ID=d.uniqueId("st-editor-"),this._ensureAndSetElements()?(!d.isUndefined(this.options.onEditorRender)&&d.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=Object.assign({},h),this._bindFunctions(),f.instances.push(this),this.build(),void j.bindFormSubmit(this.$form)):!1},build:function(){this.$el.hide(),this.errorHandler=new p(this.$outer,this.mediator,this.options.errorsContainer),this.store=new o(this.$el.val(),this.mediator),this.block_manager=new l(this.options,this.ID,this.mediator),this.block_controls=new k(this.block_manager.blockTypes,this.mediator),this.fl_block_controls=new m(this.$wrapper,this.ID,this.mediator),this.formatBar=new n(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block-controls:reset",this.resetBlockControls),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:render",this.renderBlock),this.dataStore="Please use store.retrieve();",this._setEvents(),this.$wrapper.prepend(this.fl_block_controls.render().$el),this.$outer.append(this.block_controls.render().$el),e(window).bind("click",this.hideAllTheThings),this.createBlocks(),this.$wrapper.addClass("st-ready"),d.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var a=this.store.retrieve();a.data.length>0?a.data.forEach(function(a){this.mediator.trigger("block:create",a.type,a.data)},this):this.options.defaultType!==!1&&this.mediator.trigger("block:create",this.options.defaultType,{})},destroy:function(){this.formatBar.destroy(),this.fl_block_controls.destroy(),this.block_controls.destroy(),this.block_manager.blocks.forEach(function(a){this.mediator.trigger("block:remove",a.blockID)},this),this.mediator.stopListening(),this.stopListening(),f.instances=f.instances.filter(function(a){return a.ID!==this.ID},this),this.store.reset(),this.$outer.replaceWith(this.$el.detach())},reinitialize:function(a){this.destroy(),this.initialize(a||this.options)},resetBlockControls:function(){this.block_controls.renderInContainer(this.$wrapper),this.block_controls.hide()},blockLimitReached:function(a){this.$wrapper.toggleClass("st--block-limit-reached",a)},_setEvents:function(){Object.keys(this.events).forEach(function(a){i.on(a,this[this.events[a]],this)},this)},hideAllTheThings:function(){this.block_controls.hide(),this.formatBar.hide()},store:function(a,b){return g.log("The store method has been removed, please call store[methodName]"),this.store[a].call(this,b||{})},renderBlock:function(a){this._renderInPosition(a.render().$el),this.hideAllTheThings(),a.trigger("onRender")},removeBlockDragOver:function(){this.$outer.find(".st-drag-over").removeClass("st-drag-over")},changeBlockPosition:function(a,b){b-=1;var c=this.getBlockPosition(a),d=this.$wrapper.find(".st-block").eq(b),e=c>b?"Before":"After";d&&d.attr("id")!==a.attr("id")&&(this.hideAllTheThings(),a["insert"+e](d))},_renderInPosition:function(a){this.block_controls.currentContainer?this.block_controls.currentContainer.after(a):this.$wrapper.append(a)},validateAndSaveBlock:function(a,b){if((!f.skipValidation||b)&&!a.valid())return this.mediator.trigger("errors:add",{text:d.result(a,"validationFailMsg")}),void g.log("Block "+a.blockID+" failed validation");var c=a.getData();g.log("Adding data for block "+a.blockID+" to block store:",c),this.store.addData(c)},onFormSubmit:function(a){return a=a===!1?!1:!0,g.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(a),this.block_manager.validateBlockTypesExist(a),this.mediator.trigger("errors:render"),this.$el.val(this.store.toString()),this.errorHandler.errors.length},validateBlocks:function(a){var b=this;this.$wrapper.find(".st-block").each(function(c,f){var g=b.block_manager.findBlockById(e(f).attr("id"));d.isUndefined(g)||b.validateAndSaveBlock(g,a)})},findBlockById:function(a){return this.block_manager.findBlockById(a)},getBlocksByType:function(a){return this.block_manager.getBlocksByType(a)},getBlocksByIDs:function(a){return this.block_manager.getBlocksByIDs(a)},getBlockPosition:function(a){return this.$wrapper.find(".st-block").index(a)},_ensureAndSetElements:function(){if(d.isUndefined(this.options.el)||d.isEmpty(this.options.el))return g.log("You must provide an el"),!1;this.$el=this.options.el,this.el=this.options.el[0],this.$form=this.$el.parents("form");var a=e("<div>").attr({id:this.ID,"class":"st-outer notranslate",dropzone:"copy link move"}),b=e("<div>").attr({"class":"st-blocks"});return this.$el.wrap(a).wrap(b),this.$outer=this.$form.find("#"+this.ID),this.$wrapper=this.$outer.find(".st-blocks"),!0}}),a.exports=q},function(a,b,c){"use strict";var d=c(58),e=c(57),f=c(62),g=c(64),h=!1,i={bindFormSubmit:function(a){h||(new g(a),a.bind("submit",this.onFormSubmit),h=!0)},onBeforeSubmit:function(a){var b=0;return d.instances.forEach(function(c){b+=c.onFormSubmit(a)}),e.log("Total errors: "+b),b},onFormSubmit:function(a){var b=i.onBeforeSubmit();b>0&&(f.trigger("onError"),a.preventDefault())}};a.exports=i},function(a,b,c){"use strict";var d=c(2),e=c(56),f=function(a,b,c){this.$wrapper=a,this.mediator=b,this.$el=c,d.isUndefined(this.$el)&&(this._ensureElement(),this.$wrapper.prepend(this.$el)),this.$el.hide(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(f.prototype,c(187),c(207),c(188),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var a=e("<ul>");this.$el.append("<p>"+i18n.t("errors:title")+"</p>").append(a),this.$list=a},render:function(){return 0===this.errors.length?!1:(this.errors.forEach(this.createErrorItem,this),void this.$el.show())},createErrorItem:function(a){var b=e("<li>",{"class":"st-errors__msg",html:a.text});this.$list.append(b)},addMessage:function(a){this.errors.push(a)},reset:function(){return 0===this.errors.length?!1:(this.errors=[],this.$list.html(""),void this.$el.hide())}}),a.exports=f},function(a,b,c){"use strict";var d=c(2),e=c(57);a.exports=function(a,b){function f(a,b,c){return d.isUndefined(c)&&(c=""),"**"+b.replace(/<(.)?br(.)?>/g,"")+"**"+c}function g(a,b,c){return d.isUndefined(c)&&(c=""),"_"+b.replace(/<(.)?br(.)?>/g,"")+"_"+c}var h=c(194);b=e.classify(b);var i=a;i=i.replace(/&nbsp;/g," "),i=i.replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var j,k,l=["style","script","applet","embed","noframes","noscript"];for(k=0;k<l.length;k++)j=new RegExp("<"+l[k]+".*?"+l[k]+"(.*?)>","gi"),i=i.replace(j,"");i=i.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var m=["em","i","strong","b"];for(k=0;k<m.length;k++)j=new RegExp("<"+m[k]+"><br></"+m[k]+">","gi"),i=i.replace(j,"<br>");i=i.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(a,b,c){return"["+c.trim().replace(/<(.)?br(.)?>/g,"")+"]("+b+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,f).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,f).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,g).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,g),i=i.replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">");var n;return h.hasOwnProperty(b)&&(n=h[b],!d.isUndefined(n.prototype.toMarkdown)&&d.isFunction(n.prototype.toMarkdown)&&(i=n.prototype.toMarkdown(i))),i=i.replace(/<\/?[^>]+(>|$)/g,"")}}])}),window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig.i18n=window.ParsleyConfig.i18n||{},window.ParsleyConfig.i18n.nl=$.extend(window.ParsleyConfig.i18n.nl||{},{defaultMessage:"Deze waarde lijkt onjuist.",type:{email:"Dit lijkt geen geldig e-mail adres te zijn.",url:"Dit lijkt geen geldige URL te zijn.",urlstrict:"Dit is geen geldige URL.",number:"Deze waarde moet een nummer zijn.",digits:"Deze waarde moet numeriek zijn.",dateIso:"Deze waarde moet een datum in het volgende formaat zijn: (YYYY-MM-DD).",alphanum:"Deze waarde moet alfanumeriek zijn.",phone:"Deze waarde moet een geldig telefoonnummer zijn."},notnull:"Deze waarde mag niet leeg zijn.",notblank:"Deze waarde mag niet leeg zijn.",required:"Dit veld is verplicht",regexp:"Deze waarde lijkt onjuist te zijn.",min:"Deze waarde mag niet lager zijn dan %s.",max:"Deze waarde mag niet groter zijn dan %s.",range:"Deze waarde moet tussen %s en %s liggen.",minlength:"Deze tekst is te kort. Deze moet uit minimaal %s karakters bestaan.",maxlength:"Deze waarde is te lang. Deze mag maximaal %s karakters lang zijn.",mincheck:"Je moet minstens %s opties selecteren.",maxcheck:"Je moet %s of minder opties selecteren.",rangecheck:"Je moet tussen de %s en %s opties selecteren.",rangelength:"Deze waarde moet tussen %s en %s karakters lang zijn.",equalto:"Deze waardes moeten identiek zijn."}),"undefined"!=typeof window.ParsleyValidator&&window.ParsleyValidator.addCatalog("nl",window.ParsleyConfig.i18n.nl,!0),+function(a){"use strict";function b(b){return this.each(function(){var c=a(this),e=c.data("bs.alert");e||c.data("bs.alert",e=new d(this)),"string"==typeof b&&e[b].call(c)})}var c='[data-dismiss="alert"]',d=function(b){a(b).on("click",c,this.close)};d.VERSION="3.2.0",d.prototype.close=function(b){function c(){f.detach().trigger("closed.bs.alert").remove()}var d=a(this),e=d.attr("data-target");e||(e=d.attr("href"),e=e&&e.replace(/.*(?=#[^\s]*$)/,""));var f=a(e);b&&b.preventDefault(),f.length||(f=d.hasClass("alert")?d:d.parent()),f.trigger(b=a.Event("close.bs.alert")),b.isDefaultPrevented()||(f.removeClass("in"),a.support.transition&&f.hasClass("fade")?f.one("bsTransitionEnd",c).emulateTransitionEnd(150):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on("click.bs.alert.data-api",c,d.prototype.close)}(jQuery),+function(a){"use strict";function b(b){b&&3===b.which||(a(e).remove(),a(f).each(function(){var d=c(a(this)),e={relatedTarget:this};d.hasClass("open")&&(d.trigger(b=a.Event("hide.bs.dropdown",e)),b.isDefaultPrevented()||d.removeClass("open").trigger("hidden.bs.dropdown",e))}))}function c(b){var c=b.attr("data-target");c||(c=b.attr("href"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\s]*$)/,""));var d=c&&a(c);return d&&d.length?d:b.parent()}function d(b){return this.each(function(){var c=a(this),d=c.data("bs.dropdown");d||c.data("bs.dropdown",d=new g(this)),"string"==typeof b&&d[b].call(c)})}var e=".dropdown-backdrop",f='[data-toggle="dropdown"]',g=function(b){a(b).on("click.bs.dropdown",this.toggle)};g.VERSION="3.2.0",g.prototype.toggle=function(d){var e=a(this);if(!e.is(".disabled, :disabled")){var f=c(e),g=f.hasClass("open");if(b(),!g){"ontouchstart"in document.documentElement&&!f.closest(".navbar-nav").length&&a('<div class="dropdown-backdrop"/>').insertAfter(a(this)).on("click",b);var h={relatedTarget:this};if(f.trigger(d=a.Event("show.bs.dropdown",h)),d.isDefaultPrevented())return;e.trigger("focus"),f.toggleClass("open").trigger("shown.bs.dropdown",h)}return!1}},g.prototype.keydown=function(b){if(/(38|40|27)/.test(b.keyCode)){var d=a(this);if(b.preventDefault(),b.stopPropagation(),!d.is(".disabled, :disabled")){var e=c(d),g=e.hasClass("open");if(!g||g&&27==b.keyCode)return 27==b.which&&e.find(f).trigger("focus"),d.trigger("click");var h=" li:not(.divider):visible a",i=e.find('[role="menu"]'+h+', [role="listbox"]'+h);if(i.length){var j=i.index(i.filter(":focus"));38==b.keyCode&&j>0&&j--,40==b.keyCode&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger("focus")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on("click.bs.dropdown.data-api",b).on("click.bs.dropdown.data-api",".dropdown form",function(a){a.stopPropagation()}).on("click.bs.dropdown.data-api",f,g.prototype.toggle).on("keydown.bs.dropdown.data-api",f+', [role="menu"], [role="listbox"]',g.prototype.keydown)}(jQuery),+function(a){"use strict";function b(b,d){return this.each(function(){var e=a(this),f=e.data("bs.modal"),g=a.extend({},c.DEFAULTS,e.data(),"object"==typeof b&&b);f||e.data("bs.modal",f=new c(this,g)),"string"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,a.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};c.VERSION="3.2.0",c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var c=this,d=a.Event("show.bs.modal",{relatedTarget:b});this.$element.trigger(d),this.isShown||d.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',a.proxy(this.hide,this)),this.backdrop(function(){var d=a.support.transition&&c.$element.hasClass("fade");c.$element.parent().length||c.$element.appendTo(c.$body),c.$element.show().scrollTop(0),d&&c.$element[0].offsetWidth,c.$element.addClass("in").attr("aria-hidden",!1),c.enforceFocus();var e=a.Event("shown.bs.modal",{relatedTarget:b});d?c.$element.find(".modal-dialog").one("bsTransitionEnd",function(){c.$element.trigger("focus").trigger(e)}).emulateTransitionEnd(300):c.$element.trigger("focus").trigger(e)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event("hide.bs.modal"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),a(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),a.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",a.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off("focusin.bs.modal").on("focusin.bs.modal",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger("focus")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$element.trigger("hidden.bs.modal")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var c=this,d=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var e=a.support.transition&&d;if(this.$backdrop=a('<div class="modal-backdrop '+d+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",a.proxy(function(a){a.target===a.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),e&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!b)return;e?this.$backdrop.one("bsTransitionEnd",b).emulateTransitionEnd(150):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var f=function(){c.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",f).emulateTransitionEnd(150):f()}else b&&b()},c.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},c.prototype.measureScrollbar=function(){var a=document.createElement("div");a.className="modal-scrollbar-measure",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(c){var d=a(this),e=d.attr("href"),f=a(d.attr("data-target")||e&&e.replace(/.*(?=#[^\s]+$)/,"")),g=f.data("bs.modal")?"toggle":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is("a")&&c.preventDefault(),f.one("show.bs.modal",function(a){a.isDefaultPrevented()||f.one("hidden.bs.modal",function(){d.is(":visible")&&d.trigger("focus")})}),b.call(f,g,this)})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tab");e||d.data("bs.tab",e=new c(this)),"string"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION="3.2.0",c.prototype.show=function(){var b=this.element,c=b.closest("ul:not(.dropdown-menu)"),d=b.data("target");if(d||(d=b.attr("href"),d=d&&d.replace(/.*(?=#[^\s]*$)/,"")),!b.parent("li").hasClass("active")){var e=c.find(".active:last a")[0],f=a.Event("show.bs.tab",{relatedTarget:e});if(b.trigger(f),!f.isDefaultPrevented()){var g=a(d);this.activate(b.closest("li"),c),this.activate(g,g.parent(),function(){b.trigger({type:"shown.bs.tab",relatedTarget:e})})}}},c.prototype.activate=function(b,c,d){function e(){f.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),b.addClass("active"),g?(b[0].offsetWidth,b.addClass("in")):b.removeClass("fade"),b.parent(".dropdown-menu")&&b.closest("li.dropdown").addClass("active"),d&&d()}var f=c.find("> .active"),g=d&&a.support.transition&&f.hasClass("fade");g?f.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),f.removeClass("in")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this},a(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(c){c.preventDefault(),b.call(a(this),"show")})}(jQuery),+function(a){"use strict";function b(b){return this.each(function(){var d=a(this),e=d.data("bs.tooltip"),f="object"==typeof b&&b;(e||"destroy"!=b)&&(e||d.data("bs.tooltip",e=new c(this,f)),"string"==typeof b&&e[b]())})}var c=function(a,b){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",a,b)};c.VERSION="3.2.0",c.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},c.prototype.init=function(b,c,d){this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(this.options.viewport.selector||this.options.viewport);for(var e=this.options.trigger.split(" "),f=e.length;f--;){var g=e[f];if("click"==g)this.$element.on("click."+this.type,this.options.selector,a.proxy(this.toggle,this));else if("manual"!=g){var h="hover"==g?"mouseenter":"focusin",i="hover"==g?"mouseleave":"focusout";this.$element.on(h+"."+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+"."+this.type,this.options.selector,a.proxy(this.leave,this))
}}this.options.selector?this._options=a.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&"number"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="in",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){"in"==c.hoverState&&c.show()},c.options.delay.show)):c.show()},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data("bs."+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c)),clearTimeout(c.timeout),c.hoverState="out",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){"out"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide()},c.prototype.show=function(){var b=a.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var c=a.contains(document.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!c)return;var d=this,e=this.tip(),f=this.getUID(this.type);this.setContent(),e.attr("id",f),this.$element.attr("aria-describedby",f),this.options.animation&&e.addClass("fade");var g="function"==typeof this.options.placement?this.options.placement.call(this,e[0],this.$element[0]):this.options.placement,h=/\s?auto?\s?/i,i=h.test(g);i&&(g=g.replace(h,"")||"top"),e.detach().css({top:0,left:0,display:"block"}).addClass(g).data("bs."+this.type,this),this.options.container?e.appendTo(this.options.container):e.insertAfter(this.$element);var j=this.getPosition(),k=e[0].offsetWidth,l=e[0].offsetHeight;if(i){var m=g,n=this.$element.parent(),o=this.getPosition(n);g="bottom"==g&&j.top+j.height+l-o.scroll>o.height?"top":"top"==g&&j.top-o.scroll-l<0?"bottom":"right"==g&&j.right+k>o.width?"left":"left"==g&&j.left-k<o.left?"right":g,e.removeClass(m).addClass(g)}var p=this.getCalculatedOffset(g,j,k,l);this.applyPlacement(p,g);var q=function(){d.$element.trigger("shown.bs."+d.type),d.hoverState=null};a.support.transition&&this.$tip.hasClass("fade")?e.one("bsTransitionEnd",q).emulateTransitionEnd(150):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css("margin-top"),10),h=parseInt(d.css("margin-left"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top=b.top+g,b.left=b.left+h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass("in");var i=d[0].offsetWidth,j=d[0].offsetHeight;"top"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=k.left?2*k.left-e+i:2*k.top-f+j,m=k.left?"left":"top",n=k.left?"offsetWidth":"offsetHeight";d.offset(b),this.replaceArrow(l,d[0][n],m)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c,a?50*(1-a/b)+"%":"")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(".tooltip-inner")[this.options.html?"html":"text"](b),a.removeClass("fade in top bottom left right")},c.prototype.hide=function(){function b(){"in"!=c.hoverState&&d.detach(),c.$element.trigger("hidden.bs."+c.type)}var c=this,d=this.tip(),e=a.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(e),e.isDefaultPrevented()?void 0:(d.removeClass("in"),a.support.transition&&this.$tip.hasClass("fade")?d.one("bsTransitionEnd",b).emulateTransitionEnd(150):b(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr("title")||"string"!=typeof a.attr("data-original-title"))&&a.attr("data-original-title",a.attr("title")||"").attr("title","")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d="BODY"==c.tagName;return a.extend({},"function"==typeof c.getBoundingClientRect?c.getBoundingClientRect():null,{scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop(),width:d?a(window).width():b.outerWidth(),height:d?a(window).height():b.outerHeight()},d?{top:0,left:0}:b.offset())},c.prototype.getCalculatedOffset=function(a,b,c,d){return"bottom"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:"top"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:"left"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.width&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr("data-original-title")||("function"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){return this.$tip=this.$tip||a(this.options.template)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},c.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data("bs."+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data("bs."+this.type,c))),c.tip().hasClass("in")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),window.app=window.app||{},app.common=function(a){var b=(a(document),a(window)),c=a("html"),d=(a("body"),function(){this.windowResize(),b.on("resize",debounce(app.common.windowResize,250,!1)),this.svgFallback(),g(),e()}),e=function(){a(".roll-in--pre").each(function(){var a=this;setTimeout(function(){a.classList.remove("roll-in--pre")},500)})},f=function(){a.extend(app.variables,{windowWidth:b.width(),windowHeight:b.height()})},g=function(){a("#toggle-flyout-nav").flyoutNav({back:function(){return'<span class="icon -previous"></span> Terug'}})},h=function(){if(!Modernizr.svg){var b=a("html"),c=a('img[src$=".svg"]');c.each(function(c,d){var e=a(d),f=e.attr("data-url"),g=e.attr("width"),h=e.attr("height");e.attr("src",f),b.hasClass("lt-ie9")&&e.parent("a").css({width:g,height:h})})}},i=function(){var b=a(".toggle-menu"),c=a("[class*=pane-menu-sidebar]"),d=a("span",c);b.on("click",function(a){a.preventDefault(),c.toggle()}),d.on("click",function(b){b.preventDefault(),a(this).next("ul").toggle()})},j=function(){function a(){c.hasClass(d)||c.addClass(d)}var d="js-done";b.on("load",function(){c.addClass(d)}),window.setTimeout(a,4e3)};return{init:d,windowResize:f,toggleSubmenu:i,svgFallback:h,finalize:j}}(jQuery),window.debounce=function(a,b,c){var d;return function(){var e=this,f=arguments,g=function(){d=null,c||a.apply(e,f)},h=c&&!d;clearTimeout(d),d=setTimeout(g,b),h&&a.apply(e,f)}},window.app=window.app||{},app.content=function(a){var b=function(){var b=a(".js-rich-content");b.each(function(){var b=a(this),c=b.data("rich-content-properties");a.extend(c,{el:b}),new SirTrevor.Editor(c)})};return{init:b}}(jQuery),window.app=window.app||{},app.dropzone=function(a){var b=16,c=a("#asset-dropzone").data("errorFilesize")||"This file is too big.";c=c.replace("%size%",""+b),Dropzone.options.assetDropzone={maxFilesize:b,parallelUploads:1,dictDefaultMessage:"Upload",dictFileTooBig:c,init:function(){a("#dropzone-upload").click(function(){location.reload()})},success:function(b,c){var d=a(c);a(".gridOverview").append(d),this.removeFile(b)}}}(jQuery),window.app=window.app||{},window.ParsleyConfig=window.ParsleyConfig||{},window.ParsleyConfig={excluded:'[style*="none"] input, input.novalidate',classHandler:function(a){return a.$element.closest(".form__item").append('<div class="parsley-errors-container" />')},errorsContainer:function(a){return a.$element.closest(".form__item").children(".parsley-errors-container")}},window.ParsleyValidator.setLocale("nl"),app.form=function(a,b){var c=a("form"),d=function(){c.on("click","button[type=submit]",this.submit),c.length&&c.parsley().on!==b&&(c.parsley().on("form:error",function(){e(this.$element)}),c.parsley().on("field:success",function(){e(this.$element.parents("form"))}))},e=function(b){var c=b.find(".tabs__tab");c.removeClass("error"),c.length&&c.each(function(){var b=a(this),c=b.find("a").attr("href"),d=a(c).find(".parsley-error");d.length&&b.addClass("error")})},f=function(){var b=a(this.form);return b.data("is-submitted")?!1:void(b.parsley().isValid()&&b.data("is-submitted",!0).addClass("is-submitted"))};return{init:d,submit:f}}(jQuery),window.app=window.app||{},app.variables=app.variables||{},app.main=function(a,b){var c=function(a,c,d){c=c===b?"init":c,""!==a&&app[a]&&"function"==typeof app[a][c]&&app[a][c](d)},d=function(){var b=a("body").data("components");if(this.fire("common"),this.fire("dropzone"),this.fire("form"),this.fire("content"),b){var c=b.split(" ");for(var d in c)this.fire(c[d])}this.fire("common","finalize")};return{init:d,fire:c}}(jQuery),$(document).ready(function(){app.main.init()});