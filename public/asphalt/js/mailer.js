var rideApp=rideApp||{};rideApp.mailTemplates=function(a,b){a(document);return{initialize:function(){a(".js-content-variable-drag").draggable({helper:"clone"}).css("cursor","move"),a(".js-content-variable-drop,.redactor-in").droppable({accept:".js-content-variable-drag",drop:function(b,c){a(this).insertAtCaret(c.draggable.data("variable"))}}),a(".js-recipient-variable-drag").draggable({helper:"clone"}).css("cursor","move"),a(".js-recipient-variable-drop").droppable({accept:".js-recipient-variable-drag",drop:function(b,c){a(this).insertAtCaret(c.draggable.data("variable"))}})}}}(jQuery),$(document).ready(function(){rideApp.mailTemplates.initialize()}),$.fn.insertAtCaret=function(a){return this.each(function(){var b=$(this);if(b.hasClass("redactor-in"))b=b.next("textarea"),b.redactor("insert.text",a);else{var c=this.selectionStart,d=(this.selectionEnd,this.value),e=d.substring(0,c),f=d.substring(c,d.length);this.value=e+a+f}})};