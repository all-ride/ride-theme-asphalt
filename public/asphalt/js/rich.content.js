!function(a,b){"object"==typeof exports&&"object"==typeof module?module.exports=b(require("jquery")):"function"==typeof define&&define.amd?define(["jquery"],b):"object"==typeof exports?exports.SirTrevor=b(require("jquery")):a.SirTrevor=b(a.jQuery)}(this,function(a){return function(a){function b(d){if(c[d])return c[d].exports;var e=c[d]={exports:{},id:d,loaded:!1};return a[d].call(e.exports,e,e.exports,b),e.loaded=!0,e.exports}var c={};return b.m=a,b.c=c,b.p="",b(0)}([function(a,b,c){a.exports=c(1)},function(a,b,c){"use strict";var d=c(2);c(50).shim(),c(53),c(54),c(55);var e=c(57),f={config:c(58),log:e.log,Locales:c(59),Events:c(60),EventBus:c(62),EditorStore:c(63),Submittable:c(64),FileUploader:c(65),BlockMixins:c(66),BlockPositioner:c(186),BlockReorder:c(189),BlockDeletion:c(190),BlockValidations:c(191),BlockStore:c(192),BlockManager:c(193),SimpleBlock:c(197),Block:c(196),Blocks:c(194),BlockControl:c(208),BlockControls:c(209),FloatingBlockControls:c(210),FormatBar:c(211),Editor:c(212),toMarkdown:c(215),toHTML:c(200),setDefaults:function(a){Object.assign(f.config.defaults,a||{})},getInstance:e.getInstance,setBlockOptions:function(a,b){var c=f.Blocks[a];d.isUndefined(c)||Object.assign(c.prototype,b||{})},runOnAllInstances:function(a){if(f.Editor.prototype.hasOwnProperty(a)){var b=Array.prototype.slice.call(arguments,1);Array.prototype.forEach.call(f.config.instances,function(c){c[a].apply(null,b)})}else f.log("method doesn't exist")}};Object.assign(f,c(213)),a.exports=f},function(a,b,c){"use strict";b.isEmpty=c(3),b.isFunction=c(22),b.isObject=c(11),b.isString=c(30),b.isUndefined=c(31),b.result=c(32),b.template=c(33),b.uniqueId=c(49)},function(a,b,c){function d(a){var b=!0;if(!a)return b;var c=l.call(a),d=a.length;return c==h||c==j||c==g||c==i&&"number"==typeof d&&f(a.splice)?!d:(e(a,function(){return b=!1}),b)}var e=c(4),f=c(22),g="[object Arguments]",h="[object Array]",i="[object Object]",j="[object String]",k=Object.prototype,l=k.toString;a.exports=d},function(a,b,c){var d=c(5),e=c(26),f=c(29),g=function(a,b,c){var g,h=a,i=h;if(!h)return i;if(!f[typeof h])return i;b=b&&void 0===c?b:d(b,c,3);for(var j=-1,k=f[typeof h]&&e(h),l=k?k.length:0;++j<l;)if(g=k[j],b(h[g],g,a)===!1)return i;return i};a.exports=g},function(a,b,c){function d(a,b,c){if("function"!=typeof a)return f;if(void 0===b||!("prototype"in a))return a;var d=a.__bindData__;if(void 0===d&&(h.funcNames&&(d=!a.name),!(d=d||!h.funcDecomp))){var l=k.call(a);h.funcNames||(d=!i.test(l)),d||(d=j.test(l),g(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return e(a,b)}var e=c(6),f=c(23),g=c(14),h=c(24),i=/^\s*function[ \n\r\t]+\w/,j=/\bthis\b/,k=Function.prototype.toString;a.exports=d},function(a,b,c){function d(a,b){return arguments.length>2?e(a,17,f(arguments,2),null,b):e(a,1,null,null,b)}var e=c(7),f=c(17);a.exports=d},function(a,b,c){function d(a,b,c,i,l,m){var n=1&b,o=2&b,p=4&b,q=16&b,r=32&b;if(!o&&!g(a))throw new TypeError;q&&!c.length&&(b&=-17,q=c=!1),r&&!i.length&&(b&=-33,r=i=!1);var s=a&&a.__bindData__;return s&&s!==!0?(s=h(s),s[2]&&(s[2]=h(s[2])),s[3]&&(s[3]=h(s[3])),!n||1&s[1]||(s[4]=l),!n&&1&s[1]&&(b|=8),!p||4&s[1]||(s[5]=m),q&&j.apply(s[2]||(s[2]=[]),c),r&&k.apply(s[3]||(s[3]=[]),i),s[1]|=b,d.apply(null,s)):(1==b||17===b?e:f)([a,b,c,i,l,m])}var e=c(8),f=c(18),g=c(22),h=c(17),i=[],j=i.push,k=i.unshift;a.exports=d},function(a,b,c){function d(a){function b(){if(d){var a=h(d);j.apply(a,arguments)}if(this instanceof b){var g=e(c.prototype),k=c.apply(g,a||arguments);return f(k)?k:g}return c.apply(i,a||arguments)}var c=a[0],d=a[2],i=a[4];return g(b,a),b}var e=c(9),f=c(11),g=c(14),h=c(17),i=[],j=i.push;a.exports=d},function(a,b,c){(function(b){function d(a,b){return f(a)?g(a):{}}var e=c(10),f=c(11),g=(c(13),e(g=Object.create)&&g);g||(d=function(){function a(){}return function(c){if(f(c)){a.prototype=c;var d=new a;a.prototype=null}return d||b.Object()}}()),a.exports=d}).call(b,function(){return this}())},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b,c){function d(a){return!(!a||!e[typeof a])}var e=c(12);a.exports=d},function(a,b){var c={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=c},function(a,b){function c(){}a.exports=c},function(a,b,c){var d=c(15),e=c(16),f={configurable:!1,enumerable:!1,value:null,writable:!1},g=function(){try{var a={},b=d(b=Object.defineProperty)&&b,c=b(a,a,a)&&b}catch(a){}return c}(),h=g?function(a,b){f.value=b,g(a,"__bindData__",f)}:e;a.exports=h},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b){function c(){}a.exports=c},function(a,b){function c(a,b,c){b||(b=0),void 0===c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(e<0?0:e);++d<e;)f[d]=a[b+d];return f}a.exports=c},function(a,b,c){function d(a){function b(){var a=o?m:this;if(k){var g=h(k);j.apply(g,arguments)}if((l||q)&&(g||(g=h(arguments)),l&&j.apply(g,l),q&&g.length<n))return i|=16,d([c,r?i:i&-4,g,null,m,n]);if(g||(g=arguments),p&&(c=a[s]),this instanceof b){a=e(c.prototype);var t=c.apply(a,g);return f(t)?t:a}return c.apply(a,g)}var c=a[0],i=a[1],k=a[2],l=a[3],m=a[4],n=a[5],o=1&i,p=2&i,q=4&i,r=8&i,s=c;return g(b,a),b}var e=c(19),f=c(11),g=c(14),h=c(17),i=[],j=i.push;a.exports=d},function(a,b,c){(function(b){function d(a,b){return f(a)?g(a):{}}var e=c(20),f=c(11),g=(c(21),e(g=Object.create)&&g);g||(d=function(){function a(){}return function(c){if(f(c)){a.prototype=c;var d=new a;a.prototype=null}return d||b.Object()}}()),a.exports=d}).call(b,function(){return this}())},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b){function c(){}a.exports=c},function(a,b){function c(a){return"function"==typeof a}a.exports=c},function(a,b){function c(a){return a}a.exports=c},function(a,b,c){(function(b){var d=c(25),e=/\bthis\b/,f={};f.funcDecomp=!d(b.WinRTError)&&e.test(function(){return this}),f.funcNames="string"==typeof Function.name,a.exports=f}).call(b,function(){return this}())},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b,c){var d=c(27),e=c(11),f=c(28),g=d(g=Object.keys)&&g,h=g?function(a){return e(a)?g(a):[]}:f;a.exports=h},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b,c){var d=c(29),e=Object.prototype,f=e.hasOwnProperty,g=function(a){var b,c=a,e=[];if(!c)return e;if(!d[typeof a])return e;for(b in c)f.call(c,b)&&e.push(b);return e};a.exports=g},function(a,b){var c={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=c},function(a,b){function c(a){return"string"==typeof a||a&&"object"==typeof a&&f.call(a)==d||!1}var d="[object String]",e=Object.prototype,f=e.toString;a.exports=c},function(a,b){function c(a){return void 0===a}a.exports=c},function(a,b,c){function d(a,b){if(a){var c=a[b];return e(c)?a[b]():c}}var e=c(22);a.exports=d},function(a,b,c){function d(a,b,c){var d=i.imports._.templateSettings||i;a=String(a||""),c=e({},c,d);var q,r=e({},c.imports,d.imports),s=g(r),t=j(r),u=0,v=c.interpolate||o,w="__p += '",x=RegExp((c.escape||o).source+"|"+v.source+"|"+(v===h?n:o).source+"|"+(c.evaluate||o).source+"|$","g");a.replace(x,function(b,c,d,e,g,h){return d||(d=e),w+=a.slice(u,h).replace(p,f),c&&(w+="' +\n__e("+c+") +\n'"),g&&(q=!0,w+="';\n"+g+";\n__p += '"),d&&(w+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),u=h+b.length,b}),w+="';\n";var y=c.variable,z=y;z||(y="obj",w="with ("+y+") {\n"+w+"\n}\n"),w=(q?w.replace(k,""):w).replace(l,"$1").replace(m,"$1;"),w="function("+y+") {\n"+(z?"":y+" || ("+y+" = {});\n")+"var __t, __p = '', __e = _.escape"+(q?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+w+"return __p\n}";try{var A=Function(s,"return "+w).apply(void 0,t)}catch(a){throw a.source=w,a}return b?A(b):(A.source=w,A)}var e=c(34),f=(c(40),c(45)),g=c(35),h=c(46),i=c(47),j=c(48),k=/\b__p \+= '';/g,l=/\b(__p \+=) '' \+/g,m=/(__e\(.*?\)|\b__t\)) \+\n'';/g,n=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,o=/($^)/,p=/['\n\r\t\u2028\u2029\\]/g;a.exports=d},function(a,b,c){var d=c(35),e=c(39),f=function(a,b,c){var f,g=a,h=g;if(!g)return h;for(var i=arguments,j=0,k="number"==typeof c?2:i.length;++j<k;)if((g=i[j])&&e[typeof g])for(var l=-1,m=e[typeof g]&&d(g),n=m?m.length:0;++l<n;)f=m[l],void 0===h[f]&&(h[f]=g[f]);return h};a.exports=f},function(a,b,c){var d=c(36),e=c(11),f=c(37),g=d(g=Object.keys)&&g,h=g?function(a){return e(a)?g(a):[]}:f;a.exports=h},function(a,b){function c(a){return"function"==typeof a&&f.test(a)}var d=Object.prototype,e=d.toString,f=RegExp("^"+String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$");a.exports=c},function(a,b,c){var d=c(38),e=Object.prototype,f=e.hasOwnProperty,g=function(a){var b,c=a,e=[];if(!c)return e;if(!d[typeof a])return e;for(b in c)f.call(c,b)&&e.push(b);return e};a.exports=g},function(a,b){var c={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=c},function(a,b){var c={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1};a.exports=c},function(a,b,c){function d(a){return null==a?"":String(a).replace(f,e)}var e=c(41),f=(c(35),c(43));a.exports=d},function(a,b,c){function d(a){return e[a]}var e=c(42);a.exports=d},function(a,b){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.exports=c},function(a,b,c){var d=c(44),e=c(35),f=RegExp("["+e(d).join("")+"]","g");a.exports=f},function(a,b){var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};a.exports=c},function(a,b){function c(a){return"\\"+d[a]}var d={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"};a.exports=c},function(a,b){var c=/<%=([\s\S]+?)%>/g;a.exports=c},function(a,b,c){var d=c(40),e=c(46),f={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:e,variable:"",imports:{_:{escape:d}}};a.exports=f},function(a,b,c){function d(a){for(var b=-1,c=e(a),d=c.length,f=Array(d);++b<d;)f[b]=a[c[b]];return f}var e=c(35);a.exports=d},function(a,b){function c(a){var b=++d;return String(null==a?"":a)+b}var d=0;a.exports=c},function(a,b,c){"use strict";var d=c(51),e=function(a){return void 0!==a&&null!==a},f=function(a,b){if(!e(a))throw new TypeError("target must be an object");var c,f,g,h,i=Object(a);for(c=1;c<arguments.length;++c)for(f=Object(arguments[c]),h=d(f),g=0;g<h.length;++g)i[h[g]]=f[h[g]];return i};f.shim=function(){return Object.assign||(Object.assign=f),Object.assign||f},a.exports=f},function(a,b,c){"use strict";var d=Object.prototype.hasOwnProperty,e=Object.prototype.toString,f=Array.prototype.slice,g=c(52),h=!{toString:null}.propertyIsEnumerable("toString"),i=function(){}.propertyIsEnumerable("prototype"),j=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],k=function(a){var b=a.constructor;return b&&b.prototype===a},l={$window:!0,$console:!0,$parent:!0,$self:!0,$frames:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0},m=function(){if("undefined"==typeof window)return!1;for(var a in window)if(!l["$"+a]&&d.call(window,a)&&null!==window[a]&&"object"==typeof window[a])try{k(window[a])}catch(a){return!0}return!1}(),n=function(a){if("undefined"==typeof window&&!m)return k(a);try{return k(a)}catch(a){return!1}},o=function(a){var b=null!==a&&"object"==typeof a,c="[object Function]"===e.call(a),f=g(a),k=b&&"[object String]"===e.call(a),l=[];if(!b&&!c&&!f)throw new TypeError("Object.keys called on a non-object");var m=i&&c;if(k&&a.length>0&&!d.call(a,0))for(var o=0;o<a.length;++o)l.push(String(o));if(f&&a.length>0)for(var p=0;p<a.length;++p)l.push(String(p));else for(var q in a)m&&"prototype"===q||!d.call(a,q)||l.push(String(q));if(h)for(var r=n(a),s=0;s<j.length;++s)r&&"constructor"===j[s]||!d.call(a,j[s])||l.push(j[s]);return l};o.shim=function(){if(Object.keys){if(!function(){return 2===(Object.keys(arguments)||"").length}(1,2)){var a=Object.keys;Object.keys=function(b){return a(g(b)?f.call(b):b)}}}else Object.keys=o;return Object.keys||o},a.exports=o},function(a,b){"use strict";var c=Object.prototype.toString;a.exports=function(a){var b=c.call(a),d="[object Arguments]"===b;return d||(d="[object Array]"!==b&&null!==a&&"object"==typeof a&&"number"==typeof a.length&&a.length>=0&&"[object Function]"===c.call(a.callee)),d}},function(a,b){!function(a){if(!Array.prototype.find){var b=function(a){var b=Object(this),c=b.length<0?0:b.length>>>0;if(0!==c){if("function"!=typeof a||"[object Function]"!==Object.prototype.toString.call(a))throw new TypeError("Array#find: predicate must be a function");for(var d,e=arguments[1],f=0;f<c;f++)if(d=b[f],a.call(e,d,f,b))return d}};if(Object.defineProperty)try{Object.defineProperty(Array.prototype,"find",{value:b,configurable:!0,enumerable:!1,writable:!0})}catch(a){}Array.prototype.find||(Array.prototype.find=b)}}()},function(a,b){"use strict";[].includes||(Array.prototype.includes=function(a){if(void 0===this||null===this)throw new TypeError("Cannot convert this value to object");var b=Object(this),c=parseInt(b.length)||0;if(0===c)return!1;var d,e=parseInt(arguments[1])||0;for(e>=0?d=e:(d=c+e)<0&&(d=0);d<c;){var f=b[d];if(a===f||a!==a&&f!==f)return!0;d++}return!1})},function(a,b,c){"use strict";function d(a){a.preventDefault()}function e(a){a.originalEvent.dataTransfer.dropEffect="copy",g(a.currentTarget).addClass("st-drag-over"),a.preventDefault()}function f(a){g(a.currentTarget).removeClass("st-drag-over"),a.preventDefault()}var g=c(56);g.fn.dropArea=function(){return this.bind("dragenter",d).bind("dragover",e).bind("dragleave",f),this},g.fn.noDropArea=function(){return this.unbind("dragenter").unbind("dragover").unbind("dragleave"),this},g.fn.caretToEnd=function(){var a,b;return a=document.createRange(),a.selectNodeContents(this[0]),a.collapse(!1),b=window.getSelection(),b.removeAllRanges(),b.addRange(a),this}},function(b,c){b.exports=a},function(a,b,c){"use strict";var d=c(56),e=c(2),f=c(58),g=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,h={getInstance:function(a){return e.isUndefined(a)?f.instances[0]:e.isString(a)?f.instances.find(function(b){return b.ID===a}):f.instances[a]},getInstanceBySelection:function(){return h.getInstance(d(window.getSelection().anchorNode).parents(".st-block").data("instance"))},getBlockBySelection:function(){return h.getInstanceBySelection().findBlockById(d(window.getSelection().anchorNode).parents(".st-block").get(0).id)},log:function(){!e.isUndefined(console)&&f.debug&&console.log.apply(console,arguments)},isURI:function(a){return g.test(a)},titleize:function(a){return null===a?"":(a=String(a).toLowerCase(),a.replace(/(?:^|\s|-)\S/g,function(a){return a.toUpperCase()}))},classify:function(a){return h.titleize(String(a).replace(/[\W_]/g," ")).replace(/\s/g,"")},capitalize:function(a){return a.charAt(0).toUpperCase()+a.substring(1).toLowerCase()},flatten:function(a){var b={};return(Array.isArray(a)?a:Object.keys(a)).forEach(function(a){b[a]=!0}),b},underscored:function(a){return a.trim().replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},reverse:function(a){return a.split("").reverse().join("")},toSlug:function(a){return a.toLowerCase().replace(/[^\w ]+/g,"").replace(/ +/g,"-")}};a.exports=h},function(a,b){"use strict";var c={html:['<div class="st-block__dropzone">','<span class="st-icon"><%= _.result(block, "icon_name") %></span>','<p><%= i18n.t("general:drop", { block: "<span>" + _.result(block, "title") + "</span>" }) %>',"</p></div>"].join("\n"),re_render_on_reorder:!1},d={html:['<input type="text" placeholder="<%= i18n.t("general:paste") %>"',' class="st-block__paste-input st-paste-block">'].join("")},e={html:['<div class="st-block__upload-container">','<input type="file" type="st-file-upload">','<button class="st-upload-btn"><%= i18n.t("general:upload") %></button>',"</div>"].join("\n")};a.exports={debug:!1,scribeDebug:!1,skipValidation:!1,version:"0.4.0",language:"en",instances:[],defaults:{defaultType:!1,spinner:{className:"st-spinner",lines:9,length:8,width:3,radius:6,color:"#000",speed:1.4,trail:57,shadow:!1,left:"50%",top:"50%"},Block:{drop_options:c,paste_options:d,upload_options:e},blockLimit:0,blockTypeLimits:{},required:[],uploadUrl:"/attachments",baseImageUrl:"/sir-trevor-uploads/",errorsContainer:void 0,convertFromMarkdown:!0,formatBar:{commands:[{name:"Bold",title:"bold",cmd:"bold",keyCode:66,text:"B"},{name:"Italic",title:"italic",cmd:"italic",keyCode:73,text:"i"},{name:"Link",title:"link",iconName:"link",cmd:"linkPrompt",text:"link"},{name:"Unlink",title:"unlink",iconName:"link",cmd:"unlink",text:"link"}]}}}},function(a,b,c){"use strict";var d=c(2),e=c(58),f=c(57),g={en:{general:{delete:"Delete?",drop:"Drag __block__ here",paste:"Or paste URL here",upload:"...or choose a file",close:"close",position:"Position",wait:"Please wait...",link:"Enter a link"},errors:{title:"You have the following errors:",validation_fail:"__type__ block is invalid",block_empty:"__name__ must not be empty",type_missing:"You must have a block of type __type__",required_type_empty:"A required block type __type__ is empty",load_fail:"There was a problem loading the contents of the document"},blocks:{text:{title:"Text"},list:{title:"List"},quote:{title:"Quote",credit_field:"Credit"},image:{title:"Image",upload_error:"There was a problem with your upload"},video:{title:"Video"},tweet:{title:"Tweet",fetch_error:"There was a problem fetching your tweet"},embedly:{title:"Embedly",fetch_error:"There was a problem fetching your embed",key_missing:"An Embedly API key must be present"},heading:{title:"Heading"}}}};void 0===window.i18n?(f.log("Using i18n stub"),window.i18n={t:function(a,b){var c,f,h,i,j=a.split(":");for(f=g[e.language],i=0;i<j.length;i++)h=j[i],d.isUndefined(f[h])||(f=f[h]);return c=f,d.isString(c)?(c.indexOf("__")>=0&&Object.keys(b).forEach(function(a){c=c.replace("__"+a+"__",b[a])}),c):""}}):(f.log("Using i18next"),i18n.init({resStore:g,fallbackLng:e.language,ns:{namespaces:["general","blocks"],defaultNs:"general"}})),a.exports=g},function(a,b,c){"use strict";a.exports=c(61)},function(a,b,c){var d;!function(e,f){void 0!==(d=function(){return e.Eventable=f()}.call(b,c,b,a))&&(a.exports=d)}(this,function(){function a(a){var b,c=2;return function(){return--c>0?b=a.apply(this,arguments):a=null,b}}function b(a,b){e[a]=function(a,c,d){return(this._listeners||(this._listeners={}))[a._listenerId||(a._listenerId=(new Date).getTime())]=a,"object"==typeof c&&(d=this),a[b](c,d,this),this}}var c=[],d=c.slice,e={on:function(a,b,c){return g(this,"on",a,[b,c])&&b?(this._events||(this._events={}),(this._events[a]||(this._events[a]=[])).push({callback:b,context:c,ctx:c||this}),this):this},once:function(b,c,d){if(!g(this,"once",b,[c,d])||!c)return this;var e=this,f=a(function(){e.off(b,f),c.apply(this,arguments)});return f._callback=c,this.on(b,f,d)},off:function(a,b,c){var d,e,f,h,i,j,k,l;if(!this._events||!g(this,"off",a,[b,c]))return this;if(!a&&!b&&!c)return this._events={},this;for(h=a?[a]:Object.keys(this._events),i=0,j=h.length;i<j;i++)if(a=h[i],f=this._events[a]){if(this._events[a]=d=[],b||c)for(k=0,l=f.length;k<l;k++)e=f[k],(b&&b!==e.callback&&b!==e.callback._callback||c&&c!==e.context)&&d.push(e);d.length||delete this._events[a]}return this},trigger:function(a){if(!this._events)return this;var b=d.call(arguments,1);if(!g(this,"trigger",a,b))return this;var c=this._events[a],e=this._events.all;return c&&h(c,b),e&&h(e,arguments),this},stopListening:function(a,b,c){var d=this._listeners;if(!d)return this;var e=!b&&!c;"object"==typeof b&&(c=this),a&&((d={})[a._listenerId]=a);for(var f in d)d[f].off(b,c,this),e&&delete this._listeners[f];return this}},f=/\s+/,g=function(a,b,c,d){if(!c)return!0;if("object"==typeof c){for(var e in c)a[b].apply(a,[e,c[e]].concat(d));return!1}if(f.test(c)){for(var g=c.split(f),h=0,i=g.length;h<i;h++)a[b].apply(a,[g[h]].concat(d));return!1}return!0},h=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(;++d<e;)(c=a[d]).callback.call(c.ctx);return;case 1:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f);return;case 2:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g);return;case 3:for(;++d<e;)(c=a[d]).callback.call(c.ctx,f,g,h);return;default:for(;++d<e;)(c=a[d]).callback.apply(c.ctx,b)}};return b("listenTo","on"),b("listenToOnce","once"),e.bind=e.on,e.unbind=e.off,e})},function(a,b,c){"use strict";a.exports=Object.assign({},c(60))},function(a,b,c){"use strict";var d=c(2),e=c(57),f=function(a,b){this.mediator=b,this.initialize(a?a.trim():"")};Object.assign(f.prototype,{initialize:function(a){this.store=this._parseData(a)||{data:[]}},retrieve:function(){return this.store},toString:function(a){return JSON.stringify(this.store,void 0,a)},reset:function(){e.log("Resetting the EditorStore"),this.store={data:[]}},addData:function(a){return this.store.data.push(a),this.store},_parseData:function(a){var b;if(0===a.length)return b;try{var c=JSON.parse(a);d.isUndefined(c.data)||(b=c)}catch(a){this.mediator.trigger("errors:add",{text:i18n.t("errors:load_fail")}),this.mediator.trigger("errors:render"),console.log("Sorry there has been a problem with parsing the JSON"),console.log(a)}return b}}),a.exports=f},function(a,b,c){"use strict";var d=c(56),e=c(57),f=c(62),g=function(a){this.$form=a,this.initialize()};Object.assign(g.prototype,{initialize:function(){this.submitBtn=this.$form.find("input[type='submit']");var a=[];this.submitBtn.each(function(b,c){a.push(d(c).attr("value"))}),this.submitBtnTitles=a,this.canSubmit=!0,this.globalUploadCount=0,this._bindEvents()},setSubmitButton:function(a,b){this.submitBtn.attr("value",b)},resetSubmitButton:function(){var a=this.submitBtnTitles;this.submitBtn.each(function(b,c){d(c).attr("value",a[b])})},onUploadStart:function(a){this.globalUploadCount++,e.log("onUploadStart called "+this.globalUploadCount),1===this.globalUploadCount&&this._disableSubmitButton()},onUploadStop:function(a){this.globalUploadCount=this.globalUploadCount<=0?0:this.globalUploadCount-1,e.log("onUploadStop called "+this.globalUploadCount),0===this.globalUploadCount&&this._enableSubmitButton()},onError:function(a){e.log("onError called"),this.canSubmit=!1},_disableSubmitButton:function(a){this.setSubmitButton(null,a||i18n.t("general:wait")),this.submitBtn.attr("disabled","disabled").addClass("disabled")},_enableSubmitButton:function(){this.resetSubmitButton(),this.submitBtn.removeAttr("disabled").removeClass("disabled")},_events:{disableSubmitButton:"_disableSubmitButton",enableSubmitButton:"_enableSubmitButton",setSubmitButton:"setSubmitButton",resetSubmitButton:"resetSubmitButton",onError:"onError",onUploadStart:"onUploadStart",onUploadStop:"onUploadStop"},_bindEvents:function(){Object.keys(this._events).forEach(function(a){f.on(a,this[this._events[a]],this)},this)}}),a.exports=g},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(62);a.exports=function(a,b,c,i){h.trigger("onUploadStart");var j=[a.blockID,(new Date).getTime(),"raw"].join("-"),k=new FormData;k.append("attachment[name]",b.name),k.append("attachment[file]",b),k.append("attachment[uid]",j),a.resetMessages();var l=function(b){g.log("Upload callback called"),h.trigger("onUploadStop",b),!d.isUndefined(c)&&d.isFunction(c)&&c.apply(a,arguments,b)},m=function(b,c,e){g.log("Upload callback error called"),h.trigger("onUploadStop",void 0,e,c,b),!d.isUndefined(i)&&d.isFunction(i)&&i.call(a,c)},n=a.uploadUrl||f.defaults.uploadUrl,o=e.ajax({url:n,data:k,cache:!1,contentType:!1,processData:!1,dataType:"json",type:"POST"});return a.addQueuedItem(j,o),o.done(l).fail(m).always(a.removeQueuedItem.bind(a,j)),o}},function(a,b,c){"use strict";a.exports={Ajaxable:c(67),Controllable:c(68),Droppable:c(69),Fetchable:c(70),Pastable:c(71),Uploadable:c(72),MultiEditable:c(73)}},function(a,b,c){"use strict";var d=c(57);a.exports={mixinName:"Ajaxable",ajaxable:!0,initializeAjaxable:function(){this._queued=[]},addQueuedItem:function(a,b){d.log("Adding queued item for "+this.blockID+" called "+a),this._queued.push({name:a,deferred:b})},removeQueuedItem:function(a){d.log("Removing queued item for "+this.blockID+" called "+a),this._queued=this._queued.filter(function(b){return b.name!==a})},hasItemsInQueue:function(){return this._queued.length>0},resolveAllInQueue:function(){this._queued.forEach(function(a){d.log("Aborting queued request: "+a.name),a.deferred.abort()},this)}}},function(a,b,c){"use strict";var d=c(56),e=c(57);a.exports={mixinName:"Controllable",initializeControllable:function(){e.log("Adding controllable to block "+this.blockID),this.$control_ui=d("<div>",{class:"st-block__control-ui"}),Object.keys(this.controls).forEach(function(a){this.addUiControl(a,this.controls[a].bind(this))},this),this.$inner.append(this.$control_ui)},getControlTemplate:function(a){return d("<a>",{"data-icon":a,class:"st-icon st-block-control-ui-btn st-block-control-ui-btn--"+a})},addUiControl:function(a,b){this.$control_ui.append(this.getControlTemplate(a)),this.$control_ui.on("click",".st-block-control-ui-btn--"+a,b)}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(62);a.exports={mixinName:"Droppable",valid_drop_file_types:["File","Files","text/plain","text/uri-list"],requireInputs:!0,initializeDroppable:function(){g.log("Adding droppable to block "+this.blockID),this.drop_options=Object.assign({},f.defaults.Block.drop_options,this.drop_options);var a=e(d.template(this.drop_options.html,{block:this,_:d}));this.$editor.hide(),this.$inputs.append(a),this.$dropzone=a,this.$dropzone.dropArea().bind("drop",this._handleDrop.bind(this)),this.$inner.addClass("st-block__inner--droppable")},_handleDrop:function(a){a.preventDefault(),a=a.originalEvent;var b=e(a.target),c=a.dataTransfer.types;b.removeClass("st-dropzone--dragover"),c&&c.some(function(a){return this.valid_drop_file_types.includes(a)},this)&&this.onDrop(a.dataTransfer),h.trigger("block:content:dropped",this.blockID)}}},function(a,b,c){"use strict";var d=c(2),e=c(56);a.exports={mixinName:"Fetchable",initializeFetchable:function(){this.withMixin(c(67))},fetch:function(a,b,c){var f=d.uniqueId(this.blockID+"_fetch"),g=e.ajax(a);return this.resetMessages(),this.addQueuedItem(f,g),d.isUndefined(b)||g.done(b.bind(this)),d.isUndefined(c)||g.fail(c.bind(this)),g.always(this.removeQueuedItem.bind(this,f)),g}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57);a.exports={mixinName:"Pastable",requireInputs:!0,initializePastable:function(){g.log("Adding pastable to block "+this.blockID),this.paste_options=Object.assign({},f.defaults.Block.paste_options,this.paste_options),this.$inputs.append(d.template(this.paste_options.html,this)),this.$(".st-paste-block").bind("click",function(){e(this).select()}).bind("paste",this._handleContentPaste).bind("submit",this._handleContentPaste)}}},function(a,b,c){"use strict";var d=c(2),e=c(58),f=c(57),g=c(65);a.exports={mixinName:"Uploadable",uploadsCount:0,requireInputs:!0,initializeUploadable:function(){f.log("Adding uploadable to block "+this.blockID),this.withMixin(c(67)),this.upload_options=Object.assign({},e.defaults.Block.upload_options,this.upload_options),this.$inputs.append(d.template(this.upload_options.html,this))},uploader:function(a,b,c){return g(this,a,b,c)}}},function(a,b,c){"use strict";var d=c(2),e=c(74);a.exports={mixinName:"MultiEditable",initializeMultiEditable:function(){this.editors={}},newTextEditor:function(a,b){var c=document.createElement("div");c.innerHTML=a;var f=c.querySelector(".st-block__editor"),g=d.uniqueId("editor-");f.dataset.editorId=g,f.addEventListener("keyup",this.getSelectionForFormatter),f.addEventListener("mouseup",this.getSelectionForFormatter);var h=d.isFunction(this.configureScribe)?this.configureScribe.bind(this):null,i=e.initScribeInstance(f,this.scribeOptions,h);i.setContent(b);var j={node:c.removeChild(c.firstChild),el:f,scribe:i,id:g};return this.editors[g]=j,j},getCurrentTextEditor:function(){var a=document.activeElement.dataset.editorId,b=this.getTextEditor(a);return b&&(this.currentEditor=b),this.currentEditor},appendToTextEditor:function(a,b){var c=this.getTextEditor(a).scribe,d=new c.api.Selection,e=d.range.cloneRange(),f=c.el.lastChild;e.setStartAfter(f),e.collapse(!0),d.selection.removeAllRanges(),d.selection.addRange(e),b&&c.insertHTML(b)},getCurrentScribeInstance:function(){return this.getCurrentTextEditor().scribe},getTextEditor:function(a){return this.editors[a]},removeTextEditor:function(a){delete this.editors[a]},execTextBlockCommand:function(a){return e.execTextBlockCommand(this.getCurrentScribeInstance(),a)},queryTextBlockCommandState:function(a){return e.queryTextBlockCommandState(this.getCurrentScribeInstance(),a)}}},function(a,b,c){"use strict";var d=c(75),e=c(77),f=c(58),g=c(143),h=c(144),i=c(145),j={p:!0,a:{href:!0,target:"_blank",rel:!0},i:!0,b:!0,strong:!0,em:!0};a.exports={initScribeInstance:function(a,b,c){b=b||{};var k={debug:f.scribeDebug},l=j;d.isObject(b)&&(k=Object.assign(k,b));var m=new e(a,k);return b.hasOwnProperty("tags")&&(l=Object.assign(j,b.tags)),m.use(g()),m.use(h()),m.use(i({tags:l})),d.isFunction(c)&&c.call(this,m),m},execTextBlockCommand:function(a,b){if(d.isUndefined(a))throw"No Scribe instance found to query command";var c=a.getCommand(b);return a.el.focus(),c.execute()},queryTextBlockCommandState:function(a,b){if(d.isUndefined(a))throw"No Scribe instance found to query command";var c=a.getCommand(b);return(new a.api.Selection).range&&c.queryState()}}},function(a,b,c){var d;(function(a,e){(function(){function f(a,b,c){for(var d=(c||0)-1,e=a?a.length:0;++d<e;)if(a[d]===b)return d;return-1}function g(a,b){var c=typeof b;if(a=a.cache,"boolean"==c||null==b)return a[b]?0:-1;"number"!=c&&"string"!=c&&(c="object");var d="number"==c?b:z+b;return a=(a=a[c])&&a[d],"object"==c?a&&f(a,b)>-1?0:-1:a?0:-1}function h(a){var b=this.cache,c=typeof a;if("boolean"==c||null==a)b[a]=!0;else{"number"!=c&&"string"!=c&&(c="object");var d="number"==c?a:z+a,e=b[c]||(b[c]={});"object"==c?(e[d]||(e[d]=[])).push(a):e[d]=!0}}function i(a){return a.charCodeAt(0)}function j(a,b){for(var c=a.criteria,d=b.criteria,e=-1,f=c.length;++e<f;){var g=c[e],h=d[e];if(g!==h){if(g>h||void 0===g)return 1;if(g<h||void 0===h)return-1}}return a.index-b.index}function l(a){var b=-1,c=a.length,d=a[0],e=a[c/2|0],f=a[c-1];if(d&&"object"==typeof d&&e&&"object"==typeof e&&f&&"object"==typeof f)return!1;var g=o();g.false=g.null=g.true=g.undefined=!1;var i=o();for(i.array=a,i.cache=g,i.push=h;++b<c;)i.push(a[b]);return i}function m(a){return"\\"+ea[a]}function n(){return v.pop()||[]}function o(){return w.pop()||{array:null,cache:null,criteria:null,false:!1,index:0,null:!1,number:null,object:null,push:null,string:null,true:!1,undefined:!1,value:null}}function p(a){return"function"!=typeof a.toString&&"string"==typeof(a+"")}function q(a){a.length=0,v.length<B&&v.push(a)}function r(a){var b=a.cache;b&&r(b),a.array=a.cache=a.criteria=a.object=a.number=a.string=a.value=null,w.length<B&&w.push(a)}function s(a,b,c){b||(b=0),void 0===c&&(c=a?a.length:0);for(var d=-1,e=c-b||0,f=Array(e<0?0:e);++d<e;)f[d]=a[b+d];return f}function t(a){function b(a){return a&&"object"==typeof a&&!kd(a)&&Rc.call(a,"__wrapped__")?a:new c(a)}function c(a,b){this.__chain__=!!b,this.__wrapped__=a}function d(a){function b(){if(d){var a=s(d);Sc.apply(a,arguments)}if(this instanceof b){var f=h(c.prototype),g=c.apply(f,a||arguments);return La(g)?g:f}return c.apply(e,a||arguments)}var c=a[0],d=a[2],e=a[4];return jd(b,a),b}function e(a,b,c,d,f){if(c){var g=c(a);if(void 0!==g)return g}if(!La(a))return a;var h=Kc.call(a);if(!_[h]||!hd.nodeClass&&p(a))return a;var i=fd[h];switch(h){case T:case U:return new i(+a);case X:case $:return new i(a);case Z:return g=i(a.source,H.exec(a)),g.lastIndex=a.lastIndex,g}var j=kd(a);if(b){var k=!d;d||(d=n()),f||(f=n());for(var l=d.length;l--;)if(d[l]==a)return f[l];g=j?i(a.length):{}}else g=j?s(a):vd({},a);return j&&(Rc.call(a,"index")&&(g.index=a.index),Rc.call(a,"input")&&(g.input=a.input)),b?(d.push(a),f.push(g),(j?ud:yd)(a,function(a,h){g[h]=e(a,b,c,d,f)}),k&&(q(d),q(f)),g):g}function h(a,b){return La(a)?Yc(a):{}}function v(a,b,c){if("function"!=typeof a)return ec;if(void 0===b||!("prototype"in a))return a;var d=a.__bindData__;if(void 0===d&&(hd.funcNames&&(d=!a.name),!(d=d||!hd.funcDecomp))){var e=Pc.call(a);hd.funcNames||(d=!I.test(e)),d||(d=M.test(e),jd(a,d))}if(d===!1||d!==!0&&1&d[1])return a;switch(c){case 1:return function(c){return a.call(b,c)};case 2:return function(c,d){return a.call(b,c,d)};case 3:return function(c,d,e){return a.call(b,c,d,e)};case 4:return function(c,d,e,f){return a.call(b,c,d,e,f)}}return Pb(a,b)}function w(a){function b(){var a=j?g:this;if(e){var o=s(e);Sc.apply(o,arguments)}if((f||l)&&(o||(o=s(arguments)),f&&Sc.apply(o,f),l&&o.length<i))return d|=16,w([c,m?d:d&-4,o,null,g,i]);if(o||(o=arguments),k&&(c=a[n]),this instanceof b){a=h(c.prototype);var p=c.apply(a,o);return La(p)?p:a}return c.apply(a,o)}var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],i=a[5],j=1&d,k=2&d,l=4&d,m=8&d,n=c;return jd(b,a),b}function B(a,b){var c=-1,d=pa(),e=a?a.length:0,h=e>=A&&d===f,i=[];if(h){var j=l(b);j?(d=g,b=j):h=!1}for(;++c<e;){var k=a[c];d(b,k)<0&&i.push(k)}return h&&r(b),i}function ea(a,b,c,d){for(var e=(d||0)-1,f=a?a.length:0,g=[];++e<f;){var h=a[e];if(h&&"object"==typeof h&&"number"==typeof h.length&&(kd(h)||ta(h))){b||(h=ea(h,b,c));var i=-1,j=h.length,k=g.length;for(g.length+=j;++i<j;)g[k++]=h[i]}else c||g.push(h)}return g}function ga(a,b,c,d,e,f){if(c){var g=c(a,b);if(void 0!==g)return!!g}if(a===b)return 0!==a||1/a==1/b;var h=typeof a,i=typeof b;if(!(a!==a||a&&da[h]||b&&da[i]))return!1;if(null==a||null==b)return a===b;var j=Kc.call(a),k=Kc.call(b);if(j==R&&(j=Y),k==R&&(k=Y),j!=k)return!1;switch(j){case T:case U:return+a==+b;case X:return a!=+a?b!=+b:0==a?1/a==1/b:a==+b;case Z:case $:return a==Dc(b)}var l=j==S;if(!l){var m=Rc.call(a,"__wrapped__"),o=Rc.call(b,"__wrapped__");if(m||o)return ga(m?a.__wrapped__:a,o?b.__wrapped__:b,c,d,e,f);if(j!=Y||!hd.nodeClass&&(p(a)||p(b)))return!1;var r=!hd.argsObject&&ta(a)?Bc:a.constructor,s=!hd.argsObject&&ta(b)?Bc:b.constructor;if(r!=s&&!(Ka(r)&&r instanceof r&&Ka(s)&&s instanceof s)&&"constructor"in a&&"constructor"in b)return!1}var t=!e;e||(e=n()),f||(f=n());for(var u=e.length;u--;)if(e[u]==a)return f[u]==b;var v=0;if(g=!0,e.push(a),f.push(b),l){if(u=a.length,v=b.length,(g=v==u)||d)for(;v--;){var w=u,x=b[v];if(d)for(;w--&&!(g=ga(a[w],x,c,d,e,f)););else if(!(g=ga(a[v],x,c,d,e,f)))break}}else xd(b,function(b,h,i){if(Rc.call(i,h))return v++,g=Rc.call(a,h)&&ga(a[h],b,c,d,e,f)}),g&&!d&&xd(a,function(a,b,c){if(Rc.call(c,b))return g=--v>-1});return e.pop(),f.pop(),t&&(q(e),q(f)),g}function ha(a,b,c,d,e){(kd(b)?db:yd)(b,function(b,f){var g,h,i=b,j=a[f];if(b&&((h=kd(b))||zd(b))){for(var k=d.length;k--;)if(g=d[k]==b){j=e[k];break}if(!g){var l;c&&(i=c(j,b),(l=void 0!==i)&&(j=i)),l||(j=h?kd(j)?j:[]:zd(j)?j:{}),d.push(b),e.push(j),l||ha(j,b,c,d,e)}}else c&&void 0===(i=c(j,b))&&(i=b),void 0!==i&&(j=i);a[f]=j})}function ia(a,b){return a+Oc(ed()*(b-a+1))}function ka(a,b,c){var d=-1,e=pa(),h=a?a.length:0,i=[],j=!b&&h>=A&&e===f,k=c||j?n():i;if(j){var m=l(k);e=g,k=m}for(;++d<h;){var o=a[d],p=c?c(o,d,a):o;(b?!d||k[k.length-1]!==p:e(k,p)<0)&&((c||j)&&k.push(p),i.push(o))}return j?(q(k.array),r(k)):c&&q(k),i}function la(a){return function(c,d,e){var f={};if(d=b.createCallback(d,e,3),kd(c))for(var g=-1,h=c.length;++g<h;){var i=c[g];a(f,i,d(i,g,c),c)}else ud(c,function(b,c,e){a(f,b,d(b,c,e),e)});return f}}function ma(a,b,c,e,f,g){var h=1&b,i=2&b,j=4&b,k=16&b,l=32&b;if(!i&&!Ka(a))throw new Ec;k&&!c.length&&(b&=-17,k=c=!1),l&&!e.length&&(b&=-33,l=e=!1);var m=a&&a.__bindData__;return m&&m!==!0?(m=s(m),m[2]&&(m[2]=s(m[2])),m[3]&&(m[3]=s(m[3])),!h||1&m[1]||(m[4]=f),!h&&1&m[1]&&(b|=8),!j||4&m[1]||(m[5]=g),k&&Sc.apply(m[2]||(m[2]=[]),c),l&&Wc.apply(m[3]||(m[3]=[]),e),m[1]|=b,ma.apply(null,m)):(1==b||17===b?d:w)([a,b,c,e,f,g])}function na(){ca.shadowedProps=P,ca.array=ca.bottom=ca.loop=ca.top="",ca.init="iterable",ca.useHas=!0;for(var a,b=0;a=arguments[b];b++)for(var c in a)ca[c]=a[c];var d=ca.args;return ca.firstArg=/^[^,]+/.exec(d)[0],yc("baseCreateCallback, errorClass, errorProto, hasOwnProperty, indicatorObject, isArguments, isArray, isString, keys, objectProto, objectTypes, nonEnumProps, stringClass, stringProto, toString","return function("+d+") {\n"+id(ca)+"\n}")(v,V,Gc,Rc,y,ta,kd,Qa,ca.keys,Hc,da,gd,$,Ic,Kc)}function oa(a){return qd[a]}function pa(){var a=(a=b.indexOf)===yb?f:a;return a}function qa(a){return"function"==typeof a&&Lc.test(a)}function ra(a){var b,c;return!(!(a&&Kc.call(a)==Y&&(b=a.constructor,!Ka(b)||b instanceof b))||!hd.argsClass&&ta(a)||!hd.nodeClass&&p(a))&&(hd.ownLast?(xd(a,function(a,b,d){return c=Rc.call(d,b),!1}),c!==!1):(xd(a,function(a,b){c=b}),void 0===c||Rc.call(a,c)))}function sa(a){return rd[a]}function ta(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kc.call(a)==R||!1}function ua(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c=b,b=!1),e(a,b,"function"==typeof c&&v(c,d,1))}function va(a,b,c){return e(a,!0,"function"==typeof b&&v(b,c,1))}function wa(a,b){var c=h(a);return b?vd(c,b):c}function xa(a,c,d){var e;return c=b.createCallback(c,d,3),yd(a,function(a,b,d){if(c(a,b,d))return e=b,!1}),e}function ya(a,c,d){var e;return c=b.createCallback(c,d,3),Aa(a,function(a,b,d){if(c(a,b,d))return e=b,!1}),e}function za(a,b,c){var d=[];xd(a,function(a,b){d.push(b,a)});var e=d.length;for(b=v(b,c,3);e--&&b(d[e--],d[e],a)!==!1;);return a}function Aa(a,b,c){var d=md(a),e=d.length;for(b=v(b,c,3);e--;){var f=d[e];if(b(a[f],f,a)===!1)break}return a}function Ba(a){var b=[];return xd(a,function(a,c){Ka(a)&&b.push(c)}),b.sort()}function Ca(a,b){return!!a&&Rc.call(a,b)}function Da(a){for(var b=-1,c=md(a),d=c.length,e={};++b<d;){var f=c[b];e[a[f]]=f}return e}function Ea(a){return a===!0||a===!1||a&&"object"==typeof a&&Kc.call(a)==T||!1}function Fa(a){return a&&"object"==typeof a&&Kc.call(a)==U||!1}function Ga(a){return a&&1===a.nodeType||!1}function Ha(a){var b=!0;if(!a)return b;var c=Kc.call(a),d=a.length;return c==S||c==$||(hd.argsClass?c==R:ta(a))||c==Y&&"number"==typeof d&&Ka(a.splice)?!d:(yd(a,function(){return b=!1}),b)}function Ia(a,b,c,d){return ga(a,b,"function"==typeof c&&v(c,d,2))}function Ja(a){return $c(a)&&!_c(parseFloat(a))}function Ka(a){return"function"==typeof a}function La(a){return!(!a||!da[typeof a])}function Ma(a){return Oa(a)&&a!=+a}function Na(a){return null===a}function Oa(a){return"number"==typeof a||a&&"object"==typeof a&&Kc.call(a)==X||!1}function Pa(a){return a&&da[typeof a]&&Kc.call(a)==Z||!1}function Qa(a){return"string"==typeof a||a&&"object"==typeof a&&Kc.call(a)==$||!1}function Ra(a){return void 0===a}function Sa(a,c,d){var e={};return c=b.createCallback(c,d,3),yd(a,function(a,b,d){e[b]=c(a,b,d)}),e}function Ta(a){var b=arguments,c=2;if(!La(a))return a;if("number"!=typeof b[2]&&(c=b.length),c>3&&"function"==typeof b[c-2])var d=v(b[--c-1],b[c--],2);else c>2&&"function"==typeof b[c-1]&&(d=b[--c]);for(var e=s(arguments,1,c),f=-1,g=n(),h=n();++f<c;)ha(a,e[f],d,g,h);return q(g),q(h),a}function Ua(a,c,d){var e={};if("function"!=typeof c){var f=[];xd(a,function(a,b){f.push(b)}),f=B(f,ea(arguments,!0,!1,1));for(var g=-1,h=f.length;++g<h;){var i=f[g];e[i]=a[i]}}else c=b.createCallback(c,d,3),xd(a,function(a,b,d){c(a,b,d)||(e[b]=a)});return e}function Va(a){for(var b=-1,c=md(a),d=c.length,e=uc(d);++b<d;){var f=c[b];e[b]=[f,a[f]]}return e}function Wa(a,c,d){var e={};if("function"!=typeof c)for(var f=-1,g=ea(arguments,!0,!1,1),h=La(a)?g.length:0;++f<h;){var i=g[f];i in a&&(e[i]=a[i])}else c=b.createCallback(c,d,3),xd(a,function(a,b,d){c(a,b,d)&&(e[b]=a)});return e}function Xa(a,c,d,e){var f=kd(a);if(null==d)if(f)d=[];else{var g=a&&a.constructor,i=g&&g.prototype;d=h(i)}return c&&(c=b.createCallback(c,e,4),(f?ud:yd)(a,function(a,b,e){return c(d,a,b,e)})),d}function Ya(a){for(var b=-1,c=md(a),d=c.length,e=uc(d);++b<d;)e[b]=a[c[b]];return e}function Za(a){var b=arguments,c=-1,d=ea(b,!0,!1,1),e=b[2]&&b[2][b[1]]===a?1:d.length,f=uc(e);for(hd.unindexedChars&&Qa(a)&&(a=a.split(""));++c<e;)f[c]=a[d[c]];return f}function $a(a,b,c){var d=-1,e=pa(),f=a?a.length:0,g=!1;return c=(c<0?bd(0,f+c):c)||0,kd(a)?g=e(a,b,c)>-1:"number"==typeof f?g=(Qa(a)?a.indexOf(b,c):e(a,b,c))>-1:ud(a,function(a){if(++d>=c)return!(g=a===b)}),g}function _a(a,c,d){var e=!0;if(c=b.createCallback(c,d,3),kd(a))for(var f=-1,g=a.length;++f<g&&(e=!!c(a[f],f,a)););else ud(a,function(a,b,d){return e=!!c(a,b,d)});return e}function ab(a,c,d){var e=[];if(c=b.createCallback(c,d,3),kd(a))for(var f=-1,g=a.length;++f<g;){var h=a[f];c(h,f,a)&&e.push(h)}else ud(a,function(a,b,d){c(a,b,d)&&e.push(a)});return e}function bb(a,c,d){if(c=b.createCallback(c,d,3),!kd(a)){var e;return ud(a,function(a,b,d){if(c(a,b,d))return e=a,!1}),e}for(var f=-1,g=a.length;++f<g;){var h=a[f];if(c(h,f,a))return h}}function cb(a,c,d){var e;return c=b.createCallback(c,d,3),eb(a,function(a,b,d){if(c(a,b,d))return e=a,!1}),e}function db(a,b,c){if(b&&void 0===c&&kd(a))for(var d=-1,e=a.length;++d<e&&b(a[d],d,a)!==!1;);else ud(a,b,c);return a}function eb(a,b,c){var d=a,e=a?a.length:0;if(b=b&&void 0===c?b:v(b,c,3),kd(a))for(;e--&&b(a[e],e,a)!==!1;);else{if("number"!=typeof e){var f=md(a);e=f.length}else hd.unindexedChars&&Qa(a)&&(d=a.split(""));ud(a,function(a,c,g){return c=f?f[--e]:--e,b(d[c],c,g)})}return a}function fb(a,b){var c=s(arguments,2),d=-1,e="function"==typeof b,f=a?a.length:0,g=uc("number"==typeof f?f:0);return db(a,function(a){g[++d]=(e?b:a[b]).apply(a,c)}),g}function gb(a,c,d){var e=-1,f=a?a.length:0,g=uc("number"==typeof f?f:0);if(c=b.createCallback(c,d,3),kd(a))for(;++e<f;)g[e]=c(a[e],e,a);else ud(a,function(a,b,d){g[++e]=c(a,b,d)});return g}function hb(a,c,d){var e=-(1/0),f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&kd(a))for(var g=-1,h=a.length;++g<h;){var j=a[g];j>f&&(f=j)}else c=null==c&&Qa(a)?i:b.createCallback(c,d,3),ud(a,function(a,b,d){var g=c(a,b,d);g>e&&(e=g,f=a)});return f}function ib(a,c,d){var e=1/0,f=e;if("function"!=typeof c&&d&&d[c]===a&&(c=null),null==c&&kd(a))for(var g=-1,h=a.length;++g<h;){var j=a[g];j<f&&(f=j)}else c=null==c&&Qa(a)?i:b.createCallback(c,d,3),ud(a,function(a,b,d){var g=c(a,b,d);g<e&&(e=g,f=a)});return f}function jb(a,c,d,e){var f=arguments.length<3;if(c=b.createCallback(c,e,4),kd(a)){var g=-1,h=a.length;for(f&&(d=a[++g]);++g<h;)d=c(d,a[g],g,a)}else ud(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)});return d}function kb(a,c,d,e){var f=arguments.length<3;return c=b.createCallback(c,e,4),eb(a,function(a,b,e){d=f?(f=!1,a):c(d,a,b,e)}),d}function lb(a,c,d){return c=b.createCallback(c,d,3),ab(a,function(a,b,d){return!c(a,b,d)})}function mb(a,b,c){if(a&&"number"!=typeof a.length?a=Ya(a):hd.unindexedChars&&Qa(a)&&(a=a.split("")),null==b||c)return a?a[ia(0,a.length-1)]:u;var d=nb(a);return d.length=cd(bd(0,b),d.length),d}function nb(a){var b=-1,c=a?a.length:0,d=uc("number"==typeof c?c:0);return db(a,function(a){var c=ia(0,++b);d[b]=d[c],d[c]=a}),d}function ob(a){var b=a?a.length:0;return"number"==typeof b?b:md(a).length}function pb(a,c,d){var e;if(c=b.createCallback(c,d,3),kd(a))for(var f=-1,g=a.length;++f<g&&!(e=c(a[f],f,a)););else ud(a,function(a,b,d){return!(e=c(a,b,d))});return!!e}function qb(a,c,d){var e=-1,f=kd(c),g=a?a.length:0,h=uc("number"==typeof g?g:0);for(f||(c=b.createCallback(c,d,3)),db(a,function(a,b,d){var g=h[++e]=o();f?g.criteria=gb(c,function(b){return a[b]}):(g.criteria=n())[0]=c(a,b,d),g.index=e,g.value=a}),g=h.length,h.sort(j);g--;){var i=h[g];h[g]=i.value,f||q(i.criteria),r(i)}return h}function rb(a){return a&&"number"==typeof a.length?hd.unindexedChars&&Qa(a)?a.split(""):s(a):Ya(a)}function sb(a){for(var b=-1,c=a?a.length:0,d=[];++b<c;){var e=a[b];e&&d.push(e)}return d}function tb(a){return B(a,ea(arguments,!0,!0,1))}function ub(a,c,d){var e=-1,f=a?a.length:0;for(c=b.createCallback(c,d,3);++e<f;)if(c(a[e],e,a))return e;return-1}function vb(a,c,d){var e=a?a.length:0;for(c=b.createCallback(c,d,3);e--;)if(c(a[e],e,a))return e;return-1}function wb(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=-1;for(c=b.createCallback(c,d,3);++g<f&&c(a[g],g,a);)e++}else if(null==(e=c)||d)return a?a[0]:u;return s(a,0,cd(bd(0,e),f))}function xb(a,b,c,d){return"boolean"!=typeof b&&null!=b&&(d=c,c="function"!=typeof b&&d&&d[b]===a?null:b,b=!1),null!=c&&(a=gb(a,c,d)),ea(a,b)}function yb(a,b,c){if("number"==typeof c){var d=a?a.length:0;c=c<0?bd(0,d+c):c||0}else if(c){var e=Hb(a,b);return a[e]===b?e:-1}return f(a,b,c)}function zb(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else e=null==c||d?1:c||e;return s(a,0,cd(bd(0,f-e),f))}function Ab(){for(var a=[],b=-1,c=arguments.length,d=n(),e=pa(),h=e===f,i=n();++b<c;){var j=arguments[b];(kd(j)||ta(j))&&(a.push(j),d.push(h&&j.length>=A&&l(b?a[b]:i)))}var k=a[0],m=-1,o=k?k.length:0,p=[];a:for(;++m<o;){var s=d[0];if(j=k[m],(s?g(s,j):e(i,j))<0){for(b=c,(s||i).push(j);--b;)if(s=d[b],(s?g(s,j):e(a[b],j))<0)continue a;p.push(j)}}for(;c--;)(s=d[c])&&r(s);return q(d),q(i),p}function Bb(a,c,d){var e=0,f=a?a.length:0;if("number"!=typeof c&&null!=c){var g=f;for(c=b.createCallback(c,d,3);g--&&c(a[g],g,a);)e++}else if(null==(e=c)||d)return a?a[f-1]:u;return s(a,bd(0,f-e))}function Cb(a,b,c){var d=a?a.length:0;for("number"==typeof c&&(d=(c<0?bd(0,d+c):cd(c,d-1))+1);d--;)if(a[d]===b)return d;return-1}function Db(a){for(var b=arguments,c=0,d=b.length,e=a?a.length:0;++c<d;)for(var f=-1,g=b[c];++f<e;)a[f]===g&&(Vc.call(a,f--,1),e--);return a}function Eb(a,b,c){a=+a||0,c="number"==typeof c?c:+c||1,null==b&&(b=a,a=0);for(var d=-1,e=bd(0,Mc((b-a)/(c||1))),f=uc(e);++d<e;)f[d]=a,a+=c;return f}function Fb(a,c,d){var e=-1,f=a?a.length:0,g=[];for(c=b.createCallback(c,d,3);++e<f;){var h=a[e];c(h,e,a)&&(g.push(h),Vc.call(a,e--,1),f--)}return g}function Gb(a,c,d){if("number"!=typeof c&&null!=c){var e=0,f=-1,g=a?a.length:0;for(c=b.createCallback(c,d,3);++f<g&&c(a[f],f,a);)e++}else e=null==c||d?1:bd(0,c);return s(a,e)}function Hb(a,c,d,e){var f=0,g=a?a.length:f;for(d=d?b.createCallback(d,e,1):ec,c=d(c);f<g;){var h=f+g>>>1;d(a[h])<c?f=h+1:g=h}return f}function Ib(){return ka(ea(arguments,!0,!0))}function Jb(a,c,d,e){return"boolean"!=typeof c&&null!=c&&(e=d,d="function"!=typeof c&&e&&e[c]===a?null:c,c=!1),null!=d&&(d=b.createCallback(d,e,3)),ka(a,c,d)}function Kb(a){return B(a,s(arguments,1))}function Lb(){for(var a=-1,b=arguments.length;++a<b;){var c=arguments[a];if(kd(c)||ta(c))var d=d?ka(B(d,c).concat(B(c,d))):c}return d||[]}function Mb(){for(var a=arguments.length>1?arguments:arguments[0],b=-1,c=a?hb(Dd(a,"length")):0,d=uc(c<0?0:c);++b<c;)d[b]=Dd(a,b);return d}function Nb(a,b){var c=-1,d=a?a.length:0,e={};for(b||!d||kd(a[0])||(b=[]);++c<d;){var f=a[c];b?e[f]=b[c]:f&&(e[f[0]]=f[1])}return e}function Ob(a,b){if(!Ka(b))throw new Ec;return function(){if(--a<1)return b.apply(this,arguments)}}function Pb(a,b){return arguments.length>2?ma(a,17,s(arguments,2),null,b):ma(a,1,null,null,b)}function Qb(a){for(var b=arguments.length>1?ea(arguments,!0,!1,1):Ba(a),c=-1,d=b.length;++c<d;){var e=b[c];a[e]=ma(a[e],1,null,null,a)}return a}function Rb(a,b){return arguments.length>2?ma(b,19,s(arguments,2),null,a):ma(b,3,null,null,a)}function Sb(){for(var a=arguments,b=a.length;b--;)if(!Ka(a[b]))throw new Ec;return function(){for(var b=arguments,c=a.length;c--;)b=[a[c].apply(this,b)];return b[0]}}function Tb(a,b){return b="number"==typeof b?b:+b||a.length,ma(a,4,null,null,null,b)}function Ub(a,b,c){var d,e,f,g,h,i,j,k=0,l=!1,m=!0;if(!Ka(a))throw new Ec;if(b=bd(0,b)||0,c===!0){var n=!0;m=!1}else La(c)&&(n=c.leading,l="maxWait"in c&&(bd(b,c.maxWait)||0),m="trailing"in c?c.trailing:m);var o=function(){var c=b-(Fd()-g);if(c<=0){e&&Nc(e);var l=j;e=i=j=u,l&&(k=Fd(),f=a.apply(h,d),i||e||(d=h=null))}else i=Uc(o,c)},p=function(){i&&Nc(i),e=i=j=u,(m||l!==b)&&(k=Fd(),f=a.apply(h,d),i||e||(d=h=null))};return function(){if(d=arguments,g=Fd(),h=this,j=m&&(i||!n),l===!1)var c=n&&!i;else{e||n||(k=g);var q=l-(g-k),r=q<=0;r?(e&&(e=Nc(e)),k=g,f=a.apply(h,d)):e||(e=Uc(p,q))}return r&&i?i=Nc(i):i||b===l||(i=Uc(o,b)),c&&(r=!0,f=a.apply(h,d)),!r||i||e||(d=h=null),f}}function Vb(a){if(!Ka(a))throw new Ec;var b=s(arguments,1);return Uc(function(){a.apply(u,b)},1)}function Wb(a,b){if(!Ka(a))throw new Ec;var c=s(arguments,2);return Uc(function(){a.apply(u,c)},b)}function Xb(a,b){if(!Ka(a))throw new Ec;var c=function(){var d=c.cache,e=b?b.apply(this,arguments):z+arguments[0];return Rc.call(d,e)?d[e]:d[e]=a.apply(this,arguments)};return c.cache={},c}function Yb(a){var b,c;if(!Ka(a))throw new Ec;return function(){return b?c:(b=!0,c=a.apply(this,arguments),a=null,c)}}function Zb(a){return ma(a,16,s(arguments,1))}function $b(a){return ma(a,32,null,s(arguments,1))}function _b(a,b,c){var d=!0,e=!0;if(!Ka(a))throw new Ec;return c===!1?d=!1:La(c)&&(d="leading"in c?c.leading:d,e="trailing"in c?c.trailing:e),aa.leading=d,aa.maxWait=b,aa.trailing=e,Ub(a,b,aa)}function ac(a,b){return ma(b,16,[a])}function bc(a){return function(){return a}}function cc(a,b,c){var d=typeof a;if(null==a||"function"==d)return v(a,b,c);if("object"!=d)return ic(a);var e=md(a),f=e[0],g=a[f];return 1!=e.length||g!==g||La(g)?function(b){for(var c=e.length,d=!1;c--&&(d=ga(b[e[c]],a[e[c]],null,!0)););return d}:function(a){var b=a[f];return g===b&&(0!==g||1/g==1/b)}}function dc(a){return null==a?"":Dc(a).replace(td,oa)}function ec(a){return a}function fc(a,d,e){var f=!0,g=d&&Ba(d);d&&(e||g.length)||(null==e&&(e=d),h=c,d=a,a=b,g=Ba(d)),e===!1?f=!1:La(e)&&"chain"in e&&(f=e.chain);var h=a,i=Ka(h);db(g,function(b){var c=a[b]=d[b];i&&(h.prototype[b]=function(){var b=this.__chain__,d=this.__wrapped__,e=[d];Sc.apply(e,arguments);var g=c.apply(a,e);if(f||b){if(d===g&&La(g))return this;g=new h(g),g.__chain__=b}return g})})}function gc(){return a._=Jc,this}function hc(){}function ic(a){return function(b){return b[a]}}function jc(a,b,c){var d=null==a,e=null==b;if(null==c&&("boolean"==typeof a&&e?(c=a,a=1):e||"boolean"!=typeof b||(c=b,e=!0)),d&&e&&(b=1),a=+a||0,e?(b=a,a=0):b=+b||0,c||a%1||b%1){var f=ed();return cd(a+f*(b-a+parseFloat("1e-"+((f+"").length-1))),b)}return ia(a,b)}function kc(a,b){if(a){var c=a[b];return Ka(c)?a[b]():c}}function lc(a,c,d){var e=b.templateSettings;a=Dc(a||""),d=wd({},d,e);var f,g=wd({},d.imports,e.imports),h=md(g),i=Ya(g),j=0,k=d.interpolate||L,l="__p += '",n=Cc((d.escape||L).source+"|"+k.source+"|"+(k===J?G:L).source+"|"+(d.evaluate||L).source+"|$","g");a.replace(n,function(b,c,d,e,g,h){return d||(d=e),l+=a.slice(j,h).replace(N,m),c&&(l+="' +\n__e("+c+") +\n'"),g&&(f=!0,l+="';\n"+g+";\n__p += '"),d&&(l+="' +\n((__t = ("+d+")) == null ? '' : __t) +\n'"),j=h+b.length,b}),l+="';\n";var o=d.variable,p=o;p||(o="obj",l="with ("+o+") {\n"+l+"\n}\n"),l=(f?l.replace(D,""):l).replace(E,"$1").replace(F,"$1;"),l="function("+o+") {\n"+(p?"":o+" || ("+o+" = {});\n")+"var __t, __p = '', __e = _.escape"+(f?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+l+"return __p\n}";var q="\n/*\n//# sourceURL="+(d.sourceURL||"/lodash/template/source["+Q+++"]")+"\n*/";try{var r=yc(h,"return "+l+q).apply(u,i)}catch(a){throw a.source=l,a}return c?r(c):(r.source=l,r)}function mc(a,b,c){a=(a=+a)>-1?a:0;var d=-1,e=uc(a);for(b=v(b,c,1);++d<a;)e[d]=b(d);return e}function nc(a){return null==a?"":Dc(a).replace(sd,sa)}function oc(a){var b=++x;return Dc(null==a?"":a)+b}function pc(a){return a=new c(a),a.__chain__=!0,a}function qc(a,b){return b(a),a}function rc(){return this.__chain__=!0,this}function sc(){return Dc(this.__wrapped__)}function tc(){return this.__wrapped__}a=a?ja.defaults(fa.Object(),a,ja.pick(fa,O)):fa;var uc=a.Array,vc=a.Boolean,wc=a.Date,xc=a.Error,yc=a.Function,zc=a.Math,Ac=a.Number,Bc=a.Object,Cc=a.RegExp,Dc=a.String,Ec=a.TypeError,Fc=[],Gc=xc.prototype,Hc=Bc.prototype,Ic=Dc.prototype,Jc=a._,Kc=Hc.toString,Lc=Cc("^"+Dc(Kc).replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),Mc=zc.ceil,Nc=a.clearTimeout,Oc=zc.floor,Pc=yc.prototype.toString,Qc=qa(Qc=Bc.getPrototypeOf)&&Qc,Rc=Hc.hasOwnProperty,Sc=Fc.push,Tc=Hc.propertyIsEnumerable,Uc=a.setTimeout,Vc=Fc.splice,Wc=Fc.unshift,Xc=function(){try{var a={},b=qa(b=Bc.defineProperty)&&b,c=b(a,a,a)&&b}catch(a){}return c}(),Yc=qa(Yc=Bc.create)&&Yc,Zc=qa(Zc=uc.isArray)&&Zc,$c=a.isFinite,_c=a.isNaN,ad=qa(ad=Bc.keys)&&ad,bd=zc.max,cd=zc.min,dd=a.parseInt,ed=zc.random,fd={};fd[S]=uc,fd[T]=vc,fd[U]=wc,fd[W]=yc,fd[Y]=Bc,fd[X]=Ac,fd[Z]=Cc,fd[$]=Dc;var gd={};gd[S]=gd[U]=gd[X]={constructor:!0,toLocaleString:!0,toString:!0,valueOf:!0},gd[T]=gd[$]={constructor:!0,toString:!0,valueOf:!0},gd[V]=gd[W]=gd[Z]={constructor:!0,toString:!0},gd[Y]={constructor:!0},function(){for(var a=P.length;a--;){var b=P[a];for(var c in gd)Rc.call(gd,c)&&!Rc.call(gd[c],b)&&(gd[c][b]=!1)}}(),c.prototype=b.prototype;var hd=b.support={};!function(){var b=function(){this.x=1},c={0:1,length:1},d=[];b.prototype={valueOf:1,y:1};for(var e in new b)d.push(e);for(e in arguments);hd.argsClass=Kc.call(arguments)==R,hd.argsObject=arguments.constructor==Bc&&!(arguments instanceof uc),hd.enumErrorProps=Tc.call(Gc,"message")||Tc.call(Gc,"name"),hd.enumPrototypes=Tc.call(b,"prototype"),hd.funcDecomp=!qa(a.WinRTError)&&M.test(t),hd.funcNames="string"==typeof yc.name,hd.nonEnumArgs=0!=e,hd.nonEnumShadows=!/valueOf/.test(d),hd.ownLast="x"!=d[0],hd.spliceObjects=(Fc.splice.call(c,0,1),!c[0]),hd.unindexedChars="x"[0]+Bc("x")[0]!="xx";try{hd.nodeClass=!(Kc.call(document)==Y&&!({toString:0}+""))}catch(a){hd.nodeClass=!0}}(1),b.templateSettings={escape:/<%-([\s\S]+?)%>/g,evaluate:/<%([\s\S]+?)%>/g,interpolate:J,variable:"",imports:{_:b}};var id=function(a){var b="var index, iterable = "+a.firstArg+", result = "+a.init+";\nif (!iterable) return result;\n"+a.top+";";a.array?(b+="\nvar length = iterable.length; index = -1;\nif ("+a.array+") {  ",hd.unindexedChars&&(b+="\n  if (isString(iterable)) {\n    iterable = iterable.split('')\n  }  "),b+="\n  while (++index < length) {\n    "+a.loop+";\n  }\n}\nelse {  "):hd.nonEnumArgs&&(b+="\n  var length = iterable.length; index = -1;\n  if (length && isArguments(iterable)) {\n    while (++index < length) {\n      index += '';\n      "+a.loop+";\n    }\n  } else {  "),hd.enumPrototypes&&(b+="\n  var skipProto = typeof iterable == 'function';\n  "),hd.enumErrorProps&&(b+="\n  var skipErrorProps = iterable === errorProto || iterable instanceof Error;\n  ");var c=[];if(hd.enumPrototypes&&c.push('!(skipProto && index == "prototype")'),hd.enumErrorProps&&c.push('!(skipErrorProps && (index == "message" || index == "name"))'),a.useHas&&a.keys)b+="\n  var ownIndex = -1,\n      ownProps = objectTypes[typeof iterable] && keys(iterable),\n      length = ownProps ? ownProps.length : 0;\n\n  while (++ownIndex < length) {\n    index = ownProps[ownIndex];\n",c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }  ";else if(b+="\n  for (index in iterable) {\n",a.useHas&&c.push("hasOwnProperty.call(iterable, index)"),c.length&&(b+="    if ("+c.join(" && ")+") {\n  "),b+=a.loop+";    ",c.length&&(b+="\n    }"),b+="\n  }    ",hd.nonEnumShadows){for(b+="\n\n  if (iterable !== objectProto) {\n    var ctor = iterable.constructor,\n        isProto = iterable === (ctor && ctor.prototype),\n        className = iterable === stringProto ? stringClass : iterable === errorProto ? errorClass : toString.call(iterable),\n        nonEnum = nonEnumProps[className];\n      ",k=0;k<7;k++)b+="\n    index = '"+a.shadowedProps[k]+"';\n    if ((!(isProto && nonEnum[index]) && hasOwnProperty.call(iterable, index))",a.useHas||(b+=" || (!nonEnum[index] && iterable[index] !== objectProto[index])"),b+=") {\n      "+a.loop+";\n    }      ";b+="\n  }    "}return(a.array||hd.nonEnumArgs)&&(b+="\n}"),b+=a.bottom+";\nreturn result"};Yc||(h=function(){function b(){}return function(c){if(La(c)){b.prototype=c;var d=new b;b.prototype=null}return d||a.Object()}}());var jd=Xc?function(a,b){ba.value=b,Xc(a,"__bindData__",ba),ba.value=null}:hc;hd.argsClass||(ta=function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Rc.call(a,"callee")&&!Tc.call(a,"callee")||!1});var kd=Zc||function(a){return a&&"object"==typeof a&&"number"==typeof a.length&&Kc.call(a)==S||!1},ld=na({args:"object",init:"[]",top:"if (!(objectTypes[typeof object])) return result",loop:"result.push(index)"}),md=ad?function(a){return La(a)?hd.enumPrototypes&&"function"==typeof a||hd.nonEnumArgs&&a.length&&ta(a)?ld(a):ad(a):[]}:ld,nd={args:"collection, callback, thisArg",top:"callback = callback && typeof thisArg == 'undefined' ? callback : baseCreateCallback(callback, thisArg, 3)",array:"typeof length == 'number'",keys:md,loop:"if (callback(iterable[index], index, collection) === false) return result"},od={args:"object, source, guard",top:"var args = arguments,\n    argsIndex = 0,\n    argsLength = typeof guard == 'number' ? 2 : args.length;\nwhile (++argsIndex < argsLength) {\n  iterable = args[argsIndex];\n  if (iterable && objectTypes[typeof iterable]) {",keys:md,loop:"if (typeof result[index] == 'undefined') result[index] = iterable[index]",bottom:"  }\n}"},pd={top:"if (!objectTypes[typeof iterable]) return result;\n"+nd.top,array:!1},qd={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},rd=Da(qd),sd=Cc("("+md(rd).join("|")+")","g"),td=Cc("["+md(qd).join("")+"]","g"),ud=na(nd),vd=na(od,{top:od.top.replace(";",";\nif (argsLength > 3 && typeof args[argsLength - 2] == 'function') {\n  var callback = baseCreateCallback(args[--argsLength - 1], args[argsLength--], 2);\n} else if (argsLength > 2 && typeof args[argsLength - 1] == 'function') {\n  callback = args[--argsLength];\n}"),loop:"result[index] = callback ? callback(result[index], iterable[index]) : iterable[index]"}),wd=na(od),xd=na(nd,pd,{useHas:!1}),yd=na(nd,pd);Ka(/x/)&&(Ka=function(a){return"function"==typeof a&&Kc.call(a)==W});var zd=Qc?function(a){if(!a||Kc.call(a)!=Y||!hd.argsClass&&ta(a))return!1;var b=a.valueOf,c=qa(b)&&(c=Qc(b))&&Qc(c);return c?a==c||Qc(a)==c:ra(a)}:ra,Ad=la(function(a,b,c){Rc.call(a,c)?a[c]++:a[c]=1}),Bd=la(function(a,b,c){(Rc.call(a,c)?a[c]:a[c]=[]).push(b)}),Cd=la(function(a,b,c){a[c]=b}),Dd=gb,Ed=ab,Fd=qa(Fd=wc.now)&&Fd||function(){return(new wc).getTime()},Gd=8==dd(C+"08")?dd:function(a,b){return dd(Qa(a)?a.replace(K,""):a,b||0)};return b.after=Ob,b.assign=vd,b.at=Za,b.bind=Pb,b.bindAll=Qb,b.bindKey=Rb,b.chain=pc,b.compact=sb,b.compose=Sb,b.constant=bc,b.countBy=Ad,b.create=wa,b.createCallback=cc,b.curry=Tb,b.debounce=Ub,b.defaults=wd,b.defer=Vb,b.delay=Wb,b.difference=tb,b.filter=ab,b.flatten=xb,b.forEach=db,b.forEachRight=eb,b.forIn=xd,b.forInRight=za,b.forOwn=yd,b.forOwnRight=Aa,b.functions=Ba,b.groupBy=Bd,b.indexBy=Cd,b.initial=zb,b.intersection=Ab,b.invert=Da,b.invoke=fb,b.keys=md,b.map=gb,b.mapValues=Sa,b.max=hb,b.memoize=Xb,b.merge=Ta,b.min=ib,b.omit=Ua,b.once=Yb,b.pairs=Va,b.partial=Zb,b.partialRight=$b,b.pick=Wa,b.pluck=Dd,b.property=ic,b.pull=Db,b.range=Eb,b.reject=lb,b.remove=Fb,b.rest=Gb,b.shuffle=nb,b.sortBy=qb,b.tap=qc,b.throttle=_b,b.times=mc,b.toArray=rb,b.transform=Xa,b.union=Ib,b.uniq=Jb,b.values=Ya,b.where=Ed,b.without=Kb,b.wrap=ac,b.xor=Lb,b.zip=Mb,b.zipObject=Nb,b.collect=gb,b.drop=Gb,b.each=db,b.eachRight=eb,b.extend=vd,b.methods=Ba,b.object=Nb,b.select=ab,b.tail=Gb,b.unique=Jb,b.unzip=Mb,fc(b),b.clone=ua,b.cloneDeep=va,b.contains=$a,b.escape=dc,b.every=_a,b.find=bb,b.findIndex=ub,b.findKey=xa,b.findLast=cb,b.findLastIndex=vb,b.findLastKey=ya,b.has=Ca,b.identity=ec,b.indexOf=yb,b.isArguments=ta,b.isArray=kd,b.isBoolean=Ea,b.isDate=Fa,b.isElement=Ga,b.isEmpty=Ha,b.isEqual=Ia,b.isFinite=Ja,b.isFunction=Ka,b.isNaN=Ma,b.isNull=Na,b.isNumber=Oa,b.isObject=La,b.isPlainObject=zd,b.isRegExp=Pa,b.isString=Qa,b.isUndefined=Ra,b.lastIndexOf=Cb,b.mixin=fc,b.noConflict=gc,b.noop=hc,b.now=Fd,b.parseInt=Gd,b.random=jc,b.reduce=jb,b.reduceRight=kb,b.result=kc,b.runInContext=t,b.size=ob,b.some=pb,b.sortedIndex=Hb,b.template=lc,b.unescape=nc,b.uniqueId=oc,b.all=_a,b.any=pb,b.detect=bb,b.findWhere=bb,b.foldl=jb,b.foldr=kb,b.include=$a,b.inject=jb,fc(function(){var a={};return yd(b,function(c,d){b.prototype[d]||(a[d]=c)}),a}(),!1),b.first=wb,b.last=Bb,b.sample=mb,b.take=wb,b.head=wb,yd(b,function(a,d){var e="sample"!==d;b.prototype[d]||(b.prototype[d]=function(b,d){var f=this.__chain__,g=a(this.__wrapped__,b,d);return f||null!=b&&(!d||e&&"function"==typeof b)?new c(g,f):g})}),b.VERSION="2.4.2",b.prototype.chain=rc,b.prototype.toString=sc,b.prototype.value=tc,b.prototype.valueOf=tc,ud(["join","pop","shift"],function(a){var d=Fc[a];b.prototype[a]=function(){var a=this.__chain__,b=d.apply(this.__wrapped__,arguments);return a?new c(b,a):b}}),ud(["push","reverse","sort","unshift"],function(a){var c=Fc[a];b.prototype[a]=function(){return c.apply(this.__wrapped__,arguments),this}}),ud(["concat","slice","splice"],function(a){var d=Fc[a];b.prototype[a]=function(){return new c(d.apply(this.__wrapped__,arguments),this.__chain__)}}),hd.spliceObjects||ud(["pop","shift","splice"],function(a){var d=Fc[a],e="splice"==a;b.prototype[a]=function(){var a=this.__chain__,b=this.__wrapped__,f=d.apply(b,arguments);return 0===b.length&&delete b[0],a||e?new c(f,a):f}}),b}var u,v=[],w=[],x=0,y={},z=+new Date+"",A=75,B=40,C=" \t\v\f\ufeff\n\r\u2028\u2029",D=/\b__p \+= '';/g,E=/\b(__p \+=) '' \+/g,F=/(__e\(.*?\)|\b__t\)) \+\n'';/g,G=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,H=/\w*$/,I=/^\s*function[ \n\r\t]+\w/,J=/<%=([\s\S]+?)%>/g,K=RegExp("^["+C+"]*0+(?=.$)"),L=/($^)/,M=/\bthis\b/,N=/['\n\r\t\u2028\u2029\\]/g,O=["Array","Boolean","Date","Error","Function","Math","Number","Object","RegExp","String","_","attachEvent","clearTimeout","isFinite","isNaN","parseInt","setTimeout"],P=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Q=0,R="[object Arguments]",S="[object Array]",T="[object Boolean]",U="[object Date]",V="[object Error]",W="[object Function]",X="[object Number]",Y="[object Object]",Z="[object RegExp]",$="[object String]",_={};_[W]=!1,_[R]=_[S]=_[T]=_[U]=_[X]=_[Y]=_[Z]=_[$]=!0;var aa={leading:!1,maxWait:0,trailing:!1},ba={configurable:!1,enumerable:!1,value:null,writable:!1},ca={args:"",array:null,bottom:"",firstArg:"",init:"",keys:null,loop:"",shadowedProps:null,support:null,top:"",useHas:!1},da={boolean:!1,function:!0,object:!0,number:!1,string:!1,undefined:!1},ea={"\\":"\\","'":"'","\n":"n","\r":"r","\t":"t","\u2028":"u2028","\u2029":"u2029"},fa=da[typeof window]&&window||this,ga=da[typeof b]&&b&&!b.nodeType&&b,ha=da[typeof a]&&a&&!a.nodeType&&a,ia=(ha&&ha.exports,da[typeof e]&&e);!ia||ia.global!==ia&&ia.window!==ia||(fa=ia);var ja=t();fa._=ja,(d=function(){return ja}.call(b,c,b,a))!==u&&(a.exports=d)}).call(this)}).call(b,c(76)(a),function(){return this}())},function(a,b){a.exports=function(a){return a.webpackPolyfill||(a.deprecate=function(){},a.paths=[],a.children=[],a.webpackPolyfill=1),a}},function(a,b,c){var d,e;d=[c(100),c(129),c(109),c(114),c(116),c(124),c(78),c(137),c(138),c(105),c(103),c(139)],void 0!==(e=function(a,b,c,d,e,f,g,h,i,j,k,l){"use strict";function m(j,m){i.call(this),this.el=j,this.commands={},this.options=l.checkOptions(m),this.commandPatches={},this._plainTextFormatterFactory=new n,this._htmlFormatterFactory=new o,this.api=new f(this),this.Immutable=k;var p=g(this);this.transactionManager=new p,this.undoManager=!1,this.options.undo.enabled&&(this.options.undo.manager?this.undoManager=this.options.undo.manager:this.undoManager=new h(this.options.undo.limit,this.el),this._merge=!1,this._forceMerge=!1,this._mergeTimer=0,this._lastItem={content:""}),this.setHTML(this.getHTML()),this.el.setAttribute("contenteditable",!0),this.el.addEventListener("input",function(){this.transactionManager.run()}.bind(this),!1);var q=k.OrderedSet(this.options.defaultPlugins).sort(l.sortByPlugin("setRootPElement")).filter(l.filterByBlockLevelMode(this.allowsBlockElements())).map(function(b){return a[b]}),r=k.List(this.options.defaultFormatters).filter(function(a){return!!c[a]}).map(function(a){return c[a]}),s=k.List.of(e.events),t=k.List(this.options.defaultCommandPatches).map(function(a){return e.commands[a]}),u=k.List.of("indent","insertList","outdent","redo","subscript","superscript","undo").map(function(a){return b[a]});k.List().concat(q,r,s,t,u).forEach(function(a){this.use(a())}.bind(this)),this.use(d())}function n(){this.formatters=k.List()}function o(){this.formatters={sanitize:k.List(),normalize:k.List(),export:k.List()}}return m.prototype=Object.create(i.prototype),m.prototype.node=j,m.prototype.element=m.prototype.node,m.prototype.use=function(a){return a(this),this},m.prototype.setHTML=function(a,b){this._lastItem.content=a,b&&(this._skipFormatters=!0),this.el.innerHTML!==a&&(this.el.innerHTML=a)},m.prototype.getHTML=function(){return this.el.innerHTML},m.prototype.getContent=function(){return this._htmlFormatterFactory.formatForExport(this.getHTML().replace(/<br>$/,""))},m.prototype.getTextContent=function(){return this.el.textContent},m.prototype.pushHistory=function(){var a=this;if(a.options.undo.enabled){var b=a._lastItem.content.replace(/<em [^>]*class="scribe-marker"[^>]*>[^<]*?<\/em>/g,"");if(a.getHTML()!==b){var c=new a.api.Selection;c.placeMarkers();var d=a.getHTML();c.removeMarkers();var e=a.undoManager.item(a.undoManager.position);return(a._merge||a._forceMerge)&&e&&a._lastItem==e[0]?a._lastItem.content=d:(a._lastItem={previousItem:a._lastItem,content:d,scribe:a,execute:function(){},undo:function(){this.scribe.restoreFromHistory(this.previousItem)},redo:function(){this.scribe.restoreFromHistory(this)}},a.undoManager.transact(a._lastItem,!1)),clearTimeout(a._mergeTimer),a._merge=!0,a._mergeTimer=setTimeout(function(){a._merge=!1},a.options.undo.interval),!0}}return!1},m.prototype.getCommand=function(a){return this.commands[a]||this.commandPatches[a]||new this.api.Command(a)},m.prototype.restoreFromHistory=function(a){this._lastItem=a,this.setHTML(a.content,!0),(new this.api.Selection).selectMarkers(),this.trigger("content-changed")},m.prototype.allowsBlockElements=function(){return this.options.allowBlockElements},m.prototype.setContent=function(a){this.allowsBlockElements()||(a+="<br>"),this.setHTML(a),this.trigger("content-changed")},m.prototype.insertPlainText=function(a){this.insertHTML("<p>"+this._plainTextFormatterFactory.format(a)+"</p>")},m.prototype.insertHTML=function(a){this.getCommand("insertHTML").execute(this._htmlFormatterFactory.format(a))},m.prototype.isDebugModeEnabled=function(){return this.options.debug},m.prototype.registerHTMLFormatter=function(a,b){this._htmlFormatterFactory.formatters[a]=this._htmlFormatterFactory.formatters[a].push(b)},m.prototype.registerPlainTextFormatter=function(a){this._plainTextFormatterFactory.formatters=this._plainTextFormatterFactory.formatters.push(a)},n.prototype.format=function(a){return this.formatters.reduce(function(a,b){return b(a)},a)},o.prototype=Object.create(n.prototype),o.prototype.constructor=o,o.prototype.format=function(a){return this.formatters.sanitize.concat(this.formatters.normalize).reduce(function(a,b){return b(a)},a)},o.prototype.formatForExport=function(a){return this.formatters.export.reduce(function(a,b){return b(a)},a)},m}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(79)],void 0!==(e=function(a){"use strict";return function(b){function c(){this.history=[]}return a(c.prototype,{start:function(){this.history.push(1)},end:function(){this.history.pop(),0===this.history.length&&(b.pushHistory(),b.trigger("content-changed"))},run:function(a,c){this.start();try{a&&a()}finally{b._forceMerge=c===!0,this.end(),b._forceMerge=!1}}}),c}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(80),c(96)],void 0!==(e=function(a,b){return b(a)}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(81),c(82)],void 0!==(e=function(a,b){function c(c,d,e){var f=b(d);if(!e)return a(d,c,f);for(var g=-1,h=f.length;++g<h;){var i=f[g],j=c[i],k=e(j,d[i],i,c,d);(k===k?k===j:j!==j)&&(void 0!==j||i in c)||(c[i]=k)}return c}return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(83),c(84),c(88),c(89)],void 0!==(e=function(a,b,c,d){var e=b(e=Object.keys)&&e;return e?function(b){if(b)var f=b.constructor,g=b.length;return"function"==typeof f&&f.prototype===b||"function"!=typeof b&&g&&a(g)?d(b):c(b)?e(b):[]}:d}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=b}var b=Math.pow(2,53)-1;return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(85),c(87)],void 0!==(e=function(a,b){function c(a){return null!=a&&(h.call(a)==d?i.test(g.call(a)):b(a)&&e.test(a)||!1)}var d="[object Function]",e=/^\[object .+?Constructor\]$/,f=Object.prototype,g=Function.prototype.toString,h=f.toString,i=RegExp("^"+a(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(86)],void 0!==(e=function(a){function b(b){return b=a(b),b&&d.test(b)?b.replace(c,"\\$&"):b}var c=/[.*+?^${}()|[\]\/\\]/g,d=RegExp(c.source);return b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return"string"==typeof a?a:null==a?"":a+""}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return a&&"object"==typeof a||!1}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(90),c(91),c(92),c(83),c(93),c(94)],void 0!==(e=function(a,b,c,d,e,f){function g(g){for(var h=e(g),j=h.length,k=j&&g.length,l=k&&d(k)&&(b(g)||f.nonEnumArgs&&a(g)),m=-1,n=[];++m<j;){var o=h[m];(l&&c(o,k)||i.call(g,o))&&n.push(o)}return n}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(83),c(87)],void 0!==(e=function(a,b){function c(c){return a(b(c)?c.length:d)&&g.call(c)==e||!1}var d,e="[object Arguments]",f=Object.prototype,g=f.toString;return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(83),c(84),c(87)],void 0!==(e=function(a,b,c){var d=Object.prototype,e=d.toString,f=b(f=Array.isArray)&&f;return f||function(b){return c(b)&&a(b.length)&&"[object Array]"==e.call(b)||!1}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a,c){return a=+a,c=null==c?b:c,a>-1&&a%1==0&&a<c}var b=Math.pow(2,53)-1;return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(90),c(91),c(92),c(83),c(88),c(94)],void 0!==(e=function(a,b,c,d,e,f){function g(g){if(null==g)return[];e(g)||(g=Object(g));var h=g.length;h=h&&d(h)&&(b(g)||f.nonEnumArgs&&a(g))&&h||0;for(var j=g.constructor,k=-1,l="function"==typeof j&&j.prototype===g,m=Array(h),n=h>0;++k<h;)m[k]=k+"";for(var o in g)n&&c(o,h)||"constructor"==o&&(l||!i.call(g,o))||m.push(o);return m}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(84),c(95)],void 0!==(e=function(a,b){var c=/\bthis\b/,d=Object.prototype,e=(e=b.window)&&e.document,f=d.propertyIsEnumerable,g={};return function(d){g.funcDecomp=!a(b.WinRTError)&&c.test(function(){return this}),g.funcNames="string"==typeof Function.name;try{g.dom=11===e.createDocumentFragment().nodeType}catch(a){g.dom=!1}try{g.nonEnumArgs=!f.call(arguments,1)}catch(a){g.nonEnumArgs=!0}}(0,0),g}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;(function(a,c){d=[],void 0!==(e=function(){var d={function:!0,object:!0},e=d[typeof b]&&b&&!b.nodeType&&b,f=d[typeof a]&&a&&!a.nodeType&&a,g=e&&f&&"object"==typeof c&&c,h=d[typeof window]&&window;return g||h!==(this&&this.window)&&h||this}.apply(b,d))&&(a.exports=e)}).call(b,c(76)(a),function(){return this}())},function(a,b,c){var d,e;d=[c(97),c(99)],void 0!==(e=function(a,b){function c(c){return function(){var d=arguments,e=d.length,f=d[0];if(e<2||null==f)return f;var g=d[e-2],h=d[e-1],i=d[3];e>3&&"function"==typeof g?(g=a(g,h,5),e-=2):(g=e>2&&"function"==typeof h?h:null,e-=g?1:0),i&&b(d[1],d[2],i)&&(g=3==e?null:g,e=2);for(var j=0;++j<e;){var k=d[j];k&&c(f,k,g)}return f}}return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(98)],void 0!==(e=function(a){function b(b,c,d){if("function"!=typeof b)return a;if(void 0===c)return b;switch(d){case 1:return function(a){return b.call(c,a)};case 3:return function(a,d,e){return b.call(c,a,d,e)};case 4:return function(a,d,e,f){return b.call(c,a,d,e,f)};case 5:return function(a,d,e,f,g){return b.call(c,a,d,e,f,g)}}return function(){return b.apply(c,arguments)}}return b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return a}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(92),c(83),c(88)],void 0!==(e=function(a,b,c){function d(d,e,f){if(!c(f))return!1;var g=typeof e;if("number"==g)var h=f.length,i=b(h)&&a(e,h);else i="string"==g&&e in f;if(i){var j=f[e];return d===d?d===j:j!==j}return!1}return d}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(101),c(102),c(104),c(108)],void 0!==(e=function(a,b,c,d){"use strict";return{setRootPElement:a,enforcePElements:b,ensureSelectableContainers:c,inlineElementsMode:d}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){""===a.getHTML().trim()&&a.setContent("<p><br></p>")}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[c(103)],void 0!==(e=function(a){"use strict";return function(){return function(b){function c(b){var c=0;a.List(b.childNodes).filter(function(a){return a.nodeType===Node.TEXT_NODE||!e.isBlockElement(a)}).groupBy(function(a,b,d){return 0===b||a.previousSibling===d.get(b-1)?c:c+=1}).forEach(function(a){e.wrap(a.toArray(),document.createElement("p"))})}function d(a){for(var b,d=0;b=a.children[d++];)"BLOCKQUOTE"===b.tagName&&c(b)}var e=b.node;b.registerHTMLFormatter("normalize",function(a){var b=document.createElement("div");return b.innerHTML=a,c(b),d(b),b.innerHTML})}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){!function(b,c){a.exports=c()}(0,function(){"use strict";function a(a,b){b&&(a.prototype=Object.create(b.prototype)),a.prototype.constructor=a}function b(a){return a.value=!1,a}function c(a){a&&(a.value=!0)}function d(){}function e(a,b){b=b||0;for(var c=Math.max(0,a.length-b),d=new Array(c),e=0;e<c;e++)d[e]=a[e+b];return d}function f(a){return void 0===a.size&&(a.size=a.__iterate(h)),a.size}function g(a,b){return b>=0?+b:f(a)+ +b}function h(){return!0}function i(a,b,c){return(0===a||void 0!==c&&a<=-c)&&(void 0===b||void 0!==c&&b>=c)}function j(a,b){return l(a,b,0)}function k(a,b){return l(a,b,b)}function l(a,b,c){return void 0===a?c:a<0?Math.max(0,b+a):void 0===b?a:Math.min(b,a)}function m(a){return q(a)?a:D(a)}function n(a){return r(a)?a:E(a)}function o(a){return s(a)?a:F(a)}function p(a){return q(a)&&!t(a)?a:G(a)}function q(a){return!(!a||!a[oc])}function r(a){return!(!a||!a[pc])}function s(a){return!(!a||!a[qc])}function t(a){return r(a)||s(a)}function u(a){return!(!a||!a[rc])}function v(a){this.next=a}function w(a,b,c,d){var e=0===a?b:1===a?c:[b,c];return d?d.value=e:d={value:e,done:!1},d}function x(){return{value:void 0,done:!0}}function y(a){return!!B(a)}function z(a){return a&&"function"==typeof a.next}function A(a){var b=B(a);return b&&b.call(a)}function B(a){var b=a&&(vc&&a[vc]||a[wc]);if("function"==typeof b)return b}function C(a){return a&&"number"==typeof a.length}function D(a){return null===a||void 0===a?M():q(a)?a.toSeq():P(a)}function E(a){return null===a||void 0===a?M().toKeyedSeq():q(a)?r(a)?a.toSeq():a.fromEntrySeq():N(a)}function F(a){return null===a||void 0===a?M():q(a)?r(a)?a.entrySeq():a.toIndexedSeq():O(a)}function G(a){return(null===a||void 0===a?M():q(a)?r(a)?a.entrySeq():a:O(a)).toSetSeq()}function H(a){this._array=a,this.size=a.length}function I(a){var b=Object.keys(a);this._object=a,this._keys=b,this.size=b.length}function J(a){this._iterable=a,this.size=a.length||a.size}function K(a){this._iterator=a,this._iteratorCache=[]}function L(a){return!(!a||!a[yc])}function M(){return zc||(zc=new H([]))}function N(a){var b=Array.isArray(a)?new H(a).fromEntrySeq():z(a)?new K(a).fromEntrySeq():y(a)?new J(a).fromEntrySeq():"object"==typeof a?new I(a):void 0;if(!b)throw new TypeError("Expected Array or iterable object of [k, v] entries, or keyed object: "+a);return b}function O(a){var b=Q(a);if(!b)throw new TypeError("Expected Array or iterable object of values: "+a);return b}function P(a){var b=Q(a)||"object"==typeof a&&new I(a);if(!b)throw new TypeError("Expected Array or iterable object of values, or keyed object: "+a);return b}function Q(a){return C(a)?new H(a):z(a)?new K(a):y(a)?new J(a):void 0}function R(a,b,c,d){var e=a._cache;if(e){for(var f=e.length-1,g=0;g<=f;g++){var h=e[c?f-g:g];if(b(h[1],d?h[0]:g,a)===!1)return g+1}return g}return a.__iterateUncached(b,c)}function S(a,b,c,d){var e=a._cache;if(e){var f=e.length-1,g=0;return new v(function(){var a=e[c?f-g:g];return g++>f?x():w(b,d?a[0]:g-1,a[1])})}return a.__iteratorUncached(b,c)}function T(){throw TypeError("Abstract")}function U(){}function V(){}function W(){}function X(a,b){if(a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1;if("function"==typeof a.valueOf&&"function"==typeof b.valueOf){if(a=a.valueOf(),b=b.valueOf(),a===b||a!==a&&b!==b)return!0;if(!a||!b)return!1}return!("function"!=typeof a.equals||"function"!=typeof b.equals||!a.equals(b))}function Y(a,b){return b?Z(b,a,"",{"":a}):$(a)}function Z(a,b,c,d){return Array.isArray(b)?a.call(d,c,F(b).map(function(c,d){return Z(a,c,d,b)})):_(b)?a.call(d,c,E(b).map(function(c,d){return Z(a,c,d,b)})):b}function $(a){return Array.isArray(a)?F(a).map($).toList():_(a)?E(a).map($).toMap():a}function _(a){return a&&(a.constructor===Object||void 0===a.constructor)}function aa(a){return a>>>1&1073741824|3221225471&a}function ba(a){if(a===!1||null===a||void 0===a)return 0;if("function"==typeof a.valueOf&&((a=a.valueOf())===!1||null===a||void 0===a))return 0;if(a===!0)return 1;var b=typeof a;if("number"===b){var c=0|a;for(c!==a&&(c^=4294967295*a);a>4294967295;)a/=4294967295,c^=a;return aa(c)}return"string"===b?a.length>Hc?ca(a):da(a):"function"==typeof a.hashCode?a.hashCode():ea(a)}function ca(a){var b=Kc[a];return void 0===b&&(b=da(a),Jc===Ic&&(Jc=0,Kc={}),Jc++,Kc[a]=b),b}function da(a){for(var b=0,c=0;c<a.length;c++)b=31*b+a.charCodeAt(c)|0;return aa(b)}function ea(a){var b;if(Ec&&void 0!==(b=Ac.get(a)))return b;if(void 0!==(b=a[Gc]))return b;if(!Dc){if(void 0!==(b=a.propertyIsEnumerable&&a.propertyIsEnumerable[Gc]))return b;if(void 0!==(b=fa(a)))return b}if(b=++Fc,1073741824&Fc&&(Fc=0),Ec)Ac.set(a,b);else{if(void 0!==Cc&&Cc(a)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(Dc)Object.defineProperty(a,Gc,{enumerable:!1,configurable:!1,writable:!1,value:b});else if(void 0!==a.propertyIsEnumerable&&a.propertyIsEnumerable===a.constructor.prototype.propertyIsEnumerable)a.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},a.propertyIsEnumerable[Gc]=b;else{if(void 0===a.nodeType)throw new Error("Unable to set a non-enumerable property on object.");a[Gc]=b}}return b}function fa(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}function ga(a,b){if(!a)throw new Error(b)}function ha(a){ga(a!==1/0,"Cannot perform this action with an infinite size.")}function ia(a,b){this._iter=a,this._useKeys=b,this.size=a.size}function ja(a){this._iter=a,this.size=a.size}function ka(a){this._iter=a,this.size=a.size}function la(a){this._iter=a,this.size=a.size}function ma(a){var b=Ha(a);return b._iter=a,b.size=a.size,b.flip=function(){return a},b.reverse=function(){var b=a.reverse.apply(this);return b.flip=function(){return a.reverse()},b},b.has=function(b){return a.includes(b)},b.includes=function(b){return a.has(b)},b.cacheResult=Ia,b.__iterateUncached=function(b,c){var d=this;return a.__iterate(function(a,c){return b(c,a,d)!==!1},c)},b.__iteratorUncached=function(b,c){if(b===uc){var d=a.__iterator(b,c);return new v(function(){var a=d.next();if(!a.done){var b=a.value[0];a.value[0]=a.value[1],a.value[1]=b}return a})}return a.__iterator(b===tc?sc:tc,c)},b}function na(a,b,c){var d=Ha(a);return d.size=a.size,d.has=function(b){return a.has(b)},d.get=function(d,e){var f=a.get(d,lc);return f===lc?e:b.call(c,f,d,a)},d.__iterateUncached=function(d,e){var f=this;return a.__iterate(function(a,e,g){return d(b.call(c,a,e,g),e,f)!==!1},e)},d.__iteratorUncached=function(d,e){var f=a.__iterator(uc,e);return new v(function(){var e=f.next();if(e.done)return e;var g=e.value,h=g[0];return w(d,h,b.call(c,g[1],h,a),e)})},d}function oa(a,b){var c=Ha(a);return c._iter=a,c.size=a.size,c.reverse=function(){return a},a.flip&&(c.flip=function(){var b=ma(a);return b.reverse=function(){return a.flip()},b}),c.get=function(c,d){return a.get(b?c:-1-c,d)},c.has=function(c){return a.has(b?c:-1-c)},c.includes=function(b){return a.includes(b)},c.cacheResult=Ia,c.__iterate=function(b,c){var d=this;return a.__iterate(function(a,c){return b(a,c,d)},!c)},c.__iterator=function(b,c){return a.__iterator(b,!c)},c}function pa(a,b,c,d){var e=Ha(a);return d&&(e.has=function(d){var e=a.get(d,lc);return e!==lc&&!!b.call(c,e,d,a)},e.get=function(d,e){var f=a.get(d,lc);return f!==lc&&b.call(c,f,d,a)?f:e}),e.__iterateUncached=function(e,f){var g=this,h=0;return a.__iterate(function(a,f,i){if(b.call(c,a,f,i))return h++,e(a,d?f:h-1,g)},f),h},e.__iteratorUncached=function(e,f){var g=a.__iterator(uc,f),h=0;return new v(function(){for(;;){var f=g.next();if(f.done)return f;var i=f.value,j=i[0],k=i[1];if(b.call(c,k,j,a))return w(e,d?j:h++,k,f)}})},e}function qa(a,b,c){var d=La().asMutable();return a.__iterate(function(e,f){d.update(b.call(c,e,f,a),0,function(a){return a+1})}),d.asImmutable()}function ra(a,b,c){var d=r(a),e=(u(a)?xb():La()).asMutable();a.__iterate(function(f,g){e.update(b.call(c,f,g,a),function(a){return a=a||[],a.push(d?[g,f]:f),a})});var f=Ga(a);return e.map(function(b){return Da(a,f(b))})}function sa(a,b,c,d){var e=a.size;if(i(b,c,e))return a;var f=j(b,e),h=k(c,e);if(f!==f||h!==h)return sa(a.toSeq().cacheResult(),b,c,d);var l,m=h-f;m===m&&(l=m<0?0:m);var n=Ha(a);return n.size=l,!d&&L(a)&&l>=0&&(n.get=function(b,c){return b=g(this,b),b>=0&&b<l?a.get(b+f,c):c}),n.__iterateUncached=function(b,c){var e=this;if(0===l)return 0;if(c)return this.cacheResult().__iterate(b,c);var g=0,h=!0,i=0;return a.__iterate(function(a,c){if(!h||!(h=g++<f))return i++,b(a,d?c:i-1,e)!==!1&&i!==l}),i},n.__iteratorUncached=function(b,c){if(0!==l&&c)return this.cacheResult().__iterator(b,c);var e=0!==l&&a.__iterator(b,c),g=0,h=0;return new v(function(){for(;g++<f;)e.next();if(++h>l)return x();var a=e.next();return d||b===tc?a:b===sc?w(b,h-1,void 0,a):w(b,h-1,a.value[1],a)})},n}function ta(a,b,c){var d=Ha(a);return d.__iterateUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterate(d,e);var g=0;return a.__iterate(function(a,e,h){return b.call(c,a,e,h)&&++g&&d(a,e,f)}),g},d.__iteratorUncached=function(d,e){var f=this;if(e)return this.cacheResult().__iterator(d,e);var g=a.__iterator(uc,e),h=!0;return new v(function(){if(!h)return x();var a=g.next();if(a.done)return a;var e=a.value,i=e[0],j=e[1];return b.call(c,j,i,f)?d===uc?a:w(d,i,j,a):(h=!1,x())})},d}function ua(a,b,c,d){var e=Ha(a);return e.__iterateUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterate(e,f);var h=!0,i=0;return a.__iterate(function(a,f,j){if(!h||!(h=b.call(c,a,f,j)))return i++,e(a,d?f:i-1,g)}),i},e.__iteratorUncached=function(e,f){var g=this;if(f)return this.cacheResult().__iterator(e,f);var h=a.__iterator(uc,f),i=!0,j=0;return new v(function(){var a,f,k;do{if(a=h.next(),a.done)return d||e===tc?a:e===sc?w(e,j++,void 0,a):w(e,j++,a.value[1],a);var l=a.value;f=l[0],k=l[1],i&&(i=b.call(c,k,f,g))}while(i);return e===uc?a:w(e,f,k,a)})},e}function va(a,b){var c=r(a),d=[a].concat(b).map(function(a){return q(a)?c&&(a=n(a)):a=c?N(a):O(Array.isArray(a)?a:[a]),a}).filter(function(a){return 0!==a.size});if(0===d.length)return a;if(1===d.length){var e=d[0];if(e===a||c&&r(e)||s(a)&&s(e))return e}var f=new H(d);return c?f=f.toKeyedSeq():s(a)||(f=f.toSetSeq()),f=f.flatten(!0),f.size=d.reduce(function(a,b){if(void 0!==a){var c=b.size;if(void 0!==c)return a+c}},0),f}function wa(a,b,c){var d=Ha(a);return d.__iterateUncached=function(d,e){function f(a,i){var j=this;a.__iterate(function(a,e){return(!b||i<b)&&q(a)?f(a,i+1):d(a,c?e:g++,j)===!1&&(h=!0),!h},e)}var g=0,h=!1;return f(a,0),g},d.__iteratorUncached=function(d,e){var f=a.__iterator(d,e),g=[],h=0;return new v(function(){for(;f;){var a=f.next();if(a.done===!1){var i=a.value;if(d===uc&&(i=i[1]),b&&!(g.length<b)||!q(i))return c?a:w(d,h++,i,a);g.push(f),f=i.__iterator(d,e)}else f=g.pop()}return x()})},d}function xa(a,b,c){var d=Ga(a);return a.toSeq().map(function(e,f){return d(b.call(c,e,f,a))}).flatten(!0)}function ya(a,b){var c=Ha(a);return c.size=a.size&&2*a.size-1,c.__iterateUncached=function(c,d){var e=this,f=0;return a.__iterate(function(a,d){return(!f||c(b,f++,e)!==!1)&&c(a,f++,e)!==!1},d),f},c.__iteratorUncached=function(c,d){var e,f=a.__iterator(tc,d),g=0;return new v(function(){return(!e||g%2)&&(e=f.next(),e.done)?e:g%2?w(c,g++,b):w(c,g++,e.value,e)})},c}function za(a,b,c){b||(b=Ja);var d=r(a),e=0,f=a.toSeq().map(function(b,d){return[d,b,e++,c?c(b,d,a):b]}).toArray();return f.sort(function(a,c){return b(a[3],c[3])||a[2]-c[2]}).forEach(d?function(a,b){f[b].length=2}:function(a,b){f[b]=a[1]}),d?E(f):s(a)?F(f):G(f)}function Aa(a,b,c){if(b||(b=Ja),c){var d=a.toSeq().map(function(b,d){return[b,c(b,d,a)]}).reduce(function(a,c){return Ba(b,a[1],c[1])?c:a});return d&&d[0]}return a.reduce(function(a,c){return Ba(b,a,c)?c:a})}function Ba(a,b,c){var d=a(c,b);return 0===d&&c!==b&&(void 0===c||null===c||c!==c)||d>0}function Ca(a,b,c){var d=Ha(a);return d.size=new H(c).map(function(a){return a.size}).min(),d.__iterate=function(a,b){for(var c,d=this.__iterator(tc,b),e=0;!(c=d.next()).done&&a(c.value,e++,this)!==!1;);return e},d.__iteratorUncached=function(a,d){var e=c.map(function(a){return a=m(a),A(d?a.reverse():a)}),f=0,g=!1;return new v(function(){var c;return g||(c=e.map(function(a){return a.next()}),g=c.some(function(a){return a.done})),g?x():w(a,f++,b.apply(null,c.map(function(a){return a.value})))})},d}function Da(a,b){return L(a)?b:a.constructor(b)}function Ea(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function Fa(a){return ha(a.size),f(a)}function Ga(a){return r(a)?n:s(a)?o:p}function Ha(a){return Object.create((r(a)?E:s(a)?F:G).prototype)}function Ia(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):D.prototype.cacheResult.call(this)}function Ja(a,b){return a>b?1:a<b?-1:0}function Ka(a){var b=A(a);if(!b){if(!C(a))throw new TypeError("Expected iterable or array-like: "+a);b=A(m(a))}return b}function La(a){return null===a||void 0===a?Wa():Ma(a)?a:Wa().withMutations(function(b){var c=n(a);ha(c.size),c.forEach(function(a,c){return b.set(c,a)})})}function Ma(a){return!(!a||!a[Lc])}function Na(a,b){this.ownerID=a,this.entries=b}function Oa(a,b,c){this.ownerID=a,this.bitmap=b,this.nodes=c}function Pa(a,b,c){this.ownerID=a,this.count=b,this.nodes=c}function Qa(a,b,c){this.ownerID=a,this.keyHash=b,this.entries=c}function Ra(a,b,c){this.ownerID=a,this.keyHash=b,this.entry=c}function Sa(a,b,c){this._type=b,this._reverse=c,this._stack=a._root&&Ua(a._root)}function Ta(a,b){return w(a,b[0],b[1])}function Ua(a,b){return{node:a,index:0,__prev:b}}function Va(a,b,c,d){var e=Object.create(Mc);return e.size=a,e._root=b,e.__ownerID=c,e.__hash=d,e.__altered=!1,e}function Wa(){return Nc||(Nc=Va(0))}function Xa(a,c,d){var e,f;if(a._root){var g=b(mc),h=b(nc);if(e=Ya(a._root,a.__ownerID,0,void 0,c,d,g,h),!h.value)return a;f=a.size+(g.value?d===lc?-1:1:0)}else{if(d===lc)return a;f=1,e=new Na(a.__ownerID,[[c,d]])}return a.__ownerID?(a.size=f,a._root=e,a.__hash=void 0,a.__altered=!0,a):e?Va(f,e):Wa()}function Ya(a,b,d,e,f,g,h,i){return a?a.update(b,d,e,f,g,h,i):g===lc?a:(c(i),c(h),new Ra(b,e,[f,g]))}function Za(a){return a.constructor===Ra||a.constructor===Qa}function $a(a,b,c,d,e){if(a.keyHash===d)return new Qa(b,d,[a.entry,e]);var f,g=(0===c?a.keyHash:a.keyHash>>>c)&kc,h=(0===c?d:d>>>c)&kc;return new Oa(b,1<<g|1<<h,g===h?[$a(a,b,c+ic,d,e)]:(f=new Ra(b,d,e),g<h?[a,f]:[f,a]))}function _a(a,b,c,e){a||(a=new d);for(var f=new Ra(a,ba(c),[c,e]),g=0;g<b.length;g++){var h=b[g];f=f.update(a,0,void 0,h[0],h[1])}return f}function ab(a,b,c,d){for(var e=0,f=0,g=new Array(c),h=0,i=1,j=b.length;h<j;h++,i<<=1){var k=b[h];void 0!==k&&h!==d&&(e|=i,g[f++]=k)}return new Oa(a,e,g)}function bb(a,b,c,d,e){for(var f=0,g=new Array(jc),h=0;0!==c;h++,c>>>=1)g[h]=1&c?b[f++]:void 0;return g[d]=e,new Pa(a,f+1,g)}function cb(a,b,c){for(var d=[],e=0;e<c.length;e++){var f=c[e],g=n(f);q(f)||(g=g.map(function(a){return Y(a)})),d.push(g)}return eb(a,b,d)}function db(a){return function(b,c,d){return b&&b.mergeDeepWith&&q(c)?b.mergeDeepWith(a,c):a?a(b,c,d):c}}function eb(a,b,c){return c=c.filter(function(a){return 0!==a.size}),0===c.length?a:0!==a.size||a.__ownerID||1!==c.length?a.withMutations(function(a){for(var d=b?function(c,d){a.update(d,lc,function(a){return a===lc?c:b(a,c,d)})}:function(b,c){a.set(c,b)},e=0;e<c.length;e++)c[e].forEach(d)}):a.constructor(c[0])}function fb(a,b,c,d){var e=a===lc,f=b.next();if(f.done){var g=e?c:a,h=d(g);return h===g?a:h}ga(e||a&&a.set,"invalid keyPath");var i=f.value,j=e?lc:a.get(i,lc),k=fb(j,b,c,d);return k===j?a:k===lc?a.remove(i):(e?Wa():a).set(i,k)}function gb(a){return a-=a>>1&1431655765,a=(858993459&a)+(a>>2&858993459),a=a+(a>>4)&252645135,a+=a>>8,127&(a+=a>>16)}function hb(a,b,c,d){var f=d?a:e(a);return f[b]=c,f}function ib(a,b,c,d){var e=a.length+1;if(d&&b+1===e)return a[b]=c,a;for(var f=new Array(e),g=0,h=0;h<e;h++)h===b?(f[h]=c,g=-1):f[h]=a[h+g];return f}function jb(a,b,c){var d=a.length-1;if(c&&b===d)return a.pop(),a;for(var e=new Array(d),f=0,g=0;g<d;g++)g===b&&(f=1),e[g]=a[g+f];return e}function kb(a){var b=pb();if(null===a||void 0===a)return b;if(lb(a))return a;var c=o(a),d=c.size;return 0===d?b:(ha(d),d>0&&d<jc?ob(0,d,ic,null,new mb(c.toArray())):b.withMutations(function(a){a.setSize(d),c.forEach(function(b,c){return a.set(c,b)})}))}function lb(a){return!(!a||!a[Rc])}function mb(a,b){this.array=a,this.ownerID=b}function nb(a,b){function c(a,b,c){return 0===b?d(a,c):e(a,b,c)}function d(a,c){var d=c===h?i&&i.array:a&&a.array,e=c>f?0:f-c,j=g-c;return j>jc&&(j=jc),function(){if(e===j)return Uc;var a=b?--j:e++;return d&&d[a]}}function e(a,d,e){var h,i=a&&a.array,j=e>f?0:f-e>>d,k=1+(g-e>>d);return k>jc&&(k=jc),function(){for(;;){if(h){var a=h();if(a!==Uc)return a;h=null}if(j===k)return Uc;var f=b?--k:j++;h=c(i&&i[f],d-ic,e+(f<<d))}}}var f=a._origin,g=a._capacity,h=wb(g),i=a._tail;return c(a._root,a._level,0)}function ob(a,b,c,d,e,f,g){var h=Object.create(Sc);return h.size=b-a,h._origin=a,h._capacity=b,h._level=c,h._root=d,h._tail=e,h.__ownerID=f,h.__hash=g,h.__altered=!1,h}function pb(){return Tc||(Tc=ob(0,0,ic))}function qb(a,c,d){if((c=g(a,c))>=a.size||c<0)return a.withMutations(function(a){c<0?ub(a,c).set(0,d):ub(a,0,c+1).set(c,d)});c+=a._origin;var e=a._tail,f=a._root,h=b(nc);return c>=wb(a._capacity)?e=rb(e,a.__ownerID,0,c,d,h):f=rb(f,a.__ownerID,a._level,c,d,h),h.value?a.__ownerID?(a._root=f,a._tail=e,a.__hash=void 0,a.__altered=!0,a):ob(a._origin,a._capacity,a._level,f,e):a}function rb(a,b,d,e,f,g){var h=e>>>d&kc,i=a&&h<a.array.length;if(!i&&void 0===f)return a;var j;if(d>0){var k=a&&a.array[h],l=rb(k,b,d-ic,e,f,g);return l===k?a:(j=sb(a,b),j.array[h]=l,j)}return i&&a.array[h]===f?a:(c(g),j=sb(a,b),void 0===f&&h===j.array.length-1?j.array.pop():j.array[h]=f,j)}function sb(a,b){return b&&a&&b===a.ownerID?a:new mb(a?a.array.slice():[],b)}function tb(a,b){if(b>=wb(a._capacity))return a._tail;if(b<1<<a._level+ic){for(var c=a._root,d=a._level;c&&d>0;)c=c.array[b>>>d&kc],d-=ic;return c}}function ub(a,b,c){var e=a.__ownerID||new d,f=a._origin,g=a._capacity,h=f+b,i=void 0===c?g:c<0?g+c:f+c;if(h===f&&i===g)return a;if(h>=i)return a.clear();for(var j=a._level,k=a._root,l=0;h+l<0;)k=new mb(k&&k.array.length?[void 0,k]:[],e),j+=ic,l+=1<<j;l&&(h+=l,f+=l,i+=l,g+=l);for(var m=wb(g),n=wb(i);n>=1<<j+ic;)k=new mb(k&&k.array.length?[k]:[],e),j+=ic;var o=a._tail,p=n<m?tb(a,i-1):n>m?new mb([],e):o;if(o&&n>m&&h<g&&o.array.length){k=sb(k,e);for(var q=k,r=j;r>ic;r-=ic){var s=m>>>r&kc;q=q.array[s]=sb(q.array[s],e)}q.array[m>>>ic&kc]=o}if(i<g&&(p=p&&p.removeAfter(e,0,i)),h>=n)h-=n,i-=n,j=ic,k=null,p=p&&p.removeBefore(e,0,h);else if(h>f||n<m){for(l=0;k;){var t=h>>>j&kc;if(t!==n>>>j&kc)break;t&&(l+=(1<<j)*t),j-=ic,k=k.array[t]}k&&h>f&&(k=k.removeBefore(e,j,h-l)),k&&n<m&&(k=k.removeAfter(e,j,n-l)),l&&(h-=l,i-=l)}return a.__ownerID?(a.size=i-h,a._origin=h,a._capacity=i,a._level=j,a._root=k,a._tail=p,a.__hash=void 0,a.__altered=!0,a):ob(h,i,j,k,p)}function vb(a,b,c){for(var d=[],e=0,f=0;f<c.length;f++){var g=c[f],h=o(g);h.size>e&&(e=h.size),q(g)||(h=h.map(function(a){return Y(a)})),d.push(h)}return e>a.size&&(a=a.setSize(e)),eb(a,b,d)}function wb(a){return a<jc?0:a-1>>>ic<<ic}function xb(a){return null===a||void 0===a?Ab():yb(a)?a:Ab().withMutations(function(b){var c=n(a);ha(c.size),c.forEach(function(a,c){return b.set(c,a)})})}function yb(a){return Ma(a)&&u(a)}function zb(a,b,c,d){var e=Object.create(xb.prototype);return e.size=a?a.size:0,e._map=a,e._list=b,e.__ownerID=c,e.__hash=d,e}function Ab(){return Vc||(Vc=zb(Wa(),pb()))}function Bb(a,b,c){var d,e,f=a._map,g=a._list,h=f.get(b),i=void 0!==h;if(c===lc){if(!i)return a;g.size>=jc&&g.size>=2*f.size?(e=g.filter(function(a,b){return void 0!==a&&h!==b}),d=e.toKeyedSeq().map(function(a){return a[0]}).flip().toMap(),a.__ownerID&&(d.__ownerID=e.__ownerID=a.__ownerID)):(d=f.remove(b),e=h===g.size-1?g.pop():g.set(h,void 0))}else if(i){if(c===g.get(h)[1])return a;d=f,e=g.set(h,[b,c])}else d=f.set(b,g.size),e=g.set(g.size,[b,c]);return a.__ownerID?(a.size=d.size,a._map=d,a._list=e,a.__hash=void 0,a):zb(d,e)}function Cb(a){return null===a||void 0===a?Fb():Db(a)?a:Fb().unshiftAll(a)}function Db(a){return!(!a||!a[Wc])}function Eb(a,b,c,d){var e=Object.create(Xc);return e.size=a,e._head=b,e.__ownerID=c,e.__hash=d,e.__altered=!1,e}function Fb(){return Yc||(Yc=Eb(0))}function Gb(a){return null===a||void 0===a?Kb():Hb(a)?a:Kb().withMutations(function(b){var c=p(a);ha(c.size),c.forEach(function(a){return b.add(a)})})}function Hb(a){return!(!a||!a[Zc])}function Ib(a,b){return a.__ownerID?(a.size=b.size,a._map=b,a):b===a._map?a:0===b.size?a.__empty():a.__make(b)}function Jb(a,b){var c=Object.create($c);return c.size=a?a.size:0,c._map=a,c.__ownerID=b,c}function Kb(){return _c||(_c=Jb(Wa()))}function Lb(a){return null===a||void 0===a?Ob():Mb(a)?a:Ob().withMutations(function(b){var c=p(a);ha(c.size),c.forEach(function(a){return b.add(a)})})}function Mb(a){return Hb(a)&&u(a)}function Nb(a,b){var c=Object.create(ad);return c.size=a?a.size:0,c._map=a,c.__ownerID=b,c}function Ob(){return bd||(bd=Nb(Ab()))}function Pb(a,b){var c,d=function(f){if(f instanceof d)return f;if(!(this instanceof d))return new d(f);if(!c){c=!0;var g=Object.keys(a);Sb(e,g),e.size=g.length,e._name=b,e._keys=g,e._defaultValues=a}this._map=La(f)},e=d.prototype=Object.create(cd);return e.constructor=d,d}function Qb(a,b,c){var d=Object.create(Object.getPrototypeOf(a));return d._map=b,d.__ownerID=c,d}function Rb(a){return a._name||a.constructor.name||"Record"}function Sb(a,b){try{b.forEach(Tb.bind(void 0,a))}catch(a){}}function Tb(a,b){Object.defineProperty(a,b,{get:function(){return this.get(b)},set:function(a){ga(this.__ownerID,"Cannot set on an immutable record."),this.set(b,a)}})}function Ub(a,b){if(a===b)return!0;if(!q(b)||void 0!==a.size&&void 0!==b.size&&a.size!==b.size||void 0!==a.__hash&&void 0!==b.__hash&&a.__hash!==b.__hash||r(a)!==r(b)||s(a)!==s(b)||u(a)!==u(b))return!1;if(0===a.size&&0===b.size)return!0;var c=!t(a);if(u(a)){var d=a.entries();return b.every(function(a,b){var e=d.next().value;return e&&X(e[1],a)&&(c||X(e[0],b))})&&d.next().done}var e=!1;if(void 0===a.size)if(void 0===b.size)"function"==typeof a.cacheResult&&a.cacheResult();else{e=!0;var f=a;a=b,b=f}var g=!0,h=b.__iterate(function(b,d){if(c?!a.has(b):e?!X(b,a.get(d,lc)):!X(a.get(d,lc),b))return g=!1,!1});return g&&a.size===h}function Vb(a,b,c){if(!(this instanceof Vb))return new Vb(a,b,c);if(ga(0!==c,"Cannot step a Range by 0"),a=a||0,void 0===b&&(b=1/0),c=void 0===c?1:Math.abs(c),b<a&&(c=-c),this._start=a,this._end=b,this._step=c,this.size=Math.max(0,Math.ceil((b-a)/c-1)+1),0===this.size){if(dd)return dd;dd=this}}function Wb(a,b){if(!(this instanceof Wb))return new Wb(a,b);if(this._value=a,this.size=void 0===b?1/0:Math.max(0,b),0===this.size){if(ed)return ed;ed=this}}function Xb(a,b){var c=function(c){a.prototype[c]=b[c]};return Object.keys(b).forEach(c),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(b).forEach(c),a}function Yb(a,b){return b}function Zb(a,b){return[b,a]}function $b(a){return function(){return!a.apply(this,arguments)}}function _b(a){return function(){return-a.apply(this,arguments)}}function ac(a){return"string"==typeof a?JSON.stringify(a):a}function bc(){return e(arguments)}function cc(a,b){return a<b?1:a>b?-1:0}function dc(a){if(a.size===1/0)return 0;var b=u(a),c=r(a),d=b?1:0;return ec(a.__iterate(c?b?function(a,b){d=31*d+fc(ba(a),ba(b))|0}:function(a,b){d=d+fc(ba(a),ba(b))|0}:b?function(a){d=31*d+ba(a)|0}:function(a){d=d+ba(a)|0}),d)}function ec(a,b){return b=Bc(b,3432918353),b=Bc(b<<15|b>>>-15,461845907),b=Bc(b<<13|b>>>-13,5),b=(b+3864292196|0)^a,b=Bc(b^b>>>16,2246822507),b=Bc(b^b>>>13,3266489909),b=aa(b^b>>>16)}function fc(a,b){return a^b+2654435769+(a<<6)+(a>>2)|0}var gc=Array.prototype.slice,hc="delete",ic=5,jc=1<<ic,kc=jc-1,lc={},mc={value:!1},nc={value:!1};a(n,m),a(o,m),a(p,m),m.isIterable=q,m.isKeyed=r,m.isIndexed=s,m.isAssociative=t,m.isOrdered=u,m.Keyed=n,m.Indexed=o,m.Set=p;var oc="@@__IMMUTABLE_ITERABLE__@@",pc="@@__IMMUTABLE_KEYED__@@",qc="@@__IMMUTABLE_INDEXED__@@",rc="@@__IMMUTABLE_ORDERED__@@",sc=0,tc=1,uc=2,vc="function"==typeof Symbol&&Symbol.iterator,wc="@@iterator",xc=vc||wc;v.prototype.toString=function(){return"[Iterator]"},v.KEYS=sc,v.VALUES=tc,v.ENTRIES=uc,v.prototype.inspect=v.prototype.toSource=function(){return this.toString()},v.prototype[xc]=function(){return this},a(D,m),D.of=function(){return D(arguments)},D.prototype.toSeq=function(){return this},D.prototype.toString=function(){return this.__toString("Seq {","}")},D.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},D.prototype.__iterate=function(a,b){return R(this,a,b,!0)},D.prototype.__iterator=function(a,b){return S(this,a,b,!0)},a(E,D),E.prototype.toKeyedSeq=function(){return this},a(F,D),F.of=function(){return F(arguments)},F.prototype.toIndexedSeq=function(){return this},F.prototype.toString=function(){return this.__toString("Seq [","]")},F.prototype.__iterate=function(a,b){return R(this,a,b,!1)},F.prototype.__iterator=function(a,b){return S(this,a,b,!1)},a(G,D),G.of=function(){return G(arguments)},G.prototype.toSetSeq=function(){return this},D.isSeq=L,D.Keyed=E,D.Set=G,D.Indexed=F;var yc="@@__IMMUTABLE_SEQ__@@";D.prototype[yc]=!0,a(H,F),H.prototype.get=function(a,b){return this.has(a)?this._array[g(this,a)]:b},H.prototype.__iterate=function(a,b){for(var c=this._array,d=c.length-1,e=0;e<=d;e++)if(a(c[b?d-e:e],e,this)===!1)return e+1;return e},H.prototype.__iterator=function(a,b){var c=this._array,d=c.length-1,e=0;return new v(function(){return e>d?x():w(a,e,c[b?d-e++:e++])})},a(I,E),I.prototype.get=function(a,b){return void 0===b||this.has(a)?this._object[a]:b},I.prototype.has=function(a){return this._object.hasOwnProperty(a)},I.prototype.__iterate=function(a,b){for(var c=this._object,d=this._keys,e=d.length-1,f=0;f<=e;f++){var g=d[b?e-f:f];if(a(c[g],g,this)===!1)return f+1}return f},I.prototype.__iterator=function(a,b){var c=this._object,d=this._keys,e=d.length-1,f=0;return new v(function(){var g=d[b?e-f:f];return f++>e?x():w(a,g,c[g])})},I.prototype[rc]=!0,a(J,F),J.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);var c=this._iterable,d=A(c),e=0;if(z(d))for(var f;!(f=d.next()).done&&a(f.value,e++,this)!==!1;);return e},J.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);var c=this._iterable,d=A(c);if(!z(d))return new v(x);var e=0;return new v(function(){var b=d.next();return b.done?b:w(a,e++,b.value)})},a(K,F),K.prototype.__iterateUncached=function(a,b){if(b)return this.cacheResult().__iterate(a,b);for(var c=this._iterator,d=this._iteratorCache,e=0;e<d.length;)if(a(d[e],e++,this)===!1)return e;for(var f;!(f=c.next()).done;){var g=f.value;if(d[e]=g,a(g,e++,this)===!1)break}return e},K.prototype.__iteratorUncached=function(a,b){if(b)return this.cacheResult().__iterator(a,b);var c=this._iterator,d=this._iteratorCache,e=0;return new v(function(){if(e>=d.length){var b=c.next();if(b.done)return b;d[e]=b.value}return w(a,e,d[e++])})};var zc;a(T,m),a(U,T),a(V,T),a(W,T),T.Keyed=U,T.Indexed=V,T.Set=W;var Ac,Bc="function"==typeof Math.imul&&Math.imul(4294967295,2)===-2?Math.imul:function(a,b){a|=0,b|=0;var c=65535&a,d=65535&b;return c*d+((a>>>16)*d+c*(b>>>16)<<16>>>0)|0},Cc=Object.isExtensible,Dc=function(){try{return Object.defineProperty({},"@",{}),!0}catch(a){return!1}}(),Ec="function"==typeof WeakMap;Ec&&(Ac=new WeakMap);var Fc=0,Gc="__immutablehash__";"function"==typeof Symbol&&(Gc=Symbol(Gc));var Hc=16,Ic=255,Jc=0,Kc={};a(ia,E),ia.prototype.get=function(a,b){return this._iter.get(a,b)},ia.prototype.has=function(a){return this._iter.has(a)},ia.prototype.valueSeq=function(){return this._iter.valueSeq()},ia.prototype.reverse=function(){var a=this,b=oa(this,!0);return this._useKeys||(b.valueSeq=function(){return a._iter.toSeq().reverse()}),b},ia.prototype.map=function(a,b){var c=this,d=na(this,a,b);return this._useKeys||(d.valueSeq=function(){return c._iter.toSeq().map(a,b)}),d},ia.prototype.__iterate=function(a,b){var c,d=this;return this._iter.__iterate(this._useKeys?function(b,c){return a(b,c,d)}:(c=b?Fa(this):0,function(e){return a(e,b?--c:c++,d)}),b)},ia.prototype.__iterator=function(a,b){if(this._useKeys)return this._iter.__iterator(a,b);var c=this._iter.__iterator(tc,b),d=b?Fa(this):0;return new v(function(){var e=c.next();return e.done?e:w(a,b?--d:d++,e.value,e)})},ia.prototype[rc]=!0,a(ja,F),ja.prototype.includes=function(a){return this._iter.includes(a)},ja.prototype.__iterate=function(a,b){var c=this,d=0;return this._iter.__iterate(function(b){return a(b,d++,c)},b)},ja.prototype.__iterator=function(a,b){var c=this._iter.__iterator(tc,b),d=0;return new v(function(){var b=c.next();return b.done?b:w(a,d++,b.value,b)})},a(ka,G),ka.prototype.has=function(a){return this._iter.includes(a)},ka.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){return a(b,b,c)},b)},ka.prototype.__iterator=function(a,b){var c=this._iter.__iterator(tc,b);return new v(function(){var b=c.next();return b.done?b:w(a,b.value,b.value,b)})},a(la,E),la.prototype.entrySeq=function(){return this._iter.toSeq()},la.prototype.__iterate=function(a,b){var c=this;return this._iter.__iterate(function(b){if(b){Ea(b);var d=q(b);return a(d?b.get(1):b[1],d?b.get(0):b[0],c)}},b)},la.prototype.__iterator=function(a,b){var c=this._iter.__iterator(tc,b);return new v(function(){for(;;){var b=c.next();if(b.done)return b;var d=b.value;if(d){Ea(d);var e=q(d);return w(a,e?d.get(0):d[0],e?d.get(1):d[1],b)}}})},ja.prototype.cacheResult=ia.prototype.cacheResult=ka.prototype.cacheResult=la.prototype.cacheResult=Ia,a(La,U),La.prototype.toString=function(){return this.__toString("Map {","}")},La.prototype.get=function(a,b){return this._root?this._root.get(0,void 0,a,b):b},La.prototype.set=function(a,b){return Xa(this,a,b)},La.prototype.setIn=function(a,b){return this.updateIn(a,lc,function(){return b})},La.prototype.remove=function(a){return Xa(this,a,lc)},La.prototype.deleteIn=function(a){return this.updateIn(a,function(){return lc})},La.prototype.update=function(a,b,c){return 1===arguments.length?a(this):this.updateIn([a],b,c)},La.prototype.updateIn=function(a,b,c){c||(c=b,b=void 0);var d=fb(this,Ka(a),b,c);return d===lc?void 0:d},La.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Wa()},La.prototype.merge=function(){return cb(this,void 0,arguments)},La.prototype.mergeWith=function(a){return cb(this,a,gc.call(arguments,1))},La.prototype.mergeIn=function(a){var b=gc.call(arguments,1);return this.updateIn(a,Wa(),function(a){return"function"==typeof a.merge?a.merge.apply(a,b):b[b.length-1]})},La.prototype.mergeDeep=function(){return cb(this,db(void 0),arguments)},La.prototype.mergeDeepWith=function(a){var b=gc.call(arguments,1);return cb(this,db(a),b)},La.prototype.mergeDeepIn=function(a){var b=gc.call(arguments,1);return this.updateIn(a,Wa(),function(a){return"function"==typeof a.mergeDeep?a.mergeDeep.apply(a,b):b[b.length-1]})},La.prototype.sort=function(a){return xb(za(this,a))},La.prototype.sortBy=function(a,b){return xb(za(this,b,a))},La.prototype.withMutations=function(a){var b=this.asMutable();return a(b),b.wasAltered()?b.__ensureOwner(this.__ownerID):this},La.prototype.asMutable=function(){return this.__ownerID?this:this.__ensureOwner(new d)},La.prototype.asImmutable=function(){return this.__ensureOwner()},La.prototype.wasAltered=function(){return this.__altered},La.prototype.__iterator=function(a,b){return new Sa(this,a,b)},La.prototype.__iterate=function(a,b){var c=this,d=0;return this._root&&this._root.iterate(function(b){return d++,a(b[1],b[0],c)},b),d},La.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Va(this.size,this._root,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)},La.isMap=Ma;var Lc="@@__IMMUTABLE_MAP__@@",Mc=La.prototype;Mc[Lc]=!0,Mc[hc]=Mc.remove,Mc.removeIn=Mc.deleteIn,Na.prototype.get=function(a,b,c,d){for(var e=this.entries,f=0,g=e.length;f<g;f++)if(X(c,e[f][0]))return e[f][1];return d},Na.prototype.update=function(a,b,d,f,g,h,i){for(var j=g===lc,k=this.entries,l=0,m=k.length;l<m&&!X(f,k[l][0]);l++);var n=l<m;if(n?k[l][1]===g:j)return this;if(c(i),(j||!n)&&c(h),!j||1!==k.length){if(!n&&!j&&k.length>=Oc)return _a(a,k,f,g);var o=a&&a===this.ownerID,p=o?k:e(k);return n?j?l===m-1?p.pop():p[l]=p.pop():p[l]=[f,g]:p.push([f,g]),o?(this.entries=p,this):new Na(a,p)}},Oa.prototype.get=function(a,b,c,d){void 0===b&&(b=ba(c));var e=1<<((0===a?b:b>>>a)&kc),f=this.bitmap;return 0==(f&e)?d:this.nodes[gb(f&e-1)].get(a+ic,b,c,d)},Oa.prototype.update=function(a,b,c,d,e,f,g){void 0===c&&(c=ba(d));var h=(0===b?c:c>>>b)&kc,i=1<<h,j=this.bitmap,k=0!=(j&i);if(!k&&e===lc)return this;var l=gb(j&i-1),m=this.nodes,n=k?m[l]:void 0,o=Ya(n,a,b+ic,c,d,e,f,g);if(o===n)return this;if(!k&&o&&m.length>=Pc)return bb(a,m,j,h,o);if(k&&!o&&2===m.length&&Za(m[1^l]))return m[1^l];if(k&&o&&1===m.length&&Za(o))return o;var p=a&&a===this.ownerID,q=k?o?j:j^i:j|i,r=k?o?hb(m,l,o,p):jb(m,l,p):ib(m,l,o,p);return p?(this.bitmap=q,this.nodes=r,this):new Oa(a,q,r)},Pa.prototype.get=function(a,b,c,d){void 0===b&&(b=ba(c));var e=(0===a?b:b>>>a)&kc,f=this.nodes[e];return f?f.get(a+ic,b,c,d):d},Pa.prototype.update=function(a,b,c,d,e,f,g){void 0===c&&(c=ba(d));var h=(0===b?c:c>>>b)&kc,i=e===lc,j=this.nodes,k=j[h];if(i&&!k)return this;var l=Ya(k,a,b+ic,c,d,e,f,g);if(l===k)return this;var m=this.count;if(k){if(!l&&--m<Qc)return ab(a,j,m,h)}else m++;var n=a&&a===this.ownerID,o=hb(j,h,l,n);return n?(this.count=m,this.nodes=o,this):new Pa(a,m,o)},Qa.prototype.get=function(a,b,c,d){for(var e=this.entries,f=0,g=e.length;f<g;f++)if(X(c,e[f][0]))return e[f][1];return d},Qa.prototype.update=function(a,b,d,f,g,h,i){void 0===d&&(d=ba(f));var j=g===lc;if(d!==this.keyHash)return j?this:(c(i),c(h),$a(this,a,b,d,[f,g]));for(var k=this.entries,l=0,m=k.length;l<m&&!X(f,k[l][0]);l++);var n=l<m;if(n?k[l][1]===g:j)return this;if(c(i),(j||!n)&&c(h),j&&2===m)return new Ra(a,this.keyHash,k[1^l]);var o=a&&a===this.ownerID,p=o?k:e(k);return n?j?l===m-1?p.pop():p[l]=p.pop():p[l]=[f,g]:p.push([f,g]),o?(this.entries=p,this):new Qa(a,this.keyHash,p)},Ra.prototype.get=function(a,b,c,d){return X(c,this.entry[0])?this.entry[1]:d},Ra.prototype.update=function(a,b,d,e,f,g,h){var i=f===lc,j=X(e,this.entry[0]);return(j?f===this.entry[1]:i)?this:(c(h),i?void c(g):j?a&&a===this.ownerID?(this.entry[1]=f,this):new Ra(a,this.keyHash,[e,f]):(c(g),$a(this,a,b,ba(e),[e,f])))},Na.prototype.iterate=Qa.prototype.iterate=function(a,b){for(var c=this.entries,d=0,e=c.length-1;d<=e;d++)if(a(c[b?e-d:d])===!1)return!1},Oa.prototype.iterate=Pa.prototype.iterate=function(a,b){for(var c=this.nodes,d=0,e=c.length-1;d<=e;d++){var f=c[b?e-d:d];if(f&&f.iterate(a,b)===!1)return!1}},Ra.prototype.iterate=function(a,b){return a(this.entry)},a(Sa,v),Sa.prototype.next=function(){for(var a=this._type,b=this._stack;b;){var c,d=b.node,e=b.index++;if(d.entry){if(0===e)return Ta(a,d.entry)}else if(d.entries){if(c=d.entries.length-1,e<=c)return Ta(a,d.entries[this._reverse?c-e:e])}else if(c=d.nodes.length-1,e<=c){var f=d.nodes[this._reverse?c-e:e];if(f){if(f.entry)return Ta(a,f.entry);b=this._stack=Ua(f,b)}continue}b=this._stack=this._stack.__prev}return x()};var Nc,Oc=jc/4,Pc=jc/2,Qc=jc/4;a(kb,V),kb.of=function(){return this(arguments)},kb.prototype.toString=function(){return this.__toString("List [","]")},kb.prototype.get=function(a,b){if((a=g(this,a))<0||a>=this.size)return b;a+=this._origin;var c=tb(this,a);return c&&c.array[a&kc]},kb.prototype.set=function(a,b){return qb(this,a,b)},kb.prototype.remove=function(a){return this.has(a)?0===a?this.shift():a===this.size-1?this.pop():this.splice(a,1):this},kb.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=ic,this._root=this._tail=null,this.__hash=void 0,this.__altered=!0,this):pb()},kb.prototype.push=function(){var a=arguments,b=this.size;return this.withMutations(function(c){ub(c,0,b+a.length);for(var d=0;d<a.length;d++)c.set(b+d,a[d])})},kb.prototype.pop=function(){return ub(this,0,-1)},kb.prototype.unshift=function(){var a=arguments;return this.withMutations(function(b){ub(b,-a.length);for(var c=0;c<a.length;c++)b.set(c,a[c])})},kb.prototype.shift=function(){return ub(this,1)},kb.prototype.merge=function(){return vb(this,void 0,arguments)},kb.prototype.mergeWith=function(a){return vb(this,a,gc.call(arguments,1))},kb.prototype.mergeDeep=function(){return vb(this,db(void 0),arguments)},kb.prototype.mergeDeepWith=function(a){var b=gc.call(arguments,1);return vb(this,db(a),b)},kb.prototype.setSize=function(a){return ub(this,0,a)},kb.prototype.slice=function(a,b){var c=this.size;return i(a,b,c)?this:ub(this,j(a,c),k(b,c))},kb.prototype.__iterator=function(a,b){var c=0,d=nb(this,b);return new v(function(){var b=d();return b===Uc?x():w(a,c++,b)})},kb.prototype.__iterate=function(a,b){for(var c,d=0,e=nb(this,b);(c=e())!==Uc&&a(c,d++,this)!==!1;);return d},kb.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?ob(this._origin,this._capacity,this._level,this._root,this._tail,a,this.__hash):(this.__ownerID=a,this)},kb.isList=lb;var Rc="@@__IMMUTABLE_LIST__@@",Sc=kb.prototype;Sc[Rc]=!0,Sc[hc]=Sc.remove,Sc.setIn=Mc.setIn,Sc.deleteIn=Sc.removeIn=Mc.removeIn,Sc.update=Mc.update,Sc.updateIn=Mc.updateIn,Sc.mergeIn=Mc.mergeIn,Sc.mergeDeepIn=Mc.mergeDeepIn,Sc.withMutations=Mc.withMutations,Sc.asMutable=Mc.asMutable,Sc.asImmutable=Mc.asImmutable,Sc.wasAltered=Mc.wasAltered,mb.prototype.removeBefore=function(a,b,c){if(c===b?1<<b:0===this.array.length)return this;var d=c>>>b&kc;if(d>=this.array.length)return new mb([],a);var e,f=0===d;if(b>0){var g=this.array[d];if((e=g&&g.removeBefore(a,b-ic,c))===g&&f)return this}if(f&&!e)return this;var h=sb(this,a);if(!f)for(var i=0;i<d;i++)h.array[i]=void 0;return e&&(h.array[d]=e),h},mb.prototype.removeAfter=function(a,b,c){if(c===b?1<<b:0===this.array.length)return this;var d=c-1>>>b&kc;if(d>=this.array.length)return this;var e,f=d===this.array.length-1;if(b>0){var g=this.array[d];if((e=g&&g.removeAfter(a,b-ic,c))===g&&f)return this}if(f&&!e)return this;var h=sb(this,a);return f||h.array.pop(),e&&(h.array[d]=e),h};var Tc,Uc={};a(xb,La),xb.of=function(){return this(arguments)},xb.prototype.toString=function(){return this.__toString("OrderedMap {","}")},xb.prototype.get=function(a,b){var c=this._map.get(a);return void 0!==c?this._list.get(c)[1]:b},xb.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this):Ab()},xb.prototype.set=function(a,b){return Bb(this,a,b)},xb.prototype.remove=function(a){return Bb(this,a,lc)},xb.prototype.wasAltered=function(){return this._map.wasAltered()||this._list.wasAltered()},xb.prototype.__iterate=function(a,b){var c=this;return this._list.__iterate(function(b){return b&&a(b[1],b[0],c)},b)},xb.prototype.__iterator=function(a,b){return this._list.fromEntrySeq().__iterator(a,b)},xb.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a),c=this._list.__ensureOwner(a);return a?zb(b,c,a,this.__hash):(this.__ownerID=a,this._map=b,this._list=c,this)},xb.isOrderedMap=yb,xb.prototype[rc]=!0,xb.prototype[hc]=xb.prototype.remove;var Vc;a(Cb,V),Cb.of=function(){return this(arguments)},Cb.prototype.toString=function(){return this.__toString("Stack [","]")},Cb.prototype.get=function(a,b){var c=this._head;for(a=g(this,a);c&&a--;)c=c.next;return c?c.value:b},Cb.prototype.peek=function(){return this._head&&this._head.value},Cb.prototype.push=function(){if(0===arguments.length)return this;for(var a=this.size+arguments.length,b=this._head,c=arguments.length-1;c>=0;c--)b={value:arguments[c],next:b};return this.__ownerID?(this.size=a,this._head=b,this.__hash=void 0,this.__altered=!0,this):Eb(a,b)},Cb.prototype.pushAll=function(a){if(a=o(a),0===a.size)return this;ha(a.size);var b=this.size,c=this._head;return a.reverse().forEach(function(a){b++,c={value:a,next:c}}),this.__ownerID?(this.size=b,this._head=c,this.__hash=void 0,this.__altered=!0,this):Eb(b,c)},Cb.prototype.pop=function(){return this.slice(1)},Cb.prototype.unshift=function(){return this.push.apply(this,arguments)},Cb.prototype.unshiftAll=function(a){return this.pushAll(a)},Cb.prototype.shift=function(){return this.pop.apply(this,arguments)},Cb.prototype.clear=function(){return 0===this.size?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):Fb()},Cb.prototype.slice=function(a,b){if(i(a,b,this.size))return this;var c=j(a,this.size);if(k(b,this.size)!==this.size)return V.prototype.slice.call(this,a,b);for(var d=this.size-c,e=this._head;c--;)e=e.next;return this.__ownerID?(this.size=d,this._head=e,this.__hash=void 0,this.__altered=!0,this):Eb(d,e)},Cb.prototype.__ensureOwner=function(a){return a===this.__ownerID?this:a?Eb(this.size,this._head,a,this.__hash):(this.__ownerID=a,this.__altered=!1,this)},Cb.prototype.__iterate=function(a,b){if(b)return this.reverse().__iterate(a);for(var c=0,d=this._head;d&&a(d.value,c++,this)!==!1;)d=d.next;return c},Cb.prototype.__iterator=function(a,b){if(b)return this.reverse().__iterator(a);var c=0,d=this._head;return new v(function(){if(d){var b=d.value;return d=d.next,w(a,c++,b)}return x()})},Cb.isStack=Db;var Wc="@@__IMMUTABLE_STACK__@@",Xc=Cb.prototype;Xc[Wc]=!0,Xc.withMutations=Mc.withMutations,Xc.asMutable=Mc.asMutable,Xc.asImmutable=Mc.asImmutable,Xc.wasAltered=Mc.wasAltered;var Yc;a(Gb,W),Gb.of=function(){return this(arguments)},Gb.fromKeys=function(a){return this(n(a).keySeq())},Gb.prototype.toString=function(){return this.__toString("Set {","}")},Gb.prototype.has=function(a){return this._map.has(a)},Gb.prototype.add=function(a){return Ib(this,this._map.set(a,!0))},Gb.prototype.remove=function(a){return Ib(this,this._map.remove(a))},Gb.prototype.clear=function(){return Ib(this,this._map.clear())},Gb.prototype.union=function(){var a=gc.call(arguments,0);return a=a.filter(function(a){return 0!==a.size}),0===a.length?this:0!==this.size||this.__ownerID||1!==a.length?this.withMutations(function(b){for(var c=0;c<a.length;c++)p(a[c]).forEach(function(a){return b.add(a)})}):this.constructor(a[0])},Gb.prototype.intersect=function(){var a=gc.call(arguments,0);if(0===a.length)return this;a=a.map(function(a){return p(a)});var b=this;return this.withMutations(function(c){b.forEach(function(b){a.every(function(a){return a.includes(b)})||c.remove(b)})})},Gb.prototype.subtract=function(){var a=gc.call(arguments,0);if(0===a.length)return this;a=a.map(function(a){return p(a)});var b=this;return this.withMutations(function(c){b.forEach(function(b){a.some(function(a){return a.includes(b)})&&c.remove(b)})})},Gb.prototype.merge=function(){return this.union.apply(this,arguments)},Gb.prototype.mergeWith=function(a){var b=gc.call(arguments,1);return this.union.apply(this,b)},Gb.prototype.sort=function(a){return Lb(za(this,a))},Gb.prototype.sortBy=function(a,b){return Lb(za(this,b,a))},Gb.prototype.wasAltered=function(){return this._map.wasAltered()},Gb.prototype.__iterate=function(a,b){var c=this;return this._map.__iterate(function(b,d){return a(d,d,c)},b)},Gb.prototype.__iterator=function(a,b){return this._map.map(function(a,b){return b}).__iterator(a,b)},Gb.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map.__ensureOwner(a);return a?this.__make(b,a):(this.__ownerID=a,this._map=b,this)},Gb.isSet=Hb;var Zc="@@__IMMUTABLE_SET__@@",$c=Gb.prototype;$c[Zc]=!0,$c[hc]=$c.remove,$c.mergeDeep=$c.merge,$c.mergeDeepWith=$c.mergeWith,$c.withMutations=Mc.withMutations,$c.asMutable=Mc.asMutable,$c.asImmutable=Mc.asImmutable,$c.__empty=Kb,$c.__make=Jb;var _c;a(Lb,Gb),Lb.of=function(){return this(arguments)},Lb.fromKeys=function(a){return this(n(a).keySeq())},Lb.prototype.toString=function(){return this.__toString("OrderedSet {","}")},Lb.isOrderedSet=Mb;var ad=Lb.prototype;ad[rc]=!0,ad.__empty=Ob,ad.__make=Nb;var bd;a(Pb,U),Pb.prototype.toString=function(){return this.__toString(Rb(this)+" {","}")},Pb.prototype.has=function(a){return this._defaultValues.hasOwnProperty(a)},Pb.prototype.get=function(a,b){if(!this.has(a))return b;var c=this._defaultValues[a];return this._map?this._map.get(a,c):c},Pb.prototype.clear=function(){if(this.__ownerID)return this._map&&this._map.clear(),this;var a=this.constructor;return a._empty||(a._empty=Qb(this,Wa()))},Pb.prototype.set=function(a,b){if(!this.has(a))throw new Error('Cannot set unknown key "'+a+'" on '+Rb(this));var c=this._map&&this._map.set(a,b);return this.__ownerID||c===this._map?this:Qb(this,c)},Pb.prototype.remove=function(a){if(!this.has(a))return this;var b=this._map&&this._map.remove(a);return this.__ownerID||b===this._map?this:Qb(this,b)},Pb.prototype.wasAltered=function(){return this._map.wasAltered()},Pb.prototype.__iterator=function(a,b){var c=this;return n(this._defaultValues).map(function(a,b){return c.get(b)}).__iterator(a,b)},Pb.prototype.__iterate=function(a,b){var c=this;return n(this._defaultValues).map(function(a,b){return c.get(b)}).__iterate(a,b)},Pb.prototype.__ensureOwner=function(a){if(a===this.__ownerID)return this;var b=this._map&&this._map.__ensureOwner(a);return a?Qb(this,b,a):(this.__ownerID=a,this._map=b,this)};var cd=Pb.prototype;cd[hc]=cd.remove,cd.deleteIn=cd.removeIn=Mc.removeIn,cd.merge=Mc.merge,cd.mergeWith=Mc.mergeWith,cd.mergeIn=Mc.mergeIn,cd.mergeDeep=Mc.mergeDeep,cd.mergeDeepWith=Mc.mergeDeepWith,cd.mergeDeepIn=Mc.mergeDeepIn,cd.setIn=Mc.setIn,cd.update=Mc.update,cd.updateIn=Mc.updateIn,cd.withMutations=Mc.withMutations,cd.asMutable=Mc.asMutable,cd.asImmutable=Mc.asImmutable,a(Vb,F),Vb.prototype.toString=function(){return 0===this.size?"Range []":"Range [ "+this._start+"..."+this._end+(this._step>1?" by "+this._step:"")+" ]"},Vb.prototype.get=function(a,b){return this.has(a)?this._start+g(this,a)*this._step:b},Vb.prototype.includes=function(a){var b=(a-this._start)/this._step;return b>=0&&b<this.size&&b===Math.floor(b)},Vb.prototype.slice=function(a,b){return i(a,b,this.size)?this:(a=j(a,this.size),b=k(b,this.size),b<=a?new Vb(0,0):new Vb(this.get(a,this._end),this.get(b,this._end),this._step))},Vb.prototype.indexOf=function(a){var b=a-this._start;if(b%this._step==0){var c=b/this._step;if(c>=0&&c<this.size)return c}return-1},Vb.prototype.lastIndexOf=function(a){return this.indexOf(a)},Vb.prototype.__iterate=function(a,b){for(var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start,f=0;f<=c;f++){if(a(e,f,this)===!1)return f+1;e+=b?-d:d}return f},Vb.prototype.__iterator=function(a,b){var c=this.size-1,d=this._step,e=b?this._start+c*d:this._start,f=0;return new v(function(){var g=e;return e+=b?-d:d,f>c?x():w(a,f++,g)})},Vb.prototype.equals=function(a){return a instanceof Vb?this._start===a._start&&this._end===a._end&&this._step===a._step:Ub(this,a)};var dd;a(Wb,F),Wb.prototype.toString=function(){return 0===this.size?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},Wb.prototype.get=function(a,b){return this.has(a)?this._value:b},Wb.prototype.includes=function(a){return X(this._value,a)},Wb.prototype.slice=function(a,b){var c=this.size;return i(a,b,c)?this:new Wb(this._value,k(b,c)-j(a,c))},Wb.prototype.reverse=function(){return this},Wb.prototype.indexOf=function(a){return X(this._value,a)?0:-1},Wb.prototype.lastIndexOf=function(a){return X(this._value,a)?this.size:-1},Wb.prototype.__iterate=function(a,b){for(var c=0;c<this.size;c++)if(a(this._value,c,this)===!1)return c+1;return c},Wb.prototype.__iterator=function(a,b){var c=this,d=0;return new v(function(){return d<c.size?w(a,d++,c._value):x()})},Wb.prototype.equals=function(a){return a instanceof Wb?X(this._value,a._value):Ub(a)};var ed;m.Iterator=v,Xb(m,{toArray:function(){ha(this.size);var a=new Array(this.size||0);return this.valueSeq().__iterate(function(b,c){a[c]=b}),a},toIndexedSeq:function(){return new ja(this)},toJS:function(){return this.toSeq().map(function(a){return a&&"function"==typeof a.toJS?a.toJS():a}).__toJS()},toJSON:function(){return this.toSeq().map(function(a){return a&&"function"==typeof a.toJSON?a.toJSON():a}).__toJS()},toKeyedSeq:function(){return new ia(this,!0)},toMap:function(){return La(this.toKeyedSeq())},toObject:function(){ha(this.size);var a={};return this.__iterate(function(b,c){a[c]=b}),a},toOrderedMap:function(){return xb(this.toKeyedSeq())},toOrderedSet:function(){return Lb(r(this)?this.valueSeq():this)},toSet:function(){return Gb(r(this)?this.valueSeq():this)},toSetSeq:function(){return new ka(this)},toSeq:function(){return s(this)?this.toIndexedSeq():r(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return Cb(r(this)?this.valueSeq():this)},toList:function(){return kb(r(this)?this.valueSeq():this)},toString:function(){return"[Iterable]"},__toString:function(a,b){return 0===this.size?a+b:a+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+b},concat:function(){return Da(this,va(this,gc.call(arguments,0)))},contains:function(a){return this.includes(a)},includes:function(a){return this.some(function(b){return X(b,a)})},entries:function(){return this.__iterator(uc)},every:function(a,b){ha(this.size);var c=!0;return this.__iterate(function(d,e,f){if(!a.call(b,d,e,f))return c=!1,!1}),c},filter:function(a,b){return Da(this,pa(this,a,b,!0))},find:function(a,b,c){var d=this.findEntry(a,b);return d?d[1]:c},findEntry:function(a,b){var c;return this.__iterate(function(d,e,f){if(a.call(b,d,e,f))return c=[e,d],!1}),c},findLastEntry:function(a,b){return this.toSeq().reverse().findEntry(a,b)},forEach:function(a,b){return ha(this.size),this.__iterate(b?a.bind(b):a)},join:function(a){ha(this.size),a=void 0!==a?""+a:",";var b="",c=!0;return this.__iterate(function(d){c?c=!1:b+=a,b+=null!==d&&void 0!==d?d.toString():""}),b},keys:function(){return this.__iterator(sc)},map:function(a,b){return Da(this,na(this,a,b))},reduce:function(a,b,c){ha(this.size);var d,e;return arguments.length<2?e=!0:d=b,this.__iterate(function(b,f,g){e?(e=!1,d=b):d=a.call(c,d,b,f,g)}),d},reduceRight:function(a,b,c){var d=this.toKeyedSeq().reverse();return d.reduce.apply(d,arguments)},reverse:function(){return Da(this,oa(this,!0))},slice:function(a,b){return Da(this,sa(this,a,b,!0))},some:function(a,b){return!this.every($b(a),b)},sort:function(a){return Da(this,za(this,a))},values:function(){return this.__iterator(tc)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return void 0!==this.size?0===this.size:!this.some(function(){return!0})},count:function(a,b){return f(a?this.toSeq().filter(a,b):this)},countBy:function(a,b){return qa(this,a,b)},equals:function(a){return Ub(this,a)},entrySeq:function(){var a=this;if(a._cache)return new H(a._cache);var b=a.toSeq().map(Zb).toIndexedSeq();return b.fromEntrySeq=function(){return a.toSeq()},b},filterNot:function(a,b){return this.filter($b(a),b)},findLast:function(a,b,c){return this.toKeyedSeq().reverse().find(a,b,c)},first:function(){return this.find(h)},flatMap:function(a,b){return Da(this,xa(this,a,b))},flatten:function(a){return Da(this,wa(this,a,!0))},fromEntrySeq:function(){return new la(this)},get:function(a,b){return this.find(function(b,c){return X(c,a)},void 0,b)},getIn:function(a,b){for(var c,d=this,e=Ka(a);!(c=e.next()).done;){var f=c.value;if((d=d&&d.get?d.get(f,lc):lc)===lc)return b}return d},groupBy:function(a,b){return ra(this,a,b)},has:function(a){return this.get(a,lc)!==lc},hasIn:function(a){return this.getIn(a,lc)!==lc},isSubset:function(a){return a="function"==typeof a.includes?a:m(a),this.every(function(b){return a.includes(b)})},isSuperset:function(a){return a="function"==typeof a.isSubset?a:m(a),a.isSubset(this)},keySeq:function(){return this.toSeq().map(Yb).toIndexedSeq()},last:function(){return this.toSeq().reverse().first()},max:function(a){return Aa(this,a)},maxBy:function(a,b){return Aa(this,b,a)},min:function(a){return Aa(this,a?_b(a):cc)},minBy:function(a,b){return Aa(this,b?_b(b):cc,a)},rest:function(){return this.slice(1)},skip:function(a){return this.slice(Math.max(0,a))},skipLast:function(a){return Da(this,this.toSeq().reverse().skip(a).reverse())},skipWhile:function(a,b){return Da(this,ua(this,a,b,!0))},skipUntil:function(a,b){return this.skipWhile($b(a),b)},sortBy:function(a,b){return Da(this,za(this,b,a))},take:function(a){return this.slice(0,Math.max(0,a))},takeLast:function(a){return Da(this,this.toSeq().reverse().take(a).reverse())},takeWhile:function(a,b){return Da(this,ta(this,a,b))},takeUntil:function(a,b){return this.takeWhile($b(a),b)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=dc(this))}});var fd=m.prototype;fd[oc]=!0,fd[xc]=fd.values,fd.__toJS=fd.toArray,fd.__toStringMapper=ac,fd.inspect=fd.toSource=function(){return this.toString()},fd.chain=fd.flatMap,function(){try{Object.defineProperty(fd,"length",{get:function(){if(!m.noLengthWarning){var a;try{throw new Error}catch(b){a=b.stack}if(a.indexOf("_wrapObject")===-1)return console&&console.warn&&console.warn("iterable.length has been deprecated, use iterable.size or iterable.count(). This warning will become a silent error in a future version. "+a),this.size}}})}catch(a){}}(),Xb(n,{flip:function(){return Da(this,ma(this))},findKey:function(a,b){var c=this.findEntry(a,b);return c&&c[0]},findLastKey:function(a,b){return this.toSeq().reverse().findKey(a,b)},keyOf:function(a){return this.findKey(function(b){return X(b,a)})},lastKeyOf:function(a){return this.findLastKey(function(b){return X(b,a)})},mapEntries:function(a,b){var c=this,d=0;return Da(this,this.toSeq().map(function(e,f){return a.call(b,[f,e],d++,c)}).fromEntrySeq())},mapKeys:function(a,b){var c=this;return Da(this,this.toSeq().flip().map(function(d,e){return a.call(b,d,e,c)}).flip())}});var gd=n.prototype;return gd[pc]=!0,gd[xc]=fd.entries,gd.__toJS=fd.toObject,gd.__toStringMapper=function(a,b){return JSON.stringify(b)+": "+ac(a)},Xb(o,{toKeyedSeq:function(){return new ia(this,!1)},filter:function(a,b){return Da(this,pa(this,a,b,!1))},findIndex:function(a,b){var c=this.findEntry(a,b);return c?c[0]:-1},indexOf:function(a){var b=this.toKeyedSeq().keyOf(a);return void 0===b?-1:b},lastIndexOf:function(a){return this.toSeq().reverse().indexOf(a)},reverse:function(){return Da(this,oa(this,!1))},slice:function(a,b){return Da(this,sa(this,a,b,!1))},splice:function(a,b){var c=arguments.length;if(b=Math.max(0|b,0),0===c||2===c&&!b)return this;a=j(a,this.size);var d=this.slice(0,a);return Da(this,1===c?d:d.concat(e(arguments,2),this.slice(a+b)))},findLastIndex:function(a,b){var c=this.toKeyedSeq().findLastKey(a,b);return void 0===c?-1:c},first:function(){return this.get(0)},flatten:function(a){return Da(this,wa(this,a,!1))},get:function(a,b){return a=g(this,a),a<0||this.size===1/0||void 0!==this.size&&a>this.size?b:this.find(function(b,c){return c===a},void 0,b)},has:function(a){return(a=g(this,a))>=0&&(void 0!==this.size?this.size===1/0||a<this.size:this.indexOf(a)!==-1)},interpose:function(a){return Da(this,ya(this,a))},interleave:function(){var a=[this].concat(e(arguments)),b=Ca(this.toSeq(),F.of,a),c=b.flatten(!0);return b.size&&(c.size=b.size*a.length),Da(this,c)},last:function(){return this.get(-1)},skipWhile:function(a,b){return Da(this,ua(this,a,b,!1))},zip:function(){return Da(this,Ca(this,bc,[this].concat(e(arguments))))},zipWith:function(a){var b=e(arguments);return b[0]=this,Da(this,Ca(this,a,b))}}),o.prototype[qc]=!0,o.prototype[rc]=!0,Xb(p,{get:function(a,b){return this.has(a)?a:b},includes:function(a){return this.has(a)},keySeq:function(){return this.valueSeq()}}),p.prototype.has=fd.includes,Xb(E,n.prototype),Xb(F,o.prototype),Xb(G,p.prototype),Xb(U,n.prototype),Xb(V,o.prototype),Xb(W,p.prototype),{Iterable:m,Seq:D,Collection:T,Map:La,OrderedMap:xb,List:kb,Stack:Cb,Set:Gb,OrderedSet:Lb,Record:Pb,Range:Vb,Repeat:Wb,is:X,fromJS:Y}})},function(a,b,c){var d,e;d=[c(105),c(103)],void 0!==(e=function(a,b){"use strict";function c(b){return!!a.isCaretPositionNode(b)||""===b.parentNode.textContent.trim()}function d(b){function f(b){return!!(0===b.children.length&&a.isBlockElement(b)||1===b.children.length&&a.isSelectionMarkerNode(b.children[0]))||!a.isBlockElement(b)&&0===b.children.length&&c(b)}for(var g=b.firstElementChild;g;)a.isSelectionMarkerNode(g)||(f(g)&&""===g.textContent.trim()&&!e.includes(g.nodeName)?g.appendChild(document.createElement("br")):g.children.length>0&&d(g)),g=g.nextElementSibling}var e=b.Set.of("AREA","BASE","BR","COL","COMMAND","EMBED","HR","IMG","INPUT","KEYGEN","LINK","META","PARAM","SOURCE","TRACK","WBR");return function(){return function(a){a.registerHTMLFormatter("normalize",function(a){var b=document.createElement("div");return b.innerHTML=a,d(b),b.innerHTML})}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(106),c(107),c(103)],void 0!==(e=function(a,b,c){"use strict";function d(a){return b.includes(a.nodeName)}function e(b){return a.includes(b.nodeName)}function f(a){return!(a.children.length>1)&&((1!==a.children.length||""===a.textContent.trim())&&(0===a.children.length?""===a.textContent.trim():f(a.children[0])))}function g(a){return a.nodeType===Node.TEXT_NODE}function h(a){return g(a)&&""===a.data}function i(a){return a.nodeType===Node.DOCUMENT_FRAGMENT_NODE}function j(a,b){return a.compareDocumentPosition(b)&Node.DOCUMENT_POSITION_FOLLOWING}function k(a){return a.nodeType===Node.ELEMENT_NODE&&"scribe-marker"===a.className}function l(a){return a.nodeType===Node.ELEMENT_NODE&&"caret-position"===a.className}function m(a){var b=a.firstChild;return b&&"BR"!==b.nodeName?m(b):a}function n(a,b){return b.parentNode.insertBefore(a,b.nextSibling)}function o(a){return a.parentNode.removeChild(a)}function p(a,b,c){function d(a){return b===a}if(!d(a))for(var e=a.parentNode;e&&!d(e);){if(c(e))return e;e=e.parentNode}}function q(a){for(var b=c.List();a=a.nextSibling;)b=b.push(a);return b}function r(a,b){return a[0].parentNode.insertBefore(b,a[0]),a.forEach(function(a){b.appendChild(a)}),b}function s(a,b){for(;b.childNodes.length>0;)a.insertBefore(b.childNodes[0],b);a.removeChild(b)}function t(b){function d(a,b){return window.getComputedStyle(b).lineHeight===a.lineHeight}var e=c.List(b.querySelectorAll(a.map(function(a){return a+'[style*="line-height"]'}).join(",")));e=e.filter(d.bind(null,window.getComputedStyle(b)));var f=c.List();e.forEach(function(a){a.style.lineHeight=null,a.getAttribute("style")||a.removeAttribute("style"),"SPAN"===a.nodeName&&0===a.attributes.length&&(f=f.push(a))}),f.forEach(function(a){s(a.parentNode,a)})}return{isInlineElement:e,isBlockElement:d,isEmptyInlineElement:f,isText:g,isEmptyTextNode:h,isFragment:i,isBefore:j,isSelectionMarkerNode:k,isCaretPositionNode:l,firstDeepestChild:m,insertAfter:n,removeNode:o,getAncestor:p,nextSiblings:q,wrap:r,unwrap:s,removeChromeArtifacts:t}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(103)],void 0!==(e=function(a){return a.Set.of("B","BIG","I","SMALL","TT","ABBR","ACRONYM","CITE","CODE","DFN","EM","KBD","STRONG","SAMP","VAR","A","BDO","BR","IMG","MAP","OBJECT","Q","SCRIPT","SPAN","SUB","SUP","BUTTON","INPUT","LABEL","SELECT","TEXTAREA")}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(103)],void 0!==(e=function(a){return a.Set.of("ADDRESS","ARTICLE","ASIDE","AUDIO","BLOCKQUOTE","CANVAS","DD","DIV","FIELDSET","FIGCAPTION","FIGURE","FOOTER","FORM","H1","H2","H3","H4","H5","H6","HEADER","HGROUP","HR","LI","NOSCRIPT","OL","OUTPUT","P","PRE","SECTION","TABLE","TD","TH","TFOOT","UL","VIDEO")}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";function a(a){for(var b=document.createTreeWalker(a,NodeFilter.SHOW_ALL,null,!1);b.nextNode();)if(b.currentNode&&(~["br"].indexOf(b.currentNode.nodeName.toLowerCase())||b.currentNode.length>0))return!0;return!1}return function(){return function(b){b.el.addEventListener("keydown",function(c){if(13===c.keyCode){var d=new b.api.Selection,e=d.range;d.getContaining(function(a){return"LI"===a.nodeName||/^(H[1-6])$/.test(a.nodeName)})||(c.preventDefault(),b.transactionManager.run(function(){"BR"===b.el.lastChild.nodeName&&b.el.removeChild(b.el.lastChild);var c=document.createElement("br");e.insertNode(c),e.collapse(!1);var f=e.cloneRange();if(f.setEndAfter(b.el.lastChild,0),!a(f.cloneContents())){var g=document.createElement("br");e.insertNode(g)}var h=e.cloneRange();h.setStartAfter(c,0),h.setEndAfter(c,0),d.selection.removeAllRanges(),d.selection.addRange(h)}))}}.bind(this)),""===b.getHTML().trim()&&b.setContent("")}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[c(110),c(111)],void 0!==(e=function(a,b){"use strict";return{replaceNbspCharsFormatter:a,escapeHtmlCharactersFormatter:b}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=/(\s|&nbsp;)+/g;a.registerHTMLFormatter("export",function(a){return a.replace(b," ")})}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[c(112)],void 0!==(e=function(a){"use strict";return function(){return function(b){b.registerPlainTextFormatter(a)}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(86),c(113)],void 0!==(e=function(a,b){function c(c){return c=a(c),c&&e.test(c)?c.replace(d,b):c}var d=/[&<>"'`]/g,e=RegExp(d.source);return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return b[a]}var b={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(115),c(103)],void 0!==(e=function(a,b){"use strict";return function(){return function(c){var d=c.node;c.el.addEventListener("focus",function(){var a=new c.api.Selection;if(a.range){if(c.allowsBlockElements()&&a.range.startContainer===c.el){var b=d.firstDeepestChild(c.el),e=a.range;e.setStart(b,0),e.setEnd(b,0),a.selection.removeAllRanges(),a.selection.addRange(e)}}}.bind(c));var e=function(){if(!c._skipFormatters){var a=new c.api.Selection,b=a.range,d=function(){b&&a.placeMarkers(),c.setHTML(c._htmlFormatterFactory.format(c.getHTML())),a.selectMarkers()}.bind(c);c.transactionManager.run(d)}delete c._skipFormatters}.bind(c);a(c.el,e),c.allowsBlockElements()&&c.el.addEventListener("keydown",function(a){if(13===a.keyCode){var b=new c.api.Selection,d=b.range,e=b.getContaining(function(a){return/^(H[1-6])$/.test(a.nodeName)});if(e&&d.collapsed){var f=d.cloneRange();f.setEndAfter(e,0);""===f.cloneContents().firstChild.textContent&&(a.preventDefault(),c.transactionManager.run(function(){var a=document.createElement("p"),c=document.createElement("br");a.appendChild(c),e.parentNode.insertBefore(a,e.nextElementSibling),d.setStart(a,0),d.setEnd(a,0),b.selection.removeAllRanges(),b.selection.addRange(d)}))}}}),c.allowsBlockElements()&&c.el.addEventListener("keydown",function(a){if(13===a.keyCode||8===a.keyCode){var b=new c.api.Selection;if(b.range.collapsed){var d=b.getContaining(function(a){return"LI"===a.nodeName});if(d&&""===d.textContent.trim()){a.preventDefault();var e=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName});c.getCommand("OL"===e.nodeName?"insertOrderedList":"insertUnorderedList").execute()}}}}),c.el.addEventListener("paste",function(a){if(a.clipboardData)a.preventDefault(),b.List(a.clipboardData.types).includes("text/html")?c.insertHTML(a.clipboardData.getData("text/html")):c.insertPlainText(a.clipboardData.getData("text/plain"));else{var d=new c.api.Selection;d.placeMarkers();var e=document.createElement("div");document.body.appendChild(e),e.setAttribute("contenteditable",!0),e.focus(),setTimeout(function(){var a=e.innerHTML;e.parentNode.removeChild(e),d.selectMarkers(),c.el.focus(),c.insertHTML(a)},1)}})}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(105)],void 0!==(e=function(a){function b(b){return!a.isEmptyTextNode(b)&&!a.isSelectionMarkerNode(b)}function c(a){return a.some(function(a){return Array.prototype.some.call(a.addedNodes,b)||Array.prototype.some.call(a.removedNodes,b)})}function d(a,b){var d=!1,f=new e(function(a){if(!d&&c(a)){d=!0;try{b()}catch(a){throw a}finally{setTimeout(function(){d=!1},0)}}});return f.observe(a,{childList:!0,subtree:!0}),f}var e=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;return d}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(117),c(118),c(119),c(120),c(121),c(122),c(123)],void 0!==(e=function(a,b,c,d,e,f,g){"use strict";return{commands:{bold:a,indent:b,insertHTML:c,insertList:d,outdent:e,createLink:f},events:g}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("bold");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return/^(H[1-6])$/.test(a.nodeName)});return a.api.CommandPatch.prototype.queryEnabled.apply(this,arguments)&&!c},a.commandPatches.bold=b}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("indent");b.execute=function(b){a.transactionManager.run(function(){var c=new a.api.Selection,d=c.range;if("P"===d.commonAncestorContainer.nodeName&&"<br>"===d.commonAncestorContainer.innerHTML){var e=document.createTextNode("\ufeff");d.insertNode(e),d.setStart(e,0),d.setEnd(e,0),c.selection.removeAllRanges(),c.selection.addRange(d)}a.api.CommandPatch.prototype.execute.call(this,b),c=new a.api.Selection;var f=c.getContaining(function(a){return"BLOCKQUOTE"===a.nodeName});f&&f.removeAttribute("style")}.bind(this))},a.commandPatches.indent=b}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("insertHTML"),c=a.node;b.execute=function(b){a.transactionManager.run(function(){a.api.CommandPatch.prototype.execute.call(this,b),c.removeChromeArtifacts(a.el)}.bind(this))},a.commandPatches.insertHTML=b}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){"use strict";return function(){return function(a){var b=a.node,c=function(b){a.api.CommandPatch.call(this,b)};c.prototype=Object.create(a.api.CommandPatch.prototype),c.prototype.constructor=c,c.prototype.execute=function(c){a.transactionManager.run(function(){if(a.api.CommandPatch.prototype.execute.call(this,c),this.queryState()){var d=new a.api.Selection,e=d.getContaining(function(a){return"OL"===a.nodeName||"UL"===a.nodeName});if(e.nextElementSibling&&0===e.nextElementSibling.childNodes.length&&b.removeNode(e.nextElementSibling),e){var f=e.parentNode;f&&/^(H[1-6]|P)$/.test(f.nodeName)&&(d.placeMarkers(),b.insertAfter(e,f),d.selectMarkers(),2===f.childNodes.length&&b.isEmptyTextNode(f.firstChild)&&b.removeNode(f),0===f.childNodes.length&&b.removeNode(f))}b.removeChromeArtifacts(e)}}.bind(this))},c.prototype.queryState=function(){try{return a.api.CommandPatch.prototype.queryState.apply(this,arguments)}catch(a){if("NS_ERROR_UNEXPECTED"==a.name)return!1;throw a}},a.commandPatches.insertOrderedList=new c("insertOrderedList"),a.commandPatches.insertUnorderedList=new c("insertUnorderedList")}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=a.node,c=new a.api.CommandPatch("outdent");c.execute=function(){a.transactionManager.run(function(){var c=new a.api.Selection,d=c.range,e=c.getContaining(function(a){return"BLOCKQUOTE"===a.nodeName});if("BLOCKQUOTE"===d.commonAncestorContainer.nodeName){c.placeMarkers(),c.selectMarkers(!0);var f=d.cloneContents();e.parentNode.insertBefore(f,e),d.deleteContents(),c.selectMarkers(),""===e.textContent&&e.parentNode.removeChild(e)}else{var g=c.getContaining(function(a){return"P"===a.nodeName});if(g){var h=b.nextSiblings(g);if(h.size){for(var i=document.createElement(e.nodeName);h.size;)i.appendChild(h.first()),h=h.shift();e.parentNode.insertBefore(i,e.nextElementSibling)}c.placeMarkers(),e.parentNode.insertBefore(g,e.nextElementSibling),c.selectMarkers(),""===e.innerHTML&&e.parentNode.removeChild(e)}else a.api.CommandPatch.prototype.execute.call(this)}}.bind(this))},a.commandPatches.outdent=c}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.CommandPatch("createLink");a.commandPatches.createLink=b,b.execute=function(b){var c=new a.api.Selection;if(c.range.collapsed){var d=document.createElement("a");d.setAttribute("href",b),d.textContent=b,c.range.insertNode(d);var e=document.createRange();e.setStartBefore(d),e.setEndAfter(d),c.selection.removeAllRanges(),c.selection.addRange(e)}else a.api.CommandPatch.prototype.execute.call(this,b)}}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){"use strict";return function(){return function(a){var b=a.node;a.allowsBlockElements()&&a.el.addEventListener("keyup",function(c){if(8===c.keyCode||46===c.keyCode){var d=new a.api.Selection,e=d.getContaining(function(a){return"P"===a.nodeName});e&&a.transactionManager.run(function(){d.placeMarkers(),b.removeChromeArtifacts(e),d.selectMarkers()},!0)}})}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(125),c(126),c(127),c(128)],void 0!==(e=function(a,b,c,d){"use strict";return function(e){this.CommandPatch=a(e),this.Command=b(e),this.Selection=c(e),this.SimpleCommand=d(this,e)}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(a){function b(a){this.commandName=a}return b.prototype.execute=function(b){a.transactionManager.run(function(){document.execCommand(this.commandName,!1,b||null)}.bind(this))},b.prototype.queryState=function(){return document.queryCommandState(this.commandName)},b.prototype.queryEnabled=function(){return document.queryCommandEnabled(this.commandName)},b}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(a){function b(b){this.commandName=b,this.patch=a.commandPatches[this.commandName]}return b.prototype.execute=function(b){this.patch?this.patch.execute(b):a.transactionManager.run(function(){document.execCommand(this.commandName,!1,b||null)}.bind(this))},b.prototype.queryState=function(){return this.patch?this.patch.queryState():document.queryCommandState(this.commandName)},b.prototype.queryEnabled=function(){return this.patch?this.patch.queryEnabled():document.queryCommandEnabled(this.commandName)},b}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(a){function b(){var a=document.createElement("em");return a.style.display="none",a.classList.add("scribe-marker"),a}function c(a,b){a.insertNode(b),b.nextSibling&&f.isEmptyTextNode(b.nextSibling)&&f.removeNode(b.nextSibling),b.previousSibling&&f.isEmptyTextNode(b.previousSibling)&&f.removeNode(b.previousSibling)}function d(){if(this.selection=e.getSelection(),this.selection.rangeCount&&this.selection.anchorNode){var a=this.selection.anchorNode,b=this.selection.anchorOffset,c=this.selection.focusNode,d=this.selection.focusOffset;if(a===c&&d<b){var g=b;b=d,d=g}else if(f.isBefore(c,a)){var h=a,i=b;a=c,b=d,c=h,d=i}this.range=document.createRange(),this.range.setStart(a,b),this.range.setEnd(c,d)}}var e=a.el.ownerDocument,f=a.node;if(e.compareDocumentPosition(a.el)&Node.DOCUMENT_POSITION_DISCONNECTED){for(var g=a.el.parentNode;g&&f.isFragment(g);)g=g.parentNode;g&&g.getSelection&&(e=g)}return d.prototype.getContaining=function(b){if(this.range){var c=this.range.commonAncestorContainer;return c&&a.el===c||!b(c)?f.getAncestor(c,a.el,b):c}},d.prototype.placeMarkers=function(){var d=this.range;if(d&&document.contains(a.el)&&a.el.contains(d.startContainer)&&a.el.contains(d.endContainer)){if(c(d.cloneRange(),b()),!d.collapsed){var e=d.cloneRange();e.collapse(!1),c(e,b())}this.selection.removeAllRanges(),this.selection.addRange(d)}},d.prototype.getMarkers=function(){return a.el.querySelectorAll("em.scribe-marker")},d.prototype.removeMarkers=function(){Array.prototype.forEach.call(this.getMarkers(),function(a){f.removeNode(a)})},d.prototype.selectMarkers=function(a){var b=this.getMarkers();if(b.length){var c=document.createRange();c.setStartBefore(b[0]),c.setEndAfter(b.length>=2?b[1]:b[0]),a||this.removeMarkers(),this.selection.removeAllRanges(),this.selection.addRange(c)}},d.prototype.isCaretOnNewLine=function(){var a=this.getContaining(function(a){return"P"===a.nodeName});return!!a&&f.isEmptyInlineElement(a)},d}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(a,b){function c(a,c){b.api.Command.call(this,a),this._nodeName=c}return c.prototype=Object.create(a.Command.prototype),c.prototype.constructor=c,c.prototype.queryState=function(){var a=new b.api.Selection;return b.api.Command.prototype.queryState.call(this)&&!!a.getContaining(function(a){return a.nodeName===this._nodeName}.bind(this))},c}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[c(130),c(131),c(132),c(133),c(134),c(135),c(136)],void 0!==(e=function(a,b,c,d,e,f,g){"use strict";return{indent:a,insertList:b,outdent:c,redo:d,subscript:e,superscript:f,undo:g}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("indent");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName});return a.api.Command.prototype.queryEnabled.call(this)&&a.allowsBlockElements()&&!c},a.commands.indent=b}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[c(103)],void 0!==(e=function(a){"use strict";return function(){return function(b){var c=b.node,d=function(a){b.api.Command.call(this,a)};d.prototype=Object.create(b.api.Command.prototype),d.prototype.constructor=d,d.prototype.execute=function(d){function e(a){if(a.size){for(var b=document.createElement(h.nodeName);a.size;)b.appendChild(a.first()),a=a.shift();h.parentNode.insertBefore(b,h.nextElementSibling)}}if(this.queryState()){var f=new b.api.Selection,g=f.range,h=f.getContaining(function(a){return"OL"===a.nodeName||"UL"===a.nodeName}),i=f.getContaining(function(a){return"LI"===a.nodeName});b.transactionManager.run(function(){if(i){e(c.nextSiblings(i)),f.placeMarkers();var b=document.createElement("p");b.innerHTML=i.innerHTML,h.parentNode.insertBefore(b,h.nextElementSibling),i.parentNode.removeChild(i)}else{var d=a.List(h.querySelectorAll("li")).filter(function(a){return g.intersectsNode(a)}),j=d.last();e(c.nextSiblings(j)),f.placeMarkers();var k=document.createDocumentFragment();d.forEach(function(a){var b=document.createElement("p");b.innerHTML=a.innerHTML,k.appendChild(b)}),h.parentNode.insertBefore(k,h.nextElementSibling),d.forEach(function(a){a.parentNode.removeChild(a)})}0===h.childNodes.length&&h.parentNode.removeChild(h),f.selectMarkers()}.bind(this))}else b.api.Command.prototype.execute.call(this,d)},d.prototype.queryEnabled=function(){return b.api.Command.prototype.queryEnabled.call(this)&&b.allowsBlockElements()},b.commands.insertOrderedList=new d("insertOrderedList"),b.commands.insertUnorderedList=new d("insertUnorderedList")}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("outdent");b.queryEnabled=function(){var b=new a.api.Selection,c=b.getContaining(function(a){return"UL"===a.nodeName||"OL"===a.nodeName});return a.api.Command.prototype.queryEnabled.call(this)&&a.allowsBlockElements()&&!c},a.commands.outdent=b}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("redo");b.execute=function(){a.undoManager.redo()},b.queryEnabled=function(){return a.undoManager.position>0},a.commands.redo=b,a.options.undo.enabled&&a.el.addEventListener("keydown",function(a){a.shiftKey&&(a.metaKey||a.ctrlKey)&&90===a.keyCode&&(a.preventDefault(),b.execute())})}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("subscript");a.commands.subscript=b}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("superscript");a.commands.superscript=b}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("undo");b.execute=function(){a.undoManager.undo()},b.queryEnabled=function(){return a.undoManager.position<a.undoManager.length},a.commands.undo=b,a.options.undo.enabled&&a.el.addEventListener("keydown",function(a){a.shiftKey||!a.metaKey&&!a.ctrlKey||90!==a.keyCode||(a.preventDefault(),b.execute())})}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[c(103)],void 0!==(e=function(a){"use strict";function b(b,c){this._stack=a.List(),this._limit=b,this._fireEvent="undefined"!=typeof CustomEvent&&c&&c.dispatchEvent,this._ush=c,this.position=0,this.length=0}return b.prototype.transact=function(b,c){if(arguments.length<2)throw new TypeError("Not enough arguments to UndoManager.transact.");b.execute(),this.position>0&&this.clearRedo();var d;c&&this.length?(d=this._stack.first().push(b),this._stack=this._stack.shift().unshift(d)):(d=a.List.of(b),this._stack=this._stack.unshift(d),this.length++,this._limit&&this.length>this._limit&&this.clearUndo(this._limit)),this._dispatch("DOMTransaction",d)},b.prototype.undo=function(){if(!(this.position>=this.length)){for(var a=this._stack.get(this.position),b=a.size;b--;)a.get(b).undo();this.position++,this._dispatch("undo",a)}},b.prototype.redo=function(){if(0!==this.position){this.position--;for(var a=this._stack.get(this.position),b=0;b<a.size;b++)a.get(b).redo();this._dispatch("redo",a)}},b.prototype.item=function(a){return a>=0&&a<this.length?this._stack.get(a).toArray():null},b.prototype.clearUndo=function(a){this._stack=this._stack.take(void 0!==a?a:this.position),this.length=this._stack.size},b.prototype.clearRedo=function(){this._stack=this._stack.skip(this.position),this.length=this._stack.size,this.position=0},b.prototype._dispatch=function(a,b){this._fireEvent&&this._ush.dispatchEvent(new CustomEvent(a,{detail:{transactions:b.toArray()},bubbles:!0,cancelable:!1}))},b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(103)],void 0!==(e=function(a){"use strict";function b(){this._listeners={}}return b.prototype.on=function(b,c){var d=this._listeners[b]||a.Set();this._listeners[b]=d.add(c)},b.prototype.off=function(b,c){var d=this._listeners[b]||a.Set();this._listeners[b]=c?d.delete(c):d.clear()},b.prototype.trigger=function(b,c){for(var d=b.split(":");d.length;){var e=d.join(":");(this._listeners[e]||a.Set()).forEach(function(a){a.apply(null,c)}),d.splice(d.length-1,1)}},b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(140)],void 0!==(e=function(a){function b(b){var c=b||{};return c.defaultPlugins&&(c.defaultPlugins=c.defaultPlugins.filter(e(h.defaultPlugins))),c.defaultFormatters&&(c.defaultFormatters=c.defaultFormatters.filter(e(h.defaultFormatters))),Object.freeze(a(c,h))}function c(a){return function(b,c){return b===a?-1:c===a?1:0}}function d(a){return function(b){return(a?f:g).indexOf(b)!==-1}}function e(a){return function(b){return a.indexOf(b)!==-1}}var f=["setRootPElement","enforcePElements","ensureSelectableContainers"],g=["inlineElementsMode"],h={allowBlockElements:!0,debug:!1,undo:{manager:!1,enabled:!0,limit:100,interval:250},defaultCommandPatches:["bold","indent","insertHTML","insertList","outdent","createLink"],defaultPlugins:f.concat(g),defaultFormatters:["escapeHtmlCharactersFormatter","replaceNbspCharsFormatter"]};return{defaultOptions:h,checkOptions:b,sortByPlugin:c,filterByBlockLevelMode:d,filterByPluginExists:e}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(141),c(79),c(142)],void 0!==(e=function(a,b,c){function d(d){if(null==d)return d;var f=a(arguments);return f.push(c),b.apply(e,f)}var e;return d}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a,b){return void 0===a?b:a}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){a.registerPlainTextFormatter(function(a){return a.replace(/\n([ \t]*\n)+/g,"</p><p>").replace(/\n/g,"<br>")})}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d;void 0!==(d=function(){"use strict";return function(){return function(a){var b=new a.api.Command("createLink");b.nodeName="A",b.execute=function(){var b=new a.api.Selection,c=b.range,d=b.getContaining(function(a){return a.nodeName===this.nodeName}.bind(this)),e=d?d.href:"",f=window.prompt("Enter a link.",e);if(d&&(c.selectNode(d),b.selection.removeAllRanges(),b.selection.addRange(c)),f){var g=/^https?\:\/\//,h=/^mailto\:/;if(!g.test(f)&&!h.test(f))if(/@/.test(f)){var i=window.confirm("The URL you entered appears to be an email address. Do you want to add the required mailto: prefix?");i&&(f="mailto:"+f)}else{var j=window.confirm("The URL you entered appears to be a link. Do you want to add the required http:// prefix?");j&&(f="http://"+f)}a.api.SimpleCommand.prototype.execute.call(this,f)}},b.queryState=function(){return!!(new a.api.Selection).getContaining(function(a){return a.nodeName===this.nodeName}.bind(this))},a.commands.linkPrompt=b}}}.call(b,c,b,a))&&(a.exports=d)},function(a,b,c){var d,e;d=[c(146),c(147),c(179)],void 0!==(e=function(a,b,c){"use strict";return function(d){var e=b(c(d),{tags:{em:{class:"scribe-marker"},br:{}}});return function(b){var c=new a(e);b.registerHTMLFormatter("sanitize",c.clean.bind(c))}}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;!function(f,g){d=g,void 0!==(e="function"==typeof d?d.call(b,c,b,a):d)&&(a.exports=e)}(0,function(){function a(a){this.config=a}function b(a){return e.indexOf(a.nodeName)!==-1}function c(a){return f.indexOf(a.nodeName)!==-1}function d(a){return document.createTreeWalker(a,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT,null,!1)}var e=["P","LI","TD","TH","DIV","H1","H2","H3","H4","H5","H6","PRE"],f=["A","B","STRONG","I","EM","SUB","SUP","U","STRIKE"];return a.prototype.clean=function(a){var b=document.createElement("div");return b.innerHTML=a,this._sanitize(b),b.innerHTML},a.prototype._sanitize=function(a){var e=d(a),f=e.firstChild();if(f)do{var g=f.nodeName.toLowerCase(),h=this.config.tags[g];if(!f._sanitized)if(f.nodeType!==Node.TEXT_NODE){if(f.nodeType===Node.COMMENT_NODE){a.removeChild(f),this._sanitize(a);break}var i,j=c(f);j&&(i=Array.prototype.some.call(f.childNodes,b));var k=j&&i,l=!!a.parentNode,m=b(a)&&b(f)&&l;if(!this.config.tags[g]||k||!this.config.keepNestedBlockElements&&m){if("SCRIPT"!==f.nodeName&&"STYLE"!==f.nodeName)for(;f.childNodes.length>0;)a.insertBefore(f.childNodes[0],f);a.removeChild(f),this._sanitize(a);break}for(var n=0;n<f.attributes.length;n+=1){var o=f.attributes[n],p=o.name.toLowerCase(),q=h[p]||h===!0,r=!q,s=q!==!0&&o.value!==q;(r||s)&&(f.removeAttribute(o.name),n-=1)}this._sanitize(f),f._sanitized=!0}else if(""===f.data.trim()&&(f.previousElementSibling&&b(f.previousElementSibling)||f.nextElementSibling&&b(f.nextElementSibling))){a.removeChild(f),this._sanitize(a);break}}while(f=e.nextSibling())},a})},function(a,b,c){var d,e;d=[c(148),c(175)],void 0!==(e=function(a,b){return b(a)}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(149),c(150),c(167),c(162),c(155),c(153),c(159),c(172)],void 0!==(e=function(a,b,c,d,e,f,g,h){function i(k,l,m,n,o){if(!f(k))return k;var p=e(l.length)&&(d(l)||h(l));return(p?a:b)(l,function(a,b,d){if(g(a))return n||(n=[]),o||(o=[]),c(k,d,b,i,m,n,o);var e=k[b],f=m?m(e,a,b,k,d):j,h=void 0===f;h&&(f=a),!p&&void 0===f||!h&&(f===f?f===e:e!==e)||(k[b]=f)}),k}var j;return i}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a,b){for(var c=-1,d=a.length;++c<d&&b(a[c],c,a)!==!1;);return a}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(151),c(154)],void 0!==(e=function(a,b){function c(c,d){return a(c,d,b)}return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(152)],void 0!==(e=function(a){function b(b,c,d){for(var e=-1,f=a(b),g=d(b),h=g.length;++e<h;){var i=g[e];if(c(f[i],i,f)===!1)break}return b}return b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(153)],void 0!==(e=function(a){function b(b){return a(b)?b:Object(b)}return b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){var b=typeof a;return"function"==b||a&&"object"==b||!1}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(155),c(156),c(153),c(160)],void 0!==(e=function(a,b,c,d){var e=b(e=Object.keys)&&e;return e?function(b){if(b)var f=b.constructor,g=b.length;return"function"==typeof f&&f.prototype===b||"function"!=typeof b&&g&&a(g)?d(b):c(b)?e(b):[]}:d}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return"number"==typeof a&&a>-1&&a%1==0&&a<=b}var b=Math.pow(2,53)-1;return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(157),c(159)],void 0!==(e=function(a,b){function c(a){return null!=a&&(h.call(a)==d?i.test(g.call(a)):b(a)&&e.test(a)||!1)}var d="[object Function]",e=/^\[object .+?Constructor\]$/,f=Object.prototype,g=Function.prototype.toString,h=f.toString,i=RegExp("^"+a(h).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(158)],void 0!==(e=function(a){function b(b){return b=a(b),b&&d.test(b)?b.replace(c,"\\$&"):b}var c=/[.*+?^${}()|[\]\/\\]/g,d=RegExp(c.source);return b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return"string"==typeof a?a:null==a?"":a+""}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return a&&"object"==typeof a||!1}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(161),c(162),c(163),c(155),c(164),c(165)],void 0!==(e=function(a,b,c,d,e,f){function g(g){for(var h=e(g),j=h.length,k=j&&g.length,l=k&&d(k)&&(b(g)||f.nonEnumArgs&&a(g)),m=-1,n=[];++m<j;){var o=h[m];(l&&c(o,k)||i.call(g,o))&&n.push(o)}return n}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(155),c(159)],void 0!==(e=function(a,b){function c(c){return a(b(c)?c.length:d)&&g.call(c)==e||!1}var d,e="[object Arguments]",f=Object.prototype,g=f.toString;return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(155),c(156),c(159)],void 0!==(e=function(a,b,c){var d=Object.prototype,e=d.toString,f=b(f=Array.isArray)&&f;return f||function(b){return c(b)&&a(b.length)&&"[object Array]"==e.call(b)||!1}}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a,c){return a=+a,c=null==c?b:c,a>-1&&a%1==0&&a<c}var b=Math.pow(2,53)-1;return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(161),c(162),c(163),c(155),c(153),c(165)],void 0!==(e=function(a,b,c,d,e,f){function g(g){if(null==g)return[];e(g)||(g=Object(g));var h=g.length;h=h&&d(h)&&(b(g)||f.nonEnumArgs&&a(g))&&h||0;for(var j=g.constructor,k=-1,l="function"==typeof j&&j.prototype===g,m=Array(h),n=h>0;++k<h;)m[k]=k+"";for(var o in g)n&&c(o,h)||"constructor"==o&&(l||!i.call(g,o))||m.push(o);return m}var h=Object.prototype,i=h.hasOwnProperty;return g}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(156),c(166)],void 0!==(e=function(a,b){var c=/\bthis\b/,d=Object.prototype,e=(e=b.window)&&e.document,f=d.propertyIsEnumerable,g={};return function(d){g.funcDecomp=!a(b.WinRTError)&&c.test(function(){return this}),g.funcNames="string"==typeof Function.name;try{g.dom=11===e.createDocumentFragment().nodeType}catch(a){g.dom=!1}try{g.nonEnumArgs=!f.call(arguments,1)}catch(a){g.nonEnumArgs=!0}}(0,0),g}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;(function(a,c){d=[],void 0!==(e=function(){var d={function:!0,object:!0},e=d[typeof b]&&b&&!b.nodeType&&b,f=d[typeof a]&&a&&!a.nodeType&&a,g=e&&f&&"object"==typeof c&&c,h=d[typeof window]&&window;return g||h!==(this&&this.window)&&h||this}.apply(b,d))&&(a.exports=e)}).call(b,c(76)(a),function(){return this}())},function(a,b,c){var d,e;d=[c(168),c(161),c(162),c(155),c(169),c(172),c(173)],void 0!==(e=function(a,b,c,d,e,f,g){function h(h,j,k,l,m,n,o){for(var p=n.length,q=j[k];p--;)if(n[p]==q)return void(h[k]=o[p]);var r=h[k],s=m?m(r,q,k,h,j):i,t=void 0===s;t&&(s=q,d(q.length)&&(c(q)||f(q))?s=c(r)?r:r?a(r):[]:e(q)||b(q)?s=b(r)?g(r):e(r)?r:{}:t=!1),n.push(q),o.push(s),t?h[k]=l(s,q,m,n,o):(s===s?s!==r:r===r)&&(h[k]=s)}var i;return h}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a,b){var c=-1,d=a.length;for(b||(b=Array(d));++c<d;)b[c]=a[c];return b}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(156),c(170)],void 0!==(e=function(a,b){var c=Object.prototype,d=c.toString,e=a(e=Object.getPrototypeOf)&&e;return e?function(c){if(!c||"[object Object]"!=d.call(c))return!1;var f=c.valueOf,g=a(f)&&(g=e(f))&&e(g);return g?c==g||e(c)==g:b(c)}:b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(171),c(159)],void 0!==(e=function(a,b){function c(c){var e;if(!b(c)||g.call(c)!=d||!f.call(c,"constructor")&&"function"==typeof(e=c.constructor)&&!(e instanceof e))return!1;var h;return a(c,function(a,b){h=b}),void 0===h||f.call(c,h)}var d="[object Object]",e=Object.prototype,f=e.hasOwnProperty,g=e.toString;return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(151),c(164)],void 0!==(e=function(a,b){function c(c,d){return a(c,d,b)}return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(155),c(159)],void 0!==(e=function(a,b){function c(c){return b(c)&&a(c.length)&&d[f.call(c)]||!1}var d={};d["[object Float32Array]"]=d["[object Float64Array]"]=d["[object Int8Array]"]=d["[object Int16Array]"]=d["[object Int32Array]"]=d["[object Uint8Array]"]=d["[object Uint8ClampedArray]"]=d["[object Uint16Array]"]=d["[object Uint32Array]"]=!0,d["[object Arguments]"]=d["[object Array]"]=d["[object ArrayBuffer]"]=d["[object Boolean]"]=d["[object Date]"]=d["[object Error]"]=d["[object Function]"]=d["[object Map]"]=d["[object Number]"]=d["[object Object]"]=d["[object RegExp]"]=d["[object Set]"]=d["[object String]"]=d["[object WeakMap]"]=!1;var e=Object.prototype,f=e.toString;return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(174),c(164)],void 0!==(e=function(a,b){function c(c){return a(c,b(c))}return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a,b,c){c||(c=b,b={});for(var d=-1,e=c.length;++d<e;){var f=c[d];b[f]=a[f]}return b}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(176),c(178)],void 0!==(e=function(a,b){function c(c){return function(){var d=arguments,e=d.length,f=d[0];if(e<2||null==f)return f;var g=d[e-2],h=d[e-1],i=d[3];e>3&&"function"==typeof g?(g=a(g,h,5),e-=2):(g=e>2&&"function"==typeof h?h:null,e-=g?1:0),i&&b(d[1],d[2],i)&&(g=3==e?null:g,e=2);for(var j=0;++j<e;){var k=d[j];k&&c(f,k,g)}return f}}return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(177)],void 0!==(e=function(a){function b(b,c,d){if("function"!=typeof b)return a;if(void 0===c)return b;switch(d){case 1:return function(a){return b.call(c,a)};case 3:return function(a,d,e){return b.call(c,a,d,e)};case 4:return function(a,d,e,f){return b.call(c,a,d,e,f)};case 5:return function(a,d,e,f,g){return b.call(c,a,d,e,f,g)}}return function(){return b.apply(c,arguments)}}return b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return a}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(163),c(155),c(153)],void 0!==(e=function(a,b,c){function d(d,e,f){if(!c(f))return!1;var g=typeof e;if("number"==g)var h=f.length,i=b(h)&&a(e,h);else i="string"==g&&e in f;if(i){var j=f[e];return d===d?d===j:j!==j}return!1}return d}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(180),c(176)],void 0!==(e=function(a,b){function c(c,d,e){return d="function"==typeof d&&b(d,e,1),a(c,!0,d)}return c}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(168),c(149),c(174),c(150),c(184),c(181),c(185),c(162),c(153),c(154)],void 0!==(e=function(a,b,c,d,e,f,g,h,i,j){function k(p,r,s,t,u,v,w){var x;if(s&&(x=u?s(p,t,u):s(p)),void 0!==x)return x;if(!i(p))return p;var y=h(p);if(y){if(x=e(p),!r)return a(p,x)}else{var z=q.call(p),A=z==m;if(z!=n&&z!=l&&(!A||u))return o[z]?f(p,z,r):u?p:{};if(x=g(A?{}:p),!r)return c(p,x,j(p))}v||(v=[]),w||(w=[]);for(var B=v.length;B--;)if(v[B]==p)return w[B];return v.push(p),w.push(x),(y?b:d)(p,function(a,b){x[b]=k(a,r,s,b,p,v,w)}),x}var l="[object Arguments]",m="[object Function]",n="[object Object]",o={};o[l]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object Date]"]=o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Number]"]=o[n]=o["[object RegExp]"]=o["[object String]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Error]"]=o[m]=o["[object Map]"]=o["[object Set]"]=o["[object WeakMap]"]=!1;var p=Object.prototype,q=p.toString;return k}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(182)],void 0!==(e=function(a){function b(b,s,t){var u=b.constructor;switch(s){case h:return a(b);case c:case d:return new u(+b);case i:case j:case k:case l:case m:case n:case o:case p:case q:var v=b.buffer;return new u(t?a(v):v,b.byteOffset,b.length);case e:case g:return new u(b);case f:var w=new u(b.source,r.exec(b));w.lastIndex=b.lastIndex}return w}var c="[object Boolean]",d="[object Date]",e="[object Number]",f="[object RegExp]",g="[object String]",h="[object ArrayBuffer]",i="[object Float32Array]",j="[object Float64Array]",k="[object Int8Array]",l="[object Int16Array]",m="[object Int32Array]",n="[object Uint8Array]",o="[object Uint8ClampedArray]",p="[object Uint16Array]",q="[object Uint32Array]",r=/\w*$/;return b}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[c(183),c(156),c(166)],void 0!==(e=function(a,b,c){function d(a){return f.call(a,0)}var e=b(e=c.ArrayBuffer)&&e,f=b(f=e&&new e(0).slice)&&f,g=Math.floor,h=b(h=c.Uint8Array)&&h,i=function(){try{var a=b(a=c.Float64Array)&&a,d=new a(new e(10),0,1)&&a}catch(a){}return d}(),j=i?i.BYTES_PER_ELEMENT:0;return f||(d=e&&h?function(a){var b=a.byteLength,c=i?g(b/j):0,d=c*j,f=new e(b);if(c){var k=new i(f,0,c);k.set(new i(a,0,c))}return b!=d&&(k=new h(f,d),k.set(new h(a,d))),f}:a(null)),d}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){return function(){return a}}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){var b=a.length,d=new a.constructor(b);return b&&"string"==typeof a[0]&&c.call(a,"index")&&(d.index=a.index,d.input=a.input),d}var b=Object.prototype,c=b.hasOwnProperty;return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){var d,e;d=[],void 0!==(e=function(){function a(a){var b=a.constructor;return"function"==typeof b&&b instanceof b||(b=Object),new b}return a}.apply(b,d))&&(a.exports=e)},function(a,b,c){"use strict";var d=["<div class='st-block-positioner__inner'>","<span class='st-block-positioner__selected-value'></span>","<select class='st-block-positioner__select'></select>","</div>"].join("\n"),e=function(a,b){this.mediator=b,this.$block=a,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(e.prototype,c(187),c(188),{total_blocks:0,bound:["onBlockCountChange","onSelectChange","toggle","show","hide"],className:"st-block-positioner",visibleClass:"st-block-positioner--is-visible",initialize:function(){this.$el.append(d),this.$select=this.$(".st-block-positioner__select"),this.$select.on("change",this.onSelectChange),this.mediator.on("block:countUpdate",this.onBlockCountChange)},onBlockCountChange:function(a){a!==this.total_blocks&&(this.total_blocks=a,this.renderPositionList())},onSelectChange:function(){var a=this.$select.val();0!==a&&(this.mediator.trigger("block:changePosition",this.$block,a,1===a?"before":"after"),this.toggle())},renderPositionList:function(){for(var a="<option value='0'>"+i18n.t("general:position")+"</option>",b=1;b<=this.total_blocks;b++)a+="<option value="+b+">"+b+"</option>";this.$select.html(a)},toggle:function(){this.$select.val(0),this.$el.toggleClass(this.visibleClass)},show:function(){this.$el.addClass(this.visibleClass)},hide:function(){this.$el.removeClass(this.visibleClass)}}),a.exports=e},function(a,b){"use strict";a.exports={bound:[],_bindFunctions:function(){this.bound.forEach(function(a){this[a]=this[a].bind(this)},this)}}},function(a,b,c){"use strict";var d=c(2),e=c(56);a.exports={tagName:"div",className:"sir-trevor__view",attributes:{},$:function(a){return this.$el.find(a)},render:function(){return this},destroy:function(){d.isUndefined(this.stopListening)||this.stopListening(),this.$el.remove()},_ensureElement:function(){if(this.el)this._setElement(this.el);else{var a,b=Object.assign({},d.result(this,"attributes"));this.id&&(b.id=this.id),this.className&&(b.class=this.className),b.html&&(a=b.html,delete b.html);var c=e("<"+this.tagName+">").attr(b);a&&c.html(a),this._setElement(c)}},_setElement:function(a){return this.$el=e(a),this.el=this.$el[0],this}}},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(62),g=function(a,b){this.$block=a,this.blockID=this.$block.attr("id"),this.mediator=b,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(g.prototype,c(187),c(188),{bound:["onMouseDown","onDragStart","onDragEnd","onDrop"],className:"st-block-ui-btn st-block-ui-btn--reorder st-icon",tagName:"a",attributes:function(){return{html:"reorder",draggable:"true","data-icon":"move"}},initialize:function(){this.$el.bind("mousedown touchstart",this.onMouseDown).bind("dragstart",this.onDragStart).bind("dragend touchend",this.onDragEnd),this.$block.dropArea().bind("drop",this.onDrop)},blockId:function(){return this.$block.attr("id")},onMouseDown:function(){this.mediator.trigger("block-controls:hide"),f.trigger("block:reorder:down")},onDrop:function(a){a.preventDefault();var b=this.$block,c=a.originalEvent.dataTransfer.getData("text/plain"),g=e("#"+c);d.isUndefined(c)||d.isEmpty(g)||b.attr("id")===c||b.attr("data-instance")!==g.attr("data-instance")||b.after(g),this.mediator.trigger("block:rerender",c),f.trigger("block:reorder:dropped",c)},onDragStart:function(a){var b=e(a.currentTarget).parent();a.originalEvent.dataTransfer.setDragImage(this.$block[0],b.position().left,b.position().top),a.originalEvent.dataTransfer.setData("Text",this.blockId()),f.trigger("block:reorder:dragstart"),this.$block.addClass("st-block--dragging")},onDragEnd:function(a){f.trigger("block:reorder:dragend"),this.$block.removeClass("st-block--dragging")},render:function(){return this}}),a.exports=g},function(a,b,c){"use strict";var d=function(){this._ensureElement(),this._bindFunctions()};Object.assign(d.prototype,c(187),c(188),{tagName:"a",className:"st-block-ui-btn st-block-ui-btn--delete st-icon",attributes:{html:"delete","data-icon":"bin"}}),a.exports=d},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(57),g=function(a){var b=a.attr("data-st-name")||a.attr("name");return b||(b="Field"),f.capitalize(b)};a.exports={errors:[],valid:function(){return this.performValidations(),0===this.errors.length},performValidations:function(){this.resetErrors(),this.$(".st-required").each(function(a,b){this.validateField(b)}.bind(this)),this.validations.forEach(this.runValidator,this),this.$el.toggleClass("st-block--with-errors",this.errors.length>0)},validations:[],validateField:function(a){a=e(a),0===(a.attr("contenteditable")?a.text():a.val()).length&&this.setError(a,i18n.t("errors:block_empty",{name:g(a)}))},runValidator:function(a){d.isUndefined(this[a])||this[a].call(this)},setError:function(a,b){var c=this.addMessage(b,"st-msg--error");a.addClass("st-error"),this.errors.push({field:a,reason:b,msg:c})},resetErrors:function(){this.errors.forEach(function(a){a.field.removeClass("st-error"),a.msg.remove()}),this.$messages.removeClass("st-block__messages--is-visible"),this.errors=[]}}},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(62);a.exports={blockStorage:{},createStore:function(a){this.blockStorage={type:e.underscored(this.type),data:a||{}}},save:function(){var a=this._serializeData();d.isEmpty(a)||this.setData(a)},getData:function(){return this.save(),this.blockStorage},getBlockData:function(){return this.save(),this.blockStorage.data},_getData:function(){return this.blockStorage.data},setData:function(a){e.log("Setting data for block "+this.blockID),Object.assign(this.blockStorage.data,a||{})},setAndLoadData:function(a){this.setData(a),this.beforeLoadingData()},_serializeData:function(){},loadData:function(){},beforeLoadingData:function(){e.log("loadData for "+this.blockID),f.trigger("editor/block/loadData"),this.loadData(this._getData())},_loadData:function(){e.log("_loadData is deprecated and will be removed in the future. Please use beforeLoadingData instead."),this.beforeLoadingData()},checkAndLoadData:function(){d.isEmpty(this._getData())||this.beforeLoadingData()}}},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(58),g=c(62),h=c(194),i=["convertToMarkdown","convertFromMarkdown","formatBar"],j=function(a,b,c){this.options=a,this.blockOptions=i.reduce(function(b,c){return b[c]=a[c],b},{}),this.instance_scope=b,this.mediator=c,this.blocks=[],this.blockCounts={},this.blockTypes={},this._setBlocksTypes(),this._setRequired(),this._bindMediatedEvents(),this.initialize()};Object.assign(j.prototype,c(187),c(207),c(60),{eventNamespace:"block",mediatedEvents:{create:"createBlock",remove:"removeBlock",rerender:"rerenderBlock"},initialize:function(){},createBlock:function(a,b){if(a=e.classify(a),this.canCreateBlock(a)){var c=new h[a](b,this.instance_scope,this.mediator,this.blockOptions);this.blocks.push(c),this._incrementBlockTypeCount(a),this.mediator.trigger("block:render",c),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),g.trigger(b?"block:create:existing":"block:create:new",c),e.log("Block created of type "+a)}},removeBlock:function(a){var b=this.findBlockById(a),c=e.classify(b.type);this.mediator.trigger("block-controls:reset"),this.blocks=this.blocks.filter(function(a){return a.blockID!==b.blockID}),this._decrementBlockTypeCount(c),this.triggerBlockCountUpdate(),this.mediator.trigger("block:limitReached",this.blockLimitReached()),g.trigger("block:remove")},rerenderBlock:function(a){var b=this.findBlockById(a);d.isUndefined(b)||b.isEmpty()||!b.drop_options.re_render_on_reorder||b.beforeLoadingData()},triggerBlockCountUpdate:function(){this.mediator.trigger("block:countUpdate",this.blocks.length)},canCreateBlock:function(a){return this.blockLimitReached()?(e.log("Cannot add any more blocks. Limit reached."),!1):this.isBlockTypeAvailable(a)?!!this.canAddBlockType(a)||(e.log("Block Limit reached for type "+a),!1):(e.log("Block type not available "+a),!1)},validateBlockTypesExist:function(a){if(f.skipValidation||!a)return!1;(this.required||[]).forEach(function(a,b){if(this.isBlockTypeAvailable(a))if(0===this._getBlockTypeCount(a))e.log("Failed validation on required block type "+a),this.mediator.trigger("errors:add",{text:i18n.t("errors:type_missing",{type:a})});else{var c=this.getBlocksByType(a).filter(function(a){return!a.isEmpty()});if(c.length>0)return!1;this.mediator.trigger("errors:add",{text:i18n.t("errors:required_type_empty",{type:a})}),e.log("A required block type "+a+" is empty")}},this)},findBlockById:function(a){return this.blocks.find(function(b){return b.blockID===a})},getBlocksByType:function(a){return this.blocks.filter(function(b){return e.classify(b.type)===a})},getBlocksByIDs:function(a){return this.blocks.filter(function(b){return a.includes(b.blockID)})},blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},isBlockTypeAvailable:function(a){return!d.isUndefined(this.blockTypes[a])},canAddBlockType:function(a){var b=this._getBlockTypeLimit(a);return!(0!==b&&this._getBlockTypeCount(a)>=b)},_setBlocksTypes:function(){this.blockTypes=e.flatten(d.isUndefined(this.options.blockTypes)?h:this.options.blockTypes)},_setRequired:function(){this.required=!1,Array.isArray(this.options.required)&&!d.isEmpty(this.options.required)&&(this.required=this.options.required)},_incrementBlockTypeCount:function(a){this.blockCounts[a]=d.isUndefined(this.blockCounts[a])?1:this.blockCounts[a]+1},_decrementBlockTypeCount:function(a){this.blockCounts[a]=d.isUndefined(this.blockCounts[a])?1:this.blockCounts[a]-1},_getBlockTypeCount:function(a){return d.isUndefined(this.blockCounts[a])?0:this.blockCounts[a]},_blockLimitReached:function(){return 0!==this.options.blockLimit&&this.blocks.length>=this.options.blockLimit},_getBlockTypeLimit:function(a){return this.isBlockTypeAvailable(a)?parseInt(d.isUndefined(this.options.blockTypeLimits[a])?0:this.options.blockTypeLimits[a],10):0}}),a.exports=j},function(a,b,c){"use strict";a.exports={Text:c(195),Quote:c(201),Image:c(202),Heading:c(203),List:c(204),Tweet:c(205),Video:c(206)}},function(a,b,c){"use strict";var d=c(196),e=c(200);a.exports=d.extend({type:"text",title:function(){return i18n.t("blocks:text:title")},editorHTML:'<div class="st-required st-text-block" contenteditable="true"></div>',icon_name:"text",loadData:function(a){this.options.convertFromMarkdown&&"html"!==a.format?this.setTextBlockHTML(e(a.text,this.type)):this.setTextBlockHTML(a.text)}})},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(74),g=c(58),h=c(57),i=c(66),j=c(197),k=c(189),l=c(190),m=c(186),n=c(62),o=c(199),p=function(a,b,c,d){j.apply(this,arguments)};p.prototype=Object.create(j.prototype),p.prototype.constructor=p;var q=["<div class='st-block__ui-delete-controls'>","<label class='st-block__delete-label'>","<%= i18n.t('general:delete') %>","</label>","<a class='st-block-ui-btn st-block-ui-btn--confirm-delete st-icon' data-icon='tick'></a>","<a class='st-block-ui-btn st-block-ui-btn--deny-delete st-icon' data-icon='close'></a>","</div>"].join("\n");Object.assign(p.prototype,j.fn,c(191),{bound:["_handleContentPaste","_onFocus","_onBlur","onDrop","onDeleteClick","clearInsertedStyles","getSelectionForFormatter","onBlockRender"],className:"st-block st-icon--add",attributes:function(){return Object.assign(j.fn.attributes.call(this),{"data-icon-after":"add"})},icon_name:"default",validationFailMsg:function(){return i18n.t("errors:validation_fail",{type:this.title})},editorHTML:'<div class="st-block__editor"></div>',toolbarEnabled:!0,availableMixins:["droppable","pastable","uploadable","fetchable","ajaxable","controllable","multi_editable"],droppable:!1,pastable:!1,uploadable:!1,fetchable:!1,ajaxable:!1,multi_editable:!1,drop_options:{},paste_options:{},upload_options:{},formattable:!0,_previousSelection:"",initialize:function(){},toMarkdown:function(a){return a},toHTML:function(a){return a},withMixin:function(a){if(d.isObject(a)){var b="initialize"+a.mixinName;d.isUndefined(this[b])&&(Object.assign(this,a),this[b]())}},render:function(){if(this.beforeBlockRender(),this._setBlockInner(),this.$editor=this.$inner.children().first(),this.mixinsRequireInputs=!1,this.availableMixins.forEach(function(a){if(this[a]){var b=i[h.classify(a)];!d.isUndefined(b.requireInputs)&&b.requireInputs&&(this.mixinsRequireInputs=!0)}},this),this.mixinsRequireInputs){var a=e("<div>",{class:"st-block__inputs"});this.$inner.append(a),this.$inputs=a}return this.hasTextBlock()&&this._initTextBlocks(),this.availableMixins.forEach(function(a){this[a]&&this.withMixin(i[h.classify(a)])},this),this.formattable&&this._initFormatting(),this._blockPrepare(),this},remove:function(){this.ajaxable&&this.resolveAllInQueue(),this.$el.remove()},loading:function(){d.isUndefined(this.spinner)||this.ready(),this.spinner=new o(g.defaults.spinner),this.spinner.spin(this.$el[0]),this.$el.addClass("st--is-loading")},ready:function(){this.$el.removeClass("st--is-loading"),d.isUndefined(this.spinner)||(this.spinner.stop(),delete this.spinner)},_serializeData:function(){h.log("toData for "+this.blockID);var a={};return this.hasTextBlock()&&(a.text=this.getTextBlockHTML(),a.format="html"),this.$(":input").not(".st-paste-block").length>0&&this.$(":input").each(function(b,c){c.getAttribute("name")&&(a[c.getAttribute("name")]=c.value)}),a},focus:function(){this.getTextBlock().focus()},blur:function(){this.getTextBlock().blur()},onFocus:function(){this.getTextBlock().bind("focus",this._onFocus)},onBlur:function(){this.getTextBlock().bind("blur",this._onBlur)},_onFocus:function(){this.trigger("blockFocus",this.$el)},_onBlur:function(){},onBlockRender:function(){this.focus()},onDrop:function(a){},onDeleteClick:function(a){a.preventDefault();var b=function(a){a.preventDefault(),this.mediator.trigger("block:remove",this.blockID),this.remove()},c=function(a){a.preventDefault(),this.$el.removeClass("st-block--delete-active"),e.remove()};if(this.isEmpty())return void b.call(this,new Event("click"));this.$inner.append(d.template(q)),this.$el.addClass("st-block--delete-active");var e=this.$inner.find(".st-block__ui-delete-controls");this.$inner.on("click",".st-block-ui-btn--confirm-delete",b.bind(this)).on("click",".st-block-ui-btn--deny-delete",c.bind(this))},beforeLoadingData:function(){this.loading(),this.mixinsRequireInputs&&(this.$editor.show(),this.$inputs.hide()),j.fn.beforeLoadingData.call(this),this.ready()},execTextBlockCommand:function(a){if(d.isUndefined(this._scribe))throw"No Scribe instance found to send a command to";return f.execTextBlockCommand(this._scribe,a)},queryTextBlockCommandState:function(a){if(d.isUndefined(this._scribe))throw"No Scribe instance found to query command";return f.queryTextBlockCommandState(this._scribe,a)},_handleContentPaste:function(a){setTimeout(this.onContentPasted.bind(this,a,e(a.currentTarget)),0)},_getBlockClass:function(){return"st-block--"+this.className},_initUIComponents:function(){var a=new m(this.$el,this.mediator);this._withUIComponent(a,".st-block-ui-btn--reorder",a.toggle),this._withUIComponent(new k(this.$el,this.mediator)),this._withUIComponent(new l,".st-block-ui-btn--delete",this.onDeleteClick),this.onFocus(),this.onBlur()},_initFormatting:function(){var a=this;this.options.formatBar&&this.options.formatBar.commands.forEach(function(b){if(!d.isUndefined(b.keyCode)){var c=!1;a.$el.on("keyup",".st-text-block",function(a){17!==a.which&&224!==a.which&&91!==a.which||(c=!1)}).on("keydown",".st-text-block",{formatter:b},function(b){17!==b.which&&224!==b.which&&91!==b.which||(c=!0),b.which===b.data.formatter.keyCode&&c&&(b.preventDefault(),a.execTextBlockCommand(b.data.formatter.cmd))})}})},_initTextBlocks:function(){this.getTextBlock().bind("keyup",this.getSelectionForFormatter).bind("mouseup",this.getSelectionForFormatter).bind("DOMNodeInserted",this.clearInsertedStyles);var a=this.getTextBlock().get(0);if(!d.isUndefined(a)&&d.isUndefined(this._scribe)){var b=d.isFunction(this.configureScribe)?this.configureScribe.bind(this):null;this._scribe=f.initScribeInstance(a,this.scribeOptions,b)}},getSelectionForFormatter:function(){var a=this;setTimeout(function(){var b=window.getSelection(),c=b.toString().trim(),d="formatter:"+(""===c?"hide":"position");a.mediator.trigger(d,a),n.trigger(d,a)},1)},clearInsertedStyles:function(a){a.target.removeAttribute("style")},hasTextBlock:function(){return this.getTextBlock().length>0},getTextBlock:function(){return d.isUndefined(this.text_block)&&(this.text_block=this.$(".st-text-block")),this.text_block},getTextBlockHTML:function(){return this._scribe.getContent()},setTextBlockHTML:function(a){return this._scribe.setContent(a)},isEmpty:function(){return d.isEmpty(this.getBlockData())}}),p.extend=c(198),a.exports=p},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(56),g=c(189),h=function(a,b,c,e){this.createStore(a),this.blockID=d.uniqueId("st-block-"),this.instanceID=b,this.mediator=c,this.options=e||{},this._ensureElement(),this._bindFunctions(),this.initialize.apply(this,arguments)};Object.assign(h.prototype,c(187),c(60),c(188),c(192),{focus:function(){},valid:function(){return!0},className:"st-block",block_template:d.template("<div class='st-block__inner'><%= editor_html %></div>"),attributes:function(){return{id:this.blockID,"data-type":this.type,"data-instance":this.instanceID}},title:function(){return e.titleize(this.type.replace(/[\W_]/g," "))},blockCSSClass:function(){return this.blockCSSClass=e.toSlug(this.type),this.blockCSSClass},type:"",class:function(){return e.classify(this.type)},editorHTML:"",initialize:function(){},onBlockRender:function(){},beforeBlockRender:function(){},_setBlockInner:function(){var a=d.result(this,"editorHTML");this.$el.append(this.block_template({editor_html:a})),this.$inner=this.$el.find(".st-block__inner"),this.$inner.bind("click mouseover",function(a){a.stopPropagation()})},render:function(){return this.beforeBlockRender(),this._setBlockInner(),this._blockPrepare(),this},_blockPrepare:function(){this._initUI(),this._initMessages(),this.checkAndLoadData(),this.$el.addClass("st-item-ready"),this.on("onRender",this.onBlockRender),this.save()},_withUIComponent:function(a,b,c){this.$ui.append(a.render().$el),b&&c&&this.$ui.on("click",b,c)},_initUI:function(){var a=f("<div>",{class:"st-block__ui"});this.$inner.append(a),this.$ui=a,this._initUIComponents()},_initMessages:function(){var a=f("<div>",{class:"st-block__messages"});this.$inner.prepend(a),this.$messages=a},addMessage:function(a,b){var c=f("<span>",{html:a,class:"st-msg "+b});return this.$messages.append(c).addClass("st-block__messages--is-visible"),c},resetMessages:function(){this.$messages.html("").removeClass("st-block__messages--is-visible")},_initUIComponents:function(){this._withUIComponent(new g(this.$el))}}),h.fn=h.prototype,h.extend=c(198),a.exports=h},function(a,b){"use strict";a.exports=function(a,b){var c,d=this;c=a&&a.hasOwnProperty("constructor")?a.constructor:function(){return d.apply(this,arguments)},Object.assign(c,d,b);var e=function(){this.constructor=c};return e.prototype=d.prototype,c.prototype=new e,a&&Object.assign(c.prototype,a),c.__super__=d.prototype,c}},function(a,b,c){var d,e;!function(f,g){"object"==typeof a&&a.exports?a.exports=g():(d=g,void 0!==(e="function"==typeof d?d.call(b,c,b,a):d)&&(a.exports=e))}(0,function(){"use strict";function a(a,b){var c,d=document.createElement(a||"div");for(c in b)d[c]=b[c];return d}function b(a){for(var b=1,c=arguments.length;b<c;b++)a.appendChild(arguments[b]);return a}function c(a,b,c,d){var e=["opacity",b,~~(100*a),c,d].join("-"),f=.01+c/d*100,g=Math.max(1-(1-a)/b*(100-f),a),h=j.substring(0,j.indexOf("Animation")).toLowerCase(),i=h&&"-"+h+"-"||"";return m[e]||(k.insertRule("@"+i+"keyframes "+e+"{0%{opacity:"+g+"}"+f+"%{opacity:"+a+"}"+(f+.01)+"%{opacity:1}"+(f+b)%100+"%{opacity:"+a+"}100%{opacity:"+g+"}}",k.cssRules.length),m[e]=1),e}function d(a,b){var c,d,e=a.style;if(b=b.charAt(0).toUpperCase()+b.slice(1),void 0!==e[b])return b;for(d=0;d<l.length;d++)if(c=l[d]+b,void 0!==e[c])return c}function e(a,b){for(var c in b)a.style[d(a,c)||c]=b[c];return a}function f(a){for(var b=1;b<arguments.length;b++){var c=arguments[b];for(var d in c)void 0===a[d]&&(a[d]=c[d])}return a}function g(a,b){return"string"==typeof a?a:a[b%a.length]}function h(a){this.opts=f(a||{},h.defaults,n)}function i(){function c(b,c){return a("<"+b+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',c)}k.addRule(".spin-vml","behavior:url(#default#VML)"),h.prototype.lines=function(a,d){function f(){return e(c("group",{coordsize:k+" "+k,coordorigin:-j+" "+-j}),{width:k,height:k})}function h(a,h,i){b(m,b(e(f(),{rotation:360/d.lines*a+"deg",left:~~h}),b(e(c("roundrect",{arcsize:d.corners}),{width:j,height:d.scale*d.width,left:d.scale*d.radius,top:-d.scale*d.width>>1,filter:i}),c("fill",{color:g(d.color,a),opacity:d.opacity}),c("stroke",{opacity:0}))))}var i,j=d.scale*(d.length+d.width),k=2*d.scale*j,l=-(d.width+d.length)*d.scale*2+"px",m=e(f(),{position:"absolute",top:l,left:l});if(d.shadow)for(i=1;i<=d.lines;i++)h(i,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(i=1;i<=d.lines;i++)h(i);return b(a,m)},h.prototype.opacity=function(a,b,c,d){var e=a.firstChild;d=d.shadow&&d.lines||0,e&&b+d<e.childNodes.length&&(e=e.childNodes[b+d],e=e&&e.firstChild,(e=e&&e.firstChild)&&(e.opacity=c))}}var j,k,l=["webkit","Moz","ms","O"],m={},n={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(h.defaults={},f(h.prototype,{spin:function(b){this.stop();var c=this,d=c.opts,f=c.el=a(null,{className:d.className});if(e(f,{position:d.position,width:0,zIndex:d.zIndex,left:d.left,top:d.top}),b&&b.insertBefore(f,b.firstChild||null),f.setAttribute("role","progressbar"),c.lines(f,c.opts),!j){var g,h=0,i=(d.lines-1)*(1-d.direction)/2,k=d.fps,l=k/d.speed,m=(1-d.opacity)/(l*d.trail/100),n=l/d.lines;!function a(){h++;for(var b=0;b<d.lines;b++)g=Math.max(1-(h+(d.lines-b)*n)%l*m,d.opacity),c.opacity(f,b*d.direction+i,g,d);c.timeout=c.el&&setTimeout(a,~~(1e3/k))}()}return c},stop:function(){var a=this.el;return a&&(clearTimeout(this.timeout),a.parentNode&&a.parentNode.removeChild(a),this.el=void 0),this},lines:function(d,f){function h(b,c){return e(a(),{position:"absolute",width:f.scale*(f.length+f.width)+"px",height:f.scale*f.width+"px",background:b,boxShadow:c,transformOrigin:"left",transform:"rotate("+~~(360/f.lines*k+f.rotate)+"deg) translate("+f.scale*f.radius+"px,0)",borderRadius:(f.corners*f.scale*f.width>>1)+"px"})}for(var i,k=0,l=(f.lines-1)*(1-f.direction)/2;k<f.lines;k++)i=e(a(),{position:"absolute",top:1+~(f.scale*f.width/2)+"px",transform:f.hwaccel?"translate3d(0,0,0)":"",opacity:f.opacity,animation:j&&c(f.opacity,f.trail,l+k*f.direction,f.lines)+" "+1/f.speed+"s linear infinite"}),f.shadow&&b(i,e(h("#000","0 0 4px #000"),{top:"2px"})),b(d,b(i,h(g(f.color,k),"0 0 1px rgba(0,0,0,.1)")));return d},opacity:function(a,b,c){b<a.childNodes.length&&(a.childNodes[b].style.opacity=c)}}),"undefined"!=typeof document){k=function(){var c=a("style",{type:"text/css"});return b(document.getElementsByTagName("head")[0],c),c.sheet||c.styleSheet}();var o=e(a("group"),{behavior:"url(#default#VML)"});!d(o,"transform")&&o.adj?i():j=d(o,"animation")}return h})},function(a,b,c){"use strict";var d=c(2),e=c(57);a.exports=function(a,b){var f=c(194);b=e.classify(b);var g=a,h="Text"===b;d.isUndefined(h)&&(h=!1),h&&(g="<p>"+g),g=g.replace(/\[([^\]]+)\]\(([^\)]+)\)/gm,function(a,b,c){return"<a href='"+c+"'>"+b.replace(/\n/g,"")+"</a>"}),g=e.reverse(e.reverse(g).replace(/_(?!\\)((_\\|[^_])*)_(?=$|[^\\])/gm,function(a,b){return">i/<"+b.replace(/\n/g,"").replace(/[\s]+$/,"")+">i<"}).replace(/\*\*(?!\\)((\*\*\\|[^\*\*])*)\*\*(?=$|[^\\])/gm,function(a,b){return">b/<"+b.replace(/\n/g,"").replace(/[\s]+$/,"")+">b<"})),g=g.replace(/^\> (.+)$/gm,"$1");var i;return f.hasOwnProperty(b)&&(i=f[b],!d.isUndefined(i.prototype.toHTML)&&d.isFunction(i.prototype.toHTML)&&(g=i.prototype.toHTML(g))),h&&(g=g.replace(/\n\s*\n/gm,"</p><p>"),g=g.replace(/\n/gm,"<br>")),g=g.replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;").replace(/\n/g,"<br>").replace(/\*\*/,"").replace(/__/,""),g=g.replace(/\\\*/g,"*").replace(/\\\[/g,"[").replace(/\\\]/g,"]").replace(/\\\_/g,"_").replace(/\\\(/g,"(").replace(/\\\)/g,")").replace(/\\\-/g,"-"),h&&(g+="</p>"),g}},function(a,b,c){"use strict";var d=c(2),e=c(196),f=c(200),g=d.template(['<blockquote class="st-required st-text-block" contenteditable="true"></blockquote>','<label class="st-input-label"> <%= i18n.t("blocks:quote:credit_field") %></label>','<input maxlength="140" name="cite" placeholder="<%= i18n.t("blocks:quote:credit_field") %>"',' class="st-input-string st-required js-cite-input" type="text" />'].join("\n"));a.exports=e.extend({type:"quote",title:function(){return i18n.t("blocks:quote:title")},icon_name:"quote",editorHTML:function(){return g(this)},loadData:function(a){this.options.convertFromMarkdown&&"html"!==a.format?this.setTextBlockHTML(f(a.text,this.type)):this.setTextBlockHTML(a.text),this.$(".js-cite-input").val(a.cite)}})},function(a,b,c){"use strict";var d=c(56),e=c(196);a.exports=e.extend({type:"image",title:function(){return i18n.t("blocks:image:title")},droppable:!0,uploadable:!0,icon_name:"image",loadData:function(a){this.$editor.html(d("<img>",{src:a.file.url}))},onBlockRender:function(){this.$inputs.find("button").bind("click",function(a){a.preventDefault()}),this.$inputs.find("input").on("change",function(a){this.onDrop(a.currentTarget)}.bind(this))},onDrop:function(a){var b=a.files[0],c="undefined"!=typeof URL?URL:"undefined"!=typeof webkitURL?webkitURL:null;/image/.test(b.type)&&(this.loading(),this.$inputs.hide(),this.$editor.html(d("<img>",{src:c.createObjectURL(b)})).show(),this.uploader(b,function(a){this.setData(a),this.ready()},function(a){this.addMessage(i18n.t("blocks:image:upload_error")),this.ready()}))}})},function(a,b,c){"use strict";var d=c(196),e=c(200);a.exports=d.extend({type:"Heading",title:function(){return i18n.t("blocks:heading:title")},editorHTML:'<h2 class="st-required st-text-block st-text-block--heading" contenteditable="true"></h2>',scribeOptions:{allowBlockElements:!1,tags:{p:!1}},icon_name:"heading",loadData:function(a){this.options.convertFromMarkdown&&"html"!==a.format?this.setTextBlockHTML(e(a.text,this.type)):this.setTextBlockHTML(a.text)}})},function(a,b,c){"use strict";var d=c(196),e=c(200),f=function(a){return function(b){b.el.addEventListener("keydown",function(c){var d,e=function(a){var b=document.createElement("div");return b.appendChild(a.extractContents()),b.innerHTML},f=function(){var a=new b.api.Selection,c=a.range.cloneRange();return c.setEndAfter(b.el.lastChild,0),c},g=function(){return(new b.api.Selection).range.startOffset};13!==c.keyCode||c.shiftKey?a.isLastListItem()||(8===c.keyCode&&0===g()?(c.preventDefault(),d=b.getContent(),a.removeCurrentListItem(),a.appendToCurrentItem(d)):c.keyCode):(c.preventDefault(),d=e(f()),a.addListItemAfterCurrent(d))})}};a.exports=d.extend({type:"list",title:function(){return i18n.t("blocks:list:title")},icon_name:"list",multi_editable:!0,scribeOptions:{allowBlockElements:!1,tags:{p:!1}},configureScribe:function(a){a.use(new f(this))},editorHTML:'<ul class="st-list-block__list"></ul>',listItemEditorHTML:'<li class="st-list-block__item"><div class="st-list-block__editor st-block__editor"></div></li>',initialize:function(){this.editorIds=[]},beforeLoadingData:function(){this.setupListVariables(),this.loadData(this._getData())},onBlockRender:function(){this.ul||this.setupListVariables(),this.editorIds.length<1&&this.addListItem()},setupListVariables:function(){this.$ul=this.$inner.find("ul"),this.ul=this.$ul.get(0)},loadData:function(a){var b=this;this.options.convertFromMarkdown&&"html"!==a.format&&(a=this.parseFromMarkdown(a.text)),a.listItems.length?a.listItems.forEach(function(a){b.addListItem(a.content)}):b.addListItem()},parseFromMarkdown:function(a){var b=a.replace(/^ - (.+)$/gm,"$1").split("\n");return b=b.filter(function(a){return a.length}).map(function(a){return{content:e(a,this.type)}}.bind(this)),{listItems:b,format:"html"}},_serializeData:function(){var a={format:"html",listItems:[]};return this.editorIds.forEach(function(b){var c={content:this.getTextEditor(b).scribe.getContent()};a.listItems.push(c)}.bind(this)),a},addListItemAfterCurrent:function(a){this.addListItem(a,this.getCurrentTextEditor())},addListItem:function(a,b){a=a||"","<br>"===a.trim()&&(a="");var c=this.newTextEditor(this.listItemEditorHTML,a);if(b&&this.ul.lastchild!==b.node){var d=b.node.nextSibling;this.ul.insertBefore(c.node,d);var e=this.editorIds.indexOf(b.id)+1;this.editorIds.splice(e,0,c.id)}else this.$ul.append(c.node),this.editorIds.push(c.id);this.focusOn(c)},focusOnNeighbor:function(a){var b=this.previousListItem()||this.nextListItem();b&&this.focusOn(b)},focusOn:function(a){var b,c=a.scribe,d=new c.api.Selection,e=c.el.lastChild;d.range&&(b=d.range.cloneRange()),a.el.focus(),b&&(b.setStartAfter(e,1),b.collapse(!1))},removeCurrentListItem:function(){if(1!==this.editorIds.length){var a=this.getCurrentTextEditor(),b=this.editorIds.indexOf(a.id);this.focusOnNeighbor(a),this.editorIds.splice(b,1),this.ul.removeChild(a.node),this.removeTextEditor(a.id)}},appendToCurrentItem:function(a){this.appendToTextEditor(this.getCurrentTextEditor().id,a)},isLastListItem:function(){return 1===this.editorIds.length},nextListItem:function(){var a=this.editorIds.indexOf(this.getCurrentTextEditor().id),b=this.editorIds[a+1];return void 0!==b?this.getTextEditor(b):null},previousListItem:function(){var a=this.editorIds.indexOf(this.getCurrentTextEditor().id),b=this.editorIds[a-1];return void 0!==b?this.getTextEditor(b):null}})},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(57),g=c(196),h=d.template(["<blockquote class='twitter-tweet' align='center'>","<p><%= text %></p>","&mdash; <%= user.name %> (@<%= user.screen_name %>)","<a href='<%= status_url %>' data-datetime='<%= created_at %>'><%= created_at %></a>","</blockquote>",'<script src="//platform.twitter.com/widgets.js" charset="utf-8"></script>'].join("\n"));a.exports=g.extend({type:"tweet",droppable:!0,pastable:!0,fetchable:!0,drop_options:{re_render_on_reorder:!0},title:function(){return i18n.t("blocks:tweet:title")},fetchUrl:function(a){return"/tweets/?tweet_id="+a},icon_name:"twitter",loadData:function(a){d.isUndefined(a.status_url)&&(a.status_url=""),this.$inner.find("iframe").remove(),this.$inner.prepend(h(a))},onContentPasted:function(a){var b=e(a.target),c=b.val();this.handleTwitterDropPaste(c)},handleTwitterDropPaste:function(a){if(!this.validTweetUrl(a))return void f.log("Invalid Tweet URL");var b=a.match(/[^\/]+$/);if(!d.isEmpty(b)){this.loading(),b=b[0];var c={url:this.fetchUrl(b),dataType:"json"};this.fetch(c,this.onTweetSuccess,this.onTweetFail)}},validTweetUrl:function(a){return f.isURI(a)&&a.indexOf("twitter")!==-1&&a.indexOf("status")!==-1},onTweetSuccess:function(a){var b={user:{profile_image_url:a.user.profile_image_url,profile_image_url_https:a.user.profile_image_url_https,screen_name:a.user.screen_name,name:a.user.name},id:a.id_str,text:a.text,created_at:a.created_at,entities:a.entities,status_url:"https://twitter.com/"+a.user.screen_name+"/status/"+a.id_str};this.setAndLoadData(b),this.ready()},onTweetFail:function(){this.addMessage(i18n.t("blocks:tweet:fetch_error")),this.ready()},onDrop:function(a){var b=a.getData("text/plain");this.handleTwitterDropPaste(b)}})},function(a,b,c){"use strict";var d=c(2),e=c(57),f=c(196);a.exports=f.extend({providers:{vimeo:{regex:/(?:http[s]?:\/\/)?(?:www.)?vimeo\.co(?:.+(?:\/)([^\/].*)+$)/,html:'<iframe src="<%= protocol %>//player.vimeo.com/video/<%= remote_id %>?title=0&byline=0" width="580" height="320" frameborder="0"></iframe>'},youtube:{regex:/^.*(?:(?:youtu\.be\/)|(?:youtube\.com)\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*)/,html:'<iframe src="<%= protocol %>//www.youtube.com/embed/<%= remote_id %>" width="580" height="320" frameborder="0" allowfullscreen></iframe>'}},type:"video",title:function(){return i18n.t("blocks:video:title")},droppable:!0,pastable:!0,icon_name:"video",loadData:function(a){if(this.providers.hasOwnProperty(a.source)){var b=this.providers[a.source],c="file:"===window.location.protocol?"http:":window.location.protocol,e=b.square?"with-square-media":"with-sixteen-by-nine-media";this.$editor.addClass("st-block__editor--"+e).html(d.template(b.html,{protocol:c,remote_id:a.remote_id,width:this.$editor.width()}))}},onContentPasted:function(a){this.handleDropPaste(a.target.value)},matchVideoProvider:function(a,b,c){var e=a.regex.exec(c);return null==e||d.isUndefined(e[1])?{}:{source:b,remote_id:e[1]}},handleDropPaste:function(a){if(e.isURI(a))for(var b in this.providers)this.providers.hasOwnProperty(b)&&this.setAndLoadData(this.matchVideoProvider(this.providers[b],b,a))},onDrop:function(a){var b=a.getData("text/plain");this.handleDropPaste(b)}})},function(a,b){"use strict";a.exports={mediatedEvents:{},eventNamespace:null,_bindMediatedEvents:function(){Object.keys(this.mediatedEvents).forEach(function(a){var b=this.mediatedEvents[a];a=this.eventNamespace?this.eventNamespace+":"+a:a,this.mediator.on(a,this[b].bind(this))},this)}}},function(a,b,c){"use strict";var d=c(2),e=c(194),f=function(a){this.type=a,this.block_type=e[this.type].prototype,this.can_be_rendered=this.block_type.toolbarEnabled,this._ensureElement()};Object.assign(f.prototype,c(187),c(188),c(60),{tagName:"a",className:"st-block-control",attributes:function(){return{"data-type":this.block_type.type}},render:function(){return this.$el.html('<span class="st-icon">'+d.result(this.block_type,"icon_name")+"</span>"+d.result(this.block_type,"title")),this}}),a.exports=f},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(194),g=c(208),h=c(62),i=function(a,b){this.available_types=a||[],this.mediator=b,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(i.prototype,c(187),c(207),c(188),c(60),{bound:["handleControlButtonClick"],block_controls:null,className:"st-block-controls",eventNamespace:"block-controls",mediatedEvents:{render:"renderInContainer",show:"show",hide:"hide"},initialize:function(){for(var a in this.available_types)if(f.hasOwnProperty(a)){var b=new g(a);b.can_be_rendered&&this.$el.append(b.render().$el)}this.$el.delegate(".st-block-control","click",this.handleControlButtonClick),this.mediator.on("block-controls:show",this.renderInContainer)},show:function(){this.$el.addClass("st-block-controls--active"),h.trigger("block:controls:shown")},hide:function(){this.removeCurrentContainer(),this.$el.removeClass("st-block-controls--active"),h.trigger("block:controls:hidden")},handleControlButtonClick:function(a){a.stopPropagation(),this.mediator.trigger("block:create",e(a.currentTarget).attr("data-type"))},renderInContainer:function(a){this.removeCurrentContainer(),a.append(this.$el.detach()),a.addClass("with-st-controls"),this.currentContainer=a,this.show()},removeCurrentContainer:function(){d.isUndefined(this.currentContainer)||(this.currentContainer.removeClass("with-st-controls"),this.currentContainer=void 0)}}),a.exports=i},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(62),g=function(a,b,c){this.$wrapper=a,this.instance_id=b,this.mediator=c,this._ensureElement(),this._bindFunctions(),this.initialize()};Object.assign(g.prototype,c(187),c(188),c(60),{className:"st-block-controls__top",attributes:function(){return{"data-icon":"add"}},bound:["handleBlockMouseOut","handleBlockMouseOver","handleBlockClick","onDrop"],initialize:function(){this.$el.on("click",this.handleBlockClick).dropArea().bind("drop",this.onDrop),this.$wrapper.on("mouseover",".st-block",this.handleBlockMouseOver).on("mouseout",".st-block",this.handleBlockMouseOut).on("click",".st-block--with-plus",this.handleBlockClick)},onDrop:function(a){a.preventDefault();var b=this.$el,c=a.originalEvent.dataTransfer.getData("text/plain"),g=e("#"+c);d.isUndefined(c)||d.isEmpty(g)||b.attr("id")===c||this.instance_id!==g.attr("data-instance")||b.after(g),f.trigger("block:reorder:dropped",c)},handleBlockMouseOver:function(a){var b=e(a.currentTarget);b.hasClass("st-block--with-plus")||b.addClass("st-block--with-plus")},handleBlockMouseOut:function(a){var b=e(a.currentTarget);b.hasClass("st-block--with-plus")&&b.removeClass("st-block--with-plus")},handleBlockClick:function(a){a.stopPropagation(),this.mediator.trigger("block-controls:render",e(a.currentTarget))}}),a.exports=g},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=function(a,b,c){this.editor=c,this.options=Object.assign({},f.defaults.formatBar,a||{}),this.commands=this.options.commands,this.mediator=b,this._ensureElement(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize.apply(this,arguments)};Object.assign(h.prototype,c(187),c(207),c(60),c(188),{className:"st-format-bar",bound:["onFormatButtonClick","renderBySelection","hide"],eventNamespace:"formatter",mediatedEvents:{position:"renderBySelection",show:"show",hide:"hide"},initialize:function(){this.$btns=[],this.commands.forEach(function(a){var b=e("<button>",{class:"st-format-btn st-format-btn--"+a.name+" "+(a.iconName?"st-icon":""),text:a.text,"data-cmd":a.cmd});this.$btns.push(b),b.appendTo(this.$el)},this),this.$b=e(document)},hide:function(){this.$el.removeClass("st-format-bar--is-ready"),this.$el.remove()},show:function(){this.hide(),this.editor.$outer.append(this.$el),this.$el.addClass("st-format-bar--is-ready"),this.$el.bind("click",".st-format-btn",this.onFormatButtonClick)},remove:function(){this.$el.remove()},renderBySelection:function(){this.highlightSelectedButtons(),this.show(),this.calculatePosition()},calculatePosition:function(){var a=window.getSelection(),b=a.getRangeAt(0),c=b.getBoundingClientRect(),d={},e=this.editor.$outer.get(0),f=e.getBoundingClientRect();d.top=c.top-f.top+"px",d.left=(c.left+c.right)/2-this.el.offsetWidth/2-f.left+"px",this.$el.css(d)},highlightSelectedButtons:function(){var a=g.getBlockBySelection();this.$btns.forEach(function(b){var c=e(b).data("cmd");b.toggleClass("st-format-btn--is-active",a.queryTextBlockCommandState(c))},this)},onFormatButtonClick:function(a){a.stopPropagation();var b=g.getBlockBySelection();if(d.isUndefined(b))throw"Associated block not found";var c=e(a.target),f=c.data("cmd");return!d.isUndefined(f)&&(b.execTextBlockCommand(f),this.highlightSelectedButtons(),!1)}}),a.exports=h},function(a,b,c){"use strict";var d=c(2),e=c(56),f=c(58),g=c(57),h=c(60),i=c(62),j=c(213),k=c(209),l=c(193),m=c(210),n=c(211),o=c(63),p=c(214),q=function(a){this.initialize(a)};Object.assign(q.prototype,c(187),c(60),{bound:["onFormSubmit","hideAllTheThings","changeBlockPosition","removeBlockDragOver","renderBlock","resetBlockControls","blockLimitReached"],events:{"block:reorder:dragend":"removeBlockDragOver","block:reorder:dropped":"removeBlockDragOver","block:content:dropped":"removeBlockDragOver"},initialize:function(a){if(g.log("Init SirTrevor.Editor"),this.options=Object.assign({},f.defaults,a||{}),this.ID=d.uniqueId("st-editor-"),!this._ensureAndSetElements())return!1;!d.isUndefined(this.options.onEditorRender)&&d.isFunction(this.options.onEditorRender)&&(this.onEditorRender=this.options.onEditorRender),this.mediator=Object.assign({},h),this._bindFunctions(),f.instances.push(this),this.build(),j.bindFormSubmit(this.$form)},build:function(){this.$el.hide(),this.errorHandler=new p(this.$outer,this.mediator,this.options.errorsContainer),this.store=new o(this.$el.val(),this.mediator),this.block_manager=new l(this.options,this.ID,this.mediator),this.block_controls=new k(this.block_manager.blockTypes,this.mediator),this.fl_block_controls=new m(this.$wrapper,this.ID,this.mediator),this.formatBar=new n(this.options.formatBar,this.mediator,this),this.mediator.on("block:changePosition",this.changeBlockPosition),this.mediator.on("block-controls:reset",this.resetBlockControls),this.mediator.on("block:limitReached",this.blockLimitReached),this.mediator.on("block:render",this.renderBlock),this.dataStore="Please use store.retrieve();",this._setEvents(),this.$wrapper.prepend(this.fl_block_controls.render().$el),this.$outer.append(this.block_controls.render().$el),e(window).bind("click",this.hideAllTheThings),this.createBlocks(),this.$wrapper.addClass("st-ready"),d.isUndefined(this.onEditorRender)||this.onEditorRender()},createBlocks:function(){var a=this.store.retrieve();a.data.length>0?a.data.forEach(function(a){this.mediator.trigger("block:create",a.type,a.data)},this):this.options.defaultType!==!1&&this.mediator.trigger("block:create",this.options.defaultType,{})},destroy:function(){this.formatBar.destroy(),this.fl_block_controls.destroy(),this.block_controls.destroy(),this.block_manager.blocks.forEach(function(a){this.mediator.trigger("block:remove",a.blockID)},this),this.mediator.stopListening(),this.stopListening(),f.instances=f.instances.filter(function(a){return a.ID!==this.ID},this),this.store.reset(),this.$outer.replaceWith(this.$el.detach())},reinitialize:function(a){this.destroy(),this.initialize(a||this.options)},resetBlockControls:function(){this.block_controls.renderInContainer(this.$wrapper),this.block_controls.hide()},blockLimitReached:function(a){this.$wrapper.toggleClass("st--block-limit-reached",a)},_setEvents:function(){Object.keys(this.events).forEach(function(a){i.on(a,this[this.events[a]],this)},this)},hideAllTheThings:function(a){this.block_controls.hide(),this.formatBar.hide()},store:function(a,b){return g.log("The store method has been removed, please call store[methodName]"),this.store[a].call(this,b||{})},renderBlock:function(a){this._renderInPosition(a.render().$el),this.hideAllTheThings(),a.trigger("onRender")},removeBlockDragOver:function(){this.$outer.find(".st-drag-over").removeClass("st-drag-over")},changeBlockPosition:function(a,b){b-=1;var c=this.getBlockPosition(a),d=this.$wrapper.find(".st-block").eq(b),e=c>b?"Before":"After";d&&d.attr("id")!==a.attr("id")&&(this.hideAllTheThings(),a["insert"+e](d))},_renderInPosition:function(a){this.block_controls.currentContainer?this.block_controls.currentContainer.after(a):this.$wrapper.append(a)},validateAndSaveBlock:function(a,b){if((!f.skipValidation||b)&&!a.valid())return this.mediator.trigger("errors:add",{text:d.result(a,"validationFailMsg")}),void g.log("Block "+a.blockID+" failed validation");var c=a.getData();g.log("Adding data for block "+a.blockID+" to block store:",c),this.store.addData(c)},onFormSubmit:function(a){return a=a!==!1,g.log("Handling form submission for Editor "+this.ID),this.mediator.trigger("errors:reset"),this.store.reset(),this.validateBlocks(a),this.block_manager.validateBlockTypesExist(a),this.mediator.trigger("errors:render"),this.$el.val(this.store.toString()),this.errorHandler.errors.length},validateBlocks:function(a){var b=this;this.$wrapper.find(".st-block").each(function(c,f){var g=b.block_manager.findBlockById(e(f).attr("id"));d.isUndefined(g)||b.validateAndSaveBlock(g,a)})},findBlockById:function(a){return this.block_manager.findBlockById(a)},getBlocksByType:function(a){return this.block_manager.getBlocksByType(a)},getBlocksByIDs:function(a){return this.block_manager.getBlocksByIDs(a)},getBlockPosition:function(a){return this.$wrapper.find(".st-block").index(a)},_ensureAndSetElements:function(){if(d.isUndefined(this.options.el)||d.isEmpty(this.options.el))return g.log("You must provide an el"),!1;this.$el=this.options.el,this.el=this.options.el[0],this.$form=this.$el.parents("form");var a=e("<div>").attr({id:this.ID,class:"st-outer notranslate",dropzone:"copy link move"}),b=e("<div>").attr({class:"st-blocks"});return this.$el.wrap(a).wrap(b),this.$outer=this.$form.find("#"+this.ID),this.$wrapper=this.$outer.find(".st-blocks"),!0}}),a.exports=q},function(a,b,c){"use strict";var d=c(58),e=c(57),f=c(62),g=c(64),h=!1,i={bindFormSubmit:function(a){h||(new g(a),a.bind("submit",this.onFormSubmit),h=!0)},onBeforeSubmit:function(a){var b=0;return d.instances.forEach(function(c,d){b+=c.onFormSubmit(a)}),e.log("Total errors: "+b),b},onFormSubmit:function(a){i.onBeforeSubmit()>0&&(f.trigger("onError"),a.preventDefault())}};a.exports=i},function(a,b,c){"use strict";var d=c(2),e=c(56),f=function(a,b,c){this.$wrapper=a,this.mediator=b,this.$el=c,d.isUndefined(this.$el)&&(this._ensureElement(),this.$wrapper.prepend(this.$el)),this.$el.hide(),this._bindFunctions(),this._bindMediatedEvents(),this.initialize()};Object.assign(f.prototype,c(187),c(207),c(188),{errors:[],className:"st-errors",eventNamespace:"errors",mediatedEvents:{reset:"reset",add:"addMessage",render:"render"},initialize:function(){var a=e("<ul>");this.$el.append("<p>"+i18n.t("errors:title")+"</p>").append(a),this.$list=a},render:function(){if(0===this.errors.length)return!1;this.errors.forEach(this.createErrorItem,this),this.$el.show()},createErrorItem:function(a){var b=e("<li>",{class:"st-errors__msg",html:a.text});this.$list.append(b)},addMessage:function(a){this.errors.push(a)},reset:function(){if(0===this.errors.length)return!1;this.errors=[],this.$list.html(""),this.$el.hide()}}),a.exports=f},function(a,b,c){"use strict";var d=c(2),e=c(57);a.exports=function(a,b){function f(a,b,c){return d.isUndefined(c)&&(c=""),"**"+b.replace(/<(.)?br(.)?>/g,"")+"**"+c}function g(a,b,c){return d.isUndefined(c)&&(c=""),"_"+b.replace(/<(.)?br(.)?>/g,"")+"_"+c}var h=c(194);b=e.classify(b);var i=a;i=i.replace(/&nbsp;/g," "),i=i.replace(/( class=(")?Mso[a-zA-Z]+(")?)/g,"").replace(/<!--(.*?)-->/g,"").replace(/\/\*(.*?)\*\//g,"").replace(/<(\/)*(meta|link|span|\\?xml:|st1:|o:|font)(.*?)>/gi,"");var j,k,l=["style","script","applet","embed","noframes","noscript"];for(k=0;k<l.length;k++)j=new RegExp("<"+l[k]+".*?"+l[k]+"(.*?)>","gi"),i=i.replace(j,"");i=i.replace(/\*/g,"\\*").replace(/\[/g,"\\[").replace(/\]/g,"\\]").replace(/\_/g,"\\_").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\-/g,"\\-");var m=["em","i","strong","b"];for(k=0;k<m.length;k++)j=new RegExp("<"+m[k]+"><br></"+m[k]+">","gi"),i=i.replace(j,"<br>");i=i.replace(/<(\w+)(?:\s+\w+="[^"]+(?:"\$[^"]+"[^"]+)?")*>\s*<\/\1>/gim,"").replace(/\n/gm,"").replace(/<a.*?href=[""'](.*?)[""'].*?>(.*?)<\/a>/gim,function(a,b,c){return"["+c.trim().replace(/<(.)?br(.)?>/g,"")+"]("+b+")"}).replace(/<strong>(?:\s*)(.*?)(\s)*?<\/strong>/gim,f).replace(/<b>(?:\s*)(.*?)(\s*)?<\/b>/gim,f).replace(/<em>(?:\s*)(.*?)(\s*)?<\/em>/gim,g).replace(/<i>(?:\s*)(.*?)(\s*)?<\/i>/gim,g),i=i.replace(/([^<>]+)(<div>)/g,"$1\n$2").replace(/<div><div>/g,"\n<div>").replace(/(?:<div>)([^<>]+)(?:<div>)/g,"$1\n").replace(/(?:<div>)(?:<br>)?([^<>]+)(?:<br>)?(?:<\/div>)/g,"$1\n").replace(/<\/p>/g,"\n\n").replace(/<(.)?br(.)?>/g,"\n").replace(/&lt;/g,"<").replace(/&gt;/g,">");var n;return h.hasOwnProperty(b)&&(n=h[b],!d.isUndefined(n.prototype.toMarkdown)&&d.isFunction(n.prototype.toMarkdown)&&(i=n.prototype.toMarkdown(i))),i=i.replace(/<\/?[^>]+(>|$)/g,"")}}])}),window.rideApp=window.rideApp||{},rideApp.content=function(a,b){function c(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}var d,e=new JsonApiClient("/api/v1"),f=function(){var b,c,e,f=a(".js-rich-content");d=f.data("locale"),SirTrevor.Blocks.Heading=g.heading(),SirTrevor.Blocks.Asset=g.asset(),SirTrevor.Blocks.Tweet=g.tweet(),SirTrevor.Blocks.Quote=g.quote(),SirTrevor.Blocks.Wysiwyg=g.wysiwyg(),SirTrevor.Blocks.Embed=g.embed(),SirTrevor.Blocks.Code=g.code(),f.each(function(){b=a(this),c=b.data("rich-content-properties"),e=b.data("redactor-properties"),c=a.extend(c,{el:b}),new SirTrevor.Editor(c),a(this.form).find('[type="submit"]').on("click",function(b){var c=SirTrevor.getInstance(a(b.target.form).find(".js-rich-content").closest('[id^="st-editor-"]').attr("id"));a.each(c.block_manager.blocks,function(){if(!this.valid())return b.preventDefault(),b.stopPropagation(),b.stopImmediatePropagation(),!1})})})},g={wysiwyg:function(){return SirTrevor.Block.extend({type:"Wysiwyg",title:function(){return"Wysiwyg"},icon_name:"text",editorHTML:function(){var a=SirTrevor.getInstance(this.instanceID).$el.data("redactor-properties");return'<textarea class="st-text-block wysiwyg form__text" data-redactor-properties="'+c(JSON.stringify(a))+'"></textarea>'},loadData:function(b){a(this.$editor).html(b.text)},save:function(){var a={};a.text=this.$editor.val(),_.isEmpty(a)||this.setData(a)},onBlockRender:function(b){this.$editor;a(document).trigger("collectionAdded")}})},heading:function(){var a=_.template('<<%- tagName %> class="st-required st-text-block st-text-block--heading" contenteditable="true"><%= text %></<%- tagName %>>'),b=function(b){return function(){this.$(".st-block-control-ui-btn--active").removeClass("st-block-control-ui-btn--active");var c=this.$(".st-text-block");c.replaceWith(a({tagName:b,text:c.html()})),this.$(".st-block-control-ui-btn--setHeading"+b[1]).addClass("st-block-control-ui-btn--active")}};return SirTrevor.Blocks.Heading.extend({editorHTML:function(){return a({tagName:"h2",text:""})},controllable:!0,controls:{setHeading2:b("h2"),setHeading3:b("h3"),setHeading4:b("h4")},loadData:function(a){b(a.tagName),this.$(".st-text-block").html(a.text)},toData:function(){var a={};a.text=SirTrevor.toHTML(this.getTextBlock().html(),this.type),a.tagName=this.getTextBlock().prop("tagName"),this.setData(a)}})},asset:function(){var b=0,c=window.location.origin,f=['<div class="grid">','<div class="grid__6">','<label for="<%- assetID %>" class="form__label">'+rideApp.translator.translate("label.file")+"</label>",'<div class="form__item form__assets st-assets-block" data-field="<%- assetID %>" data-max="1">','<a href="#<%- assetName %>" class="form__add-assets btn btn--brand"><i class="icon icon--plus"></i>'+rideApp.translator.translate("button.add")+"</a>","</div>",'<input type="hidden" name="<%- assetID %>" id="<%- assetID %>" data-name="<%- assetName %>" class="st-id-input st-required" />',"</div>",'<div class="grid__4">','<label for="assetClass" class="form__label">'+rideApp.translator.translate("label.image.position")+"</label>",'<select name="className" id="assetClass" class="st-className-input form__select selectized">','<option value="left">'+rideApp.translator.translate("label.image.left")+"</option>",'<option value="center">'+rideApp.translator.translate("label.image.center")+"</option>",'<option value="right">'+rideApp.translator.translate("label.image.right")+"</option>",'<option value="stretch" selected>'+rideApp.translator.translate("label.image.stretch")+"</option>","</select>","</div>","</div>",'<div class="modal modal--large fade" id="<%- assetName %>" tabindex="-1" role="dialog" aria-labelledby="myModalAssetsAdd" aria-hidden="true">','<div class="modal-dialog">','<div class="modal-content">','<div class="modal-body">','<iframe data-url="'+c+"/admin/assets/"+d+'?embed=1&amp;selected=" frameborder="0" width="100%" height="500"></iframe>',"</div>",'<div class="modal-footer">','<div class="grid">','<div class="grid--bp-xsm__9">','<div class="form__assets form__assets--sml" data-field="<%- assetID %>" data-max="1"></div>',"</div>",'<div class="grid--bp-xsm__3 text--right">','<button type="button" class="btn btn--default" data-dismiss="modal">'+rideApp.translator.translate("button.done")+"</button>","</div>","</div>","</div>","</div>","</div>","</div>"].join("\n");return f=_.template(f),SirTrevor.Block.extend({type:"asset",icon_name:"image",editorHTML:function(){var a="rich-content-asset-"+b,c="modalAssetsAdd-assets-"+b;return b++,f({assetID:a,assetName:c})},getIdInput:function(){return this.$(".st-id-input")},getClassNameInput:function(){return this.$(".st-className-input")},getAssetBlock:function(){return this.$(".st-assets-block")},onBlockRender:function(){rideApp.form.assets.init(),this.getClassNameInput().selectize()},renderAndAddThumbnailWrapper:function(b,c){var d=a("<div>").attr({class:"form__asset","data-id":c.id});d.append('<img src="'+c.assetThumbURL+'" width="100" height="100">'),d.append('<a href="#" class="form__remove-asset"></a>'),b.append(d)},loadData:function(a){if(a.id){var b=this;b.getIdInput().val(a.id);var c=b.getAssetBlock();if(a.assetThumbURL)b.renderAndAddThumbnailWrapper(c,a);else{var d=e.url+"/assets/"+a.id+"?fields[assets]=&url=true";e.sendRequest("GET",d,null,function(d){a.assetThumbURL=d._meta.url,b.renderAndAddThumbnailWrapper(c,a)})}a.className&&b.getClassNameInput().find("option[value="+a.className+"]").prop("selected","selected")}},save:function(){var a=this,b={},c=a.getAssetBlock().find("img");b.id=a.getIdInput().val(),b.assetThumbURL=c.attr("src"),b.className=a.getClassNameInput().val(),a.toData(b)},toData:function(a){this.setData(a)}})},tweet:function(){return SirTrevor.Block.extend({type:"tweet",icon_name:"twitter",title:function(){return i18n.t("blocks:tweet:title")},editorHTML:["<div>",'<div class="form__item">',"<div>",'<label for="st-tweet-embed" class="form__label">'+rideApp.translator.translate("label.embedCode")+"</label>","</div>",'<textarea name="st-tweet-embed" class="st-required" cols="90" rows="4"></textarea>',"</div>",'<div class="st-tweet-preview"></div>',"</div>"].join("\n"),getEmbedInput:function(){return this.$("textarea")},getPreviewElement:function(){return this.$(".st-tweet-preview")},loadData:function(a){this.getPreviewElement().html(a.embedCode),this.getEmbedInput().text(a.embedCode)},onBlockRender:function(){var a=this;this.getEmbedInput().on("keyup",function(b){a.setAndLoadData({embedCode:b.target.value})})}})},quote:function(){return SirTrevor.Block.extend({type:"quote",title:function(){return"Quote"},icon_name:"quote",editorHTML:['<div><label class="form__label">'+rideApp.translator.translate("label.quote.text")+"</label></div>",'<textarea name="text" class="st-required st-quote-text" cols="90" rows="4"></textarea>',"<hr/>",'<div><label class="form__label">'+rideApp.translator.translate("label.quote.credit")+"</label></div>",'<input type="text" name="cite" class="st-cite-input"/>'].join("\n"),loadData:function(a){this.$(".st-quote-text").html(a.text),a.cite&&this.$(".st-cite-input").val(a.cite)}})},embed:function(){return SirTrevor.Block.extend({type:"embed",title:function(){return"Embed"},icon_name:"iframe",editorHTML:['<div><label class="form__label">'+rideApp.translator.translate("label.embedCode")+"</label></div>",'<textarea name="embed" class="st-required st-embed" cols="90" rows="2"></textarea>','<div class="embed-preview"></div>'].join("\n"),loadData:function(a){a.embed&&(this.$(".st-embed").val(a.embed),this.$(".embed-preview").html(a.embed).addClass("is-active"))}})},code:function(){return SirTrevor.Block.extend({type:"code",title:function(){return"Code"},icon_name:"iframe",editorHTML:['<div><label class="form__label">'+rideApp.translator.translate("label.code")+"</label></div>",'<textarea name="code" class="st-required st-code" cols="80" rows="10"></textarea>'].join("\n"),loadData:function(a){a.code&&this.$(".st-code").val(a.code)}})}};return{init:f}}(jQuery),$(window).on("load",function(){rideApp.content.init()});