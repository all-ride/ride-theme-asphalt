var rideApp=rideApp||{};rideApp.form=function(a){var b=function(){c(),d(),e(),f(),g(),a("[data-toggle-dependant]").on("change",function(){h(a(this))}).each(function(){h(a(this))})},c=function(){a(document).on("click",".btn-file-delete",function(b){b.preventDefault();var c=a(this);confirm(c.data("message"))&&(c.parents(".form__item").find("input[type=hidden]").val(""),c.parent("div").remove())})},d=function(){a(document).on("click",".prototype-add:not(.disabled)",function(b){b.preventDefault();var c=a(this).parent(".collection-controls"),d=c.attr("data-prototype"),e=c.attr("data-index");e||(e=a(".collection-control",c).length),d=d.replace(/%prototype%/g,"prototype-"+e),a(".collection-control-group",c).first().append(d),e++,c.attr("data-index",e)}),a(document).on("click",".prototype-remove:not(.disabled)",function(b){b.preventDefault(),confirm("Are you sure you want to remove this item?")&&a(this).parents(".collection-control").remove()})},e=function(){a("[data-order=true] .collection-control-group").sortable({axis:"y",cursor:"move",handle:".order-handle",items:"> .collection-control",select:!1,scroll:!0})},f=function(){a(".form--selectize");a(".form--selectize select:visible").selectize(),a('a[data-toggle="tab"]').on("shown.bs.tab",function(){a(".form--selectize select:visible").selectize()})},g=function(){var b=a(".form__assets");b.each(function(){function b(a){var b=a.sortable("toArray",{attribute:"data-id"});d[0].value=b.join(",")}var c=a(this),d=c.next(".form__assets-input"),e=c.find(".form__edit-assets"),f=e.text(),g=c.find(".form__add-assets"),h=!1;console.log(g),c.sortable({items:".form__asset"}).on("sortstop",function(){b(c)}).disableSelection(),g.on("click",function(b){console.log("dgfsdfjhgjksdfhgjksdfhkjlsdfhkjsadhh jksdfh jklsdfh"),b.preventDefault();var c=a(this).attr("href");a(c).modal("show"),console.log("s")}),e.on("click",function(a){a.preventDefault(),h?(e.text(f),c.sortable("enable"),c.removeClass("is-removable"),g.attr("disabled",!1),h=!1):(e.text(e.data("alt")),c.sortable("disable"),c.addClass("is-removable"),g.attr("disabled",!0),h=!0)}),a(c).on("click",".form__asset",function(d){if(d.preventDefault(),h){var e=a(this);e.addClass("is-removed").on("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){e.remove(),b(c)})}})})},h=function(b){var c=b.parents("form"),d=b.data("toggle-dependant"),e=c.find("[name^="+b.attr("name")+"]"),f=e.filter(":checked"),g=f.length?f.val():null;a("."+d,c).parents(".form__item").hide(),a("."+d+"-"+g,c).parents(".form__item").show()};return{initialize:b}}(jQuery),rideApp.form.initialize(),$.fn.formDependantRows=function(){var a=function(a){var b=a.parents("form"),c=a.data("toggle-dependant"),d=a.filter(":checked").length?a.val():null;$("."+c,b).parents(".form-group").hide(),$("."+c+"-"+d,b).parents(".form-group").show()};$("[data-toggle-dependant]",$(this)).on("change",function(){a($(this))}).each(function(){a($(this))})};